(window.webpackJsonp = window.webpackJsonp || []).push([
    [12], {
        "+OzT": function (e, t) {
            OpenLayers.TileManager = overwrite(OpenLayers.TileManager, {
                manageTileCache: function (e) {
                    var t = e.object,
                        i = this.tileCache[t.url];
                    i && (i.parentNode || (t.setImage(i), OpenLayers.Util.removeItem(this.tileCacheIndex, t.url), this.tileCacheIndex.push(t.url)))
                }
            })
        },
        "0q6Q": function (e, t, i) {
            "use strict";
            i.r(t);
            i("tPud"), i("qm5l"), i("ASCu"), i("Caz9"), i("oAkn"), i("6m8X"), i("e+7I"), i("BPg0"), i("ypiw"), i("LQWC"), i("hVOH"), i("uPxA"), i("b3rJ"), i("PYcl"), i("2dil"), i("QhWD"), i("6mOB"), i("IiHV"), i("XzKa"), i("OF2d"), i("B9VL"), i("tSeh"), i("gMGY");
            var s = i("bn/O");

            function r(e) {
                var t = {},
                    i = ["Gurtam", "WebGIS", "Google", "Yandex"].map((function (e) {
                        var i = [];
                        return t[e] = i, i
                    })),
                    s = [];
                e.forEach((function (e) {
                    var i = e.name.split(" ", 1)[0],
                        r = t[i];
                    r || (r = s), r.push(e)
                }));
                var r = new WialonHosting.Util.StringComparator;
                return i.forEach((function (e) {
                    e.sort((function (e, t) {
                        return r.naturalCompare(null, e.name, t.name)
                    }))
                })), s.sort((function (e, t) {
                    return r.naturalCompare(null, e.name, t.name)
                })), i.reduce((function (e, t) {
                    return e.concat(t)
                })).concat(s)
            }
            OpenLayers.Control.MapsControl = OpenLayers.Class(OpenLayers.Control, {
                maps: [],
                overlays: [],
                setMapWasCalled: !1,
                setMap: function (e) {
                    var t = this;
                    if (this.setMapWasCalled) return WialonHosting.Log.error("GMapsControl:setMap:secondTime"), OpenLayers.Control.prototype.setMap.apply(this, arguments);

                    function i(e, i) {
                        if (Array.isArray(t.overlays)) {
                            var s = -1,
                                r = null;
                            if (t.overlays.some((function (t, i) {
                                    if (t.layer === e) return s = i, r = t.prop, !0
                                })), -1 !== s) {
                                var n = document.querySelector('#OpenLayers_Control_Maps_List_OpenLayers_Map_2 [data-map-overlay-index="' + s + '"]');
                                if (n) {
                                    var a = n.checked !== !!e.visibility;
                                    (a || i.forceSaveProp) && (a && (n.checked = !!e.visibility), r && sdk.u.updateCustomProperty(r, e.visibility ? 1 : 0))
                                }
                            }
                        }
                    }
                    return this.setMapWasCalled = !0, e.events.register("changelayer", e, (function (e) {
                        if (e) {
                            var t = e.layer;
                            t && !t.isBaseLayer && i(t, {
                                forceSaveProp: !0
                            })
                        }
                    })), e.events.register("changelayer-syntetic", e, (function (e) {
                        var t = e && e.layer;
                        t && i(t, {
                            forceSaveProp: !1
                        })
                    })), OpenLayers.Control.prototype.setMap.apply(this, arguments)
                },
                draw: function (e) {
                    return null == this.div && (!e && this.position ? e = this.position.clone() : e || (e = new OpenLayers.Pixel(10, 20)), this.div = OpenLayers.Util.createDiv("OpenLayers_Control_Maps_" + this.map.id, e, null, null, "absolute"), this.addButton(), this.bindEvents()), null != e && (this.position = e.clone()), this.moveTo(this.position), this.div
                },
                addButton: function () {
                    var e = OpenLayers.Util.createDiv("OpenLayers_Control_Maps_Btn_" + this.map.id, new OpenLayers.Pixel(0, 0), null, null, "absolute");
                    e.className = this.displayClass + " ol-maps ol-smooth ol-button", this.div.appendChild(e);
                    var t = this;
                    jQuery(e).on("mouseenter", (function () {
                        jQuery.Tooltip.show({
                            bodyHandler: function () {
                                return t.translation.maps_ctrl || ""
                            }
                        })
                    })).on("mouseleave", (function () {
                        jQuery.Tooltip.hide()
                    }))
                },
                bindEvents: function () {
                    jQuery(this.div).bind("dblclick touchmove mousemove", (function () {
                        return !1
                    }));
                    var e = this;
                    jQuery(document).bind("wheel mousewheel mousedown touchstart", (function (t) {
                        var i = "OpenLayers_Control_Maps_List_" + e.map.id,
                            s = "OpenLayers_Control_Maps_Btn_" + e.map.id,
                            r = t.target.id;
                        if (r == s) {
                            var n = jQuery("#" + s).hasClass("pressed");
                            if (jQuery("#" + s).toggleClass("pressed", !n), jQuery("#" + i).css("display", n ? "none" : "block"), !n) {
                                var a = jQuery("#messages_table_target:visible").offset(),
                                    o = jQuery("#report_result_target:visible").offset(),
                                    l = jQuery("#routectrl_timeline_target:visible").offset(),
                                    h = jQuery("#" + i).offset(),
                                    p = jQuery("#block_bottom_panel").offset(),
                                    u = 320;
                                a && h && a.top - h.top < u ? u = a.top - h.top - 10 : l && h && l.top - h.top < u ? u = l.top - h.top - 10 : o && h && o.top - h.top < u ? u = o.top - h.top - 10 : p && h && p.top - h.top < u && (u = p.top - h.top - 10), jQuery("#" + i + " .ol-list-round").css("maxHeight", u), jQuery("#" + i + " .ol-list").css("maxHeight", u).scrollTop(0)
                            }
                        } else r == s || r == i || jQuery(t.target).parents("#" + i)[0] || (jQuery("#" + s).removeClass("pressed"), jQuery("#" + i).hide())
                    }));
                    var t = this.map,
                        i = function () {
                            jQuery("#OpenLayers_Control_Maps_Btn_" + t.id).removeClass("pressed"), jQuery("#OpenLayers_Control_Maps_List_" + t.id).hide()
                        };
                    this.map.events.register("zoomBarDown", this, i), this.map.events.register("zoomBarBtnClick", this, i)
                },
                addList: function () {
                    jQuery("#OpenLayers_Control_Maps_List_" + this.map.id).remove();
                    var e = "<div class='ol-list-triangle'></div><div class='ol-list-round'><div class='ol-list'>",
                        t = this.map.baseLayer,
                        i = sdk.u.getCustomProperty("umap", !1),
                        s = !1;
                    t.name && t.name.length && t.name !== i && (i = t.name);
                    for (var n = [], a = 0; a < this.maps.length; a++) {
                        var o = this.maps[a].name == i;
                        o && !a && (s = !0), n.push({
                            index: a,
                            name: this.maps[a].name,
                            selected: o
                        })
                    }(n = r(n)).forEach((function (t) {
                        e += "<div class='ol-list-map" + (t.selected ? " selected" : "") + "' index='" + t.index + "'>" + t.name + "</div>"
                    })), this.overlays.length && (e += "<div class='ol-list-separator'></div>"), n = [];
                    for (var l = 0; l < this.overlays.length; l++) {
                        var h = this.overlays[l],
                            p = !!(h && h.layer && h.layer.visibility);
                        n.push({
                            index: l,
                            name: h.name,
                            selected: p
                        })
                    }(n = r(n)).forEach((function (t) {
                        e += "<div class='ol-list-overlay' index='" + t.index + "'><input type='checkbox'" + (t.selected ? " checked" : "") + " data-map-overlay-index='" + t.index + "'><span>" + t.name + "</span></div>"
                    })), e += "</div></div>";
                    var u = OpenLayers.Util.createDiv("OpenLayers_Control_Maps_List_" + this.map.id, new OpenLayers.Pixel(30, 0), null, null, "absolute");
                    u.className = "ol-list-container", u.innerHTML = e, this.div.appendChild(u), s && jQuery(".ol-list-triangle", u).addClass("hover");
                    var c = this,
                        y = 0,
                        d = !1,
                        m = null;
                    jQuery(".ol-list-map, .ol-list-overlay", u).bind("touchstart", (function (e) {
                        d = !0, y = 0
                    })).bind("touchmove", (function (e) {
                        d && y++
                    })), jQuery(".ol-list-map", u).bind("touchstart", (function (e) {
                        jQuery(this).addClass("selected"), m = e.target
                    })), jQuery(".ol-list-map", u).bind("click touchend", (function () {
                        if (y > 2) return m && (jQuery(m).removeClass("selected"), m = null), !0;
                        var e = parseInt(jQuery(this).attr("index"));
                        e && jQuery(".ol-list-triangle", u).removeClass("hover"), jQuery(".selected", u).removeClass("selected"), jQuery(this).addClass("selected"), c.mapCallback(e), jQuery("#OpenLayers_Control_Maps_Btn_" + c.map.id).removeClass("pressed"), jQuery("#OpenLayers_Control_Maps_List_" + c.map.id).hide()
                    })), jQuery(".ol-list-overlay", u).bind("click touchend", (function (e) {
                        if (y > 2) return !0;
                        var t = "checkbox" == jQuery(e.target).attr("type"),
                            i = parseInt(jQuery(this).attr("index")),
                            s = jQuery("input", this).prop("checked");
                        s = t ? s : !s, c.overlayCallback(i, s)
                    })), jQuery(".ol-list div:first", u).hover((function (e) {
                        jQuery(".ol-list-triangle", u).addClass("hover")
                    }), (function (e) {
                        if (jQuery(this).hasClass("selected")) return !0;
                        jQuery(".ol-list-triangle", u).removeClass("hover")
                    })), jQuery(".ol-list", u).scroll((function () {
                        if (!jQuery(".ol-list div:first.selected").length) return !0;
                        var e = jQuery(this).scrollTop();
                        jQuery(".ol-list-triangle", u).toggleClass("hover", e <= 13)
                    })).scrollTop(0);
                    var f = jQuery(".ol-list", u)[0],
                        g = 0;
                    f.addEventListener("touchstart", (function (e) {
                        g = this.scrollTop + e.touches[0].pageY, e.preventDefault()
                    }), !1), f.addEventListener("touchmove", (function (e) {
                        this.scrollTop = g - e.touches[0].pageY, e.preventDefault()
                    }), !1)
                },
                initMaps: function () {
                    var e = this,
                        t = this.map;

                    function i() {
                        ! function () {
                            e.maps = [], e.overlays = [];
                            var i = t.layers;
                            Array.isArray(i) && (i.forEach((function (t) {
                                t.displayInLayerSwitcher && e.maps.push(t)
                            })), e.maps.sort((function (e, t) {
                                var i = e.priority;
                                return t.priority - i
                            })));
                            Object(s.a)(t.overlayLayers, (function (t, i) {
                                if (i && i.name && i.layer) {
                                    e.overlays.push(i);
                                    var s = !!parseInt(sdk.u.getCustomProperty(i.prop, 0));
                                    i.layer.setVisibility(s)
                                }
                            })), e.overlays.sort((function (e, t) {
                                var i = e.layer.priority;
                                return t.layer.priority - i
                            }))
                        }(), (e.maps.length || e.overlays.length) && e.addList()
                    }
                    t._isLayersListInitialized || (t._isLayersListInitialized = !0, t.events.on({
                        addlayer: function (e) {
                            var t = e && e.layer;
                            t && t.displayInLayerSwitcher && i()
                        },
                        scope: {}
                    })), "" != sdk.u.getCustomProperty("mtgy", "") && sdk.u.updateCustomProperty("mtgy", ""), i()
                },
                mapCallback: function (e) {
                    var t = this.maps[e];
                    if (t) {
                        jQuery(".olLayerGoogleCopyright.olLayerGoogleV3").css("display", t.name.indexOf("Google") >= 0 ? "" : "none"), this.map.setBaseLayer(t, !1);
                        var i = WebCMS.get_module("log_trader");
                        i && i.add_log_data("map/base_layer/select/" + t.name)
                    }
                },
                overlayCallback: function (e, t) {
                    var i = this.overlays[e];
                    if (i && i.layer) {
                        var s = i.layer,
                            r = WebCMS.get_module("log_trader");
                        r && ("mgrs" === s.type ? r.force_add_log_data("map/overlay/" + (t ? "show" : "hide") + "/" + s.type) : r.add_log_data("map/overlay/" + (t ? "show" : "hide") + "/" + s.type)), s.setVisibility(t)
                    }
                },
                CLASS_NAME: "OpenLayers.Control.MapsControl"
            });
            i("8ceu"), i("Iy5n"), i("DAws"), i("MSDQ"), i("Jhih"), i("PVPC"), i("4O+H"), i("i/O0"), i("+OzT"), i("aJrX"), i("8kPQ"), i("AtBC"), i("8bEn"), i("g2Ny"), i("eRgs"), i("LmYA"), i("OX6k"), i("MOqp"), i("2kAr"), i("h9sB"), i("ti+C"), i("Kerl"), i("Ivbm"), i("yF9Z"), i("pT1T"), i("jJhU"), i("bkjM"), i("mnGn"), i("UaQn"), i("efXn")
        },
        "2dil": function (e, t) {
            OpenLayers.Geometry.Area = {
                area: function (e) {
                    for (var t = e.slice(0, -1), i = 0, s = e.length - 2; i < s; i++)
                        for (var r = i + 1, n = e.length - 1; r < n; r++) {
                            var a = e[i],
                                o = e[i + 1],
                                l = e[r],
                                h = e[r + 1],
                                p = this.intersection(a, o, l, h);
                            p && !(p.equal(a) || p.equal(o) || p.equal(l) || p.equal(h)) && t.push(p)
                        }
                    var u = OpenLayers.Geometry.Delaunay.triangulate(t),
                        c = 0;
                    for (i = 0; i < u.length; i++) {
                        var y = u[i];
                        this.isInPolygon(y.centroid(), e) && (c += y.area())
                    }
                    return c
                },
                intersection: function (e, t, i, s) {
                    var r = (e.x - t.x) * (i.y - s.y) - (e.y - t.y) * (i.x - s.x);
                    if (Math.abs(r) < OpenLayers.Geometry.Constants.EPSILON) return null;
                    var n = new OpenLayers.Geometry.Delaunay.Point(((e.x * t.y - e.y * t.x) * (i.x - s.x) - (e.x - t.x) * (i.x * s.y - i.y * s.x)) / r, ((e.x * t.y - e.y * t.x) * (i.y - s.y) - (e.y - t.y) * (i.x * s.y - i.y * s.x)) / r);
                    return n.x < Math.min(e.x, t.x) || Math.max(e.x, t.x) < n.x || n.y < Math.min(e.y, t.y) || Math.max(e.y, t.y) < n.y || n.x < Math.min(i.x, s.x) || Math.max(i.x, s.x) < n.x || n.y < Math.min(i.y, s.y) || Math.max(i.y, s.y) < n.y ? null : n
                },
                isInPolygon: function (e, t) {
                    for (var i = !1, s = 1; s < t.length; s++) {
                        var r = t[s],
                            n = t[s - 1];
                        e.y < r.y != e.y < n.y && e.x < (e.y - r.y) * (n.x - r.x) / (n.y - r.y) + r.x && (i = !i)
                    }
                    return i
                }
            }
        },
        "2kAr": function (e, t) {
            OpenLayers.Layer.Here = OpenLayers.Class.create(), OpenLayers.Layer.Here.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                protocol: "http://",
                url: "",
                langs: {
                    ar: "ARA",
                    cn: "CHI",
                    nl: "DUT",
                    en: "ENG",
                    fr: "FRE",
                    de: "GER",
                    gr: "GRE",
                    il: "HEB",
                    hi: "HIN",
                    it: "ITA",
                    ir: "PER",
                    pl: "POL",
                    pt: "POR",
                    ru: "RUS",
                    es: "SPA",
                    tr: "TUR",
                    ua: "UKR"
                },
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments);
                    var r = this.url.split(",");
                    if (r.length >= 2) {
                        for (var n = 0; n < r.length; n++) this.urls.push(r[n]);
                        this.url = r[0]
                    }
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > 21) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = "";
                    if (this.use_quad) {
                        a += this.create_quadkey(i, s, r)
                    } else {
                        var o = WebCMS.lang.toLowerCase(),
                            l = this.langs[o];
                        void 0 === l && (l = "ENG"), a += r + "/" + i + "/" + s + "/256/png?app_id=" + this.app_id + "&app_code=" + this.app_code + "&lg=" + l
                    }
                    var h = !1;
                    if (this.map && void 0 !== this.map.tileManager && void 0 !== this.map.tileManager.tileCache)
                        for (var p in this.map.tileManager.tileCache)
                            if (p.endsWith("." + this.url + a)) {
                                h = !0, a = p;
                                break
                            } return h || (a = this.protocol + (Math.floor(10 * Math.random() % 4) + 1) + "." + this.url + a), a
                },
                create_quadkey: function (e, t, i) {
                    for (var s = "", r = i; r > 0; r--) {
                        var n = 0,
                            a = 1 << r - 1;
                        0 != (e & a) && n++, 0 != (t & a) && (n++, n++), s += n
                    }
                    return s
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Here(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.url, e
                },
                CLASS_NAME: "OpenLayers.Layer.Here"
            })
        },
        "4O+H": function (e, t) {
            OpenLayers.Handler = overwrite(OpenLayers.Handler, {
                startTouch: function () {
                    this.touch || (this.touch = !0)
                },
                CLASS_NAME: "OpenLayers.Handler"
            })
        },
        "6m8X": function (e, t) {
            var i, s, r;
            i = OpenLayers.Popup.Anchored, s = OpenLayers.Popup.Framed, r = OpenLayers.Popup.FramedCloud, OpenLayers.Popup = OpenLayers.Class({
                events: null,
                id: "",
                lonlat: null,
                div: null,
                contentSize: null,
                size: null,
                contentHTML: null,
                contentHTMLEvents: null,
                backgroundColor: "",
                opacity: "",
                border: "",
                contentDiv: null,
                groupDiv: null,
                closeDiv: null,
                autoSize: !1,
                minSize: null,
                maxSize: null,
                displayClass: "olPopup",
                contentDisplayClass: "olPopupContent",
                padding: 0,
                disableFirefoxOverflowHack: !1,
                fixPadding: function () {
                    "number" == typeof this.padding && (this.padding = new OpenLayers.Bounds(this.padding, this.padding, this.padding, this.padding))
                },
                panMapIfOutOfView: !1,
                keepInMap: !1,
                closeOnMove: !1,
                map: null,
                initialize: function (e, t, i, s, r, n, a) {
                    var o = null;
                    a && (a.on_added || a.on_removed) && (o = {
                        on_added: a.on_added || null,
                        on_removed: a.on_removed || null
                    }), null == e && (e = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")), this.id = e, this.lonlat = t, this.contentSize = null != i ? i : new OpenLayers.Size(OpenLayers.Popup.WIDTH, OpenLayers.Popup.HEIGHT), null != s && (this.contentHTML = s, o && (this.contentHTMLEvents = o)), this.backgroundColor = OpenLayers.Popup.COLOR, this.opacity = OpenLayers.Popup.OPACITY, this.border = OpenLayers.Popup.BORDER, this.div = OpenLayers.Util.createDiv(this.id, null, null, null, null, null, "hidden"), this.div.className = this.displayClass;
                    var l = this.id + "_GroupDiv";
                    this.groupDiv = OpenLayers.Util.createDiv(l, null, null, null, "relative", null, "hidden"), e = this.div.id + "_contentDiv", this.contentDiv = OpenLayers.Util.createDiv(e, null, this.contentSize.clone(), null, "relative"), this.contentDiv.className = this.contentDisplayClass, this.groupDiv.appendChild(this.contentDiv), this.div.appendChild(this.groupDiv), r && this.addCloseBox(n), this.registerEvents()
                },
                destroy: function () {
                    this.id = null, this.lonlat = null, this.size = null, this.contentHTML = null, this.backgroundColor = null, this.opacity = null, this.border = null, this.closeOnMove && this.map && this.map.events.unregister("movestart", this, this.hide), this.events.destroy(), this.events = null, this.closeDiv && (OpenLayers.Event.stopObservingElement(this.closeDiv), this.groupDiv.removeChild(this.closeDiv)), this.closeDiv = null, this.div.removeChild(this.groupDiv), this.groupDiv = null, null != this.map && this.map.removePopup(this), this.map = null, this.div = null, this.autoSize = null, this.minSize = null, this.maxSize = null, this.padding = null, this.panMapIfOutOfView = null, this.contentHTMLEvents && this.contentHTMLEvents.on_removed && this.contentHTMLEvents.on_removed()
                },
                draw: function (e) {
                    return null == e && null != this.lonlat && null != this.map && (e = this.map.getLayerPxFromLonLat(this.lonlat)), this.closeOnMove && this.map.events.register("movestart", this, this.hide), this.disableFirefoxOverflowHack || "firefox" != OpenLayers.BROWSER_NAME || (this.map.events.register("movestart", this, (function () {
                        var e = document.defaultView.getComputedStyle(this.contentDiv, null).getPropertyValue("overflow");
                        "hidden" != e && (this.contentDiv._oldOverflow = e, this.contentDiv.style.overflow = "hidden")
                    })), this.map.events.register("moveend", this, (function () {
                        var e = this.contentDiv._oldOverflow;
                        e && (this.contentDiv.style.overflow = e, this.contentDiv._oldOverflow = null)
                    }))), this.moveTo(e), this.autoSize || this.size || this.setSize(this.contentSize), this.setBackgroundColor(), this.setOpacity(), this.setBorder(), this.setContentHTML(), this.panMapIfOutOfView && this.panIntoView(), this.div
                },
                updatePosition: function () {
                    if (this.lonlat && this.map) {
                        var e = this.map.getLayerPxFromLonLat(this.lonlat);
                        e && this.moveTo(e)
                    }
                },
                moveTo: function (e) {
                    null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px")
                },
                visible: function () {
                    return OpenLayers.Element.visible(this.div)
                },
                toggle: function () {
                    this.visible() ? this.hide() : this.show()
                },
                show: function () {
                    this.div.style.display = "", this.panMapIfOutOfView && this.panIntoView()
                },
                hide: function () {
                    this.div.style.display = "none"
                },
                setSize: function (e) {
                    this.size = e.clone();
                    var t = this.getContentDivPadding(),
                        i = t.left + t.right,
                        s = t.top + t.bottom;
                    this.fixPadding(), i += this.padding.left + this.padding.right, s += this.padding.top + this.padding.bottom, this.closeDiv && (i += parseInt(this.closeDiv.style.width) + t.right), this.size.w += i, this.size.h += s, "msie" == OpenLayers.BROWSER_NAME && (this.contentSize.w += t.left + t.right, this.contentSize.h += t.bottom + t.top), null != this.div && (this.div.style.width = this.size.w + "px", this.div.style.height = this.size.h + "px"), null != this.contentDiv && (this.contentDiv.style.width = e.w + "px", this.contentDiv.style.height = e.h + "px")
                },
                updateSize: function () {
                    var e = "<div class='" + this.contentDisplayClass + "'>" + this.contentDiv.innerHTML + "</div>",
                        t = this.map ? this.map.div : document.body,
                        i = OpenLayers.Util.getRenderedDimensions(e, null, {
                            displayClass: this.displayClass,
                            containerElement: t
                        }),
                        s = this.getSafeContentSize(i),
                        r = null;
                    if (s.equals(i)) r = i;
                    else {
                        var n = {
                            w: s.w < i.w ? s.w : null,
                            h: s.h < i.h ? s.h : null
                        };
                        if (n.w && n.h) r = s;
                        else {
                            var a = OpenLayers.Util.getRenderedDimensions(e, n, {
                                displayClass: this.contentDisplayClass,
                                containerElement: t
                            });
                            if ("hidden" != OpenLayers.Element.getStyle(this.contentDiv, "overflow") && a.equals(s)) {
                                var o = OpenLayers.Util.getScrollbarWidth();
                                n.w ? a.h += o : a.w += o
                            }
                            r = this.getSafeContentSize(a)
                        }
                    }
                    this.setSize(r)
                },
                setBackgroundColor: function (e) {
                    null != e && (this.backgroundColor = e), null != this.div && (this.div.style.backgroundColor = this.backgroundColor)
                },
                setOpacity: function (e) {
                    null != e && (this.opacity = e), null != this.div && (this.div.style.opacity = this.opacity, this.div.style.filter = "alpha(opacity=" + 100 * this.opacity + ")")
                },
                setBorder: function (e) {
                    null != e && (this.border = e), null != this.div && (this.div.style.border = this.border)
                },
                setContentHTML: function (e, t) {
                    null != e && (this.contentHTML = e, this.contentHTMLEvents && this.contentHTMLEvents.on_removed && this.contentHTMLEvents.on_removed()), t && (this.contentHTMLEvents = t), null != this.contentDiv && null != this.contentHTML && this.contentHTML != this.contentDiv.innerHTML && (this.contentDiv.innerHTML = this.contentHTML, this.contentHTMLEvents && this.contentHTMLEvents.on_added && this.contentHTMLEvents.on_added(), this.autoSize && (this.registerImageListeners(), this.updateSize()))
                },
                registerImageListeners: function () {
                    for (var e = function () {
                            null !== this.popup.id && (this.popup.updateSize(), this.popup.visible() && this.popup.panMapIfOutOfView && this.popup.panIntoView(), OpenLayers.Event.stopObserving(this.img, "load", this.img._onImgLoad))
                        }, t = this.contentDiv.getElementsByTagName("img"), i = 0, s = t.length; i < s; i++) {
                        var r = t[i];
                        if (0 == r.width || 0 == r.height) {
                            var n = {
                                popup: this,
                                img: r
                            };
                            r._onImgLoad = OpenLayers.Function.bind(e, n), OpenLayers.Event.observe(r, "load", r._onImgLoad)
                        }
                    }
                },
                getSafeContentSize: function (e) {
                    var t = e.clone(),
                        i = this.getContentDivPadding(),
                        s = i.left + i.right,
                        r = i.top + i.bottom;
                    if (this.fixPadding(), s += this.padding.left + this.padding.right, r += this.padding.top + this.padding.bottom, this.closeDiv && (s += parseInt(this.closeDiv.style.width) + i.right), this.minSize && (t.w = Math.max(t.w, this.minSize.w - s), t.h = Math.max(t.h, this.minSize.h - r)), this.maxSize && (t.w = Math.min(t.w, this.maxSize.w - s), t.h = Math.min(t.h, this.maxSize.h - r)), this.map && this.map.size) {
                        var n = 0,
                            a = 0;
                        if (this.keepInMap && !this.panMapIfOutOfView) {
                            var o = this.map.getPixelFromLonLat(this.lonlat);
                            switch (this.relativePosition) {
                                case "tr":
                                    n = o.x, a = this.map.size.h - o.y;
                                    break;
                                case "tl":
                                    n = this.map.size.w - o.x, a = this.map.size.h - o.y;
                                    break;
                                case "bl":
                                    n = this.map.size.w - o.x, a = o.y;
                                    break;
                                case "br":
                                    n = o.x, a = o.y;
                                    break;
                                default:
                                    n = o.x, a = this.map.size.h - o.y
                            }
                        }
                        var l = this.map.size.h - this.map.paddingForPopups.top - this.map.paddingForPopups.bottom - r - a,
                            h = this.map.size.w - this.map.paddingForPopups.left - this.map.paddingForPopups.right - s - n;
                        t.w = Math.min(t.w, h), t.h = Math.min(t.h, l)
                    }
                    return t
                },
                getContentDivPadding: function () {
                    var e = this._contentDivPadding;
                    return e || (null == this.div.parentNode && (this.div.style.display = "none", document.body.appendChild(this.div)), e = new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv, "padding-left"), OpenLayers.Element.getStyle(this.contentDiv, "padding-bottom"), OpenLayers.Element.getStyle(this.contentDiv, "padding-right"), OpenLayers.Element.getStyle(this.contentDiv, "padding-top")), this._contentDivPadding = e, this.div.parentNode == document.body && (document.body.removeChild(this.div), this.div.style.display = "")), e
                },
                addCloseBox: function (e) {
                    this.closeDiv = OpenLayers.Util.createDiv(this.id + "_close", null, {
                        w: 17,
                        h: 17
                    }), this.closeDiv.className = "olPopupCloseBox";
                    var t = this.getContentDivPadding();
                    this.closeDiv.style.right = t.right + "px", this.closeDiv.style.top = t.top + "px", this.groupDiv.appendChild(this.closeDiv);
                    var i = e || function (e) {
                        this.hide(), OpenLayers.Event.stop(e)
                    };
                    OpenLayers.Event.observe(this.closeDiv, "touchend", OpenLayers.Function.bindAsEventListener(i, this)), OpenLayers.Event.observe(this.closeDiv, "click", OpenLayers.Function.bindAsEventListener(i, this))
                },
                panIntoView: function () {
                    var e = this.map.getSize(),
                        t = this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left), parseInt(this.div.style.top))),
                        i = t.clone();
                    t.x < this.map.paddingForPopups.left ? i.x = this.map.paddingForPopups.left : t.x + this.size.w > e.w - this.map.paddingForPopups.right && (i.x = e.w - this.map.paddingForPopups.right - this.size.w), t.y < this.map.paddingForPopups.top ? i.y = this.map.paddingForPopups.top : t.y + this.size.h > e.h - this.map.paddingForPopups.bottom && (i.y = e.h - this.map.paddingForPopups.bottom - this.size.h);
                    var s = t.x - i.x,
                        r = t.y - i.y;
                    this.map.pan(s, r)
                },
                registerEvents: function () {
                    this.events = new OpenLayers.Events(this, this.div, null, !0), this.events.on({
                        mousedown: this.onmousedown,
                        mousemove: this.onmousemove,
                        mouseup: this.onmouseup,
                        click: this.onclick,
                        mouseout: this.onmouseout,
                        dblclick: this.ondblclick,
                        touchstart: function (e) {
                            OpenLayers.Event.stop(e, !0)
                        },
                        scope: this
                    })
                },
                onmousedown: function (e) {
                    this.mousedown = !0, OpenLayers.Event.stop(e, !0)
                },
                onmousemove: function (e) {
                    this.mousedown && OpenLayers.Event.stop(e, !0)
                },
                onmouseup: function (e) {
                    this.mousedown && (this.mousedown = !1, OpenLayers.Event.stop(e, !0))
                },
                onclick: function (e) {
                    OpenLayers.Event.stop(e, !0)
                },
                onmouseout: function (e) {
                    this.mousedown = !1
                },
                ondblclick: function (e) {
                    OpenLayers.Event.stop(e, !0)
                },
                CLASS_NAME: "OpenLayers.Popup"
            }), OpenLayers.Popup.Anchored = i, OpenLayers.Popup.Framed = s, OpenLayers.Popup.FramedCloud = r, OpenLayers.Popup.WIDTH = 200, OpenLayers.Popup.HEIGHT = 200, OpenLayers.Popup.COLOR = "white", OpenLayers.Popup.OPACITY = 1, OpenLayers.Popup.BORDER = "0px"
        },
        "6mOB": function (e, t) {
            OpenLayers.Geometry.Delaunay = {
                triangulate: function (e) {
                    for (var t = this.superTriangle(e), i = [t], s = 0; s < e.length; s++) {
                        for (var r = e[s], n = [], a = 0; a < i.length;) {
                            (l = i[a]).isInCircumcircle(r) ? (n.push(new this.Edge(l.a, l.b)), n.push(new this.Edge(l.b, l.c)), n.push(new this.Edge(l.c, l.a)), i.splice(a, 1)) : a++
                        }
                        this.uniqueEdges(n);
                        for (a = 0; a < n.length; a++) {
                            var o = n[a];
                            i.push(new this.Triangle(o.a, o.b, r))
                        }
                    }
                    for (s = 0; s < i.length;) {
                        var l;
                        (l = i[s]).a == t.a || l.a == t.b || l.a == t.c || l.b == t.a || l.b == t.b || l.b == t.c || l.c == t.a || l.c == t.b || l.c == t.c ? i.splice(s, 1) : s++
                    }
                    return i
                },
                superTriangle: function (e) {
                    for (var t = Number.MAX_VALUE, i = Number.MIN_VALUE, s = Number.MAX_VALUE, r = Number.MIN_VALUE, n = 0; n < e.length; n++) {
                        var a = e[n];
                        a.x < t && (t = a.x), a.x > i && (i = a.x), a.y < s && (s = a.y), a.y > r && (r = a.y)
                    }
                    var o = 10 * (i - t),
                        l = 10 * (r - s);
                    return new this.Triangle(new this.Point(t - o, s - 3 * l), new this.Point(t - o, r + l), new this.Point(i + 3 * o, r + l))
                },
                uniqueEdges: function (e) {
                    for (var t = 0; t < e.length;) {
                        for (var i = !1, s = e[t], r = t + 1; r < e.length;) {
                            if (e[r].equal(s)) {
                                i = !0, e.splice(r, 1);
                                break
                            }
                            r++
                        }
                        i ? e.splice(t, 1) : t++
                    }
                }
            }, OpenLayers.Geometry.Delaunay.Point = function (e, t) {
                this.x = e, this.y = t
            }, OpenLayers.Geometry.Delaunay.Point.prototype.equal = function (e) {
                var t = e.x - this.x,
                    i = e.y - this.y;
                return t * t + i * i < OpenLayers.Geometry.Constants.EPSILON2
            }, OpenLayers.Geometry.Delaunay.Edge = function (e, t) {
                this.a = e, this.b = t
            }, OpenLayers.Geometry.Delaunay.Edge.prototype.equal = function (e) {
                return this.a == e.a && this.b == e.b || this.a == e.b && this.b == e.a
            }, OpenLayers.Geometry.Delaunay.Triangle = function (e, t, i) {
                this.a = e, this.b = t, this.c = i, this.calcCircumcircle()
            }, OpenLayers.Geometry.Delaunay.Triangle.prototype.area = function () {
                return Math.abs((this.c.x - this.a.x) * (this.b.y - this.a.y) - (this.b.x - this.a.x) * (this.c.y - this.a.y)) / 2
            }, OpenLayers.Geometry.Delaunay.Triangle.prototype.centroid = function () {
                return new OpenLayers.Geometry.Delaunay.Point((this.a.x + this.b.x + this.c.x) / 3, (this.a.y + this.b.y + this.c.y) / 3)
            }, OpenLayers.Geometry.Delaunay.Triangle.prototype.calcCircumcircle = function () {
                var e, t, i = this.b.x - this.a.x,
                    s = this.b.y - this.a.y,
                    r = this.c.x - this.a.x,
                    n = this.c.y - this.a.y,
                    a = 2 * (i * n - s * r);
                if (Math.abs(a) < OpenLayers.Geometry.Constants.EPSILON) {
                    var o = Math.min(this.a.x, this.b.x, this.c.x),
                        l = Math.max(this.a.x, this.b.x, this.c.x),
                        h = Math.min(this.a.y, this.b.y, this.c.y),
                        p = Math.max(this.a.y, this.b.y, this.c.y);
                    this.cc = {
                        x: (l - o) / 2,
                        y: (p - h) / 2
                    }, e = this.cc.x - o, t = this.cc.y - h
                } else {
                    var u = i * i + s * s,
                        c = r * r + n * n;
                    e = (n * u - s * c) / a, t = (i * c - r * u) / a, this.cc = {
                        x: this.a.x + e,
                        y: this.a.y + t
                    }
                }
                this.cc.radius2 = e * e + t * t
            }, OpenLayers.Geometry.Delaunay.Triangle.prototype.isInCircumcircle = function (e) {
                var t = e.x - this.cc.x,
                    i = e.y - this.cc.y;
                return t * t + i * i <= this.cc.radius2
            }
        },
        "8bEn": function (e, t, i) {
            var s;
            window.AVLDeps || (window.AVLDeps = {}), AVLDeps.rbush = function e(t, i, r) {
                function n(o, l) {
                    if (!i[o]) {
                        if (!t[o]) {
                            if (!l && "function" == typeof s && s) return s(o, !0);
                            if (a) return a(o, !0);
                            var h = new Error("Cannot find module '" + o + "'");
                            throw h.code = "MODULE_NOT_FOUND", h
                        }
                        var p = i[o] = {
                            exports: {}
                        };
                        t[o][0].call(p.exports, (function (e) {
                            return n(t[o][1][e] || e)
                        }), p, p.exports, e, t, i, r)
                    }
                    return i[o].exports
                }
                for (var a = "function" == typeof s && s, o = 0; o < r.length; o++) n(r[o]);
                return n
            }({
                1: [function (e, t, i) {
                    "use strict";
                    t.exports = r, t.exports.default = r;
                    var s = e("quickselect");

                    function r(e, t) {
                        if (!(this instanceof r)) return new r(e, t);
                        this._maxEntries = Math.max(4, e || 9), this._minEntries = Math.max(2, Math.ceil(.4 * this._maxEntries)), t && this._initFormat(t), this.clear()
                    }

                    function n(e, t, i) {
                        if (!i) return t.indexOf(e);
                        for (var s = 0; s < t.length; s++)
                            if (i(e, t[s])) return s;
                        return -1
                    }

                    function a(e, t) {
                        o(e, 0, e.children.length, t, e)
                    }

                    function o(e, t, i, s, r) {
                        r || (r = m(null)), r.minX = 1 / 0, r.minY = 1 / 0, r.maxX = -1 / 0, r.maxY = -1 / 0;
                        for (var n, a = t; a < i; a++) n = e.children[a], l(r, e.leaf ? s(n) : n);
                        return r
                    }

                    function l(e, t) {
                        return e.minX = Math.min(e.minX, t.minX), e.minY = Math.min(e.minY, t.minY), e.maxX = Math.max(e.maxX, t.maxX), e.maxY = Math.max(e.maxY, t.maxY), e
                    }

                    function h(e, t) {
                        return e.minX - t.minX
                    }

                    function p(e, t) {
                        return e.minY - t.minY
                    }

                    function u(e) {
                        return (e.maxX - e.minX) * (e.maxY - e.minY)
                    }

                    function c(e) {
                        return e.maxX - e.minX + (e.maxY - e.minY)
                    }

                    function y(e, t) {
                        return e.minX <= t.minX && e.minY <= t.minY && t.maxX <= e.maxX && t.maxY <= e.maxY
                    }

                    function d(e, t) {
                        return t.minX <= e.maxX && t.minY <= e.maxY && t.maxX >= e.minX && t.maxY >= e.minY
                    }

                    function m(e) {
                        return {
                            children: e,
                            height: 1,
                            leaf: !0,
                            minX: 1 / 0,
                            minY: 1 / 0,
                            maxX: -1 / 0,
                            maxY: -1 / 0
                        }
                    }

                    function f(e, t, i, r, n) {
                        for (var a, o = [t, i]; o.length;)(i = o.pop()) - (t = o.pop()) <= r || (a = t + Math.ceil((i - t) / r / 2) * r, s(e, a, t, i, n), o.push(t, a, a, i))
                    }
                    r.prototype = {
                        all: function () {
                            return this._all(this.data, [])
                        },
                        search: function (e) {
                            var t = this.data,
                                i = [],
                                s = this.toBBox;
                            if (!d(e, t)) return i;
                            for (var r, n, a, o, l = []; t;) {
                                for (r = 0, n = t.children.length; r < n; r++) a = t.children[r], d(e, o = t.leaf ? s(a) : a) && (t.leaf ? i.push(a) : y(e, o) ? this._all(a, i) : l.push(a));
                                t = l.pop()
                            }
                            return i
                        },
                        collides: function (e) {
                            var t = this.data,
                                i = this.toBBox;
                            if (!d(e, t)) return !1;
                            for (var s, r, n, a, o = []; t;) {
                                for (s = 0, r = t.children.length; s < r; s++)
                                    if (n = t.children[s], d(e, a = t.leaf ? i(n) : n)) {
                                        if (t.leaf || y(e, a)) return !0;
                                        o.push(n)
                                    } t = o.pop()
                            }
                            return !1
                        },
                        load: function (e) {
                            if (!e || !e.length) return this;
                            if (e.length < this._minEntries) {
                                for (var t = 0, i = e.length; t < i; t++) this.insert(e[t]);
                                return this
                            }
                            var s = this._build(e.slice(), 0, e.length - 1, 0);
                            if (this.data.children.length)
                                if (this.data.height === s.height) this._splitRoot(this.data, s);
                                else {
                                    if (this.data.height < s.height) {
                                        var r = this.data;
                                        this.data = s, s = r
                                    }
                                    this._insert(s, this.data.height - s.height - 1, !0)
                                }
                            else this.data = s;
                            return this
                        },
                        insert: function (e) {
                            return e && this._insert(e, this.data.height - 1), this
                        },
                        clear: function () {
                            return this.data = m([]), this
                        },
                        remove: function (e, t) {
                            if (!e) return this;
                            for (var i, s, r, a, o = this.data, l = this.toBBox(e), h = [], p = []; o || h.length;) {
                                if (o || (o = h.pop(), s = h[h.length - 1], i = p.pop(), a = !0), o.leaf && -1 !== (r = n(e, o.children, t))) return o.children.splice(r, 1), h.push(o), this._condense(h), this;
                                a || o.leaf || !y(o, l) ? s ? (i++, o = s.children[i], a = !1) : o = null : (h.push(o), p.push(i), i = 0, o = (s = o).children[0])
                            }
                            return this
                        },
                        toBBox: function (e) {
                            return e
                        },
                        compareMinX: h,
                        compareMinY: p,
                        toJSON: function () {
                            return this.data
                        },
                        fromJSON: function (e) {
                            return this.data = e, this
                        },
                        _all: function (e, t) {
                            for (var i = []; e;) e.leaf ? t.push.apply(t, e.children) : i.push.apply(i, e.children), e = i.pop();
                            return t
                        },
                        _build: function (e, t, i, s) {
                            var r, n = i - t + 1,
                                o = this._maxEntries;
                            if (n <= o) return a(r = m(e.slice(t, i + 1)), this.toBBox), r;
                            s || (s = Math.ceil(Math.log(n) / Math.log(o)), o = Math.ceil(n / Math.pow(o, s - 1))), (r = m([])).leaf = !1, r.height = s;
                            var l, h, p, u, c = Math.ceil(n / o),
                                y = c * Math.ceil(Math.sqrt(o));
                            for (f(e, t, i, y, this.compareMinX), l = t; l <= i; l += y)
                                for (f(e, l, p = Math.min(l + y - 1, i), c, this.compareMinY), h = l; h <= p; h += c) u = Math.min(h + c - 1, p), r.children.push(this._build(e, h, u, s - 1));
                            return a(r, this.toBBox), r
                        },
                        _chooseSubtree: function (e, t, i, s) {
                            for (var r, n, a, o, l, h, p, c, y, d; s.push(t), !t.leaf && s.length - 1 !== i;) {
                                for (p = c = 1 / 0, r = 0, n = t.children.length; r < n; r++) l = u(a = t.children[r]), y = e, d = a, (h = (Math.max(d.maxX, y.maxX) - Math.min(d.minX, y.minX)) * (Math.max(d.maxY, y.maxY) - Math.min(d.minY, y.minY)) - l) < c ? (c = h, p = l < p ? l : p, o = a) : h === c && l < p && (p = l, o = a);
                                t = o || t.children[0]
                            }
                            return t
                        },
                        _insert: function (e, t, i) {
                            var s = this.toBBox,
                                r = i ? e : s(e),
                                n = [],
                                a = this._chooseSubtree(r, this.data, t, n);
                            for (a.children.push(e), l(a, r); 0 <= t && n[t].children.length > this._maxEntries;) this._split(n, t), t--;
                            this._adjustParentBBoxes(r, n, t)
                        },
                        _split: function (e, t) {
                            var i = e[t],
                                s = i.children.length,
                                r = this._minEntries;
                            this._chooseSplitAxis(i, r, s);
                            var n = this._chooseSplitIndex(i, r, s),
                                o = m(i.children.splice(n, i.children.length - n));
                            o.height = i.height, o.leaf = i.leaf, a(i, this.toBBox), a(o, this.toBBox), t ? e[t - 1].children.push(o) : this._splitRoot(i, o)
                        },
                        _splitRoot: function (e, t) {
                            this.data = m([e, t]), this.data.height = e.height + 1, this.data.leaf = !1, a(this.data, this.toBBox)
                        },
                        _chooseSplitIndex: function (e, t, i) {
                            var s, r, n, a, l, h, p, c, y, d, m, f, g, L;
                            for (h = p = 1 / 0, s = t; s <= i - t; s++) y = r = o(e, 0, s, this.toBBox), d = n = o(e, s, i, this.toBBox), m = Math.max(y.minX, d.minX), f = Math.max(y.minY, d.minY), g = Math.min(y.maxX, d.maxX), L = Math.min(y.maxY, d.maxY), a = Math.max(0, g - m) * Math.max(0, L - f), l = u(r) + u(n), a < h ? (h = a, c = s, p = l < p ? l : p) : a === h && l < p && (p = l, c = s);
                            return c
                        },
                        _chooseSplitAxis: function (e, t, i) {
                            var s = e.leaf ? this.compareMinX : h,
                                r = e.leaf ? this.compareMinY : p;
                            this._allDistMargin(e, t, i, s) < this._allDistMargin(e, t, i, r) && e.children.sort(s)
                        },
                        _allDistMargin: function (e, t, i, s) {
                            e.children.sort(s);
                            var r, n, a = this.toBBox,
                                h = o(e, 0, t, a),
                                p = o(e, i - t, i, a),
                                u = c(h) + c(p);
                            for (r = t; r < i - t; r++) n = e.children[r], l(h, e.leaf ? a(n) : n), u += c(h);
                            for (r = i - t - 1; t <= r; r--) n = e.children[r], l(p, e.leaf ? a(n) : n), u += c(p);
                            return u
                        },
                        _adjustParentBBoxes: function (e, t, i) {
                            for (var s = i; 0 <= s; s--) l(t[s], e)
                        },
                        _condense: function (e) {
                            for (var t, i = e.length - 1; 0 <= i; i--) 0 === e[i].children.length ? 0 < i ? (t = e[i - 1].children).splice(t.indexOf(e[i]), 1) : this.clear() : a(e[i], this.toBBox)
                        },
                        _initFormat: function (e) {
                            var t = ["return a", " - b", ";"];
                            this.compareMinX = new Function("a", "b", t.join(e[0])), this.compareMinY = new Function("a", "b", t.join(e[1])), this.toBBox = new Function("a", "return {minX: a" + e[0] + ", minY: a" + e[1] + ", maxX: a" + e[2] + ", maxY: a" + e[3] + "};")
                        }
                    }
                }, {
                    quickselect: 2
                }],
                2: [function (e, t, i) {
                    var s;
                    s = function () {
                        "use strict";

                        function e(e, t, i) {
                            var s = e[t];
                            e[t] = e[i], e[i] = s
                        }

                        function t(e, t) {
                            return e < t ? -1 : t < e ? 1 : 0
                        }
                        return function (i, s, r, n, a) {
                            ! function t(i, s, r, n, a) {
                                for (; r < n;) {
                                    if (600 < n - r) {
                                        var o = n - r + 1,
                                            l = s - r + 1,
                                            h = Math.log(o),
                                            p = .5 * Math.exp(2 * h / 3),
                                            u = .5 * Math.sqrt(h * p * (o - p) / o) * (l - o / 2 < 0 ? -1 : 1);
                                        t(i, s, Math.max(r, Math.floor(s - l * p / o + u)), Math.min(n, Math.floor(s + (o - l) * p / o + u)), a)
                                    }
                                    var c = i[s],
                                        y = r,
                                        d = n;
                                    for (e(i, r, s), 0 < a(i[n], c) && e(i, r, n); y < d;) {
                                        for (e(i, y, d), y++, d--; a(i[y], c) < 0;) y++;
                                        for (; 0 < a(i[d], c);) d--
                                    }
                                    0 === a(i[r], c) ? e(i, r, d) : e(i, ++d, n), d <= s && (r = d + 1), s <= d && (n = d - 1)
                                }
                            }(i, s, r || 0, n || i.length - 1, a || t)
                        }
                    }, "object" == typeof i && void 0 !== t ? t.exports = s() : this.quickselect = s()
                }, {}]
            }, {}, [1])(1)
        },
        "8ceu": function (e, t) {
            OpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {
                wheelListener: null,
                interval: 0,
                maxDelta: Number.POSITIVE_INFINITY,
                delta: 0,
                cumulative: !0,
                initialize: function (e, t, i) {
                    OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.wheelListener = OpenLayers.Function.bindAsEventListener(this.onWheelEvent, this)
                },
                destroy: function () {
                    OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.wheelListener = null
                },
                onWheelEvent: function (e) {
                    if (this.map && this.checkModifiers(e)) {
                        for (var t = !1, i = !1, s = !1, r = OpenLayers.Event.element(e); null != r && !s && !t;) {
                            if (!t) try {
                                var n, a = document.defaultView.getComputedStyle(r, null);
                                n = a.getPropertyValue("overflow"), overflowx = a.getPropertyValue("overflow-x"), overflowy = a.getPropertyValue("overflow-y"), t = "auto" == n || "scroll" == n || "auto" == overflowx || "scroll" == overflowx || "auto" == overflowy || "scroll" == overflowy
                            } catch (e) {}
                            if (!i && !(i = OpenLayers.Element.hasClass(r, "olScrollable")))
                                for (var o = 0, l = this.map.layers.length; o < l; o++) {
                                    var h = this.map.layers[o];
                                    if (r == h.div || r == h.pane) {
                                        i = !0;
                                        break
                                    }
                                }
                            s = r == this.map.div, r = r.parentNode
                        }
                        if (!t && s) {
                            if (i) {
                                var p = 0;
                                if (e.wheelDelta ? ((p = e.wheelDelta) % 160 == 0 && (p *= .75), p /= 120) : e.detail && (p = -e.detail / Math.abs(e.detail)), this.delta += p, window.clearTimeout(this._timeoutId), this.interval && Math.abs(this.delta) < this.maxDelta) {
                                    var u = OpenLayers.Util.extend({}, e);
                                    this._timeoutId = window.setTimeout(OpenLayers.Function.bind((function () {
                                        this.wheelZoom(u)
                                    }), this), this.interval)
                                } else this.wheelZoom(e)
                            }
                            OpenLayers.Event.stop(e)
                        }
                    }
                },
                wheelZoom: function (e) {
                    var t = this.delta;
                    this.delta = 0, t && (e.xy = this.map.events.getMousePosition(e), t < 0 ? this.callback("down", [e, this.cumulative ? Math.max(-this.maxDelta, t) : -1]) : this.callback("up", [e, this.cumulative ? Math.min(this.maxDelta, t) : 1]))
                },
                activate: function (e) {
                    if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
                        var t = this.wheelListener;
                        return OpenLayers.Event.observe(window, "DOMMouseScroll", t), OpenLayers.Event.observe(window, "mousewheel", t), OpenLayers.Event.observe(document, "mousewheel", t), !0
                    }
                    return !1
                },
                deactivate: function (e) {
                    if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
                        var t = this.wheelListener;
                        return OpenLayers.Event.stopObserving(window, "DOMMouseScroll", t), OpenLayers.Event.stopObserving(window, "mousewheel", t), OpenLayers.Event.stopObserving(document, "mousewheel", t), !0
                    }
                    return !1
                },
                CLASS_NAME: "OpenLayers.Handler.MouseWheel"
            })
        },
        "8kPQ": function (e, t) {
            OpenLayers.Layer.Grid = overwrite(OpenLayers.Layer.Grid, {
                applyBackBuffer: function () {},
                createBackBuffer: function () {
                    return null
                },
                moveGriddedTiles: function () {
                    for (var e = this.buffer, t = this.buffer + 1, i = this.getServerResolution() / this.map.getResolution(), s = {
                            w: Math.round(this.tileSize.w * i),
                            h: Math.round(this.tileSize.h * i)
                        }, r = -s.w * e, n = -s.w * t, a = -s.h * e, o = -s.h * t, l = null, h = null, p = !1;;)
                        if ((h = {
                                x: (l = this.grid[0][0]).position.x + this.map.layerContainerOriginPx.x,
                                y: l.position.y + this.map.layerContainerOriginPx.y
                            }).x > r) {
                            if (Math.abs(h.x / s.w) > 20) {
                                p = !0;
                                break
                            }
                            this.shiftColumn(!0, s)
                        } else if (h.x < n) {
                        if (Math.abs(h.x / s.w) > 20) {
                            p = !0;
                            break
                        }
                        this.shiftColumn(!1, s)
                    } else if (h.y > a) {
                        if (Math.abs(h.y / s.h) > 20) {
                            p = !0;
                            break
                        }
                        this.shiftRow(!0, s)
                    } else {
                        if (!(h.y < o)) break;
                        if (Math.abs(h.y / s.h) > 20) {
                            p = !0;
                            break
                        }
                        this.shiftRow(!1, s)
                    }
                    p && this.map.setCenter(this.map.center, this.map.zoom, !0, !0)
                }
            })
        },
        ASCu: function (e, t) {
            OpenLayers.Class.isPrototype = function () {}, OpenLayers.Class.create = function () {
                    return function () {
                        arguments && arguments[0] != OpenLayers.Class.isPrototype && this.initialize.apply(this, arguments)
                    }
                }, OpenLayers.Class.inherit = function (e) {
                    var t = function () {
                            e.call(this)
                        },
                        i = [t].concat(Array.prototype.slice.call(arguments));
                    return OpenLayers.inherit.apply(null, i), t.prototype
                }, OpenLayers.Util.clearArray = function (e) {
                    OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "array = []"
                    })), e.length = 0
                }, OpenLayers.Util.setOpacity = function (e, t) {
                    OpenLayers.Util.modifyDOMElement(e, null, null, null, null, null, null, t)
                }, OpenLayers.Util.safeStopPropagation = function (e) {
                    OpenLayers.Event.stop(e, !0)
                }, OpenLayers.Util.getArgs = function (e) {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.Util.getParameters"
                    })), OpenLayers.Util.getParameters(e)
                }, void 0 === window.$ && (window.$ = OpenLayers.Util.getElement), OpenLayers.nullHandler = function (e) {
                    OpenLayers.Console.userError(OpenLayers.i18n("unhandledRequest", {
                        statusText: e.statusText
                    }))
                }, OpenLayers.loadURL = function (e, t, i, s, r) {
                    "string" == typeof t && (t = OpenLayers.Util.getParameters(t));
                    var n = s || OpenLayers.nullHandler,
                        a = r || OpenLayers.nullHandler;
                    return OpenLayers.Request.GET({
                        url: e,
                        params: t,
                        success: n,
                        failure: a,
                        scope: i
                    })
                }, OpenLayers.parseXMLString = function (e) {
                    var t = e.indexOf("<");
                    return t > 0 && (e = e.substring(t)), OpenLayers.Util.Try((function () {
                        var t = new ActiveXObject("Microsoft.XMLDOM");
                        return t.loadXML(e), t
                    }), (function () {
                        return (new DOMParser).parseFromString(e, "text/xml")
                    }), (function () {
                        var t = new XMLHttpRequest;
                        return t.open("GET", "data:text/xml;charset=utf-8," + encodeURIComponent(e), !1), t.overrideMimeType && t.overrideMimeType("text/xml"), t.send(null), t.responseXML
                    }))
                }, OpenLayers.Ajax = {
                    emptyFunction: function () {},
                    getTransport: function () {
                        return OpenLayers.Util.Try((function () {
                            return new XMLHttpRequest
                        }), (function () {
                            return new ActiveXObject("Msxml2.XMLHTTP")
                        }), (function () {
                            return new ActiveXObject("Microsoft.XMLHTTP")
                        })) || !1
                    },
                    activeRequestCount: 0
                }, OpenLayers.Ajax.Responders = {
                    responders: [],
                    register: function (e) {
                        for (var t = 0; t < this.responders.length; t++)
                            if (e == this.responders[t]) return;
                        this.responders.push(e)
                    },
                    unregister: function (e) {
                        OpenLayers.Util.removeItem(this.reponders, e)
                    },
                    dispatch: function (e, t, i) {
                        for (var s, r = 0; r < this.responders.length; r++)
                            if ((s = this.responders[r])[e] && "function" == typeof s[e]) try {
                                s[e].apply(s, [t, i])
                            } catch (e) {}
                    }
                }, OpenLayers.Ajax.Responders.register({
                    onCreate: function () {
                        OpenLayers.Ajax.activeRequestCount++
                    },
                    onComplete: function () {
                        OpenLayers.Ajax.activeRequestCount--
                    }
                }), OpenLayers.Ajax.Base = OpenLayers.Class({
                    initialize: function (e) {
                        this.options = {
                            method: "post",
                            asynchronous: !0,
                            contentType: "application/xml",
                            parameters: ""
                        }, OpenLayers.Util.extend(this.options, e || {}), this.options.method = this.options.method.toLowerCase(), "string" == typeof this.options.parameters && (this.options.parameters = OpenLayers.Util.getParameters(this.options.parameters))
                    }
                }), OpenLayers.Ajax.Request = OpenLayers.Class(OpenLayers.Ajax.Base, {
                    _complete: !1,
                    initialize: function (e, t) {
                        OpenLayers.Ajax.Base.prototype.initialize.apply(this, [t]), OpenLayers.ProxyHost && OpenLayers.String.startsWith(e, "http") && (e = OpenLayers.ProxyHost + encodeURIComponent(e)), this.transport = OpenLayers.Ajax.getTransport(), this.request(e)
                    },
                    request: function (e) {
                        this.url = e, this.method = this.options.method;
                        var t = OpenLayers.Util.extend({}, this.options.parameters);
                        "get" != this.method && "post" != this.method && (t._method = this.method, this.method = "post"), this.parameters = t, (t = OpenLayers.Util.getParameterString(t)) && ("get" == this.method ? this.url += (this.url.indexOf("?") > -1 ? "&" : "?") + t : /Konqueror|Safari|KHTML/.test(navigator.userAgent) && (t += "&_="));
                        try {
                            var i = new OpenLayers.Ajax.Response(this);
                            this.options.onCreate && this.options.onCreate(i), OpenLayers.Ajax.Responders.dispatch("onCreate", this, i), this.transport.open(this.method.toUpperCase(), this.url, this.options.asynchronous), this.options.asynchronous && window.setTimeout(OpenLayers.Function.bind(this.respondToReadyState, this, 1), 10), this.transport.onreadystatechange = OpenLayers.Function.bind(this.onStateChange, this), this.setRequestHeaders(), this.body = "post" == this.method ? this.options.postBody || t : null, this.transport.send(this.body), !this.options.asynchronous && this.transport.overrideMimeType && this.onStateChange()
                        } catch (e) {
                            this.dispatchException(e)
                        }
                    },
                    onStateChange: function () {
                        var e = this.transport.readyState;
                        e > 1 && (4 != e || !this._complete) && this.respondToReadyState(this.transport.readyState)
                    },
                    setRequestHeaders: function () {
                        var e = {
                            "X-Requested-With": "XMLHttpRequest",
                            Accept: "text/javascript, text/html, application/xml, text/xml, */*",
                            OpenLayers: !0
                        };
                        if ("post" == this.method && (e["Content-type"] = this.options.contentType + (this.options.encoding ? "; charset=" + this.options.encoding : ""), this.transport.overrideMimeType && (navigator.userAgent.match(/Gecko\/(\d{4})/) || [0, 2005])[1] < 2005 && (e.Connection = "close")), "object" == typeof this.options.requestHeaders) {
                            var t = this.options.requestHeaders;
                            if ("function" == typeof t.push)
                                for (var i = 0, s = t.length; i < s; i += 2) e[t[i]] = t[i + 1];
                            else
                                for (var i in t) e[i] = t[i]
                        }
                        for (var r in e) this.transport.setRequestHeader(r, e[r])
                    },
                    success: function () {
                        var e = this.getStatus();
                        return !e || e >= 200 && e < 300
                    },
                    getStatus: function () {
                        try {
                            return this.transport.status || 0
                        } catch (e) {
                            return 0
                        }
                    },
                    respondToReadyState: function (e) {
                        var t = OpenLayers.Ajax.Request.Events[e],
                            i = new OpenLayers.Ajax.Response(this);
                        if ("Complete" == t) {
                            try {
                                this._complete = !0, (this.options["on" + i.status] || this.options["on" + (this.success() ? "Success" : "Failure")] || OpenLayers.Ajax.emptyFunction)(i)
                            } catch (e) {
                                this.dispatchException(e)
                            }
                            i.getHeader("Content-type")
                        }
                        try {
                            (this.options["on" + t] || OpenLayers.Ajax.emptyFunction)(i), OpenLayers.Ajax.Responders.dispatch("on" + t, this, i)
                        } catch (e) {
                            this.dispatchException(e)
                        }
                        "Complete" == t && (this.transport.onreadystatechange = OpenLayers.Ajax.emptyFunction)
                    },
                    getHeader: function (e) {
                        try {
                            return this.transport.getResponseHeader(e)
                        } catch (e) {
                            return null
                        }
                    },
                    dispatchException: function (e) {
                        var t = this.options.onException;
                        if (t) t(this, e), OpenLayers.Ajax.Responders.dispatch("onException", this, e);
                        else {
                            for (var i = !1, s = OpenLayers.Ajax.Responders.responders, r = 0; r < s.length; r++)
                                if (s[r].onException) {
                                    i = !0;
                                    break
                                } if (!i) throw e;
                            OpenLayers.Ajax.Responders.dispatch("onException", this, e)
                        }
                    }
                }), OpenLayers.Ajax.Request.Events = ["Uninitialized", "Loading", "Loaded", "Interactive", "Complete"], OpenLayers.Ajax.Response = OpenLayers.Class({
                    status: 0,
                    statusText: "",
                    initialize: function (e) {
                        this.request = e;
                        var t = this.transport = e.transport,
                            i = this.readyState = t.readyState;
                        if ((i > 2 && (!window.attachEvent || window.opera) || 4 == i) && (this.status = this.getStatus(), this.statusText = this.getStatusText(), this.responseText = null == t.responseText ? "" : String(t.responseText)), 4 == i) {
                            var s = t.responseXML;
                            this.responseXML = void 0 === s ? null : s
                        }
                    },
                    getStatus: OpenLayers.Ajax.Request.prototype.getStatus,
                    getStatusText: function () {
                        try {
                            return this.transport.statusText || ""
                        } catch (e) {
                            return ""
                        }
                    },
                    getHeader: OpenLayers.Ajax.Request.prototype.getHeader,
                    getResponseHeader: function (e) {
                        return this.transport.getResponseHeader(e)
                    }
                }), OpenLayers.Ajax.getElementsByTagNameNS = function (e, t, i, s) {
                    return e.getElementsByTagNameNS ? e.getElementsByTagNameNS(t, s) : e.getElementsByTagName(i + ":" + s)
                }, OpenLayers.Ajax.serializeXMLToString = function (e) {
                    return (new XMLSerializer).serializeToString(e)
                }, OpenLayers.Util.extend(OpenLayers.Element, {
                    hide: function () {
                        OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                            newMethod: "element.style.display = 'none';"
                        }));
                        for (var e = 0, t = arguments.length; e < t; e++) {
                            var i = OpenLayers.Util.getElement(arguments[e]);
                            i && (i.style.display = "none")
                        }
                    },
                    show: function () {
                        OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                            newMethod: "element.style.display = '';"
                        }));
                        for (var e = 0, t = arguments.length; e < t; e++) {
                            var i = OpenLayers.Util.getElement(arguments[e]);
                            i && (i.style.display = "")
                        }
                    },
                    getDimensions: function (e) {
                        if (e = OpenLayers.Util.getElement(e), "none" != OpenLayers.Element.getStyle(e, "display")) return {
                            width: e.offsetWidth,
                            height: e.offsetHeight
                        };
                        var t = e.style,
                            i = t.visibility,
                            s = t.position,
                            r = t.display;
                        t.visibility = "hidden", t.position = "absolute", t.display = "";
                        var n = e.clientWidth,
                            a = e.clientHeight;
                        return t.display = r, t.position = s, t.visibility = i, {
                            width: n,
                            height: a
                        }
                    }
                }), String.prototype.startsWith || (String.prototype.startsWith = function (e) {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.String.startsWith"
                    })), OpenLayers.String.startsWith(this, e)
                }), String.prototype.contains || (String.prototype.contains = function (e) {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.String.contains"
                    })), OpenLayers.String.contains(this, e)
                }), String.prototype.trim || (String.prototype.trim = function () {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.String.trim"
                    })), OpenLayers.String.trim(this)
                }), String.prototype.camelize || (String.prototype.camelize = function () {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.String.camelize"
                    })), OpenLayers.String.camelize(this)
                }), Function.prototype.bind || (Function.prototype.bind = function () {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.Function.bind"
                    })), Array.prototype.unshift.apply(arguments, [this]), OpenLayers.Function.bind.apply(null, arguments)
                }), Function.prototype.bindAsEventListener || (Function.prototype.bindAsEventListener = function (e) {
                    return OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated", {
                        newMethod: "OpenLayers.Function.bindAsEventListener"
                    })), OpenLayers.Function.bindAsEventListener(this, e)
                }), OpenLayers.Util.extend(OpenLayers.Tile.prototype, {
                    getBoundsFromBaseLayer: function (e) {
                        var t = OpenLayers.i18n("reprojectDeprecated", {
                            layerName: this.layer.name
                        });
                        OpenLayers.Console.warn(t);
                        var i = this.layer.map.getLonLatFromLayerPx(e),
                            s = e.clone();
                        s.x += this.size.w, s.y += this.size.h;
                        var r = this.layer.map.getLonLatFromLayerPx(s);
                        return i.lon > r.lon && (i.lon < 0 ? i.lon = -180 - (i.lon + 180) : r.lon = 180 + r.lon + 180), new OpenLayers.Bounds(i.lon, r.lat, r.lon, i.lat)
                    }
                }), OpenLayers.Util.extend(OpenLayers.Layer.Grid.prototype, {
                    getGridBounds: function () {
                        return OpenLayers.Console.warn("The getGridBounds() function is deprecated. It will be removed in 3.0. Please use getTilesBounds() instead."), this.getTilesBounds()
                    }
                }), OpenLayers.Util.extend(OpenLayers.Format.XML.prototype, {
                    concatChildValues: function (e, t) {
                        for (var i, s = "", r = e.firstChild; r;)(i = r.nodeValue) && (s += i), r = r.nextSibling;
                        return "" == s && null != t && (s = t), s
                    }
                }), OpenLayers.Layer.MapServer.Untiled = OpenLayers.Class(OpenLayers.Layer.MapServer, {
                    singleTile: !0,
                    initialize: function (e, t, i, s) {
                        OpenLayers.Layer.MapServer.prototype.initialize.apply(this, arguments);
                        var r = "The OpenLayers.Layer.MapServer.Untiled class is deprecated and will be removed in 3.0. Instead, you should use the normal OpenLayers.Layer.MapServer class, passing it the option 'singleTile' as true.";
                        OpenLayers.Console.warn(r)
                    },
                    clone: function (e) {
                        return null == e && (e = new OpenLayers.Layer.MapServer.Untiled(this.name, this.url, this.params, this.getOptions())), e = OpenLayers.Layer.MapServer.prototype.clone.apply(this, [e])
                    },
                    CLASS_NAME: "OpenLayers.Layer.MapServer.Untiled"
                }), OpenLayers.Layer.VirtualEarth = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
                    MIN_ZOOM_LEVEL: 1,
                    MAX_ZOOM_LEVEL: 19,
                    RESOLUTIONS: [1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20, 536441802978515e-20],
                    type: null,
                    wrapDateLine: !0,
                    sphericalMercator: !1,
                    animationEnabled: !0,
                    initialize: function (e, t) {
                        OpenLayers.Layer.EventPane.prototype.initialize.apply(this, arguments), OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, arguments), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), this.initMercatorParameters())
                    },
                    loadMapObject: function () {
                        var e = OpenLayers.Util.createDiv(this.name),
                            t = this.map.getSize();
                        e.style.width = t.w + "px", e.style.height = t.h + "px", this.div.appendChild(e);
                        try {
                            this.mapObject = new VEMap(this.name)
                        } catch (e) {}
                        if (null != this.mapObject) {
                            try {
                                this.mapObject.LoadMap(null, null, this.type, !0), this.mapObject.AttachEvent("onmousedown", OpenLayers.Function.True)
                            } catch (e) {}
                            this.mapObject.HideDashboard(), "function" == typeof this.mapObject.SetAnimationEnabled && this.mapObject.SetAnimationEnabled(this.animationEnabled)
                        }
                        this.mapObject && this.mapObject.vemapcontrol && this.mapObject.vemapcontrol.PanMap && "function" == typeof this.mapObject.vemapcontrol.PanMap || (this.dragPanMapObject = null)
                    },
                    onMapResize: function () {
                        this.mapObject.Resize(this.map.size.w, this.map.size.h)
                    },
                    getWarningHTML: function () {
                        return OpenLayers.i18n("getLayerWarning", {
                            layerType: "VE",
                            layerLib: "VirtualEarth"
                        })
                    },
                    setMapObjectCenter: function (e, t) {
                        this.mapObject.SetCenterAndZoom(e, t)
                    },
                    getMapObjectCenter: function () {
                        return this.mapObject.GetCenter()
                    },
                    dragPanMapObject: function (e, t) {
                        this.mapObject.vemapcontrol.PanMap(e, -t)
                    },
                    getMapObjectZoom: function () {
                        return this.mapObject.GetZoomLevel()
                    },
                    getMapObjectLonLatFromMapObjectPixel: function (e) {
                        return "undefined" != typeof VEPixel ? this.mapObject.PixelToLatLong(e) : this.mapObject.PixelToLatLong(e.x, e.y)
                    },
                    getMapObjectPixelFromMapObjectLonLat: function (e) {
                        return this.mapObject.LatLongToPixel(e)
                    },
                    getLongitudeFromMapObjectLonLat: function (e) {
                        return this.sphericalMercator ? this.forwardMercator(e.Longitude, e.Latitude).lon : e.Longitude
                    },
                    getLatitudeFromMapObjectLonLat: function (e) {
                        return this.sphericalMercator ? this.forwardMercator(e.Longitude, e.Latitude).lat : e.Latitude
                    },
                    getMapObjectLonLatFromLonLat: function (e, t) {
                        var i;
                        if (this.sphericalMercator) {
                            var s = this.inverseMercator(e, t);
                            i = new VELatLong(s.lat, s.lon)
                        } else i = new VELatLong(t, e);
                        return i
                    },
                    getXFromMapObjectPixel: function (e) {
                        return e.x
                    },
                    getYFromMapObjectPixel: function (e) {
                        return e.y
                    },
                    getMapObjectPixelFromXY: function (e, t) {
                        return "undefined" != typeof VEPixel ? new VEPixel(e, t) : new Msn.VE.Pixel(e, t)
                    },
                    CLASS_NAME: "OpenLayers.Layer.VirtualEarth"
                }),
                function () {
                    if (!window.google || !google.gears) {
                        var e = null;
                        if ("undefined" != typeof GearsFactory) e = new GearsFactory;
                        else try {
                            -1 != (e = new ActiveXObject("Gears.Factory")).getBuildInfo().indexOf("ie_mobile") && e.privateSetGlobalObject(this)
                        } catch (t) {
                            void 0 !== navigator.mimeTypes && navigator.mimeTypes["application/x-googlegears"] && ((e = document.createElement("object")).style.display = "none", e.width = 0, e.height = 0, e.type = "application/x-googlegears", document.documentElement.appendChild(e))
                        }
                        e && (window.google || (google = {}), google.gears || (google.gears = {
                            factory: e
                        }))
                    }
                }(), OpenLayers.Protocol.SQL = OpenLayers.Class(OpenLayers.Protocol, {
                    databaseName: "ol",
                    tableName: "ol_vector_features",
                    postReadFiltering: !0,
                    initialize: function (e) {
                        OpenLayers.Protocol.prototype.initialize.apply(this, [e])
                    },
                    destroy: function () {
                        OpenLayers.Protocol.prototype.destroy.apply(this)
                    },
                    supported: function () {
                        return !1
                    },
                    evaluateFilter: function (e, t) {
                        return !t || !this.postReadFiltering || t.evaluate(e)
                    },
                    CLASS_NAME: "OpenLayers.Protocol.SQL"
                }), OpenLayers.Protocol.SQL.Gears = OpenLayers.Class(OpenLayers.Protocol.SQL, {
                    FID_PREFIX: "__gears_fid__",
                    NULL_GEOMETRY: "__gears_null_geometry__",
                    NULL_FEATURE_STATE: "__gears_null_feature_state__",
                    jsonParser: null,
                    wktParser: null,
                    fidRegExp: null,
                    saveFeatureState: !0,
                    typeOfFid: "string",
                    db: null,
                    initialize: function (e) {
                        this.supported() && (OpenLayers.Protocol.SQL.prototype.initialize.apply(this, [e]), this.jsonParser = new OpenLayers.Format.JSON, this.wktParser = new OpenLayers.Format.WKT, this.fidRegExp = new RegExp("^" + this.FID_PREFIX), this.initializeDatabase())
                    },
                    initializeDatabase: function () {
                        this.db = google.gears.factory.create("beta.database"), this.db.open(this.databaseName), this.db.execute("CREATE TABLE IF NOT EXISTS " + this.tableName + " (fid TEXT UNIQUE, geometry TEXT, properties TEXT,  state TEXT)")
                    },
                    destroy: function () {
                        this.db.close(), this.db = null, this.jsonParser = null, this.wktParser = null, OpenLayers.Protocol.SQL.prototype.destroy.apply(this)
                    },
                    supported: function () {
                        return !(!window.google || !google.gears)
                    },
                    read: function (e) {
                        OpenLayers.Protocol.prototype.read.apply(this, arguments), e = OpenLayers.Util.applyDefaults(e, this.options);
                        for (var t, i = [], s = this.db.execute("SELECT * FROM " + this.tableName); s.isValidRow();) t = this.unfreezeFeature(s), this.evaluateFilter(t, e.filter) && (e.noFeatureStateReset || (t.state = null), i.push(t)), s.next();
                        s.close();
                        var r = new OpenLayers.Protocol.Response({
                            code: OpenLayers.Protocol.Response.SUCCESS,
                            requestType: "read",
                            features: i
                        });
                        return e && e.callback && e.callback.call(e.scope, r), r
                    },
                    unfreezeFeature: function (e) {
                        var t, i = e.fieldByName("geometry");
                        (t = i == this.NULL_GEOMETRY ? new OpenLayers.Feature.Vector : this.wktParser.read(i)).attributes = this.jsonParser.read(e.fieldByName("properties")), t.fid = this.extractFidFromField(e.fieldByName("fid"));
                        var s = e.fieldByName("state");
                        return s == this.NULL_FEATURE_STATE && (s = null), t.state = s, t
                    },
                    extractFidFromField: function (e) {
                        return e.match(this.fidRegExp) || "number" != this.typeOfFid || (e = parseFloat(e)), e
                    },
                    create: function (e, t) {
                        t = OpenLayers.Util.applyDefaults(t, this.options);
                        var i = this.createOrUpdate(e);
                        return i.requestType = "create", t && t.callback && t.callback.call(t.scope, i), i
                    },
                    update: function (e, t) {
                        t = OpenLayers.Util.applyDefaults(t, this.options);
                        var i = this.createOrUpdate(e);
                        return i.requestType = "update", t && t.callback && t.callback.call(t.scope, i), i
                    },
                    createOrUpdate: function (e) {
                        OpenLayers.Util.isArray(e) || (e = [e]);
                        var t, i, s = e.length,
                            r = new Array(s);
                        for (t = 0; t < s; t++) {
                            i = e[t];
                            var n = this.freezeFeature(i);
                            this.db.execute("REPLACE INTO " + this.tableName + " (fid, geometry, properties, state) VALUES (?, ?, ?, ?)", n);
                            var a = i.clone();
                            a.fid = this.extractFidFromField(n[0]), r[t] = a
                        }
                        return new OpenLayers.Protocol.Response({
                            code: OpenLayers.Protocol.Response.SUCCESS,
                            features: r,
                            reqFeatures: e
                        })
                    },
                    freezeFeature: function (e) {
                        e.fid = null != e.fid ? "" + e.fid : OpenLayers.Util.createUniqueID(this.FID_PREFIX);
                        var t = null != e.geometry ? e.geometry.toString() : this.NULL_GEOMETRY,
                            i = this.jsonParser.write(e.attributes),
                            s = this.getFeatureStateForFreeze(e);
                        return [e.fid, t, i, s]
                    },
                    getFeatureStateForFreeze: function (e) {
                        return this.saveFeatureState ? this.createdOffline(e) ? OpenLayers.State.INSERT : e.state : this.NULL_FEATURE_STATE
                    },
                    delete: function (e, t) {
                        var i, s, r;
                        for (OpenLayers.Util.isArray(e) || (e = [e]), t = OpenLayers.Util.applyDefaults(t, this.options), i = 0, s = e.length; i < s; i++)
                            if (r = e[i], this.saveFeatureState && !this.createdOffline(r)) {
                                var n = r.clone();
                                n.fid = r.fid, n.geometry && (n.geometry.destroy(), n.geometry = null), n.state = r.state, this.createOrUpdate(n)
                            } else this.db.execute("DELETE FROM " + this.tableName + " WHERE fid = ?", [r.fid]);
                        var a = new OpenLayers.Protocol.Response({
                            code: OpenLayers.Protocol.Response.SUCCESS,
                            requestType: "delete",
                            reqFeatures: e
                        });
                        return t && t.callback && t.callback.call(t.scope, a), a
                    },
                    createdOffline: function (e) {
                        return "string" == typeof e.fid && !!e.fid.match(this.fidRegExp)
                    },
                    commit: function (e, t) {
                        var i, s = [],
                            r = 0,
                            n = 0;

                        function a(e) {
                            ++n < r && (e.last = !1), this.callUserCallback(t, e)
                        }
                        for (var o, l = [], h = [], p = [], u = e.length - 1; u >= 0; u--) switch ((o = e[u]).state) {
                            case OpenLayers.State.INSERT:
                                l.push(o);
                                break;
                            case OpenLayers.State.UPDATE:
                                h.push(o);
                                break;
                            case OpenLayers.State.DELETE:
                                p.push(o)
                        }
                        return l.length > 0 && (r++, i = OpenLayers.Util.applyDefaults({
                            callback: a,
                            scope: this
                        }, t.create), s.push(this.create(l, i))), h.length > 0 && (r++, i = OpenLayers.Util.applyDefaults({
                            callback: a,
                            scope: this
                        }, t.update), s.push(this.update(h, i))), p.length > 0 && (r++, i = OpenLayers.Util.applyDefaults({
                            callback: a,
                            scope: this
                        }, t.delete), s.push(this.delete(p, i))), s
                    },
                    clear: function () {
                        this.db.execute("DELETE FROM " + this.tableName)
                    },
                    callUserCallback: function (e, t) {
                        var i = e[t.requestType];
                        i && i.callback && i.callback.call(i.scope, t), t.last && e.callback && e.callback.call(e.scope)
                    },
                    CLASS_NAME: "OpenLayers.Protocol.SQL.Gears"
                }), OpenLayers.Layer.Yahoo = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
                    MIN_ZOOM_LEVEL: 0,
                    MAX_ZOOM_LEVEL: 17,
                    RESOLUTIONS: [1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20],
                    type: null,
                    wrapDateLine: !0,
                    sphericalMercator: !1,
                    initialize: function (e, t) {
                        OpenLayers.Layer.EventPane.prototype.initialize.apply(this, arguments), OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, arguments), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), this.initMercatorParameters())
                    },
                    loadMapObject: function () {
                        try {
                            var e = this.getMapObjectSizeFromOLSize(this.map.getSize());
                            this.mapObject = new YMap(this.div, this.type, e), this.mapObject.disableKeyControls(), this.mapObject.disableDragMap(), this.mapObject.moveByXY && "function" == typeof this.mapObject.moveByXY || (this.dragPanMapObject = null)
                        } catch (e) {}
                    },
                    onMapResize: function () {
                        try {
                            var e = this.getMapObjectSizeFromOLSize(this.map.getSize());
                            this.mapObject.resizeTo(e)
                        } catch (e) {}
                    },
                    setMap: function (e) {
                        OpenLayers.Layer.EventPane.prototype.setMap.apply(this, arguments), this.map.events.register("moveend", this, this.fixYahooEventPane)
                    },
                    fixYahooEventPane: function () {
                        var e = OpenLayers.Util.getElement("ygddfdiv");
                        null != e && (null != e.parentNode && e.parentNode.removeChild(e), this.map.events.unregister("moveend", this, this.fixYahooEventPane))
                    },
                    getWarningHTML: function () {
                        return OpenLayers.i18n("getLayerWarning", {
                            layerType: "Yahoo",
                            layerLib: "Yahoo"
                        })
                    },
                    getOLZoomFromMapObjectZoom: function (e) {
                        var t = null;
                        return null != e && (t = 18 - (t = OpenLayers.Layer.FixedZoomLevels.prototype.getOLZoomFromMapObjectZoom.apply(this, [e]))), t
                    },
                    getMapObjectZoomFromOLZoom: function (e) {
                        var t = null;
                        return null != e && (t = 18 - (t = OpenLayers.Layer.FixedZoomLevels.prototype.getMapObjectZoomFromOLZoom.apply(this, [e]))), t
                    },
                    setMapObjectCenter: function (e, t) {
                        this.mapObject.drawZoomAndCenter(e, t)
                    },
                    getMapObjectCenter: function () {
                        return this.mapObject.getCenterLatLon()
                    },
                    dragPanMapObject: function (e, t) {
                        this.mapObject.moveByXY({
                            x: -e,
                            y: t
                        })
                    },
                    getMapObjectZoom: function () {
                        return this.mapObject.getZoomLevel()
                    },
                    getMapObjectLonLatFromMapObjectPixel: function (e) {
                        return this.mapObject.convertXYLatLon(e)
                    },
                    getMapObjectPixelFromMapObjectLonLat: function (e) {
                        return this.mapObject.convertLatLonXY(e)
                    },
                    getLongitudeFromMapObjectLonLat: function (e) {
                        return this.sphericalMercator ? this.forwardMercator(e.Lon, e.Lat).lon : e.Lon
                    },
                    getLatitudeFromMapObjectLonLat: function (e) {
                        return this.sphericalMercator ? this.forwardMercator(e.Lon, e.Lat).lat : e.Lat
                    },
                    getMapObjectLonLatFromLonLat: function (e, t) {
                        var i;
                        if (this.sphericalMercator) {
                            var s = this.inverseMercator(e, t);
                            i = new YGeoPoint(s.lat, s.lon)
                        } else i = new YGeoPoint(t, e);
                        return i
                    },
                    getXFromMapObjectPixel: function (e) {
                        return e.x
                    },
                    getYFromMapObjectPixel: function (e) {
                        return e.y
                    },
                    getMapObjectPixelFromXY: function (e, t) {
                        return new YCoordPoint(e, t)
                    },
                    getMapObjectSizeFromOLSize: function (e) {
                        return new YSize(e.w, e.h)
                    },
                    CLASS_NAME: "OpenLayers.Layer.Yahoo"
                }), OpenLayers.Layer.GML = OpenLayers.Class(OpenLayers.Layer.Vector, {
                    loaded: !1,
                    format: null,
                    formatOptions: null,
                    initialize: function (e, t, i) {
                        var s = [];
                        s.push(e, i), OpenLayers.Layer.Vector.prototype.initialize.apply(this, s), this.url = t
                    },
                    setVisibility: function (e, t) {
                        OpenLayers.Layer.Vector.prototype.setVisibility.apply(this, arguments), this.visibility && !this.loaded && this.loadGML()
                    },
                    moveTo: function (e, t, i) {
                        OpenLayers.Layer.Vector.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadGML()
                    },
                    loadGML: function () {
                        this.loaded || (this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
                            url: this.url,
                            success: this.requestSuccess,
                            failure: this.requestFailure,
                            scope: this
                        }), this.loaded = !0)
                    },
                    setUrl: function (e) {
                        this.url = e, this.destroyFeatures(), this.loaded = !1, this.loadGML()
                    },
                    requestSuccess: function (e) {
                        var t = e.responseXML;
                        t && t.documentElement || (t = e.responseText);
                        var i = {};
                        OpenLayers.Util.extend(i, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (i.externalProjection = this.projection, i.internalProjection = this.map.getProjectionObject());
                        var s = this.format ? new this.format(i) : new OpenLayers.Format.GML(i);
                        this.addFeatures(s.read(t)), this.events.triggerEvent("loadend")
                    },
                    requestFailure: function (e) {
                        OpenLayers.Console.userError("Error in loading GML file " + this.url), this.events.triggerEvent("loadend")
                    },
                    CLASS_NAME: "OpenLayers.Layer.GML"
                }), OpenLayers.Geometry.Rectangle = OpenLayers.Class(OpenLayers.Geometry, {
                    x: null,
                    y: null,
                    width: null,
                    height: null,
                    initialize: function (e, t, i, s) {
                        OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.x = e, this.y = t, this.width = i, this.height = s
                    },
                    calculateBounds: function () {
                        this.bounds = new OpenLayers.Bounds(this.x, this.y, this.x + this.width, this.y + this.height)
                    },
                    getLength: function () {
                        return 2 * this.width + 2 * this.height
                    },
                    getArea: function () {
                        return this.width * this.height
                    },
                    CLASS_NAME: "OpenLayers.Geometry.Rectangle"
                }), OpenLayers.Renderer.NG = OpenLayers.Class(OpenLayers.Renderer.Elements, {
                    labelNodeType: null,
                    updateDimensions: function (e) {
                        var t = this.map.getExtent(),
                            i = t.scale(3);
                        this.setExtent(i, !0);
                        var s = this.getResolution(),
                            r = this.rendererRoot.parentNode,
                            n = parseFloat(r.parentNode.style.left),
                            a = parseFloat(r.parentNode.style.top);
                        r.style.left = (i.left - t.left) / s - n + "px", r.style.top = (t.top - i.top) / s - a + "px"
                    },
                    setSize: function () {
                        this.map.getExtent() && this.updateDimensions()
                    },
                    drawFeature: function (e, t) {
                        if (null == t && (t = e.style), e.geometry) {
                            var i = this.drawGeometry(e.geometry, t, e.id);
                            if (!1 !== i && t.label) {
                                var s = e.geometry.getCentroid();
                                this.drawText(e.id, t, s)
                            } else this.removeText(e.id);
                            return i
                        }
                    },
                    drawText: function (e, t, i) {
                        var s;
                        if ("string" != typeof e ? s = e : (s = this.nodeFactory(e + this.LABEL_ID_SUFFIX, this.labelNodeType))._featureId = e, s._style = t, s._x = i.x, s._y = i.y, t.labelXOffset || t.labelYOffset) {
                            var r = isNaN(t.labelXOffset) ? 0 : t.labelXOffset,
                                n = isNaN(t.labelYOffset) ? 0 : t.labelYOffset,
                                a = this.getResolution();
                            i.move(r * a, n * a)
                        }
                        return s.parentNode !== this.textRoot && this.textRoot.appendChild(s), s
                    },
                    CLASS_NAME: "OpenLayers.Renderer.NG"
                }),
                function () {
                    var e = OpenLayers.Layer.Vector.prototype.moveTo;
                    OpenLayers.Layer.Vector.prototype.moveTo = function (t, i, s) {
                        if (OpenLayers.Renderer.NG && this.renderer instanceof OpenLayers.Renderer.NG) {
                            if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), s || this.renderer.updateDimensions(i), !this.drawn) {
                                var r;
                                this.drawn = !0;
                                for (var n = 0, a = this.features.length; n < a; n++) this.renderer.locked = n !== a - 1, r = this.features[n], this.drawFeature(r)
                            }
                        } else e.apply(this, arguments)
                    };
                    var t = OpenLayers.Layer.Vector.prototype.redraw;
                    OpenLayers.Layer.Vector.prototype.redraw = function () {
                        OpenLayers.Renderer.NG && this.renderer instanceof OpenLayers.Renderer.NG && (this.drawn = !1), t.apply(this, arguments)
                    }
                }(), OpenLayers.Renderer.SVG2 = OpenLayers.Class(OpenLayers.Renderer.NG, {
                    xmlns: "http://www.w3.org/2000/svg",
                    xlinkns: "http://www.w3.org/1999/xlink",
                    symbolMetrics: null,
                    labelNodeType: "g",
                    initialize: function (e) {
                        this.supported() && (OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments), this.symbolMetrics = {})
                    },
                    supported: function () {
                        var e = "http://www.w3.org/TR/SVG11/feature#";
                        return document.implementation && (document.implementation.hasFeature("org.w3c.svg", "1.0") || document.implementation.hasFeature(e + "SVG", "1.1") || document.implementation.hasFeature(e + "BasicStructure", "1.1"))
                    },
                    updateDimensions: function (e) {
                        OpenLayers.Renderer.NG.prototype.updateDimensions.apply(this, arguments);
                        var t = this.getResolution(),
                            i = this.extent.getWidth(),
                            s = this.extent.getHeight(),
                            r = [this.extent.left, -this.extent.top, i, s].join(" ");
                        if (this.rendererRoot.setAttributeNS(null, "viewBox", r), this.rendererRoot.setAttributeNS(null, "width", i / t), this.rendererRoot.setAttributeNS(null, "height", s / t), !0 === e) {
                            var n, a, o = this.vectorRoot.childNodes;
                            for (n = 0, a = o.length; n < a; ++n) this.setStyle(o[n]);
                            var l, h = this.textRoot.childNodes;
                            for (n = 0, a = h.length; n < a; ++n) l = h[n], this.drawText(l, l._style, new OpenLayers.Geometry.Point(l._x, l._y))
                        }
                    },
                    getNodeType: function (e, t) {
                        var i = null;
                        switch (e.CLASS_NAME) {
                            case "OpenLayers.Geometry.Point":
                                i = t.externalGraphic ? "image" : this.isComplexSymbol(t.graphicName) ? "svg" : "circle";
                                break;
                            case "OpenLayers.Geometry.Rectangle":
                                i = "rect";
                                break;
                            case "OpenLayers.Geometry.LineString":
                                i = "polyline";
                                break;
                            case "OpenLayers.Geometry.LinearRing":
                                i = "polygon";
                                break;
                            case "OpenLayers.Geometry.Polygon":
                            case "OpenLayers.Geometry.Curve":
                                i = "path"
                        }
                        return i
                    },
                    setStyle: function (e, t, i) {
                        t = t || e._style, i = i || e._options;
                        var s = this.getResolution(),
                            r = e._radius,
                            n = s;
                        if ("OpenLayers.Geometry.Point" == e._geometryClass && r) {
                            if (e.style.visibility = "", !1 === t.graphic) e.style.visibility = "hidden";
                            else if (t.externalGraphic) {
                                if (t.graphicTitle) {
                                    e.setAttributeNS(null, "title", t.graphicTitle);
                                    var a = e.getElementsByTagName("title");
                                    if (a.length > 0) a[0].firstChild.textContent = t.graphicTitle;
                                    else {
                                        var o = this.nodeFactory(null, "title");
                                        o.textContent = t.graphicTitle, e.appendChild(o)
                                    }
                                }
                                t.graphicWidth && t.graphicHeight && e.setAttributeNS(null, "preserveAspectRatio", "none");
                                var l = t.graphicWidth || t.graphicHeight,
                                    h = t.graphicHeight || t.graphicWidth;
                                l = l || 2 * t.pointRadius, h = h || 2 * t.pointRadius, l *= s, h *= s;
                                var p = null != t.graphicXOffset ? t.graphicXOffset * s : -.5 * l,
                                    u = null != t.graphicYOffset ? t.graphicYOffset * s : -.5 * h,
                                    c = t.graphicOpacity || t.fillOpacity;
                                e.setAttributeNS(null, "x", e._x + p), e.setAttributeNS(null, "y", e._y + u), e.setAttributeNS(null, "width", l), e.setAttributeNS(null, "height", h), e.setAttributeNS(this.xlinkns, "href", t.externalGraphic), e.setAttributeNS(null, "style", "opacity: " + c), e.onclick = OpenLayers.Renderer.SVG2.preventDefault
                            } else if (this.isComplexSymbol(t.graphicName)) {
                                var y = 3 * t.pointRadius * s,
                                    d = 2 * y,
                                    m = this.importSymbol(t.graphicName);
                                n = 3 * this.symbolMetrics[m.id].size / d * s;
                                var f = e.parentNode,
                                    g = e.nextSibling;
                                f && f.removeChild(e), e.firstChild && e.removeChild(e.firstChild), e.appendChild(m.firstChild.cloneNode(!0)), e.setAttributeNS(null, "viewBox", m.getAttributeNS(null, "viewBox")), e.setAttributeNS(null, "width", d), e.setAttributeNS(null, "height", d), e.setAttributeNS(null, "x", e._x - y), e.setAttributeNS(null, "y", e._y - y), g ? f.insertBefore(e, g) : f && f.appendChild(e)
                            } else e.setAttributeNS(null, "r", t.pointRadius * s);
                            var L = t.rotation;
                            if (void 0 !== L || void 0 !== e._rotation)
                                if (e._rotation = L, L |= 0, "svg" !== e.nodeName) e.setAttributeNS(null, "transform", ["rotate(", L, e._x, e._y, ")"].join(" "));
                                else {
                                    var v = this.symbolMetrics[m.id];
                                    e.firstChild.setAttributeNS(null, "transform", ["rotate(", L, v.x, v.y, ")"].join(" "))
                                }
                        }
                        return i.isFilled ? (e.setAttributeNS(null, "fill", t.fillColor), e.setAttributeNS(null, "fill-opacity", t.fillOpacity)) : e.setAttributeNS(null, "fill", "none"), i.isStroked ? (e.setAttributeNS(null, "stroke", t.strokeColor), e.setAttributeNS(null, "stroke-opacity", t.strokeOpacity), e.setAttributeNS(null, "stroke-width", t.strokeWidth * n), e.setAttributeNS(null, "stroke-linecap", t.strokeLinecap || "round"), e.setAttributeNS(null, "stroke-linejoin", "round"), t.strokeDashstyle && e.setAttributeNS(null, "stroke-dasharray", this.dashStyle(t, n))) : e.setAttributeNS(null, "stroke", "none"), t.pointerEvents && e.setAttributeNS(null, "pointer-events", t.pointerEvents), null != t.cursor && e.setAttributeNS(null, "cursor", t.cursor), e
                    },
                    dashStyle: function (e, t) {
                        var i = e.strokeWidth * t,
                            s = e.strokeDashstyle;
                        switch (s) {
                            case "solid":
                                return "none";
                            case "dot":
                                return [t, 4 * i].join();
                            case "dash":
                                return [4 * i, 4 * i].join();
                            case "dashdot":
                                return [4 * i, 4 * i, t, 4 * i].join();
                            case "longdash":
                                return [8 * i, 4 * i].join();
                            case "longdashdot":
                                return [8 * i, 4 * i, t, 4 * i].join();
                            default:
                                for (var r = OpenLayers.String.trim(s).split(/\s+/g), n = 0, a = r.length; n < a; n++) r[n] = r[n] * t;
                                return r.join()
                        }
                    },
                    createNode: function (e, t) {
                        var i = document.createElementNS(this.xmlns, e);
                        return t && i.setAttributeNS(null, "id", t), i
                    },
                    nodeTypeCompare: function (e, t) {
                        return t == e.nodeName
                    },
                    createRenderRoot: function () {
                        return this.nodeFactory(this.container.id + "_svgRoot", "svg")
                    },
                    createRoot: function (e) {
                        return this.nodeFactory(this.container.id + e, "g")
                    },
                    createDefs: function () {
                        var e = this.nodeFactory(this.container.id + "_defs", "defs");
                        return this.rendererRoot.appendChild(e), e
                    },
                    drawPoint: function (e, t) {
                        return this.drawCircle(e, t, 1)
                    },
                    drawCircle: function (e, t, i) {
                        var s = t.x,
                            r = -t.y;
                        return e.setAttributeNS(null, "cx", s), e.setAttributeNS(null, "cy", r), e._x = s, e._y = r, e._radius = i, e
                    },
                    drawLineString: function (e, t) {
                        var i = this.getComponentsString(t.components);
                        return e.setAttributeNS(null, "points", i), e
                    },
                    drawLinearRing: function (e, t) {
                        var i = this.getComponentsString(t.components);
                        return e.setAttributeNS(null, "points", i), e
                    },
                    drawPolygon: function (e, t) {
                        for (var i, s = [], r = 0, n = t.components.length; r < n; r++) s.push("M"), i = this.getComponentsString(t.components[r].components, " "), s.push(i);
                        return s.push("z"), e.setAttributeNS(null, "d", s.join(" ")), e.setAttributeNS(null, "fill-rule", "evenodd"), e
                    },
                    drawRectangle: function (e, t) {
                        return e.setAttributeNS(null, "x", t.x), e.setAttributeNS(null, "y", -t.y), e.setAttributeNS(null, "width", t.width), e.setAttributeNS(null, "height", t.height), e
                    },
                    drawText: function (e, t, i) {
                        var s = OpenLayers.Renderer.NG.prototype.drawText.apply(this, arguments),
                            r = s.firstChild || this.nodeFactory(e + this.LABEL_ID_SUFFIX + "_text", "text"),
                            n = this.getResolution();
                        r.setAttributeNS(null, "x", i.x / n), r.setAttributeNS(null, "y", -i.y / n), s.setAttributeNS(null, "transform", "scale(" + n + ")"), t.fontColor && r.setAttributeNS(null, "fill", t.fontColor), t.fontOpacity && r.setAttributeNS(null, "opacity", t.fontOpacity), t.fontFamily && r.setAttributeNS(null, "font-family", t.fontFamily), t.fontSize && r.setAttributeNS(null, "font-size", t.fontSize), t.fontWeight && r.setAttributeNS(null, "font-weight", t.fontWeight), t.fontStyle && r.setAttributeNS(null, "font-style", t.fontStyle), !0 === t.labelSelect ? (r.setAttributeNS(null, "pointer-events", "visible"), r._featureId = e) : r.setAttributeNS(null, "pointer-events", "none");
                        var a = t.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign;
                        r.setAttributeNS(null, "text-anchor", OpenLayers.Renderer.SVG2.LABEL_ALIGN[a[0]] || "middle"), !0 === OpenLayers.IS_GECKO && r.setAttributeNS(null, "dominant-baseline", OpenLayers.Renderer.SVG2.LABEL_ALIGN[a[1]] || "central");
                        for (var o = t.label.split("\n"), l = o.length; r.childNodes.length > l;) r.removeChild(r.lastChild);
                        for (var h = 0; h < l; h++) {
                            var p = r.childNodes[h] || this.nodeFactory(e + this.LABEL_ID_SUFFIX + "_tspan_" + h, "tspan");
                            if (!0 === t.labelSelect && (p._featureId = e), !1 === OpenLayers.IS_GECKO && p.setAttributeNS(null, "baseline-shift", OpenLayers.Renderer.SVG2.LABEL_VSHIFT[a[1]] || "-35%"), p.setAttribute("x", i.x / n), 0 == h) {
                                var u = OpenLayers.Renderer.SVG2.LABEL_VFACTOR[a[1]];
                                null == u && (u = -.5), p.setAttribute("dy", u * (l - 1) + "em")
                            } else p.setAttribute("dy", "1em");
                            p.textContent = "" === o[h] ? " " : o[h], p.parentNode || r.appendChild(p)
                        }
                        return r.parentNode || s.appendChild(r), s
                    },
                    getComponentsString: function (e, t) {
                        for (var i = e.length, s = new Array(i), r = 0; r < i; r++) s[r] = this.getShortString(e[r]);
                        return s.join(t || ",")
                    },
                    getShortString: function (e) {
                        return e.x + "," + -e.y
                    },
                    importSymbol: function (e) {
                        this.defs || (this.defs = this.createDefs());
                        var t = this.container.id + "-" + e,
                            i = document.getElementById(t);
                        if (null != i) return i;
                        var s = OpenLayers.Renderer.symbol[e];
                        if (!s) throw new Error(e + " is not a valid symbol name");
                        var r = this.nodeFactory(t, "symbol"),
                            n = this.nodeFactory(null, "polygon");
                        r.appendChild(n);
                        for (var a, o, l = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0), h = [], p = 0, u = s.length; p < u; p += 2) a = s[p], o = s[p + 1], l.left = Math.min(l.left, a), l.bottom = Math.min(l.bottom, o), l.right = Math.max(l.right, a), l.top = Math.max(l.top, o), h.push(a, ",", o);
                        n.setAttributeNS(null, "points", h.join(" "));
                        var c = l.getWidth(),
                            y = l.getHeight(),
                            d = [l.left - c, l.bottom - y, 3 * c, 3 * y];
                        return r.setAttributeNS(null, "viewBox", d.join(" ")), this.symbolMetrics[t] = {
                            size: Math.max(c, y),
                            x: l.getCenterLonLat().lon,
                            y: l.getCenterLonLat().lat
                        }, this.defs.appendChild(r), r
                    },
                    getFeatureIdFromEvent: function (e) {
                        var t = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);
                        if (!t) {
                            var i = e.target;
                            t = i.parentNode && i != this.rendererRoot ? i.parentNode._featureId : void 0
                        }
                        return t
                    },
                    CLASS_NAME: "OpenLayers.Renderer.SVG2"
                }), OpenLayers.Renderer.SVG2.LABEL_ALIGN = {
                    l: "start",
                    r: "end",
                    b: "bottom",
                    t: "hanging"
                }, OpenLayers.Renderer.SVG2.LABEL_VSHIFT = {
                    t: "-70%",
                    b: "0"
                }, OpenLayers.Renderer.SVG2.LABEL_VFACTOR = {
                    t: 0,
                    b: -1
                }, OpenLayers.Renderer.SVG2.preventDefault = function (e) {
                    e.preventDefault && e.preventDefault()
                }, OpenLayers.Popup.AnchoredBubble = OpenLayers.Class(OpenLayers.Popup.Anchored, {
                    rounded: !1,
                    initialize: function (e, t, i, s, r, n, a) {
                        this.padding = new OpenLayers.Bounds(0, OpenLayers.Popup.AnchoredBubble.CORNER_SIZE, 0, OpenLayers.Popup.AnchoredBubble.CORNER_SIZE), OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments)
                    },
                    draw: function (e) {
                        return OpenLayers.Popup.Anchored.prototype.draw.apply(this, arguments), this.setContentHTML(), this.setBackgroundColor(), this.setOpacity(), this.div
                    },
                    updateRelativePosition: function () {
                        this.setRicoCorners()
                    },
                    setSize: function (e) {
                        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments), this.setRicoCorners()
                    },
                    setBackgroundColor: function (e) {
                        null != e && (this.backgroundColor = e), null != this.div && null != this.contentDiv && (this.div.style.background = "transparent", OpenLayers.Rico.Corner.changeColor(this.groupDiv, this.backgroundColor))
                    },
                    setOpacity: function (e) {
                        OpenLayers.Popup.Anchored.prototype.setOpacity.call(this, e), null != this.div && null != this.groupDiv && OpenLayers.Rico.Corner.changeOpacity(this.groupDiv, this.opacity)
                    },
                    setBorder: function (e) {
                        this.border = 0
                    },
                    setRicoCorners: function () {
                        var e = {
                            corners: this.getCornersToRound(this.relativePosition),
                            color: this.backgroundColor,
                            bgColor: "transparent",
                            blend: !1
                        };
                        this.rounded ? (OpenLayers.Rico.Corner.reRound(this.groupDiv, e), this.setBackgroundColor(), this.setOpacity()) : (OpenLayers.Rico.Corner.round(this.div, e), this.rounded = !0)
                    },
                    getCornersToRound: function () {
                        var e = ["tl", "tr", "bl", "br"],
                            t = OpenLayers.Bounds.oppositeQuadrant(this.relativePosition);
                        return OpenLayers.Util.removeItem(e, t), e.join(" ")
                    },
                    CLASS_NAME: "OpenLayers.Popup.AnchoredBubble"
                }), OpenLayers.Popup.AnchoredBubble.CORNER_SIZE = 5
        },
        AtBC: function (e, t) {
            "undefined" != typeof OpenLayers && OpenLayers.Tween && OpenLayers.Tween.prototype && (OpenLayers.Tween.prototype.stop = function () {
                this.playing && (this.playing = !1, this.callbacks && this.callbacks.done && this.callbacks.done.call(this, this.finish), OpenLayers.Animation.stop(this.animationId), this.animationId = null)
            })
        },
        B9VL: function (e, t) {
            OpenLayers.Control.GPanZoomBar = OpenLayers.Class(OpenLayers.Control.PanZoomBar, {
                minZoom: 0,
                redraw: function () {
                    this.map && this.map.baseLayer && (this.minZoom = this.map.baseLayer.minZoom ? this.map.baseLayer.minZoom : 0), null != this.div && (this.removeButtons(), this._removeZoomBar()), this.draw()
                },
                draw: function (e) {
                    OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position.clone(), this.buttons = [];
                    var t = {
                        w: 26,
                        h: 26
                    };
                    if (this.panIcons) {
                        var i = new OpenLayers.Pixel(e.x + t.w / 2, e.y),
                            s = t.w;
                        this.zoomWorldIcon && (i = new OpenLayers.Pixel(e.x + t.w, e.y)), this._addButton("panup", "north-mini.png", i, t), e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), this.zoomWorldIcon && (this._addButton("zoomworld", "zoom-world-mini.png", e.add(t.w, 0), t), s *= 2), this._addButton("panright", "east-mini.png", e.add(s, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), i = this._addZoomBar(i.add(0, 4 * t.h + 5)), this._addButton("zoomout", "zoom-minus-mini.png", i, t)
                    } else {
                        if (!document.getElementById("OpenLayers_Control_PanZoomBar_BtnContainer" + this.map.id)) {
                            var r = OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_BtnContainer" + this.map.id, e.add(-3, 0), {
                                w: t.w,
                                h: 2 * t.h + 1
                            }, null, "absolute");
                            r.className = "ol-zoom-btncontainer", this.div.appendChild(r)
                        }
                        if (this._addButton("zoomin", null, e.add(-3, 0), t, "ol-zoomin ol-smooth ol-button"), !document.getElementById("OpenLayers_Control_PanZoomBar_Separator" + this.map.id)) {
                            var n = OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Separator" + this.map.id, e.add(-3, t.h), {
                                w: 27,
                                h: 1
                            }, null, "absolute");
                            n.className = "ol-zoom-separator", this.div.appendChild(n)
                        }
                        i = e.add(0, t.h + 1);
                        this._addButton("zoomout", null, i.add(-3, 0), t, "ol-zoomout ol-smooth ol-button"), i = this._addZoomBar(i.add(0, t.h + 9)), this.zoomWorldIcon && (i = i.add(0, t.h + 3), this._addButton("zoomworld", "zoom-world-mini.png", i, t))
                    }
                    return this.div
                },
                _addButton: function (e, t, i, s, r) {
                    var n = null;
                    if (r) n = OpenLayers.Util.createDiv(this.id + "_" + e, i, s, null, "absolute");
                    else {
                        var a = OpenLayers.Util.getImageLocation(t);
                        n = OpenLayers.Util.createAlphaImageDiv(this.id + "_" + e, i, s, a, "absolute")
                    }
                    return n.style.cursor = "pointer", this.div.appendChild(n), n.action = e, n.className = "olButton" + (r ? " " + r : ""), this.buttons.push(n), n
                },
                _addZoomBar: function (e) {
                    OpenLayers.Util.getImagesLocation();
                    var t = "OpenLayers_Control_PanZoomBar_Slider" + this.map.id,
                        i = this.map.getNumZoomLevels() - 1 - this.map.getZoom() - (this.map.getZoom() < this.minZoom ? this.minZoom - this.map.getZoom() : 0),
                        s = OpenLayers.Util.createDiv(t, e.add(-1, i * this.zoomStopHeight), null, null, "absolute");
                    s.className = "ol-slider ol-smooth", s.style.cursor = "move", s.style.left = parseInt(s.style.left) + 3 + "px", this.slider = s, this.sliderEvents = new OpenLayers.Events(this, s, null, !0, {
                        includeXY: !0
                    }), this.sliderEvents.on({
                        touchstart: this.zoomBarDown,
                        touchmove: this.zoomBarDrag,
                        touchend: this.zoomBarUp,
                        mousedown: this.zoomBarDown,
                        mousemove: this.zoomBarDrag,
                        mouseup: this.zoomBarUp
                    });
                    var r = new OpenLayers.Size;
                    r.h = this.zoomStopHeight * Math.max(this.map.getNumZoomLevels() - this.minZoom, 1), r.w = this.zoomStopWidth;
                    var n = null;
                    return (n = OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar" + this.map.id, e, r, null, "absolute")).className = "ol-zoombar", n.style.left = parseInt(n.style.left) + 5 + "px", n.style.backgroundSize = r.w + "px " + r.h + "px", this.zoombarDiv = n, this.divEvents = new OpenLayers.Events(this, n, null, !0, {
                        includeXY: !0
                    }), this.divEvents.on({
                        click: this.divClick
                    }), this.div.appendChild(n), this.startTop = parseInt(n.style.top), this.div.appendChild(s), this.map.events.register("zoomend", this, this.moveZoomBar), e = e.add(0, this.zoomStopHeight * Math.max(this.map.getNumZoomLevels() - this.minZoom, 1))
                },
                zoomBarDown: function (e) {
                    (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && (this.map.events.on({
                        touchmove: this.passEventToSlider,
                        mousemove: this.passEventToSlider,
                        mouseup: this.passEventToSlider,
                        scope: this
                    }), this.mouseDragStart = e.xy.clone(), this.zoomStart = e.xy.clone(), this.div.style.cursor = "move", this.zoombarDiv.offsets = null, OpenLayers.Event.stop(e), this.map.events.triggerEvent("zoomBarDown"))
                },
                zoomBarDrag: function (e) {
                    if (null != this.mouseDragStart && this.zoomStart) {
                        var t = this.mouseDragStart.y - e.xy.y,
                            i = OpenLayers.Util.pagePosition(this.zoombarDiv);
                        if (e.clientY - i[1] > 7 && e.clientY - i[1] < parseInt(this.zoombarDiv.style.height) - 5) {
                            var s = parseInt(this.slider.style.top) - t;
                            this.slider.style.top = s + "px"
                        }
                        this.mouseDragStart = e.xy.clone(), this.deltaY = this.zoomStart.y - e.xy.y, OpenLayers.Event.stop(e)
                    }
                },
                zoomBarUp: function (e) {
                    if ((OpenLayers.Event.isLeftClick(e) || "touchend" === e.type) && this.mouseDragStart) {
                        this.div.style.cursor = "", this.map.events.un({
                            touchmove: this.passEventToSlider,
                            mouseup: this.passEventToSlider,
                            mousemove: this.passEventToSlider,
                            scope: this
                        });
                        var t = this.map.zoom;
                        !this.forceFixedZoomLevel && this.map.fractionalZoom ? (t += this.deltaY / this.zoomStopHeight, t = Math.min(Math.max(t, 0), this.map.getNumZoomLevels() - 1)) : (t += this.deltaY / this.zoomStopHeight, t = Math.max(Math.round(t), 0)), t = Math.min(Math.max(t, this.minZoom), this.map.getNumZoomLevels() - 1), this.map.zoomTo(t), this.mouseDragStart = null, this.zoomStart = null, this.deltaY = 0, OpenLayers.Event.stop(e)
                    }
                },
                onButtonClick: function (e) {
                    e.buttonElement;
                    if (OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this, arguments), e.buttonElement === this.zoombarDiv) {
                        var t = e.buttonXY.y / this.zoomStopHeight;
                        !this.forceFixedZoomLevel && this.map.fractionalZoom || (t = Math.floor(t));
                        var i = this.map.getNumZoomLevels() - 1 - t;
                        i = Math.min(Math.max(i, 0), this.map.getNumZoomLevels() - 1), this.map.zoomTo(i)
                    }
                    this.map.events.triggerEvent("zoomBarBtnClick")
                },
                moveZoomBar: function () {
                    var e = (this.map.getNumZoomLevels() - 1 - Math.max(this.map.getZoom(), this.minZoom)) * this.zoomStopHeight + this.startTop - 7;
                    this.slider.style.top = e + "px", this.zoomStart && (this.zoomStart = null)
                },
                divClick: function (e) {
                    if (OpenLayers.Event.isLeftClick(e) && this.slider) {
                        e.xy.y;
                        var t = this.map.zoom,
                            i = this.slider.getBoundingClientRect();
                        this.deltaY = OpenLayers.Util.pagePosition(this.slider)[1] - e.clientY + Math.round(i.height / 2), !this.forceFixedZoomLevel && this.map.fractionalZoom ? (t += this.deltaY / this.zoomStopHeight, t = Math.min(Math.max(t, 0), this.map.getNumZoomLevels() - 1)) : (t += this.deltaY / this.zoomStopHeight, t = Math.max(Math.floor(t), 0)), t = Math.min(Math.max(t, this.minZoom), this.map.getNumZoomLevels() - 1), this.map.zoomTo(t), this.deltaY = 0, OpenLayers.Event.stop(e)
                    }
                },
                CLASS_NAME: "OpenLayers.Control.PanZoomBar"
            })
        },
        BPg0: function (e, t) {
            OpenLayers.Handler.PathEx = OpenLayers.Class(OpenLayers.Handler.Path, {
                vertices: null,
                vertices2: null,
                lastStyle: null,
                textOffset: 10,
                textStyle: {
                    fillColor: "#0000EE",
                    fillOpacity: 1,
                    hoverFillColor: "#0000EE",
                    strokeColor: "#0000EE",
                    strokeWidth: 1,
                    fontSize: 12
                },
                sliderStyle: {
                    pointRadius: 6,
                    fillColor: "#FFFFFF",
                    fillOpacity: .9,
                    strokeWidth: 1,
                    strokeOpacity: 1,
                    strokeColor: "#FF0000"
                },
                textSliderStyle: {
                    fillColor: "#000000",
                    fillOpacity: 1,
                    hoverFillColor: "#000000",
                    strokeWidth: 1,
                    fontSize: 14
                },
                vertexIndex: -1,
                vertexInsertIndex: -1,
                hoverIndex: -1,
                hoverTimeout: 300,
                hoverTimerId: null,
                fullRepaint: !1,
                centerPoint: null,
                offset: 8,
                slider: null,
                flagSlider: !1,
                countPoint: 0,
                circlesPlus: !1,
                cursorPoint: null,
                freehandToggle: null,
                initialize: function (e, t, i) {
                    OpenLayers.Handler.Path.prototype.initialize.apply(this, arguments), this.maxVertices = this.maxPoints
                },
                setCursor: function (e) {
                    this.map.div.style.cursor != e && (this.map.div.style.cursor = "" == e ? "default" : e)
                },
                intersectsLine: function (e, t, i) {
                    if (!e || !t || !i) return !1;
                    var s, r, n, a, o = e.lat,
                        l = e.lon,
                        h = t.lat,
                        p = t.lon,
                        u = i.lat,
                        c = i.lon,
                        y = {
                            lon: 0,
                            lat: 0
                        };
                    if (o == h && l == p) return y.lon = (l + p) / 2, y.lat = (o + h) / 2, new OpenLayers.LonLat(y.lon, y.lat);
                    o != h ? r = (s = (u + (n = (l - p) / (o - h)) * c - n * (a = l - o * n)) / (n * n + 1)) * n + a : s = (r = (c + (n = (o - h) / (l - p)) * u - n * (a = o - l * n)) / (n * n + 1)) * n + a;
                    y.lon = r, y.lat = s;
                    var d = !1;
                    if (s < o && s < h && (d = !0), s > o && s > h && (d = !0), r < l && r < p && (d = !0), r > l && r > p && (d = !0), !d) return new OpenLayers.LonLat(y.lon, y.lat);
                    var m = Math.sqrt((u - o) * (u - o) + (c - l) * (c - l));
                    y.lon = l, y.lat = o;
                    var f = Math.sqrt((u - h) * (u - h) + (c - p) * (c - p));
                    return f < m && (m = f, y.lon = p, y.lat = h), new OpenLayers.LonLat(y.lon, y.lat)
                },
                getFirstVerticesPoint: function () {
                    return this.vertices && this.vertices.length ? new OpenLayers.LonLat(this.vertices[0].geometry.x, this.vertices[0].geometry.y) : null
                },
                distancePoinToPoint: function (e, t) {
                    var i = e.clone(),
                        s = t.clone();
                    return i.transform(this.map.getProjectionObject(), this.map.displayProjection), s.transform(this.map.getProjectionObject(), this.map.displayProjection), OpenLayers.Util.distVincenty(i, s)
                },
                setStyle: function (e, t) {
                    if (this.style = e, this.lastStyle = t, this.fullRepaint = !0, this.vertices)
                        for (var i = null, s = this.vertices.length, r = 0, n = null; r < s; r++) i = (n = this.vertices[r]).geometry.radius, this.event_disp && "function" == typeof this.event_disp.getWidthPxFromM && (i = this.event_disp.getWidthPxFromM(new OpenLayers.LonLat(n.geometry.x, n.geometry.y), n.geometry.radius)), n.geometry.zoom_radius = i;
                    this.drawFeature()
                },
                createFeature: function (e) {
                    this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString), this.point = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point), this.cursorPoint = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point), this.point.geometry.clearBounds(), this.circlesPlus && (this.centerPoint = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point)), this.vertices = new Array, this.circlesPlus && (this.vertices2 = new Array)
                },
                setPointText: function (e, t) {
                    e < this.vertices.length && (this.vertices[e].text.geometry.text = t, this.vertices[e].text.geometry.draw = !1, this.drawFeature())
                },
                movePoint: function (e, t) {
                    if (e < this.vertices.length && t < this.vertices.length && e != t) {
                        var i = this.vertices[e],
                            s = this.line.geometry.components[e];
                        if (t > e)
                            for (var r = e; r < t; r++) this.vertices[r] = this.vertices[r + 1], this.line.geometry.components[r] = this.line.geometry.components[r + 1];
                        else
                            for (r = e; r > t; r--) this.vertices[r] = this.vertices[r - 1], this.line.geometry.components[r] = this.line.geometry.components[r - 1];
                        this.vertices[t] = i, this.line.geometry.components[t] = s, this.drawFeature()
                    }
                },
                setPointTextWithoutRedraw: function (e, t) {
                    e < this.vertices.length && (this.vertices[e].text.geometry.text = t, this.vertices[e].text.geometry.draw = !1)
                },
                setPointRadius: function (e, t, i, s, r) {
                    if (e < this.vertices.length) {
                        var n = t; - 1 != t && this.event_disp && "function" == typeof this.event_disp.getWidthPxFromM && (n = this.event_disp.getWidthPxFromM(new OpenLayers.LonLat(i, s), t)), this.vertices[e].geometry.radius = t, this.vertices[e].geometry.zoom_radius = 2 * n, i && s && (this.vertices[e].lonlat = new OpenLayers.LonLat(i, s)), r || this.drawFeature()
                    }
                },
                getPointRadius: function (e) {
                    if (e < this.vertices.length) return this.vertices[e].geometry.radius
                },
                deletePoint: function (e) {
                    this.vertexIndex = e, this.removePoint()
                },
                destroyFeature: function () {
                    if (OpenLayers.Handler.Path.prototype.destroyFeature.apply(this), this.vertices) {
                        for (i = 0; i < this.vertices.length; i++) this.vertices[i].destroy();
                        this.vertices = null
                    }
                    if (this.circlesPlus && this.vertices2) {
                        for (i = 0; i < this.vertices2.length; i++) this.vertices2[i].destroy();
                        this.vertices2 = null
                    }
                },
                modifyFeature: function (e, t) {
                    this.line || this.createFeature(e);
                    var i = this.map.fixPoint(this.layer.getLonLatFromViewPortPx(e), this.getFirstVerticesPoint());
                    if (this.point.geometry.x = i.lon, this.point.geometry.y = i.lat, this.point.geometry.clearBounds(), -1 != this.vertexIndex && this.line && this.vertices && this.line.geometry.components.length && this.vertices.length && !(this.line.geometry.components.length < this.vertices.length)) {
                        var s = this.point.geometry.x,
                            r = this.point.geometry.y;
                        this.line.geometry.components[this.vertexIndex].x = s, this.line.geometry.components[this.vertexIndex].y = r, this.line.geometry.components[this.vertexIndex].clearBounds(), this.vertices[this.vertexIndex].geometry.x = s, this.vertices[this.vertexIndex].geometry.y = r, this.circlesPlus && (this.vertices2[this.vertexIndex].geometry.x = s, this.vertices2[this.vertexIndex].geometry.y = r), this.drawFeature()
                    }
                },
                drawFeature: function () {
                    var e = this;
                    if (this.layer) {
                        if (this.lastStyle || (this.lastStyle = this.style), this.line && this.style && this.layer.drawFeature(this.line, this.style), this.vertices) {
                            for (var t = 0; t < this.vertices.length; t++) {
                                var i, s, r, n;
                                a = null, a = t == e.vertices.length - 1 ? e.lastStyle : e.style, i = a.strokeWidth, void 0 !== e.vertices[t].geometry.radius && e.vertices[t].geometry.radius > 0 && ((s = e.vertices[t].geometry.zoom_radius - a.pointRadius) < 2 && (s = 2), a.strokeWidth = s + "px"), r = a.fillColor, e.circlesPlus && (a.fillColor = a.strokeColor, a.fillOpacity = a.strokeOpacity), e.layer.drawFeature(e.vertices[t], a), n = function e(t) {
                                    if (!t || "object" != typeof t) return t;
                                    var i, s, r = "function" == typeof t.pop ? [] : {};
                                    for (i in t) t.hasOwnProperty(i) && (s = t[i], r[i] = s && "object" == typeof s ? e(s) : s);
                                    return r
                                }(a), e.circlesPlus && (n.pointRadius = 4, n.strokeColor = "#FDC689", n.strokeWidth = 1, e.centerPoint.geometry.x = e.vertices[t].geometry.x, e.centerPoint.geometry.y = e.vertices[t].geometry.y, e.layer.drawFeature(e.centerPoint, n)), e.circlesPlus && (a.fillColor = r), a.strokeWidth = i, e.vertices[t].text.geometry.draw && !e.fullRepaint || (e.vertices[t].text.geometry.x = e.vertices[t].geometry.x + e.textOffset, e.vertices[t].text.geometry.y = e.vertices[t].geometry.y, e.layer.drawFeature(e.vertices[t].text, e.textStyle), e.vertices[t].text.geometry.draw = !0)
                            }
                            this.fullRepaint = !1
                        }
                        if (this.circlesPlus && this.vertices2 && this.vertices2.length) {
                            var a;
                            (a = OpenLayers.Util.extend({}, this.lastStyle)).strokeWidth = "2px", a.strokeOpacity = 1, a.strokeColor = a.fillColor;
                            for (t = 0; t < this.vertices2.length; t++) void 0 !== this.vertices[t].geometry.radius && this.vertices[t].geometry.radius > 0 ? a.fillOpacity = 1 : a.fillOpacity = 0, this.layer.drawFeature(this.vertices2[t], a)
                        }
                        2 == this.countPoint && this.slider && (this.layer.drawFeature(this.slider, this.sliderStyle), this.layer.drawFeature(this.slider.text, this.textSliderStyle))
                    }
                },
                setSliderText: function (e) {
                    this.slider.text.geometry.text = e, this.slider.text.geometry.draw = !1, this.drawFeature()
                },
                resetSlider: function () {
                    this.event_disp && "function" == typeof this.event_disp.slider_calc_len && this.slider && (this.slider.geometry.x = this.vertices[0].geometry.x, this.slider.geometry.y = this.vertices[0].geometry.y, void 0 !== this.slider.text && (this.slider.text.geometry.draw = !1), this.slider.text.geometry.text = "")
                },
                addSlider: function () {
                    this.event_disp && "function" == typeof this.event_disp.slider_calc_len && this.vertices && (this.slider = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point), this.slider.geometry.x = this.vertices[0].geometry.x, this.slider.geometry.y = this.vertices[0].geometry.y, this.slider.text = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Text), this.slider.text.geometry.x = this.slider.geometry.x + this.textOffset, this.slider.text.geometry.y = this.slider.geometry.y + this.textOffset, this.slider.text.geometry.text = "", this.slider.text.geometry.text.draw = !1, this.flagSlider = !0)
                },
                moveSlider: function (e) {
                    if (this.event_disp && "function" == typeof this.event_disp.slider_calc_len) {
                        if (!this.slider) return;
                        var t = new OpenLayers.LonLat(e.geometry.x, e.geometry.y),
                            i = 0,
                            s = 0,
                            r = new OpenLayers.LonLat(this.vertices[0].geometry.x, this.vertices[0].geometry.y),
                            n = new OpenLayers.LonLat(this.vertices[1].geometry.x, this.vertices[1].geometry.y),
                            a = this.intersectsLine(r, n, t);
                        a && (i = this.distancePoinToPoint(t, a), this.slider.geometry.x = a.lon, this.slider.geometry.y = a.lat);
                        for (var o = 0; o < this.vertices.length - 1; ++o)
                            if (r = new OpenLayers.LonLat(this.vertices[o].geometry.x, this.vertices[o].geometry.y), n = new OpenLayers.LonLat(this.vertices[o + 1].geometry.x, this.vertices[o + 1].geometry.y), a = this.intersectsLine(r, n, t)) {
                                var l = this.distancePoinToPoint(t, a);
                                i > l && (i = l, s = o, this.slider.geometry.x = a.lon, this.slider.geometry.y = a.lat)
                            } this.slider.text.geometry.x = this.slider.geometry.x + this.textOffset, this.slider.text.geometry.y = this.slider.geometry.y + this.textOffset, this.event_disp.slider_calc_len(s, this.vertices, this.slider)
                    }
                },
                setPoints: function (e) {
                    if (e && e.length) {
                        this.destroyFeature(), this.createFeature(), e = this.map.fixPoints(e, {
                            lonName: "x"
                        }), this.line.geometry.addComponents(e);
                        for (var t = null, i = null, s = 0; s < this.line.geometry.components.length; s++)(t = new OpenLayers.Feature.Vector(this.line.geometry.components[s].clone())).lonlat = new OpenLayers.LonLat(this.line.geometry.components[s].x, this.line.geometry.components[s].y), t.text = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Text), t.text.geometry.text = "", t.text.geometry.text.draw = !1, this.vertices.push(t), this.circlesPlus && (i = new OpenLayers.Feature.Vector(this.line.geometry.components[s].clone()), this.vertices2.push(i));
                        this.drawFeature()
                    }
                },
                getPoints: function () {
                    if (this.line) {
                        for (var e = new Array, t = 0; t < this.line.geometry.components.length; t++) e.push(this.line.geometry.components[t].clone());
                        return e
                    }
                    return null
                },
                drawPoint: function () {
                    this.layer.drawFeature(this.point, this.style)
                },
                addPoint: function (e, t, i, s, r, n) {
                    this.point && this.layer.removeFeatures([this.point]);
                    var a = this.layer.getLonLatFromViewPortPx(e);
                    s && r && this.point && (a = new OpenLayers.LonLat(this.point.geometry.x, this.point.geometry.y)), a = this.map.fixPoint(a, this.getFirstVerticesPoint()), this.point = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a.lon, a.lat)), this.callback("point", [this.point.geometry, this.getGeometry()]), this.callback("modify", [this.point.geometry, this.getSketch()]), delete this.redoStack, this.line && this.point && this.line.geometry.addComponent(this.point.geometry.clone(), this.line.geometry.components.length), this.vertices || (this.vertices = new Array), this.circlesPlus && !this.vertices2 && (this.vertices2 = new Array);
                    var o = new OpenLayers.Feature.Vector(this.point.geometry.clone());
                    if (o.text = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Text), o.text.geometry.text = t || "", o.text.geometry.text.draw = !1, this.vertices.push(o), this.circlesPlus && this.vertices2) {
                        var l = new OpenLayers.Feature.Vector(this.point.geometry.clone());
                        this.vertices2.push(l)
                    }
                    var h = this.vertices.length - 1;
                    if (i) {
                        var p = i; - 1 != i && this.event_disp && "function" == typeof this.event_disp.getWidthPxFromM && (p = this.event_disp.getWidthPxFromM(new OpenLayers.LonLat(a.lon, a.lat), i)), this.vertices[h].geometry.radius = i, this.vertices[h].geometry.zoom_radius = 2 * p
                    }
                    this.callback("point", [this.point.geometry]), this.event_disp && "function" == typeof this.event_disp.on_point_add && this.event_disp.on_point_add(t, h, a.lon, a.lat, n)
                },
                createPoint: function (e, t, i, s, r) {
                    this.point || this.line || this.createFeature();
                    var n = new OpenLayers.LonLat(t, e);
                    this.point && (n.transform(this.map.displayProjection, this.map.getProjectionObject()), this.point.geometry.x = n.lon, this.point.geometry.y = n.lat);
                    var a = this.map.getPixelFromLonLat(n);
                    this.addPoint(a, i, s, t, e, r)
                },
                insertPoint: function (e) {
                    var t = this.vertexInsertIndex;
                    if (!(t < 0)) {
                        if (e) {
                            var i = this.map.fixPoint(this.layer.getLonLatFromViewPortPx(e), this.getFirstVerticesPoint()),
                                s = new OpenLayers.Geometry.Point(i.lon, i.lat);
                            this.point = new OpenLayers.Feature.Vector(s)
                        }
                        if (this.line && this.point) {
                            this.line.geometry.addComponent(this.point.geometry.clone(), t + 1);
                            var r = new OpenLayers.Feature.Vector(this.point.geometry.clone()),
                                n = null;
                            this.circlesPlus && (n = new OpenLayers.Feature.Vector(this.point.geometry.clone()));
                            i = new OpenLayers.LonLat(this.point.geometry.x, this.point.geometry.y);
                            if (r.text = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Text), r.text.geometry.text = "", r.text.geometry.text.draw = !1, t < this.vertices.length) {
                                var a = this.vertices.slice(0, t + 1),
                                    o = this.vertices.slice(t + 1, this.vertices.length);
                                a.push(r), this.vertices = a.concat(o), this.circlesPlus && this.vertices2 && (a = this.vertices2.slice(0, t + 1), o = this.vertices2.slice(t + 1, this.vertices2.length), a.push(n), this.vertices2 = a.concat(o))
                            } else this.vertices.push(r), this.circlesPlus && this.vertices2 && this.vertices2.push(n);
                            this.callback("point", [this.point.geometry]), this.event_disp && "function" == typeof this.event_disp.on_point_insert && this.event_disp.on_point_insert(t, i.lon, i.lat)
                        }
                    }
                },
                removePoint: function () {
                    -1 == this.vertexIndex || !this.line || !this.vertices || this.line.geometry.components.length <= 2 || this.vertices.length <= 2 || this.line.geometry.components.length < this.vertices.length || (this.line.geometry.removeComponent(this.line.geometry.components[this.vertexIndex]), this.layer.removeFeatures([this.vertices[this.vertexIndex]]), this.layer.removeFeatures([this.vertices[this.vertexIndex].text]), this.vertices.splice(this.vertexIndex, 1), this.circlesPlus && this.vertices2 && (this.layer.removeFeatures([this.vertices2[this.vertexIndex]]), this.vertices2.splice(this.vertexIndex, 1)), this.event_disp && "function" == typeof this.event_disp.on_point_remove && this.event_disp.on_point_remove(this.vertexIndex), this.vertexIndex = -1, this.drawFeature())
                },
                hittestPoint: function () {
                    var e = OpenLayers.Handler.PathEx.HIT_NONE;
                    if (this.vertexIndex = -1, this.vertexInsertIndex = -1, !this.cursorPoint || !this.vertices) return e;
                    for (var t = this.map.fixPoint(new OpenLayers.LonLat(this.cursorPoint.geometry.x, this.cursorPoint.geometry.y), this.getFirstVerticesPoint()), i = this.map.getPixelFromLonLat(t), s = null, r = null, n = null, a = 0, o = this.vertices.length; a < o; a++) {
                        if (r = this.map.fixPoint(new OpenLayers.LonLat(this.vertices[a].geometry.x, this.vertices[a].geometry.y), t), n = this.map.getPixelFromLonLat(r), new OpenLayers.Bounds(n.x - this.offset, n.y - this.offset, n.x + this.offset, n.y + this.offset).containsPixel(i)) {
                            this.vertexIndex = a, e = OpenLayers.Handler.PathEx.HIT_POINT;
                            break
                        }
                        if (0 != a && s && r) {
                            var l = this.intersectsLine(s, r, t),
                                h = this.map.getPixelFromLonLat(l);
                            if (new OpenLayers.Bounds(h.x - this.offset, h.y - this.offset, h.x + this.offset, h.y + this.offset).containsPixel(i)) {
                                this.vertexInsertIndex = a - 1, e = OpenLayers.Handler.PathEx.HIT_LINE;
                                break
                            }
                        }
                        s = r
                    }
                    if (e == OpenLayers.Handler.PathEx.HIT_NONE && this.vertices.length >= 2 && (s = this.map.fixPoint(new OpenLayers.LonLat(this.vertices[0].geometry.x, this.vertices[0].geometry.y), t), r = this.map.fixPoint(new OpenLayers.LonLat(this.vertices[this.vertices.length - 1].geometry.x, this.vertices[this.vertices.length - 1].geometry.y), t), s && r)) {
                        l = this.intersectsLine(s, r, t), h = this.map.getPixelFromLonLat(l);
                        new OpenLayers.Bounds(h.x - this.offset, h.y - this.offset, h.x + this.offset, h.y + this.offset).containsPixel(i) && (this.vertexInsertIndex = this.vertices.length - 1, e = OpenLayers.Handler.PathEx.HIT_LINE)
                    }
                    return e
                },
                isVertex: function () {
                    return -1 != this.vertexIndex
                },
                isInsertVertex: function () {
                    return -1 != this.vertexInsertIndex
                },
                geometryClone: function () {
                    return !!this.line && this.line.geometry.clone()
                },
                touchstart: function (e) {
                    return this.timerId && this.passesTolerance(this.lastTouchPx, e.xy, this.doubleTouchTolerance) ? (this.dblclick(e), window.clearTimeout(this.timerId), this.timerId = null, !1) : (this.timerId && (window.clearTimeout(this.timerId), this.timerId = null), this.timerId = window.setTimeout(OpenLayers.Function.bind((function () {
                        this.timerId = null
                    }), this), 300), OpenLayers.Handler.Point.prototype.touchstart.call(this, e))
                },
                down: function (e) {
                    var t = this.stopDown;
                    if (this.freehandMode(e) && (t = !0, this.touch && (this.modifyFeature(e.xy, !!this.lastUp), OpenLayers.Event.stop(e))), this.lastDown && this.lastDown.equals(e.xy)) return !0;
                    if (this.mouseDown = !0, this.lastDown = e.xy, this.stoppedDown = t, this.point || this.line || this.createFeature(e.xy), this.touch) {
                        if (this.point) {
                            var i = this.map.getLonLatFromPixel(e.xy);
                            this.cursorPoint.geometry.x = i.lon, this.cursorPoint.geometry.y = i.lat
                        }
                        this.hittestPoint()
                    }
                    return !t
                },
                move: function (e) {
                    if (this.stoppedDown && this.freehandMode(e)) return this.persist && this.destroyPersistedFeature(), this.maxVertices && this.line && this.line.geometry.components.length === this.maxVertices ? (this.removePoint(), this.finalize()) : this.addPoint(e.xy), !1;
                    var t = this.map.fixPoint(this.layer.getLonLatFromViewPortPx(e.xy), this.getFirstVerticesPoint());
                    if (this.cursorPoint && t && (this.cursorPoint.geometry.x = t.lon, this.cursorPoint.geometry.y = t.lat), !this.touch && this.mouseDown && !this.stoppedDown || this.touch && this.mouseDown && !this.stoppedDown) {
                        if (this.isVertex()) return this.modifyFeature(e.xy, !!this.lastUp), !1
                    } else this.event_disp && "function" == typeof this.event_disp.on_mouse_move && this.event_disp.on_mouse_move(e.xy, t), res = this.hittestPoint(), res == OpenLayers.Handler.PathEx.HIT_NONE ? this.setCursor("default") : res == OpenLayers.Handler.PathEx.HIT_POINT ? (0 == this.flagSlider && 2 == this.countPoint && this.resetSlider(), this.setCursor("pointer"), -1 != this.hoverIndex && this.hoverIndex == this.vertexIndex || (this.hoverTimerId && window.clearTimeout(this.hoverTimerId), this.hoverTimerId = window.setTimeout(OpenLayers.Function.bind(this.on_hover, this), this.hoverTimeout))) : res == OpenLayers.Handler.PathEx.HIT_LINE && (this.setCursor("crosshair"), this.moveSlider(this.cursorPoint));
                    return -1 == this.vertexIndex && this.hoverTimerId && this.reset_hover(), !0
                },
                up: function (e) {
                    return !this.mouseDown || this.lastUp && this.lastUp.equals(e.xy) || (this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), this.removePoint(), this.finalize()) : this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) && (null == this.lastUp && this.persist && this.destroyPersistedFeature(), this.lastUp = e.xy, this.line.geometry.components.length === this.maxVertices + 1 && this.finishGeometry())), this.stoppedDown = this.stopDown, this.mouseDown = !1, this.fullRepaint = !0, this.isVertex() && (void 0 !== this.vertices[this.vertexIndex].text && (this.vertices[this.vertexIndex].text.geometry.draw = !1), this.drawFeature(), this.event_disp && "function" == typeof this.event_disp.on_point_modified && this.event_disp.on_point_modified(this.vertexIndex, this.vertices[this.vertexIndex].geometry.x, this.vertices[this.vertexIndex].geometry.y)), !this.stopUp
                },
                on_hover: function () {
                    this.hoverTimerId = null, -1 != this.vertexIndex && (this.hoverIndex = this.vertexIndex, this.event_disp && "function" == typeof this.event_disp.on_point_hover && this.event_disp.on_point_hover(this.hoverIndex, this.vertices[this.hoverIndex].geometry.x, this.vertices[this.hoverIndex].geometry.y))
                },
                reset_hover: function () {
                    this.hoverTimerId && (window.clearTimeout(this.hoverTimerId), this.hoverTimerId = null), -1 != this.hoverIndex && (this.event_disp && "function" == typeof this.event_disp.on_point_hover && this.event_disp.on_point_hover(-1), this.hoverIndex = -1)
                },
                dblclick: function (e) {
                    return this.reset_hover(), this.isVertex() ? (this.removePoint(), this.resetSlider()) : (!this.vertices || !this.maxPoints || this.vertices.length < this.maxPoints) && (this.isInsertVertex() ? (this.insertPoint(e.xy), !1 === this.flagSlider && this.countPoint < 2 && this.countPoint++) : (this.addPoint(e.xy), 0 == this.flagSlider && this.countPoint < 2 && this.countPoint++, 0 != this.flagSlider || 2 != this.countPoint || this.touch || this.addSlider())), "function" == typeof this.event_disp.on_double_click && this.event_disp.on_double_click(), this.drawFeature(), this.drawing = !0, !1
                },
                CLASS_NAME: "OpenLayers.Handler.PathEx"
            }), OpenLayers.Handler.PathEx.HIT_NONE = 0, OpenLayers.Handler.PathEx.HIT_POINT = 1, OpenLayers.Handler.PathEx.HIT_LINE = 2
        },
        Caz9: function (e, t) {
            OpenLayers.Layer.WebGIS = OpenLayers.Class.create(), OpenLayers.Layer.WebGIS.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                map_tags: "",
                res_name: "/gis_render",
                img_name: "tile",
                compress_url: !1,
                url: "",
                urls: [],
                minZoom: 4,
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments);
                    var r = this.url.split(",");
                    if (r.length >= 2) {
                        for (var n = 0; n < r.length; n++) this.urls.push(r[n]);
                        this.url = r[0]
                    }
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > 18) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = this.url;
                    if (this.urls.length >= 2) {
                        var o = i % this.urls.length;
                        a = this.urls[Math.floor(o)]
                    }
                    return a += this.res_name + "/" + i + "_" + s + "_" + (17 - r) + "/" + this.img_name + ".png", this.compress_url || (a += "?tags=" + this.map_tags), a
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.WebGIS(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                requestCopyrightData: function (e, t) {
                    var i = e.viewport,
                        s = e.zoom,
                        r = !1;
                    return wialon.util.Gis.copyright(i.topLeftLat, i.topLeftLon, i.bottomRightLat, i.bottomRightLon, s, (function (e, i) {
                        r || (!e && i && void 0 !== i.copyright ? t(null, {
                            html: i.copyright
                        }) : t({
                            code: e,
                            data: i
                        }))
                    })), {
                        cancel: function () {
                            r = !0
                        }
                    }
                },
                CLASS_NAME: "OpenLayers.Layer.WebGIS"
            }), void 0 !== OpenLayers.Control.Permalink && (OpenLayers.Control.Permalink.prototype.updateLink2 = function () {
                var e = this.map.getCenter(),
                    t = this.map.getZoom();
                if (e) {
                    var i = this.base; - 1 != i.indexOf("?") && (i = i.substring(0, i.indexOf("?")));
                    var s = e.lat,
                        r = e.lon;
                    if (this.displayProjection) {
                        var n = OpenLayers.Projection.transform({
                            x: r,
                            y: s
                        }, this.map.getProjectionObject(), this.displayProjection);
                        r = n.x, s = n.y
                    }
                    s = Math.round(1e5 * s) / 1e5, r = Math.round(1e5 * r) / 1e5;
                    var a = {};
                    "file:" != document.location.protocol && (a = OpenLayers.Util.getArgs());
                    var o = a.tags ? a.tags : "";
                    this.element.href = i + "?clat=" + s + "&clon=" + r + "&zoom=" + t + ("" != o ? "&tags=" + o : "")
                }
            }, OpenLayers.Control.Permalink.prototype.draw = function () {
                return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.div.className = this.displayClass, this.element = document.createElement("a"), this.element.style.fontSize = "smaller", this.element.innerHTML = "Link to this location", this.element.href = "", this.div.appendChild(this.element)), this.map.events.register("moveend", this, this.updateLink2), this.map.events.register("changelayer", this, this.updateLink2), this.map.events.register("changebaselayer", this, this.updateLink2), this.div
            }), void 0 !== OpenLayers.Control.MousePosition && (OpenLayers.Control.MousePosition.prototype.formatOutput = function (e) {
                if ("undefined" != typeof WialonHosting && WialonHosting.Map && WialonHosting.Map.getMouseCoordinatesHtml) return WialonHosting.Map.getMouseCoordinatesHtml(e);
                if ("undefined" != typeof wialon) {
                    if (void 0 !== wialon.util.Geometry.getCoord) return wialon.util.Geometry.getCoord(e.lat, 2, 4, "N", "S") + " : " + wialon.util.Geometry.getCoord(e.lon, 3, 4, "E", "W")
                } else if ("undefined" != typeof sprintf) return sprintf("%.6f, %.6f", e.lat, e.lon);
                return e.lat + ", " + e.lon
            }), window.webgis_map_options = function (e) {
                return "object" != typeof e && (e = new Object), e.maxExtent = new OpenLayers.Bounds(-20037508.3427892, -20037508.3427892, 20037508.3427892, 20037508.3427892), e.numZoomLevels = 19, e.maxResolution = 156543.03390625, e.units = "m", e.projection = "EPSG:900913", e.displayProjection = new OpenLayers.Projection("EPSG:4326"), e.fallThrough = !0, e
            }
        },
        DAws: function (e, t) {
            OpenLayers.Feature.Vector.style = {
                default: {
                    fillColor: "#ee9900",
                    fillOpacity: .4,
                    hoverFillColor: "white",
                    hoverFillOpacity: .8,
                    strokeColor: "#ee9900",
                    strokeOpacity: 1,
                    strokeWidth: 1,
                    strokeLinecap: "round",
                    hoverStrokeColor: "red",
                    hoverStrokeOpacity: 1,
                    hoverStrokeWidth: .2,
                    pointRadius: 6,
                    hoverPointRadius: 1,
                    hoverPointUnit: "%",
                    pointerEvents: "visiblePainted",
                    cursor: "",
                    labelOutlineColor: "white",
                    labelOutlineWidth: 0
                },
                select: {
                    fillColor: "blue",
                    fillOpacity: .4,
                    hoverFillColor: "white",
                    hoverFillOpacity: .8,
                    strokeColor: "blue",
                    strokeOpacity: 1,
                    strokeWidth: 2,
                    strokeLinecap: "round",
                    hoverStrokeColor: "red",
                    hoverStrokeOpacity: 1,
                    hoverStrokeWidth: .2,
                    pointRadius: 6,
                    hoverPointRadius: 1,
                    hoverPointUnit: "%",
                    pointerEvents: "visiblePainted",
                    cursor: "pointer",
                    labelOutlineColor: "white",
                    labelOutlineWidth: 0
                },
                temporary: {
                    fillColor: "yellow",
                    fillOpacity: .2,
                    hoverFillColor: "white",
                    hoverFillOpacity: .8,
                    strokeColor: "yellow",
                    strokeOpacity: 1,
                    strokeLinecap: "round",
                    strokeWidth: 4,
                    hoverStrokeColor: "red",
                    hoverStrokeOpacity: 1,
                    hoverStrokeWidth: .2,
                    pointRadius: 6,
                    hoverPointRadius: 1,
                    hoverPointUnit: "%",
                    pointerEvents: "visiblePainted",
                    cursor: "",
                    labelOutlineColor: "white",
                    labelOutlineWidth: 0
                }
            }
        },
        IiHV: function (e, t) {
            OpenLayers.Geometry.LinearRing = OpenLayers.Class(OpenLayers.Geometry.LineString, {
                componentTypes: ["OpenLayers.Geometry.Point"],
                initialize: function (e) {
                    OpenLayers.Geometry.LineString.prototype.initialize.apply(this, arguments)
                },
                addComponent: function (e, t) {
                    var i = !1,
                        s = this.components.pop();
                    null == t && e.equals(s) || (i = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, arguments));
                    var r = this.components[0];
                    return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [r]), i
                },
                removeComponent: function (e) {
                    if (this.components.length > 4) {
                        this.components.pop(), OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments);
                        var t = this.components[0];
                        OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [t])
                    }
                },
                move: function (e, t) {
                    for (var i = 0; i < this.components.length - 1; i++) this.components[i].move(e, t)
                },
                rotate: function (e, t) {
                    for (var i = 0; i < this.components.length - 1; ++i) this.components[i].rotate(e, t)
                },
                resize: function (e, t, i) {
                    for (var s = 0; s < this.components.length - 1; ++s) this.components[s].resize(e, t, i)
                },
                transform: function (e, t) {
                    if (e && t)
                        for (var i = 0; i < this.components.length - 1; i++) {
                            this.components[i].transform(e, t)
                        }
                    return this
                },
                getArea: function () {
                    return this.components && this.components.length > 2 ? OpenLayers.Geometry.Area.area(this.components) : 0
                },
                containsPoint: function (e) {
                    var t = OpenLayers.Number.limitSigDigs,
                        i = t(e.x, 14),
                        s = t(e.y, 14);

                    function r(e, t, i, s, r) {
                        return ((t - s) * e + (s * i - t * r)) / (i - r)
                    }
                    for (var n, a, o, l, h, p, u, c = this.components.length - 1, y = 0, d = 0; d < c; ++d)
                        if (o = t((n = this.components[d]).x, 14), l = t(n.y, 14), h = t((a = this.components[d + 1]).x, 14), l != (p = t(a.y, 14))) {
                            if ((u = t(r(s, o, l, h, p), 14)) == i && (l < p && s >= l && s <= p || l > p && s <= l && s >= p)) {
                                y = -1;
                                break
                            }
                            u <= i || o != h && (u < Math.min(o, h) || u > Math.max(o, h)) || (l < p && s >= l && s < p || l > p && s < l && s >= p) && ++y
                        } else if (s == l && (o <= h && i >= o && i <= h || o >= h && i <= o && i >= h)) {
                        y = -1;
                        break
                    }
                    return -1 == y ? 1 : !!(1 & y)
                },
                intersects: function (e) {
                    var t = !1;
                    if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) t = this.containsPoint(e);
                    else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME) t = e.intersects(this);
                    else if ("OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) t = OpenLayers.Geometry.LineString.prototype.intersects.apply(this, [e]);
                    else
                        for (var i = 0; i < e.components.length && !(t = e.components[i].intersects(this)); ++i);
                    return t
                },
                CLASS_NAME: "OpenLayers.Geometry.LinearRing"
            })
        },
        Ivbm: function (e, t) {
            OpenLayers.Layer.Kosmosnimki = OpenLayers.Class.create(), OpenLayers.Layer.Kosmosnimki.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                url: "",
                url_params: "",
                initialize: function (e, t, i, s) {
                    this.url = t, this.url_params = i, OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments)
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = "";
                    return r < 1 || r > 17 || -1 == i || -1 == s ? n : (this.url && this.url_params && (n = this.url, n += "&LayerName=" + this.url_params.layer_type + "&apikey=" + this.url_params.key, n += "&z=" + r + "&y=" + s + "&x=" + i), n)
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Kosmosnimki(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.url, e
                },
                CLASS_NAME: "OpenLayers.Layer.Kosmosnimki"
            })
        },
        Iy5n: function (e, t) {
            OpenLayers.Control.LayersControl = OpenLayers.Class(OpenLayers.Control, {
                lModules: ["monitoring", "routes", "messages", "reports_ctl", "geozones", "plots", "cultivations", "routesctrl", "drivers", "trailers", "tags"],
                activeLayers: {},
                layersCallbacks: {},
                translation: {},
                commonCallback: null,
                draw: function (e) {
                    return null == this.div && (!e && this.position ? e = this.position.clone() : e || (e = new OpenLayers.Pixel(10, 20)), this.div = OpenLayers.Util.createDiv("OpenLayers_Control_Layers_" + this.map.id, e, null, null, "absolute"), this.addButton(), this.addMenu(), this.bindEvents()), null != e && (this.position = e.clone()), this.moveTo(this.position), this.div
                },
                addButton: function () {
                    var e = OpenLayers.Util.createDiv("OpenLayers_Control_Layers_Btn_" + this.map.id, new OpenLayers.Pixel(0, 0), null, null, "absolute");
                    e.className = this.displayClass + " ol-layers ol-smooth ol-button", this.div.appendChild(e);
                    var t = this;
                    jQuery(e).on("mouseenter", (function () {
                        jQuery.Tooltip.show({
                            bodyHandler: function () {
                                return t.translation.layers_ctrl || ""
                            }
                        })
                    })).on("mouseleave", (function () {
                        jQuery.Tooltip.hide()
                    }))
                },
                addMenu: function () {
                    var e = !1,
                        t = sdk.u.getCustomProperty("hbacit", "null");
                    t.indexOf("horizontalbar_menu_item_") >= 0 && (t = t.replace(/horizontalbar_menu_item_/g, "hb_mi_")), t.indexOf("layer") >= 0 && (t = t.replace(/\"layer\"\:true/g, '"l":1'));
                    var i = null;
                    try {
                        "object" != typeof (i = JSON.parse(t)) && (i = null)
                    } catch (e) {
                        i = null
                    }
                    for (var s in null === i && (e = !0, i = {}), i) i[s] && "l" in i[s] && (this.activeLayers[s.substring(6)] = i[s].l ? 1 : 0);
                    var r = this,
                        n = "",
                        a = "<div class='ol-hmenu-triangle'></div><div class='ol-hmenu'>";
                    for (s = 0; s < this.lModules.length; s++) {
                        var o = this.lModules[s],
                            l = !1;
                        switch ("messages" == o ? 1 === WebCMS.get_service_limit("messages") && (l = !0) : "reports_ctl" == o ? WebCMS.get_service_limit("reporttemplates") && (l = !0) : "routesctrl" == o ? WebCMS.get_service_limit("avl_route") && (l = !0) : available_modules && available_modules[o] && o in this.activeLayers && (l = !0), e && (this.activeLayers[o] = l ? 1 : 0), o) {
                            case "monitoring":
                                n = r.translation.monitoring;
                                break;
                            case "routes":
                                n = r.translation.routes;
                                break;
                            case "messages":
                                n = r.translation.messages;
                                break;
                            case "reports_ctl":
                                n = r.translation.reports_ctl;
                                break;
                            case "plots":
                                n = r.translation.plots;
                                break;
                            case "geozones":
                                n = r.translation.geozones;
                                break;
                            case "cultivations":
                                n = r.translation.cultivations;
                                break;
                            case "routesctrl":
                                n = r.translation.routesctrl;
                                break;
                            case "drivers":
                                n = r.translation.drivers;
                                break;
                            case "trailers":
                                n = r.translation.trailers;
                                break;
                            case "tags":
                                n = r.translation.tags
                        }
                        a += "<div class='ol-layer-btn " + o + "' id='Ol_Ctrl_Layer_" + o + "_" + this.map.id + "'" + (l ? "" : " style='display:none;'") + ">", a += "<input type='checkbox' id=" + o + " name=" + o + ">", a += "<label>" + n + "</label></div>"
                    }
                    a += "<div class='ol-hmenu-separator'><div></div></div>", a += "<div class='ol-layer-btn-group'><div class='ol-layer-btn tail' id='Ol_Ctrl_Layer_tail_" + this.map.id + "'>", a += "<input type='checkbox' id='tail' name='tail'>", a += "<label>" + r.translation.unit_trace + "</label></div>", a += "<div class='ol-layer-btn name' id='Ol_Ctrl_Layer_name_" + this.map.id + "'>", a += "<input type='checkbox' id='name' name='name'>", a += "<label>" + r.translation.unit_name + "</label></div>", a += "<div class='ol-layer-btn drivername' id='Ol_Ctrl_Layer_drivername_" + this.map.id + "'>", a += "<input type='checkbox' id='drivername' name='drivername'>", a += "<label>" + r.translation.drivername + "</label></div>", a += "<div class='ol-layer-btn course' id='Ol_Ctrl_Layer_course_" + this.map.id + "'>", a += "<input type='checkbox' id='course' name='course'>", a += "<label>" + r.translation.course_new + "</label></div></div><div/>";
                    var h = OpenLayers.Util.createDiv("OpenLayers_Control_Layers_Menu_" + this.map.id, new OpenLayers.Pixel(30, 0), null, null, "absolute");
                    h.className = "ol-hmenu-container", h.innerHTML = a, this.div.appendChild(h);
                    var p = 0,
                        u = !1;
                    jQuery(".ol-layer-btn", h).bind("touchstart", (function (e) {
                        u = !0, p = 0
                    })).bind("touchmove", (function (e) {
                        u && p++
                    })), jQuery(".ol-layer-btn", h).bind("click touchend", (function (e) {
                        if (p > 2) return !0;
                        if (jQuery(this).hasClass("disabled") || e.ctrlKey) return !0;
                        var t = jQuery(this).attr("id").split("Ol_Ctrl_Layer_")[1].split("_" + r.map.id)[0],
                            i = !jQuery(this).hasClass("active");
                        r.setLayerState(t, i)
                    })), is_touch_device() || jQuery(".ol-layer-btn", h).attr("title", "X").Tooltip({
                        showURL: !1,
                        bodyHandler: function () {
                            var e = jQuery(this).attr("id").split("Ol_Ctrl_Layer_")[1].split("_" + r.map.id)[0];
                            return r.translation && r.translation[e] ? r.translation[e] : ""
                        }
                    })
                },
                bindEvents: function () {
                    jQuery(this.div).bind("dblclick touchmove mousemove", (function () {
                        return !1
                    }));
                    var e = this;
                    jQuery(document).bind("wheel mousewheel mousedown touchstart", (function (t) {
                        var i = "OpenLayers_Control_Layers_Menu_" + e.map.id,
                            s = "OpenLayers_Control_Layers_Btn_" + e.map.id,
                            r = t.target.id;
                        if (r == s) {
                            var n = jQuery("#" + s).hasClass("pressed");
                            if (jQuery("#" + s).toggleClass("pressed", !n), jQuery("#" + i).css("display", n ? "none" : "block"), !n) {
                                var a = jQuery("#" + i).offset(),
                                    o = jQuery("#block_bottom_panel").offset(),
                                    l = 390;
                                o && a && o.top - a.top < l && (l = o.top - a.top - 10), jQuery("#" + i + " .ol-hmenu").css("maxHeight", l)
                            }
                        } else r == s || r == i || jQuery(t.target).parents("#" + i)[0] || (jQuery("#" + s).removeClass("pressed"), jQuery("#" + i).hide())
                    }));
                    var t = this.map,
                        i = function () {
                            jQuery("#OpenLayers_Control_Layers_Btn_" + t.id).removeClass("pressed"), jQuery("#OpenLayers_Control_Layers_Menu_" + t.id).hide()
                        };
                    this.map.events.register("zoomBarDown", this, i), this.map.events.register("zoomBarBtnClick", this, i)
                },
                getActiveLayers: function () {
                    return qx.lang.Object.clone(this.activeLayers)
                },
                setLayerState: function (e, t, i, s, r) {
                    var n = "tail" == e || "name" == e || "drivername" === e || "course" == e;
                    if (void 0 !== this.activeLayers[e] || n) {
                        t = !!t;
                        var a = jQuery("#Ol_Ctrl_Layer_" + e + "_" + this.map.id);
                        if (a.length)
                            if (a.toggleClass("active", t), a[0].firstElementChild.checked = t, s) fire_event("layerStateChanged", 0, {
                                lname: e,
                                enable: t
                            });
                            else {
                                var o = this;
                                if ("function" != typeof i) {
                                    var l = null;
                                    "name" !== e && "drivername" !== e || (l = {
                                        name: e,
                                        nameEnabled: jQuery("#Ol_Ctrl_Layer_name_" + this.map.id).hasClass("active"),
                                        driverNameEnabled: jQuery("#Ol_Ctrl_Layer_drivername_" + this.map.id).hasClass("active")
                                    }), i = function (e, t) {
                                        var i = o.layersCallbacks[e];
                                        if (void 0 !== i)
                                            for (var s = 0; s < i.length; s++) i[s](t, l)
                                    }
                                }
                                n || (this.activeLayers[e] = t ? 1 : 0), i(e, t), "function" != typeof this.commonCallback || n || this.commonCallback(e, t, r), fire_event("layerStateChanged", 0, {
                                    lname: e,
                                    enable: t
                                })
                            }
                    }
                },
                getLayerState: function (e) {
                    return !!this.activeLayers[e]
                },
                addLayerCallback: function (e, t) {
                    var i = this.layersCallbacks[e],
                        s = t.toString();
                    if (void 0 === this.layersCallbacks[e]) i = this.layersCallbacks[e] = [];
                    else if (s)
                        for (var r = 0, n = i.length; r < n; r++)
                            if (i[r].toString() == s) return;
                    this.layersCallbacks[e].push(t)
                },
                addCommonCallback: function (e) {
                    this.commonCallback = e
                },
                disableLayer: function (e, t) {
                    t && this.setLayerState(e, !1), jQuery("#Ol_Ctrl_Layer_" + e + "_" + this.map.id).toggleClass("disabled", t)
                },
                updateModule: function (e, t) {
                    if (-1 != this.lModules.indexOf(e)) {
                        var i = !1;
                        "messages" == e ? 1 === WebCMS.get_service_limit("messages") && (i = !0) : "reports_ctl" == e ? WebCMS.get_service_limit("reporttemplates") && (i = !0) : "routesctrl" == e ? WebCMS.get_service_limit("avl_route") && (i = !0) : available_modules && available_modules[e] && (i = !0), i && (t ? this.activeLayers[e] = 1 : delete this.activeLayers[e], jQuery("#Ol_Ctrl_Layer_" + e + "_" + this.map.id).css("display", t ? "" : "none"))
                    }
                },
                CLASS_NAME: "OpenLayers.Control.LayersControl"
            })
        },
        Jhih: function (e, t) {
            OpenLayers.Renderer = overwrite(OpenLayers.Renderer, {
                drawFeature: function (e, t) {
                    if (null == t && (t = e.style), e.geometry) {
                        var i, s = e.geometry.getBounds();
                        if (s) return this.map.baseLayer && this.map.baseLayer.wrapDateLine && (i = this.map.getMaxExtent()), s.intersectsBounds(this.extent, {
                            worldBounds: i
                        }) || !e.layer || e.layer.alwaysInRange ? this.calculateFeatureDx(s, i) : t = {
                            display: "none"
                        }, this.drawGeometry(e.geometry, t, e.id)
                    }
                },
                calculateFeatureDx: function (e, t) {
                    if (this.featureDx = 0, t) {
                        var i = t.getWidth(),
                            s = (this.extent.left + this.extent.right) / 2,
                            r = (e.left + e.right) / 2,
                            n = Math.round((r - s) / i);
                        this.featureDx = n * i
                    }
                },
                CLASS_NAME: "OpenLayers.Renderer"
            })
        },
        Kerl: function (e, t) {
            var i;
            OpenLayers.Control.OverviewMap = OpenLayers.Class(OpenLayers.Control, {
                element: null,
                ovmap: null,
                size: new OpenLayers.Size(360, 180),
                layers: null,
                minRectSize: 15,
                minRectDisplayClass: "RectReplacement",
                minRatio: 8,
                maxRatio: 32,
                mapOptions: null,
                handlers: null,
                mode: 0,
                iconSize: new OpenLayers.Size(24, 24),
                position: null,
                zoom: null,
                wheelObserver: null,
                current_pos: null,
                updateTimer: 0,
                request_div: !1,
                initialize: function (e) {
                    this.layers = [], this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, [e]), this.zoom = void 0 !== e.zoom ? e.zoom : parseInt(sdk.u.getCustomProperty("minimap_zoom_level", "15")), i || (i = new WialonHosting.Util.Pool)
                },
                destroy: function () {
                    if (this.mapDiv) {
                        if (this.handlers.click.destroy(), this.mapDiv.removeChild(this.extentRectangle), this.extentRectangle = null, this.rectEvents.destroy(), this.rectEvents = null, this.ovmap.destroy(), this.ovmap = null, this.element.removeChild(this.mapDiv), this.mapDiv = null, this.div.removeChild(this.element), this.element = null, this.mode0Div && (OpenLayers.Event.stopObservingElement(this.mode0Div), this.div.removeChild(this.mode0Div), this.mode0Div = null), this.mode1Div && (OpenLayers.Event.stopObservingElement(this.mode1Div), this.div.removeChild(this.mode1Div), this.mode1Div = null), this.unbind_panoram && this.unbind_panoram(), this.panoramDivs) {
                            for (var e in this.panoramDivs) OpenLayers.Event.stopObservingElement(this.panoramDivs[e]), this.div.removeChild(this.panoramDivs[e]), this.panoramDivs[e] = null;
                            OpenLayers.Event.stopObservingElement(this.panoramDisableDiv), this.div.removeChild(this.panoramDisableDiv), this.panoramDisableDiv = null, this.panoramDivs = null, this.unbind_panoram = null
                        }
                        this.zoomInDiv && (OpenLayers.Event.stopObservingElement(this.zoomInDiv), this.div.removeChild(this.zoomInDiv), this.zoomInDiv = null), this.zoomOutDiv && (OpenLayers.Event.stopObservingElement(this.zoomOutDiv), this.div.removeChild(this.zoomOutDiv), this.zoomOutDiv = null), this.map.events.un({
                            moveend: this.update,
                            changebaselayer: this.baseLayerDraw,
                            scope: this
                        }), this.unRegisterWheelEvents(), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                    }
                },
                registerWheelEvents: function () {
                    this.wheelObserver = OpenLayers.Function.bindAsEventListener(this.onWheelEvent, this), 2 === this.mode ? (OpenLayers.Event.observe(this.div, "DOMMouseScroll", this.wheelObserver), OpenLayers.Event.observe(this.div, "mousewheel", this.wheelObserver)) : (OpenLayers.Event.observe(window, "DOMMouseScroll", this.wheelObserver), OpenLayers.Event.observe(window, "mousewheel", this.wheelObserver), OpenLayers.Event.observe(document, "mousewheel", this.wheelObserver))
                },
                unRegisterWheelEvents: function () {
                    2 === this.mode ? (OpenLayers.Event.stopObserving(this.div, "DOMMouseScroll", this.wheelObserver), OpenLayers.Event.stopObserving(this.div, "mousewheel", this.wheelObserver)) : (OpenLayers.Event.stopObserving(window, "DOMMouseScroll", this.wheelObserver), OpenLayers.Event.stopObserving(window, "mousewheel", this.wheelObserver), OpenLayers.Event.stopObserving(document, "mousewheel", this.wheelObserver))
                },
                setRequest: function (e) {
                    this.request_div = e
                },
                setSize: function (e, t) {
                    this.size.w = e, this.size.h = t
                },
                draw: function () {
                    var e = this;
                    if (OpenLayers.Control.prototype.draw.apply(this, arguments), !(this.layers.length > 0)) return this.map.events.unregister("changebaselayer", this, this.baseLayerDraw), this.map.events.register("changebaselayer", this, this.baseLayerDraw), this.div;
                    if (this.ovmap && this.layers.length) {
                        this.ovmap.addLayers(this.layers);
                        var t = this.map.getExtent();
                        return t && this.update(), this.div
                    }
                    this.element = document.createElement("div"), this.element.className = this.displayClass + "Element", this.element.style.display = "none", this.mapDiv = document.createElement("div"), 2 === this.mode ? (this.mapDiv.style.width = this.size.w + "px", this.mapDiv.style.height = this.size.h + "px") : (this.mapDiv.style.width = "360px", this.mapDiv.style.height = "180px"), this.mapDiv.style.position = "relative", this.mapDiv.style.overflow = "hidden", this.mapDiv.id = OpenLayers.Util.createUniqueID("overviewMap"), this.extentRectangle = document.createElement("div"), this.extentRectangle.style.position = "absolute", this.extentRectangle.style.zIndex = 1102, this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.unitDiv = document.createElement("div"), this.unitDiv.style.position = "absolute", this.unitDiv.style.zIndex = 1103, this.unitDiv.className = this.displayClass + "UnitDiv", this.unitDiv.style.display = "none", this.mapDiv.appendChild(this.extentRectangle), this.mapDiv.appendChild(this.unitDiv), this.element.appendChild(this.mapDiv), this.div.appendChild(this.element), this.div.style.zIndex = 1101, 2 === this.mode && OpenLayers.Event.observe(this.mapDiv, "mousedown", OpenLayers.Function.bindAsEventListener((function (e) {
                        var t = this.div,
                            i = null;
                        t.parentElement && (i = t.parentElement).parentElement && i.parentElement.className && -1 != i.parentElement.className.indexOf("pursuit-window") && (jQuery(".help-window").css("z-index", "1150"), jQuery(i.parentElement).css("z-index", "1151"))
                    }), this)), OpenLayers.Event.observe(this.div, "mousedown", OpenLayers.Function.bindAsEventListener(this.onBorderClick, this));
                    var i = "/map_overview_ext/images/";

                    function s(t) {
                        var i = t.propContainer || e,
                            s = t.imageDivId || "OpenLayers_Control_" + t.propName;
                        return t.img ? i[t.propName] = OpenLayers.Util.createAlphaImageDiv(s, null, new OpenLayers.Size(t.width, t.height), t.img, "absolute") : i[t.propName] = OpenLayers.Util.createDiv(s, null, new OpenLayers.Size(t.width, t.height), null, "absolute"), i[t.propName].style.display = "none", "number" == typeof t.left ? i[t.propName].style.left = t.left + "px" : t.calcLeft ? i[t.propName].style.left = t.calcLeft() : "number" == typeof t.right && (i[t.propName].style.right = t.right + "px"), e.mapOptions && void 0 !== e.mapOptions.controlTop ? t.calcTop ? i[t.propName].style.top = t.calcTop() : i[t.propName].style.top = e.mapOptions.controlTop + "px" : e.mapOptions && void 0 !== e.mapOptions.controlBottom ? t.calcBottom ? i[t.propName].style.bottom = t.calcBottom() : i[t.propName].style.bottom = e.mapOptions.controlBottom + "px" : t.setDefaultVerticalPos ? t.setDefaultVerticalPos(i[t.propName]) : i[t.propName].style.top = "0px", "number" == typeof t.zIndex && (i[t.propName].style.zIndex = t.zIndex), t.classPostfix && (i[t.propName].className = e.displayClass + t.classPostfix), t.addClass && (i[t.propName].className += " " + t.addClass), t.cursor && (i[t.propName].style.cursor = t.cursor), OpenLayers.Event.observe(i[t.propName], "click", t.clickEventHandler), e.div.appendChild(i[t.propName]), i[t.propName]
                    }
                    if (this.outsideViewport) this.element.style.display = "";
                    else {
                        this.div.className += " " + this.displayClass + "Container", s({
                            img: i + "minimap_hide.png",
                            propName: "mode0Div",
                            width: 40,
                            height: 40,
                            left: 10,
                            zIndex: 1002,
                            classPostfix: "Mode0Button",
                            clickEventHandler: OpenLayers.Function.bindAsEventListener(this.modeControl, this)
                        }), s({
                            img: i + "minimap_show.png",
                            propName: "mode1Div",
                            width: 40,
                            height: 40,
                            left: 10,
                            zIndex: 1003,
                            classPostfix: "Mode1Button",
                            clickEventHandler: OpenLayers.Function.bindAsEventListener(this.modeControl, this)
                        });
                        var r = WebCMS.get_module("map_panoram");
                        if (r && r.get_providers().length > 0) {
                            this.panoramDivs = {};
                            var n, a, o = 28,
                                l = 6,
                                h = 12;
                            this.mapOptions && void 0 !== this.mapOptions.targetId ? (n = this.mapOptions.targetId + "OL_Control_PanoramDisableDiv", a = 1111) : (n = "OpenLayers_Control_PanoramDisableDiv", a = 1003), s({
                                img: null,
                                addClass: "panoram-disable-button",
                                imageDivId: n,
                                propName: "panoramDisableDiv",
                                width: o,
                                height: o,
                                right: h,
                                zIndex: a,
                                classPostfix: "PanoramDisableButton",
                                clickEventHandler: OpenLayers.Function.bindAsEventListener(this.panoramControlDisable, this),
                                cursor: "pointer"
                            });
                            var p = r.get_providers();
                            if (p && p.length > 0) {
                                for (var u = 0; u < p.length; u++) {
                                    var c = p[u];
                                    if (c) {
                                        var y, d, m, f = c.getType();
                                        this.mapOptions && void 0 !== this.mapOptions.targetId ? (m = this.mapOptions.targetId, y = this.mapOptions.targetId + "OL_Control_" + f + "Div", d = 1111) : (m = null, y = "OpenLayers_Control_" + f + "Div", d = 1003), s({
                                            img: i + f + "_street.svg",
                                            imageDivId: y,
                                            propContainer: this.panoramDivs,
                                            propName: f + "Div",
                                            width: o,
                                            height: o,
                                            right: u * (o + l) + h,
                                            zIndex: d,
                                            classPostfix: f + "Button",
                                            clickEventHandler: this.panoramControl.bind(this, c, m),
                                            cursor: "pointer"
                                        })
                                    }
                                }
                                this.map_type = f + "Div"
                            }
                        }
                        var g = 42,
                            L = s({
                                img: null,
                                propName: "zoomInDiv",
                                width: 20,
                                height: 20,
                                left: 12,
                                calcTop: function () {
                                    return e.mapOptions.controlTop + g + "px"
                                },
                                calcBottom: function () {
                                    return void 0 !== e.mapOptions.zoomPosVertical ? e.mapOptions.controlBottom + 21 + "px" : e.mapOptions.controlBottom + "px"
                                },
                                setDefaultVerticalPos: function (e) {
                                    e.style.top = g + "px"
                                },
                                zIndex: 1004,
                                classPostfix: "ZoomInButton",
                                addClass: "ol-button ol-zoomin",
                                clickEventHandler: OpenLayers.Function.bindAsEventListener(this.zoomInControl, this)
                            }),
                            v = s({
                                img: null,
                                propName: "zoomOutDiv",
                                width: 20,
                                height: 20,
                                calcLeft: function () {
                                    return e.mapOptions && void 0 !== e.mapOptions.zoomPosVertical ? "12px" : "30px"
                                },
                                calcTop: function () {
                                    return e.mapOptions.controlTop + g + "px"
                                },
                                setDefaultVerticalPos: function (e) {
                                    e.style.top = g + "px"
                                },
                                zIndex: 1004,
                                classPostfix: "ZoomOutButton",
                                addClass: "ol-button ol-zoomout",
                                clickEventHandler: OpenLayers.Function.bindAsEventListener(this.zoomOutControl, this)
                            });
                        L.style.lineHeight = "13px", v.style.lineHeight = "13px";
                        var O = ["dblclick", "mousedown"];
                        for (u = 0; u < O.length; u++) OpenLayers.Event.observe(this.mode0Div, O[u], OpenLayers.Event.stop), OpenLayers.Event.observe(this.mode1Div, O[u], OpenLayers.Event.stop), OpenLayers.Event.observe(this.zoomInDiv, O[u], OpenLayers.Event.stop), OpenLayers.Event.observe(this.zoomOutDiv, O[u], OpenLayers.Event.stop);
                        this.minimizeControl()
                    }
                    return this.map.getExtent() && this.update(), this.map.events.on({
                        moveend: this.update,
                        scope: this
                    }), this.div
                },
                baseLayerDraw: function () {
                    var e = this;
                    if (this.ovmap && this.ovmap.baseLayer && this.ovmap.baseLayer.isGoogleLayer && this.map.baseLayer && this.map.baseLayer.isGoogleLayer) this.ovmap.baseLayer.setGoogleMapType(this.map.baseLayer.getGoogleMapType());
                    else {
                        if (this.layers && this.layers.length > 0) {
                            for (var t = 0; t < this.layers.length; t++) {
                                var s = this.layers[t];
                                this.ovmap && this.ovmap.removeLayer(s, {})
                            }
                            this.layers = []
                        }
                        if (this.map.baseLayer) {
                            var r = null,
                                n = WebCMS.get_module("map");
                            if (n) {
                                var a = this.map.baseLayer.name,
                                    o = n.getMapModules();
                                for (var l in o) {
                                    var h = o[l];
                                    if ("function" == typeof h.create_layer && "function" == typeof h.check_layer_name && h.check_layer_name(a)) {
                                        "map_google" === h.getType() && this.map.baseLayer.isGoogleLayer ? function () {
                                            var t = i.get();
                                            if (t) r = t.obj;
                                            else {
                                                var s = !1;
                                                r = h.create_layer(a, {
                                                    hookLayerDestroy: function () {
                                                        s || (s = !0, this.layer.map = null, t.free())
                                                    }
                                                }), t = i.register(r, {
                                                    onPreGet: function () {
                                                        s = !1, t = this.poolObj
                                                    }
                                                })
                                            }
                                            e.googleLayerObj = t
                                        }() : r = h.create_layer(a);
                                        break
                                    }
                                }
                            }
                            if (r)
                                if (r.isGoogleLayer) r.setGoogleMapType(this.map.baseLayer.getGoogleMapType()), this.layers = [r];
                                else {
                                    var p = this.map.baseLayer.clone(r);
                                    this.layers = [p]
                                }
                        }
                        if (this.request_div) return this.draw();
                        this.draw()
                    }
                },
                rectDrag: function (e) {
                    var t = this.handlers.drag.last.x - e.x,
                        i = this.handlers.drag.last.y - e.y;
                    if (0 != t || 0 != i) {
                        var s = this.rectPxBounds.top,
                            r = this.rectPxBounds.left,
                            n = Math.abs(this.rectPxBounds.getHeight()),
                            a = this.rectPxBounds.getWidth(),
                            o = Math.max(0, s - i);
                        o = Math.min(o, this.ovmap.size.h - this.hComp - n);
                        var l = Math.max(0, r - t);
                        l = Math.min(l, this.ovmap.size.w - this.wComp - a), this.setRectPxBounds(new OpenLayers.Bounds(l, o + n, l + a, o))
                    }
                },
                mapDivClick: function (e) {
                    if (!this.mode) {
                        var t = this.rectPxBounds.getCenterPixel(),
                            i = e.xy.x - t.x,
                            s = e.xy.y - t.y,
                            r = this.rectPxBounds.top,
                            n = this.rectPxBounds.left,
                            a = Math.abs(this.rectPxBounds.getHeight()),
                            o = this.rectPxBounds.getWidth(),
                            l = Math.max(0, r + s);
                        l = Math.min(l, this.ovmap.size.h - a);
                        var h = Math.max(0, n + i);
                        h = Math.min(h, this.ovmap.size.w - o), this.setRectPxBounds(new OpenLayers.Bounds(h, l + a, h + o, l)), this.updateMapToRect()
                    }
                },
                miniWindowMapClick: function (e, t) {
                    var i = WebCMS.get_module("monitoring_units_markers"),
                        s = WebCMS.get_module("map_overview_ext");
                    if (i && s) {
                        var r = 0 | e.split("_")[0];
                        r && (s.view_states[r].marker.icon.imageDiv.id + "_innerImage" !== t.target.id && 1 === jQuery("#marker_device_actions_menu_div:visible").length && i.hide_action_menu(), s && s.units_win[r + "_pursuit_win"] && void 0 !== s.units_win[r + "_pursuit_win"].alerts && s.units_win[r + "_pursuit_win"].alerts.red_alert_handler())
                    }
                },
                onBorderClick: function (e) {
                    for (var t = !1, i = OpenLayers.Event.element(e); null != i;) {
                        if (i == this.div) {
                            t = !0;
                            break
                        }
                        i = i.parentNode
                    }
                    t && OpenLayers.Event.stop(e, !0)
                },
                isVisible: function () {
                    if (void 0 !== this.element && null != this.element) return "none" != this.element.style.display;
                    var e = document.getElementsByClassName("olControlOverviewMap");
                    return !(!e || !e.length) && "none" != e[0].style.display
                },
                maximizeControl: function (e) {
                    this.element.style.display = "", this.ovmap && void 0 !== this.ovmap.baseLayer && (this.ovmap.baseLayer.onMapResize(), this.ovmap.baseLayer.redraw())
                },
                minimizeControl: function (e) {
                    this.element && (this.element.style.display = "none"), this.saveZoomToUserSettings()
                },
                modeControl: function (e) {
                    this.saveZoomToUserSettings(), this.setMode(!this.mode), null != e && OpenLayers.Event.stop(e)
                },
                panoramControl: function (e, t, i) {
                    var s = this,
                        r = WebCMS.get_module("map_panoram");
                    if (this.panoramDivs && r) {
                        for (var n in this.panoramDivs) this.panoramDivs.hasOwnProperty(n) && (this.panoramDivs[n].style.display = "none");
                        this.panoramDisableDiv.style.display = "", r.bind_panoram(e, this.current_pos, t), r.is_binded_panoram(e, t) && r.update_panoram(e, this.current_pos, t);
                        var a = !1;
                        this.unbind_panoram = function () {
                            a || (a = !0, r.unbind_panoram(e, t))
                        }, this.resize_panoram = function () {
                            a || "map_google" === e.getType() && r.update_panoram(e, s.current_pos, t)
                        }, this.map_type = e.getType() + "Div"
                    }
                },
                panoramControlDisable: function () {
                    for (var e in this.panoramDivs) this.panoramDivs.hasOwnProperty(e) && (this.panoramDivs[e].style.display = "");
                    this.panoramDisableDiv.style.display = "none", this.unbind_panoram(), this.unbind_panoram = null, this.map_type = ""
                },
                showStreetView: function (e, t) {
                    var i = WebCMS.get_module("map_panoram");
                    if (this.panoramDivs && i) {
                        var s = this.mapOptions.targetId;
                        if (s) {
                            e = "map_" + e;
                            for (var r = null, n = i.get_providers(), a = 0; a < n.length; a++) n[a].getType() === e && (r = n[a]);
                            r ? (t = t ? {
                                lat: t.lat,
                                lon: t.lon,
                                course: "number" == typeof t.c ? t.c : 0
                            } : null, i.is_binded_panoram(r, s) || (i.bind_panoram(r, t, s), this.map_type = e + "Div"), i.is_binded_panoram(r, s) && i.update_panoram(r, t, s)) : console.error("Unknown street view type: " + e)
                        }
                    }
                },
                zoomInControl: function (e) {
                    if (this.mode && this.zoom < this.ovmap.getNumZoomLevels() - 1 && this.ovmap.getNumZoomLevels() > 0 && (this.zoom !== this.ovmap.getZoomForResolution(this.ovmap.getResolution()) && (this.zoom = this.ovmap.getZoomForResolution(this.ovmap.getResolution())), this.zoom++), this.updateOverview(), this.ovmap.setCenter(this.position, this.zoom, !1, !1), void 0 !== this.ovmap.targetId) {
                        var t = this.ovmap.targetId.split("_")[0],
                            i = sdk.s.getItem(t);
                        i && fire_event("unit_marker_updated", t, i)
                    }
                    null != e && OpenLayers.Event.stop(e)
                },
                zoomOutControl: function (e) {
                    if (this.mode && this.zoom > 0 && this.ovmap.getNumZoomLevels() > 0 && (this.zoom !== this.ovmap.getZoomForResolution(this.ovmap.getResolution()) && (this.zoom = this.ovmap.getZoomForResolution(this.ovmap.getResolution())), this.zoom--), this.updateOverview(), this.ovmap.setCenter(this.position, this.zoom, !1, !1), void 0 !== this.ovmap.targetId) {
                        var t = this.ovmap.targetId.split("_")[0],
                            i = sdk.s.getItem(t);
                        i && fire_event("unit_marker_updated", t, i)
                    }
                    null != e && OpenLayers.Event.stop(e)
                },
                saveZoomToUserSettings: function () {
                    this.mode && (clearTimeout(this.updateTimer), this.updateTimer = setTimeout(qx.lang.Function.bind((function () {
                        this.zoom != sdk.u.getCustomProperty("minimap_zoom_level") && sdk.u.updateCustomProperty("minimap_zoom_level", this.zoom)
                    }), this), 15e3))
                },
                setMode: function (e) {
                    if (void 0 !== this.unitDiv)
                        if (this.mode = e, 1 == this.mode) {
                            if (this.unitDiv.style.display = "", this.mode1Div.style.display = "", this.panoramDivs) {
                                for (var t in this.panoramDivs) this.panoramDivs[t].style.display = this.unbind_panoram ? "none" : "";
                                this.panoramDisableDiv.style.display = this.unbind_panoram ? "" : "none"
                            }
                            this.mode0Div.style.display = "none", this.zoomInDiv.style.display = "", this.zoomOutDiv.style.display = "", this.unRegisterWheelEvents(), this.registerWheelEvents()
                        } else if (2 === this.mode) {
                        if (this.unitDiv.style.display = "", this.mode1Div.style.display = "none", this.panoramDivs) {
                            for (var t in this.panoramDivs) this.panoramDivs[t].style.display = this.hidePanoramBtn ? "none" : this.unbind_panoram ? "none" : "";
                            this.panoramDisableDiv.style.display = this.unbind_panoram ? "" : "none"
                        }
                        this.mode0Div.style.display = "none", this.zoomInDiv.style.display = "", this.zoomOutDiv.style.display = "", this.unRegisterWheelEvents(), this.registerWheelEvents()
                    } else {
                        if (this.unitDiv.style.display = "none", this.mode1Div.style.display = "none", this.panoramDivs) {
                            for (var t in this.panoramDivs) this.panoramDivs[t].style.display = "none";
                            this.panoramDisableDiv.style.display = "none";
                            var i = WebCMS.get_module("map_panoram");
                            if (i)
                                for (var s = i.get_providers(), r = 0; r < s.length; r++) i.unbind_panoram(s[r])
                        }
                        this.mode0Div.style.display = "", this.zoomInDiv.style.display = "none", this.zoomOutDiv.style.display = "none", this.unRegisterWheelEvents()
                    }
                },
                hideControls: function () {
                    if (this.unitDiv.style.display = "none", this.panoramDivs) {
                        for (var e in this.panoramDivs) this.panoramDivs[e].style.display = "none";
                        this.panoramDisableDiv.style.display = "none"
                    }
                    this.mode1Div.style.display = "none", this.mode0Div.style.display = "none", this.zoomInDiv.style.display = "none", this.zoomOutDiv.style.display = "none"
                },
                getElement: function () {
                    return this.element
                },
                showToggle: function (e) {
                    this.element && (this.element.style.display = e ? "none" : "", e && this.saveZoomToUserSettings())
                },
                watchUnit: function (e, t, i, s) {
                    if (null != t) {
                        this.position = t;
                        var r = "none" == this.element.style.display,
                            n = sdk.s.getItem(e);
                        if (n && (this.saveZoomToUserSettings(), null != this.unitDiv)) {
                            if (2 !== this.mode) {
                                for (; this.unitDiv.hasChildNodes();) this.unitDiv.removeChild(this.unitDiv.childNodes[0]);
                                var a = n.getName(),
                                    o = WebCMS.get_module("user_settings_drivers");
                                if (o && 8192 & parseInt(sdk.u.getCustomProperty("muf", "11"))) {
                                    for (var l = o.get_unit_drivers(n), h = [], p = 0; p < l.length; p++) h.push(l[p].drv.n);
                                    h.length && (a = h.join(", "))
                                }
                                n.getType();
                                var u = n.getIconUrl(32),
                                    c = OpenLayers.Util.createAlphaImageDiv(e + "_ol_unit_minimap_img", null, new OpenLayers.Size(this.iconSize.w, this.iconSize.h), u, "absolute");
                                void 0 === s ? (this.unitDiv.parentNode.style.width = "360px", this.unitDiv.parentNode.style.height = "180px", c.style.left = Math.floor(180) - Math.floor(this.iconSize.w / 2) + "px", c.style.top = Math.floor(90) - Math.floor(this.iconSize.h / 2) + "px") : (c.style.left = Math.floor(this.size.w / 2) - Math.floor(this.iconSize.w / 2) + "px", c.style.top = Math.floor(this.size.h / 2) - Math.floor(this.iconSize.h / 2) + "px", this.unitDiv.parentNode.style.width = this.size.w + "px", this.unitDiv.parentNode.style.height = this.size.h + "px"), this.unitDiv.appendChild(c), jQuery(c).attr("title", "X").Tooltip({
                                    showURL: !1,
                                    bodyHandler: function () {
                                        return WialonHosting.Unit.getTooltip(n)
                                    },
                                    onShown: function () {
                                        var e = WebCMS.get_module("unit_info_text");
                                        e && e.do_post_info_text_manipulations()
                                    }
                                });
                                var y = sdk.s.loadLibrary("itemIcon") && n.canRotate();
                                1 & atoui(n.getCustomProperty("img_rot")) && y && null != i ? jQuery(c.firstChild).rotate(atoi(i % 360)) : jQuery(c.firstChild).rotate(0);
                                var d = n.getCustomProperty("label_color", ""),
                                    m = "#f00";
                                "" != d && (m = sprintf("#%06x", parseInt(d)));
                                var f = document.createElement("div");
                                f.innerHTML = a, f.style.position = "absolute", f.style.whiteSpace = "pre", f.style.fontFamily = "sans-serif", f.style.fontWeight = "bold", f.style.fontSize = "11px", f.style.color = m, f.style.textShadow = "-1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff", f.style.display = "block", f.style.left = Math.floor(180) - Math.floor(this.iconSize.w / 2) + "px", f.style.top = Math.floor(90) + 10 + "px", this.unitDiv.appendChild(f), 2 === this.mode ? this.unitDiv.onclick = qx.lang.Function.bind(this.onUnitClick, this, e) : this.unitDiv.onclick = new Function('fire_event("monitoring_unit_selected", ' + e + ", {unit: sdk.s.getItem(" + e + ")) }"), this.unitDiv.style.cursor = "pointer";
                                var g, L = !0,
                                    v = WebCMS.get_module("monitoring_units");
                                if (v && (L = v.is_unit_visible(n)), this.mode && L && (this.unitDiv.style.display = ""), r && (this.element.style.display = ""), L && this.mode || (this.unitDiv.style.display = ""), (g = f.clientWidth > 0 ? f.clientWidth : f.offsetWidth > 0 ? f.offsetWidth : 0) > 0 && (f.style.left = Math.floor(180) - Math.floor(g / 2) + "px"), r && (this.element.style.display = "none"), L && this.mode || (this.unitDiv.style.display = "none"), "" != this.unitDiv.style.display) return
                            }
                            this.updateOverview();
                            var O = WialonHosting.Unit.getLastKnownPosition(n),
                                S = WebCMS.get_module("map_panoram");
                            if (S && O) {
                                var x = S.get_providers(),
                                    w = null;
                                for (p = 0; p < x.length; p++) x[p].getType() + "Div" == this.map_type && (w = x[p]);
                                w && (this.current_pos = {
                                    lat: O.y,
                                    lon: O.x,
                                    course: O.c
                                }, S.is_binded_panoram(w, s) && S.update_panoram(w, this.current_pos, s))
                            }
                        }
                    }
                },
                update: function () {
                    null == this.ovmap && this.createMap(), !this.autoPan && this.isSuitableOverview() || this.updateOverview(), this.updateRectToMap()
                },
                isSuitableOverview: function () {
                    if (!this.ovmap) return !1;
                    var e = this.map.getExtent(),
                        t = this.map.maxExtent,
                        i = new OpenLayers.Bounds(Math.max(e.left, t.left), Math.max(e.bottom, t.bottom), Math.min(e.right, t.right), Math.min(e.top, t.top)),
                        s = this.ovmap.getResolution() / this.map.getResolution();
                    return s > this.minRatio && s <= this.maxRatio && this.ovmap.getExtent().containsBounds(i)
                },
                updateOverview: function () {
                    this.ovmap.updateSize()
                },
                createMap: function () {
                    var e = OpenLayers.Util.extend({
                        controls: [],
                        maxResolution: "auto",
                        fallThrough: !1
                    }, this.mapOptions);
                    this.ovmap = OpenLayers.GMap ? new OpenLayers.GMap(this.mapDiv, e) : new OpenLayers.Map(this.mapDiv, e), OpenLayers.Event.stopObserving(window, "unload", this.ovmap.unloadDestroy), this.ovmap.addLayers(this.layers), this.ovmap.zoomToMaxExtent(), this.ovmap.zoom = this.zoom, 2 === this.mode ? this.handlers.click = new OpenLayers.Handler.Click(this, {
                        click: qx.lang.Function.bind(this.miniWindowMapClick, this, e.targetId)
                    }, {
                        single: !0,
                        double: !1,
                        stopSingle: !0,
                        stopDouble: !0,
                        pixelTolerance: 1,
                        map: this.ovmap
                    }) : (this.handlers.drag = new OpenLayers.Handler.Drag(this, {
                        move: this.rectDrag,
                        done: this.updateMapToRect
                    }, {
                        map: this.ovmap
                    }), this.handlers.click = new OpenLayers.Handler.Click(this, {
                        click: this.mapDivClick
                    }, {
                        single: !0,
                        double: !1,
                        stopSingle: !0,
                        stopDouble: !0,
                        pixelTolerance: 1,
                        map: this.ovmap
                    })), this.handlers.click.activate(), this.rectEvents = new OpenLayers.Events(this, this.extentRectangle, null, !0), this.rectEvents.register("mouseover", this, (function (e) {
                        this.handlers.drag.active || this.map.dragging || this.handlers.drag.activate()
                    })), this.rectEvents.register("mouseout", this, (function (e) {
                        this.handlers.drag.dragging || this.handlers.drag.deactivate()
                    }))
                },
                updateMapBorders: function () {
                    this.wComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-left-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-right-width")), this.wComp = this.wComp ? this.wComp : 2, this.hComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-top-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-bottom-width")), this.hComp = this.hComp ? this.hComp : 2
                },
                updateRectToMap: function () {
                    var e;
                    e = this.ovmap.getProjection() != this.map.getProjection() ? this.map.getExtent().transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : this.map.getExtent();
                    var t = this.getRectBoundsFromMapBounds(e);
                    t && this.setRectPxBounds(t)
                },
                updateMapToRect: function () {
                    var e = this.getMapBoundsFromRectBounds(this.rectPxBounds);
                    this.map.panTo(e.getCenterLonLat())
                },
                setRectPxBounds: function (e) {
                    var t = Math.max(e.top, 0),
                        i = Math.max(e.left, 0),
                        s = Math.min(e.top + Math.abs(e.getHeight()), this.ovmap.size.h - this.hComp),
                        r = Math.min(e.left + e.getWidth(), this.ovmap.size.w - this.wComp),
                        n = Math.max(r - i, 0),
                        a = Math.max(s - t, 0);
                    if (n < this.minRectSize || a < this.minRectSize) {
                        this.extentRectangle.className = this.displayClass + this.minRectDisplayClass;
                        var o = i + n / 2 - this.minRectSize / 2,
                            l = t + a / 2 - this.minRectSize / 2;
                        this.extentRectangle.style.top = Math.round(l) + "px", this.extentRectangle.style.left = Math.round(o) + "px", this.extentRectangle.style.height = this.minRectSize + "px", this.extentRectangle.style.width = this.minRectSize + "px"
                    } else this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.extentRectangle.style.top = Math.round(t) + "px", this.extentRectangle.style.left = Math.round(i) + "px", this.extentRectangle.style.height = Math.round(a) + "px", this.extentRectangle.style.width = Math.round(n) + "px";
                    this.rectPxBounds = new OpenLayers.Bounds(Math.round(i), Math.round(s), Math.round(r), Math.round(t))
                },
                getRectBoundsFromMapBounds: function (e) {
                    var t = new OpenLayers.LonLat(e.left, e.bottom),
                        i = new OpenLayers.LonLat(e.right, e.top),
                        s = this.getOverviewPxFromLonLat(t),
                        r = this.getOverviewPxFromLonLat(i),
                        n = null;
                    return s && r && (n = new OpenLayers.Bounds(s.x, s.y, r.x, r.y)), n
                },
                getMapBoundsFromRectBounds: function (e) {
                    var t = new OpenLayers.Pixel(e.left, e.bottom),
                        i = new OpenLayers.Pixel(e.right, e.top),
                        s = this.getLonLatFromOverviewPx(t),
                        r = this.getLonLatFromOverviewPx(i);
                    return new OpenLayers.Bounds(s.lon, s.lat, r.lon, r.lat)
                },
                getLonLatFromOverviewPx: function (e) {
                    var t = this.ovmap.size,
                        i = this.ovmap.getResolution(),
                        s = this.ovmap.getExtent().getCenterLonLat(),
                        r = e.x - t.w / 2,
                        n = e.y - t.h / 2;
                    return new OpenLayers.LonLat(s.lon + r * i, s.lat - n * i)
                },
                getOverviewPxFromLonLat: function (e) {
                    var t = this.ovmap.getResolution(),
                        i = this.ovmap.getExtent(),
                        s = null;
                    return i && (s = new OpenLayers.Pixel(Math.round(1 / t * (e.lon - i.left)), Math.round(1 / t * (i.top - e.lat)))), s
                },
                onWheelEvent: function (e) {
                    for (var t = !1, i = OpenLayers.Event.element(e); null != i;) {
                        if (this.ovmap && i == this.ovmap.div) {
                            t = !0;
                            break
                        }
                        i = i.parentNode
                    }
                    if (t) {
                        var s = 0;
                        e || (e = window.event), e.wheelDelta ? (s = e.wheelDelta / 120, window.opera && window.opera.version() < 9.2 && (s = -s)) : e.detail && (s = -e.detail / 3), s && (e.xy = this.mousePosition, s < 0 ? this.zoomOutControl(e) : this.zoomInControl(e)), OpenLayers.Event.stop(e)
                    }
                },
                onUnitClick: function (e) {
                    var t = 0,
                        i = WebCMS.get_module("monitoring_units_markers"),
                        s = WebCMS.get_module("map_overview_ext"),
                        r = sdk.s.getItem(e);
                    i && s && r && (t++, setTimeout((function () {
                        1 == t && r && (1 === i.icons_on_border && i.view_states[e] && i.view_states[e].visible && fire_event("monitoring_unit_selected", e, {
                            unit: r
                        }), i && (jQuery("#marker_device_actions_menu_div").length ? 1 == jQuery("#marker_device_actions_menu_div").length && (i.hide_action_menu(), i.unit_clicked != e && (i.on_show_action_dlg(r, !1, s.view_states[e], s.view_states[e].marker.map), i.unit_clicked = e)) : (i.on_show_action_dlg(r, !1, s.view_states[e], s.view_states[e].marker.map), i.unit_clicked = e), i.redraw(e))), t = 0
                    }), 300))
                },
                CLASS_NAME: "OpenLayers.Control.OverviewMap"
            })
        },
        LQWC: function (e, t) {
            OpenLayers.Renderer.Elements = overwrite(OpenLayers.Renderer.Elements, {
                rendererRoot: null,
                root: null,
                vectorRoot: null,
                xmlns: null,
                xOffset: 0,
                indexer: null,
                minimumSymbolizer: {
                    strokeLinecap: "round",
                    strokeOpacity: 1,
                    fillOpacity: 1,
                    pointRadius: 0
                },
                BACKGROUND_ID_SUFFIX: "_background",
                LABEL_ID_SUFFIX: "_label",
                LABEL_OUTLINE_SUFFIX: "_outline",
                initialize: function (e, t) {
                    OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.rendererRoot = this.createRenderRoot(), this.root = this.createRoot("_root"), this.rendererRoot.appendChild(this.root), this.container.appendChild(this.rendererRoot), t && (t.zIndexing || t.yOrdering) && (this.indexer = new OpenLayers.ElementsIndexer(t.yOrdering))
                },
                destroy: function () {
                    this.clear(), this.rendererRoot = null, this.root = null, this.xmlns = null, OpenLayers.Renderer.prototype.destroy.apply(this, arguments)
                },
                clear: function () {
                    var e, t = this.root;
                    if (t)
                        for (; e = t.firstChild;) t.removeChild(e);
                    this.indexer && this.indexer.clear()
                },
                setExtent: function (e, t) {
                    var i = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments),
                        s = this.getResolution();
                    if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
                        var r, n = e.getWidth() / this.map.getExtent().getWidth(),
                            a = (e = e.scale(1 / n), this.map.getMaxExtent());
                        a.right > e.left && a.right < e.right ? r = !0 : a.left > e.left && a.left < e.right && (r = !1), (r !== this.rightOfDateLine || t) && (i = !1, this.xOffset = !0 === r ? a.getWidth() / s : 0), this.rightOfDateLine = r
                    }
                    return i
                },
                getNodeType: function (e, t) {},
                drawGeometry: function (e, t, i) {
                    var s = e.CLASS_NAME,
                        r = !0;
                    if ("OpenLayers.Geometry.Collection" == s || "OpenLayers.Geometry.MultiPoint" == s || "OpenLayers.Geometry.MultiLineString" == s || "OpenLayers.Geometry.MultiPolygon" == s) {
                        for (var n = 0, a = e.components.length; n < a; n++) r = this.drawGeometry(e.components[n], t, i) && r;
                        return r
                    }
                    r = !1;
                    var o, l = !1;
                    ("none" != t.display && (t.backgroundGraphic ? this.redrawBackgroundNode(e.id, e, t, i) : l = !0, r = this.redrawNode(e.id, e, t, i)), 0 == r) && ((o = document.getElementById(e.id)) && (o._style.backgroundGraphic && (l = !0), o.parentNode.removeChild(o)), (o = OpenLayers.Util.getElement(e.id + "_outline")) && o.parentNode.removeChild(o));
                    l && ((o = document.getElementById(e.id + this.BACKGROUND_ID_SUFFIX)) && o.parentNode.removeChild(o));
                    return r
                },
                redrawNode: function (e, t, i, s) {
                    var r, n = this.getNodeType(t, i);
                    "OpenLayers.Geometry.Text" == t.CLASS_NAME && i.labelOutlineWidth && ((r = this.nodeFactory(t.id + "_outline", n))._featureId = s, r.parentNode != this.root && this.root.appendChild(r));
                    var a = this.nodeFactory(e, n);
                    a._featureId = s, a._boundsBottom = t.getBounds().bottom, a._geometryClass = t.CLASS_NAME, a._style = i, r && (a._outline_node = r);
                    var o = this.drawGeometryNode(a, t, i);
                    if (!1 === o) return !1;
                    if (a = o.node, this.indexer) {
                        var l = this.indexer.insert(a);
                        l ? this.root.insertBefore(a, l) : this.root.appendChild(a)
                    } else a.parentNode !== this.root && this.root.appendChild(a);
                    return this.postDraw(a), o.complete
                },
                redrawBackgroundNode: function (e, t, i, s) {
                    var r = OpenLayers.Util.extend({}, i);
                    return r.externalGraphic = r.backgroundGraphic, r.graphicXOffset = r.backgroundXOffset, r.graphicYOffset = r.backgroundYOffset, r.graphicZIndex = r.backgroundGraphicZIndex, r.graphicWidth = r.backgroundWidth || r.graphicWidth, r.graphicHeight = r.backgroundHeight || r.graphicHeight, r.backgroundGraphic = null, r.backgroundXOffset = null, r.backgroundYOffset = null, r.backgroundGraphicZIndex = null, this.redrawNode(e + this.BACKGROUND_ID_SUFFIX, t, r, null)
                },
                drawGeometryNode: function (e, t, i) {
                    i = i || e._style, OpenLayers.Util.applyDefaults(i, this.minimumSymbolizer);
                    var s, r = {
                        isFilled: void 0 === i.fill || i.fill,
                        isStroked: !!i.strokeWidth
                    };
                    switch (t.CLASS_NAME) {
                        case "OpenLayers.Geometry.Point":
                            !1 === i.graphic && (r.isFilled = !1, r.isStroked = !1), s = this.drawPoint(e, t);
                            break;
                        case "OpenLayers.Geometry.LineString":
                            r.isFilled = !1, s = this.drawLineString(e, t);
                            break;
                        case "OpenLayers.Geometry.LinearRing":
                            s = this.drawLinearRing(e, t);
                            break;
                        case "OpenLayers.Geometry.Polygon":
                            s = this.drawPolygon(e, t);
                            break;
                        case "OpenLayers.Geometry.Rectangle":
                            s = this.drawRectangle(e, t);
                            break;
                        case "OpenLayers.Geometry.Text":
                            s = this.drawText(e, t, i)
                    }
                    return e._style = i, e._options = r, 0 != s && {
                        node: this.setStyle(e, i, r, t),
                        complete: s
                    }
                },
                postDraw: function (e) {
                    e && "function" == typeof e._wialon_on_post_draw && e._wialon_on_post_draw()
                },
                drawPoint: function (e, t) {},
                drawLineString: function (e, t) {},
                drawLinearRing: function (e, t) {},
                drawPolygon: function (e, t) {},
                drawRectangle: function (e, t) {},
                drawCircle: function (e, t) {},
                getFeatureIdFromEvent: function (e) {
                    var t = e.target,
                        i = t && t.correspondingUseElement;
                    return (i || (t || e.srcElement))._featureId
                },
                eraseGeometry: function (e, t) {
                    if ("OpenLayers.Geometry.MultiPoint" == e.CLASS_NAME || "OpenLayers.Geometry.MultiLineString" == e.CLASS_NAME || "OpenLayers.Geometry.MultiPolygon" == e.CLASS_NAME || "OpenLayers.Geometry.Collection" == e.CLASS_NAME)
                        for (var i = 0, s = e.components.length; i < s; i++) this.eraseGeometry(e.components[i], t);
                    else {
                        var r = OpenLayers.Util.getElement(e.id);
                        if ("undefined" != typeof WialonHosting && WialonHosting && WialonHosting.Dom && WialonHosting.Dom.dispose && WialonHosting.Dom.dispose(r), r && r.parentNode && (r.geometry && (r.geometry.destroy(), r.geometry = null), r.parentNode.removeChild(r), this.indexer && this.indexer.remove(r), r._style.backgroundGraphic)) {
                            var n = e.id + this.BACKGROUND_ID_SUFFIX,
                                a = OpenLayers.Util.getElement(n);
                            "undefined" != typeof WialonHosting && WialonHosting && WialonHosting.Dom && WialonHosting.Dom.dispose && WialonHosting.Dom.dispose(a), a && a.parentNode && a.parentNode.removeChild(a)
                        }
                        r = OpenLayers.Util.getElement(e.id + "_outline");
                        "undefined" != typeof WialonHosting && WialonHosting && WialonHosting.Dom && WialonHosting.Dom.dispose && WialonHosting.Dom.dispose(r), r && r.parentNode && r.parentNode.removeChild(r)
                    }
                },
                nodeFactory: function (e, t) {
                    var i = OpenLayers.Util.getElement(e);
                    return i ? this.nodeTypeCompare(i, t) || (i.parentNode.removeChild(i), i = this.nodeFactory(e, t)) : i = this.createNode(t, e), i
                },
                nodeTypeCompare: function (e, t) {},
                createNode: function (e, t) {},
                moveRoot: function (e) {
                    var t = this.root;
                    e.root.parentNode == this.rendererRoot && (t = e.root), t.parentNode.removeChild(t), e.rendererRoot.appendChild(t)
                },
                getRenderLayerId: function () {
                    return this.root.parentNode.parentNode.id
                },
                isComplexSymbol: function (e) {
                    return "circle" != e && !!e
                },
                CLASS_NAME: "OpenLayers.Renderer.Elements"
            })
        },
        LmYA: function (e, t) {
            OpenLayers.Layer.VirtualEarth = OpenLayers.Class.create(), OpenLayers.Layer.VirtualEarth.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                url_params: "G,L",
                lang: "en",
                dynamic_url: !1,
                url: "",
                urls: [],
                minZoom: 1,
                protocol: "http://",
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments), void 0 !== this.overlay && this.overlay && (this.div.style.opacity = "0.6");
                    var r = this.url.split(",");
                    if (r.length >= 2) {
                        for (var n = 0; n < r.length; n++) this.urls.push(r[n]);
                        this.url = r[0]
                    }
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > 21) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = this.protocol + this.url;
                    if (this.urls.length >= 2) {
                        var o = i % this.urls.length;
                        a = this.protocol + this.urls[Math.floor(o)]
                    }
                    var l = this.create_quadkey(i, s, r);
                    return this.dynamic_url ? a += l + ".png?g=681&it=" + this.url_params + "&og=277&n=z&c4w=1&mkt=" + this.lang : a += this.url_params + l + ".png?g=681&mkt=en-us", a
                },
                create_quadkey: function (e, t, i) {
                    for (var s = "", r = i; r > 0; r--) {
                        var n = 0,
                            a = 1 << r - 1;
                        0 != (e & a) && n++, 0 != (t & a) && (n++, n++), s += n
                    }
                    return s
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.VirtualEarth(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                CLASS_NAME: "OpenLayers.Layer.VirtualEarth"
            })
        },
        MOqp: function (e, t) {
            OpenLayers.Layer.Visicom = OpenLayers.Class.create(), OpenLayers.Layer.Visicom.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                layers: "",
                quality: "",
                map_tags: "",
                url_params: "",
                protocol: "http://",
                res_name: "/1.0.3/world_ru/",
                url: "",
                urls: [],
                zoom_delta: {
                    0: 0,
                    1: 1,
                    2: 3,
                    3: 7,
                    4: 15,
                    5: 31,
                    6: 63,
                    7: 127,
                    8: 255,
                    9: 511,
                    10: 1023,
                    11: 2047,
                    12: 4095,
                    13: 8191,
                    14: 16383,
                    15: 32767,
                    16: 65535,
                    17: 131071,
                    18: 262143,
                    19: 524287
                },
                transitionEffect: null,
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments);
                    var r = this.url.split(",");
                    if (r.length >= 2) {
                        for (var n = 0; n < r.length; n++) this.urls.push(r[n]);
                        this.url = r[0]
                    }
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > 20) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = this.protocol + this.url;
                    if (this.urls.length >= 2) {
                        var o = i % this.urls.length;
                        a = this.protocol + this.urls[Math.floor(o)]
                    }
                    return a += this.res_name + r + "/" + i + "/" + (this.zoom_delta[r] - s) + ".png"
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Visicom(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                CLASS_NAME: "OpenLayers.Layer.Visicom"
            })
        },
        MSDQ: function (e, t) {
            OpenLayers.Handler.Click = overwrite(OpenLayers.Handler.Click, {
                touchend: function (e) {
                    return this.down && (e.xy = this.last.xy, e.lastTouches = this.last.touches, this.handleSingle(e), this.down = null), !this.timerId
                },
                CLASS_NAME: "OpenLayers.Handler.Click"
            })
        },
        OF2d: function (e, t) {
            OpenLayers.Layer.Google.v3 = {
                DEFAULTS: {
                    sphericalMercator: !0,
                    projection: "EPSG:900913"
                },
                animationEnabled: !0,
                trafficLayer: null,
                maxZoomService: null,
                centerTimeout: null,
                doNotLoadMapObject: !0,
                mapObject: {
                    getDiv: function () {
                        return null
                    }
                },
                loadMapObject: function () {
                    if (!this.doNotLoadMapObject) {
                        var e;
                        this.type && "overlay" != this.type || (this.type, this.type = google.maps.MapTypeId.ROADMAP);
                        var t = OpenLayers.Layer.Google.cache[this.id];
                        if (t && !this.overlay) e = t.mapObject, ++t.count;
                        else try {
                            var i = this.map.viewPortDiv,
                                s = document.createElement("div");
                            if ("google-traffic" == this.overlayType) {
                                i = this.map.layerContainerDiv;
                                var r = s.className.split(" ");
                                r.push("olAPILayer"), s.className = r.join(" "), this.div.style.zIndex && (s.style.zIndex = parseInt(this.div.style.zIndex) - 50 + ""), s.style.display
                            } else this.div.style.zIndex && (s.style.zIndex = parseInt(this.div.style.zIndex) - 1 + ""), s.style.width = "100%", s.style.height = "100%";
                            s.id = this.map.id + "_GMapContainer" + (this.overlay && "google-traffic" == this.overlayType ? "_traffic" : ""), s.style.background = "transparent", s.style.opacity = "0.0", s.style.position = "absolute", i.appendChild(s);
                            var n = this.map.getCenter();
                            if ((e = new google.maps.Map(s, {
                                    center: n ? new google.maps.LatLng(n.lat, n.lon) : new google.maps.LatLng(0, 0),
                                    zoom: this.map.getZoom() || 0,
                                    mapTypeId: this.type,
                                    disableDefaultUI: !0,
                                    keyboardShortcuts: !1,
                                    draggable: !1,
                                    disableDoubleClickZoom: !0,
                                    scrollwheel: !1,
                                    streetViewControl: !1,
                                    navigationControl: !1,
                                    mapTypeControl: !1,
                                    scaleControl: !1,
                                    styles: [{
                                        featureType: "poi.business",
                                        stylers: [{
                                            visibility: "on"
                                        }]
                                    }]
                                })).setTilt(0), this.maxZoomService = new google.maps.MaxZoomService, this.overlay && "google-traffic" == this.overlayType) {
                                this.trafficLayer = new google.maps.TrafficLayer, this.map.events.register("moveend", this.map, qx.lang.Function.bind(this.on_move_end, this));
                                var a = [{
                                    stylers: [{
                                        visibility: "off"
                                    }]
                                }, {
                                    featureType: "poi",
                                    stylers: [{
                                        visibility: "on"
                                    }]
                                }];
                                ["poi.business", "poi.government", "poi.school", "poi.medical", "poi.attraction", "poi.place_of_worship", "poi.sports_complex", "poi.park"].forEach((function (e) {
                                    a.push({
                                        featureType: e,
                                        stylers: [{
                                            visibility: "off"
                                        }]
                                    })
                                })), e.setOptions({
                                    styles: a
                                })
                            }
                            t = {
                                mapObject: e,
                                count: 1
                            }, OpenLayers.Layer.Google.cache[this.id] = t, this.repositionListener = google.maps.event.addListenerOnce(e, "center_changed", OpenLayers.Function.bind(this.repositionMapElements, this))
                        } catch (e) {
                            return "undefined" != typeof WialonHosting && WialonHosting && WialonHosting.Log && WialonHosting.Log.captureException(e), void setTimeout((function () {
                                OpenLayers.Layer.Google.v3.turnOffGoogle()
                            }), 200)
                        }
                        this.mapObject = e, this.setGMapVisibility(this.visibility)
                    }
                },
                turnOffGoogle: function () {
                    OpenLayers.Layer.Google.v3.destroy();
                    var e = WebCMS.get_module("map_google");
                    e && e.unregister_map()
                },
                on_move_end: function () {
                    if (this.visibility && this.trafficLayer && this.trafficLayer.map) {
                        var e = this.getMapObjectLonLatFromOLLonLat(this.map.getCenter());
                        google.maps.event.trigger(this.mapObject, "resize");
                        var t = this.getMapObjectZoom();
                        this.setMapObjectCenter(e, t)
                    }
                },
                repositionMapElements: function () {
                    var e = this.mapObject.getDiv();
                    if (e && (e = e.firstChild), !e || e.childNodes.length < 3) return this.repositionTimer = window.setTimeout(OpenLayers.Function.bind(this.repositionMapElements, this), 250), !1;
                    for (var t = OpenLayers.Layer.Google.cache[this.id], i = this.map.viewPortDiv, s = e.children.length - 1; s >= 0; --s)
                        if (1000001 == e.children[s].style.zIndex) {
                            var r = e.children[s];
                            i.appendChild(r), r.style.zIndex = "1001", r.style.bottom = "", r.className = "olLayerGoogleCopyright olLayerGoogleV3", r.style.display = "", r.style.display = "", r.style.width = "25%", r.firstChild && (r.firstChild.style.paddingLeft = "2px", r.firstChild.style.textAlign = "left", r.firstChild.style.backgroundImage = ""), r.firstChild.firstChild && (r.firstChild.firstChild.style.color = "", r.firstChild.firstChild.style.backgroundColor = "", r.firstChild.firstChild.style.backgroundColor = ""), r.firstChild.lastChild && (r.firstChild.lastChild.style.backgroundColor = "");
                            for (var n = r.children.length; n >= 0; n--) r.children[n] && (r.children[n].style.color = "", r.children[n].style.backgroundColor = "");
                            t.termsOfUse = r
                        } else if (1e6 == e.children[s].style.zIndex) {
                        var a = e.children[s];
                        i.appendChild(a), a.style.zIndex = "1001", a.style.bottom = "", a.className = "olLayerGooglePoweredBy olLayerGoogleV3 gmnoprint", a.style.display = this.visibility ? "" : "none", t.poweredBy = a
                    } else 10000002 == e.children[s].style.zIndex && i.appendChild(e.children[s]);
                    this.setGMapVisibility(this.visibility, !0)
                },
                onMapResize: function () {
                    if (this.visibility) google.maps.event.trigger(this.mapObject, "resize");
                    else {
                        var e = OpenLayers.Layer.Google.cache[this.id];
                        if (!e) return;
                        if (!e.resized || this.overlay && "google-traffic" == this.overlayType) {
                            this.repositionMapElements();
                            var t = this;
                            google.maps.event.addListenerOnce(this.mapObject, "tilesloaded", (function () {
                                google.maps.event.trigger(t.mapObject, "resize"), delete e.resized
                            }))
                        }
                        e.resized = !0
                    }
                },
                setGMapVisibility: function (e, t) {
                    var i = OpenLayers.Layer.Google.cache[this.id];
                    if (this.map, i) {
                        if (!this.mapObject) return;
                        var s = this.mapObject.getDiv();
                        if (!s) return;
                        if (!0 === e) {
                            this.overlay && "google-traffic" == this.overlayType && this.trafficLayer && this.trafficLayer.setMap(this.mapObject), this.overlay && "google-traffic" == this.overlayType && this.trafficLayer ? s.style.opacity = "0.6" : s.style.opacity = "1.0", s.style.display = "block", i.termsOfUse && i.termsOfUse.style && (i.termsOfUse.style.left = "", i.termsOfUse.style.display = "", i.poweredBy.style.display = ""), i.displayed = this.id;
                            var r = this.map.getSize(),
                                n = s.getBoundingClientRect();
                            if (this.trafficLayer && (r.h !== n.height || r.w !== n.width)) {
                                this.map.correct_div_element(s);
                                var a = this.map.getCenter(),
                                    o = this.getMapObjectLonLatFromLonLat(a.lon, a.lat);
                                this.setMapObjectCenter(o, this.mapObject.getZoom()), google.maps.event.trigger(this.mapObject, "resize")
                            }
                        } else this.overlay && "google-traffic" == this.overlayType ? this.trafficLayer && (this.trafficLayer.setMap(null), this.visibility || t || i.displayed != this.id || (delete i.displayed, s.style.opacity = "0.0", s.style.display = "none", i.termsOfUse && i.termsOfUse.style && (i.termsOfUse.style.display = "none", i.termsOfUse.style.left = "-9999px", i.poweredBy.style.display = "none"))) : t || i.displayed != this.id || (delete i.displayed, s.style.opacity = "0.0", s.style.display = "none", i.termsOfUse && i.termsOfUse.style && (i.termsOfUse.style.display = "none", i.termsOfUse.style.left = "-9999px", i.poweredBy.style.display = "none"))
                    }
                },
                getMapContainer: function () {
                    return this.mapObject.getDiv()
                },
                getMapObjectBoundsFromOLBounds: function (e) {
                    var t = null;
                    if (null != e) {
                        var i = this.sphericalMercator ? this.inverseMercator(e.bottom, e.left) : new OpenLayers.LonLat(e.bottom, e.left),
                            s = this.sphericalMercator ? this.inverseMercator(e.top, e.right) : new OpenLayers.LonLat(e.top, e.right);
                        t = new google.maps.LatLngBounds(new google.maps.LatLng(i.lat, i.lon), new google.maps.LatLng(s.lat, s.lon))
                    }
                    return t
                },
                getMapObjectLonLatFromMapObjectPixel: function (e) {
                    var t = this.map.getSize(),
                        i = this.getLongitudeFromMapObjectLonLat(this.mapObject.center),
                        s = this.getLatitudeFromMapObjectLonLat(this.mapObject.center),
                        r = this.map.getResolution(),
                        n = e.x - t.w / 2,
                        a = e.y - t.h / 2,
                        o = new OpenLayers.LonLat(i + n * r, s - a * r);
                    return this.wrapDateLine && (o = o.wrapDateLine(this.maxExtent)), this.getMapObjectLonLatFromLonLat(o.lon, o.lat)
                },
                getMapObjectPixelFromMapObjectLonLat: function (e) {
                    var t = this.getLongitudeFromMapObjectLonLat(e),
                        i = this.getLatitudeFromMapObjectLonLat(e),
                        s = this.map.getResolution(),
                        r = this.map.getExtent();
                    return this.getMapObjectPixelFromXY(1 / s * (t - r.left), 1 / s * (r.top - i))
                },
                setMapObjectCenter: function (e, t, i) {
                    this.lastGoogleCenter = e, this.lastGoogleZoom = t, this.checkGoogleZoom(), i ? (this.trafficLayer && void 0 !== this.trafficLayer.map && this.trafficLayer.map && this.map.correct_div_element(this.trafficLayer.map.getDiv()), this.mapObject.setOptions({
                        center: e,
                        zoom: t
                    })) : this.mapObject.setCenter(e, t)
                },
                checkGoogleZoom: function (e) {
                    var t = this,
                        i = this.lastGoogleCenter,
                        s = this.lastGoogleZoom;
                    if (clearTimeout(this.centerTimeout), this.type == google.maps.MapTypeId.HYBRID || this.type == google.maps.MapTypeId.SATELLITE) {
                        if (!i) return;
                        this.centerTimeout = setTimeout((function () {
                            t.maxZoomService.getMaxZoomAtLatLng(i, (function (e) {
                                if (e.status !== google.maps.MaxZoomStatus.OK);
                                else {
                                    if (!t.map) return;
                                    var i = e.zoom;
                                    t.numZoomLevels = i + 1;
                                    var r = t.map.getControlsByClass("OpenLayers.Control.PanZoomBar");
                                    r && r.length && (i <= s && t.map.zoomTo(i), r[0].redraw())
                                }
                            }))
                        }), 50)
                    } else {
                        if (e && e.numZoomLevels && (t.numZoomLevels = e.numZoomLevels), !i) return;
                        if (t.numZoomLevels <= s) {
                            var r = t.map.getControlsByClass("OpenLayers.Control.PanZoomBar");
                            r && r.length && (t.map.zoomTo(maxZoom), r[0].redraw())
                        }
                    }
                },
                getMapObjectZoomFromMapObjectBounds: function (e) {
                    return this.mapObject.getBoundsZoomLevel(e)
                },
                getMapObjectLonLatFromLonLat: function (e, t) {
                    var i;
                    if (this.sphericalMercator) {
                        var s = this.inverseMercator(e, t);
                        i = new google.maps.LatLng(s.lat, s.lon)
                    } else i = new google.maps.LatLng(t, e);
                    return i
                },
                getMapObjectPixelFromXY: function (e, t) {
                    return new google.maps.Point(e, t)
                },
                preSetVisibility: function () {
                    var e = this;
                    this.doNotLoadMapObject && (this.doNotLoadMapObject = !1, this.mapObject = null, this.loadMapObject(), this.overlay && google.maps.event.addListenerOnce(this.mapObject, "tilesloaded", (function () {
                        e.map.applyTransform()
                    })))
                },
                setVisibility: function (e) {
                    e && this.preSetVisibility(), OpenLayers.Layer.Google.prototype.setVisibility.apply(this, arguments), this.overlay && e && this.setGMapVisibility(!0)
                },
                removeMap: function (e) {
                    this._removeListeners(), OpenLayers.Layer.Google.prototype.removeMap.apply(this, arguments)
                },
                destroy: function () {
                    this._removeListeners(), OpenLayers.Layer.Google.prototype.destroy.apply(this, arguments)
                },
                _removeListeners: function () {
                    this.repositionListener && (google.maps.event.removeListener(this.repositionListener), this.repositionListener = null), this.repositionTimer && (window.clearTimeout(this.repositionTimer), this.repositionTimer = null), this.centerTimeout && (window.clearTimeout(this.centerTimeout), this.centerTimeout = null)
                }
            }, window.gm_authFailure = function () {
                "undefined" != typeof WialonHosting && WialonHosting && WialonHosting.Log && WialonHosting.Log.error("google:gm_authFailure"), OpenLayers.Layer.Google.v3.turnOffGoogle()
            }, OpenLayers.Layer.GoogleProxy = function (e, t) {
                var i, s, r = t.layer,
                    n = t.mapType,
                    a = t.mapOptions,
                    o = t.hookLayerDestroy,
                    l = Object.create(r);
                for (i in r) "function" == typeof (s = r[i]) && (s = s.bind(r), l[i] = s);
                Object.assign(l, a, {
                    name: e,
                    CLASS_NAME: "OpenLayers.Layer.GoogleProxy",
                    setVisibility: function (e) {
                        var t = r.setVisibility.apply(l, arguments);
                        return e && (l.type = n, r.type = n, "function" == typeof l.preSetVisibility && l.preSetVisibility(), l.mapObject.setMapTypeId(n), p()), t
                    }
                });
                var h = l.numZoomLevels;

                function p() {
                    l.checkGoogleZoom({
                        numZoomLevels: h
                    })
                }
                l.isGoogleLayer = !0, l.getGoogleMapType = function () {
                    return n
                }, l.setGoogleMapType = function (e) {
                    n = e, l.type = n, r.type = n, l.mapObject && "function" == typeof l.mapObject.setMapTypeId && l.mapObject.setMapTypeId(n), p()
                };
                var u = l.setMap;
                if (l.setMap = function () {
                        var e = u.apply(this, arguments);
                        if (this.mapObject && this.map && this.map.viewPortDiv) {
                            var t = this.mapObject.getDiv();
                            if (t) {
                                var i = this.map.viewPortDiv;
                                i && t.parentNode !== i && i.appendChild(t)
                            }
                        }
                        return e
                    }, o) {
                    var c = l.destroy;
                    l.destroy = function () {
                        var e = !1;
                        if (o.call({
                                layer: r,
                                cont: function () {
                                    e = !0
                                }
                            }), e) return c.apply(this, arguments)
                    }
                }
                return l
            }
        },
        OX6k: function (e, t) {
            var i;
            i = null, OpenLayers.Layer.Yandex = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
                MIN_ZOOM_LEVEL: 0,
                MAX_ZOOM_LEVEL: 19,
                RESOLUTIONS: [1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20, 536441802978515e-20, 268220901489257e-20],
                type: null,
                sphericalMercator: !1,
                dragObject: null,
                traffic_control: null,
                initialize: function (e, t) {
                    OpenLayers.Layer.EventPane.prototype.initialize.apply(this, arguments), OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, arguments), this.addContainerPxFunction(), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), this.initMercatorParameters())
                },
                clone: function () {
                    return new OpenLayers.Layer.Yandex(this.name, this.getOptions())
                },
                loadMapObject: function () {
                    if (this.type || (this.type = "yandex#map"), this.mapObject) return null;
                    try {
                        if (this.mapObject = new ymaps.Map(this.div.id, {
                                center: [0, 0],
                                zoom: this.map.getZoom() || 0,
                                type: this.type,
                                behaviors: [],
                                controls: []
                            }, {
                                projection: ymaps.projection.sphericalMercator
                            }), this.dragPanMapObject = null, this.overlay) {
                            var e = new ymaps.MapType("null", []);
                            if (this.mapObject.setType(e), this.div && this.div.children)
                                for (var t = 0; t < this.div.children.length; t++) this.div.children[t].style.background = "transparent"
                        }
                        var i = this.div.className.split(" ");
                        i.push("olAPILayer"), this.div.className = i.join(" "), this.overlay && "yandex-traffic" == this.overlayType && (this.traffic_control = new ymaps.traffic.provider.Actual({}, {
                            infoLayerShown: !1
                        }), this.traffic_control.setMap(this.mapObject), this.div.style.opacity = "0.6", this.mapObject.layers.options.set({
                            hotspotLayerHasHint: !1,
                            showHintOnHover: !1,
                            disableUaControl: !0,
                            hotspotLayerHasBalloon: !1,
                            trafficInfoHasHint: !1,
                            trafficJamHasHint: !1,
                            trafficLightHasHint: !1,
                            hasHint: !1
                        }));
                        var s = this;
                        this.mapObject.events.add("boundschange", (function (e) {
                            if (s.map) {
                                if (s.map.getZoom() == this.MAX_ZOOM_LEVEL) return;
                                for (var t = 0, i = s.map.layers.length; t < i; t++) layer = s.map.layers[t], "OpenLayers.Layer.Yandex" === layer.CLASS_NAME && (layer && layer.mapObject && s.name !== layer.name ? layer.mapObject.zoomRange.get(e.get("newCenter")).then(OpenLayers.Function.bind((function (e) {
                                    this.numZoomLevels = e[1] + (e[1] > 18 ? 0 : 1), this.MIN_ZOOM_LEVEL = e[0], this.MAX_ZOOM_LEVEL = e[1]
                                }), layer)) : s.redrawPanZoomBar(e.get("newCenter")))
                            } else s.redrawPanZoomBar(e.get("newCenter"))
                        })), this.dragObject = this.mapObject
                    } catch (e) {
                        OpenLayers.Console.error(e)
                    }
                },
                redrawPanZoomBar: function (e) {
                    if (this.mapObject) {
                        e || (e = [(e = this.map.getCenter()).lon, e.lat]);
                        var t = this;
                        this.mapObject.zoomRange.get(e).then((function (e) {
                            if (e[1] + (e[1] > 18 ? 0 : 1) !== t.numZoomLevels) {
                                if (t.numZoomLevels = e[1] + (e[1] > 18 ? 0 : 1), t.MIN_ZOOM_LEVEL = e[0], t.MAX_ZOOM_LEVEL = e[1], !t || !t.map) return;
                                var s = t.map.getControlsByClass("OpenLayers.Control.PanZoomBar");
                                s && s.length && (i = s[0], s[0].redraw())
                            }
                        }))
                    }
                },
                setMap: function (e) {
                    OpenLayers.Layer.EventPane.prototype.setMap.apply(this, arguments)
                },
                display: function (e) {
                    OpenLayers.Layer.prototype.display.apply(this, arguments), this.pane.style.display = this.div.style.display
                },
                onMapResize: function (e) {
                    if (this.mapObject && this.mapObject.container) {
                        var t = this.map.getSize();
                        !this.div || t.h == this.div.clientHeight && t.w == this.div.clientWidth || (this.div.style.height = t.h + "px", this.div.style.width = t.w + "px")
                    }!e && this.mapObject && this.mapObject.container && (this.overlay && this.map.correct_div_element(this.div), this.mapObject.container.fitToViewport(!0))
                },
                setType: function () {
                    this.mapObject && null != this.mapObject.getCenter() && this.mapObject.setType(this.type)
                },
                getOLBoundsFromMapObjectBounds: function (e) {
                    var t = null;
                    if (null != e) {
                        var i = e.getSouthWest(),
                            s = e.getNorthEast();
                        this.sphericalMercator ? (i = this.forwardMercator(i.lng(), i.lat()), s = this.forwardMercator(s.lng(), s.lat())) : (i = new OpenLayers.LonLat(i.lng(), i.lat()), s = new OpenLayers.LonLat(s.lng(), s.lat())), t = new OpenLayers.Bounds(i.lon, i.lat, s.lon, s.lat)
                    }
                    return t
                },
                getMapObjectBoundsFromOLBounds: function (e) {
                    var t = null;
                    if (null != e) {
                        var i = this.sphericalMercator ? this.inverseMercator(e.bottom, e.left) : new OpenLayers.LonLat(e.bottom, e.left),
                            s = this.sphericalMercator ? this.inverseMercator(e.top, e.right) : new OpenLayers.LonLat(e.top, e.right);
                        t = [
                            [i.lon, i.lat],
                            [s.lon, s.lat]
                        ]
                    }
                    return t
                },
                addContainerPxFunction: function () {
                    "undefined" == typeof YMap2 || YMap2.prototype.fromLatLngToContainerPixel || (YMap2.prototype.fromLatLngToContainerPixel = function (e) {
                        var t = this.fromLatLngToDivPixel(e),
                            i = this.getContainer().firstChild.firstChild;
                        return t.x += i.offsetLeft, t.y += i.offsetTop, [t.x, t.y]
                    })
                },
                getWarningHTML: function () {
                    return OpenLayers.i18n("yndexWarning")
                },
                setMapObjectCenter: function (e, t) {
                    this.onMapResize(), this.MAX_ZOOM_LEVEL >= t ? this.mapObject.setCenter(e, t) : (this.map.zoomTo(this.MAX_ZOOM_LEVEL), this.mapObject.setCenter(e, this.MAX_ZOOM_LEVEL), i && (this.map.events.un({
                        mouseup: i.passEventToSlider,
                        mousemove: i.passEventToSlider,
                        scope: i
                    }), i.moveZoomBar(), i.mouseDragStart = null))
                },
                dragPanMapObject: function (e, t) {
                    var i = this.dragObject.getGlobalPixelCenter();
                    this.dragObject.setGlobalPixelCenter([i[0] + e, i[1] - t], this.getMapObjectZoom())
                },
                getMapObjectCenter: function () {
                    return this.mapObject.getCenter()
                },
                getMapObjectZoom: function () {
                    return this.mapObject.getZoom()
                },
                getMapObjectLonLatFromMapObjectPixel: function (e) {
                    return this.mapObject.options.get("projection").fromGlobalPixels(this.mapObject.converter.pageToGlobal(e), this.mapObject.getZoom())
                },
                getMapObjectPixelFromMapObjectLonLat: function (e) {
                    var t = this.mapObject.options.get("projection");
                    return this.mapObject.converter.globalToPage(t.toGlobalPixels(e, this.mapObject.getZoom()))
                },
                getMapObjectZoomFromMapObjectBounds: function (e) {
                    return this.mapObject.getBounds(e)
                },
                getLongitudeFromMapObjectLonLat: function (e) {
                    return this.sphericalMercator ? this.forwardMercator(e[1], e[0]).lon : e[1]
                },
                getLatitudeFromMapObjectLonLat: function (e) {
                    return this.sphericalMercator ? this.forwardMercator(e[1], e[0]).lat : e[0]
                },
                getMapObjectLonLatFromLonLat: function (e, t) {
                    var i;
                    if (this.sphericalMercator) {
                        var s = this.inverseMercator(e, t);
                        i = [s.lat, s.lon]
                    } else i = [t, e];
                    return i
                },
                getXFromMapObjectPixel: function (e) {
                    return e[0]
                },
                getYFromMapObjectPixel: function (e) {
                    return e[1]
                },
                getMapObjectPixelFromXY: function (e, t) {
                    return [e, t]
                },
                CLASS_NAME: "OpenLayers.Layer.Yandex"
            }), window.panZoomBarLocal = i
        },
        PVPC: function (e, t) {
            OpenLayers.Layer = overwrite(OpenLayers.Layer, {
                initResolutions: function () {
                    for (var e = new Array("projection", "units", "scales", "resolutions", "maxScale", "minScale", "maxResolution", "minResolution", "minExtent", "maxExtent", "numZoomLevels", "maxZoomLevel"), t = {}, i = 0; i < e.length; i++) {
                        var s = e[i];
                        t[s] = this.options[s] || this.map[s]
                    }
                    if (null != this.options.minScale && null != this.options.maxScale && null == this.options.scales && (t.scales = null), null != this.options.minResolution && null != this.options.maxResolution && null == this.options.resolutions && (t.resolutions = null), !t.numZoomLevels && t.maxZoomLevel && (t.numZoomLevels = t.maxZoomLevel + 1), null != t.scales || null != t.resolutions) {
                        if (null != t.scales) {
                            t.resolutions = [];
                            for (i = 0; i < t.scales.length; i++) {
                                var r = t.scales[i];
                                t.resolutions[i] = OpenLayers.Util.getResolutionFromScale(r, t.units)
                            }
                        }
                        t.numZoomLevels = t.resolutions.length
                    } else {
                        if (t.minScale) t.maxResolution = OpenLayers.Util.getResolutionFromScale(t.minScale, t.units);
                        else if ("auto" == t.maxResolution) {
                            var n = this.map.getSize(),
                                a = t.maxExtent.getWidth() / n.w,
                                o = t.maxExtent.getHeight() / n.h;
                            t.maxResolution = Math.max(a, o)
                        }
                        if (null != t.maxScale) t.minResolution = OpenLayers.Util.getResolutionFromScale(t.maxScale, t.units);
                        else if ("auto" == t.minResolution && null != t.minExtent) {
                            n = this.map.getSize(), a = t.minExtent.getWidth() / n.w, o = t.minExtent.getHeight() / n.h;
                            t.minResolution = Math.max(a, o)
                        }
                        if (null != t.minResolution && null == this.options.numZoomLevels) {
                            var l = t.maxResolution / t.minResolution;
                            t.numZoomLevels = Math.floor(Math.log(l) / Math.log(2)) + 1
                        }
                        t.resolutions = new Array(t.numZoomLevels);
                        var h = 2;
                        "number" == typeof t.minResolution && t.numZoomLevels > 1 && (h = Math.pow(t.maxResolution / t.minResolution, 1 / (t.numZoomLevels - 1)));
                        for (i = 0; i < t.numZoomLevels; i++) {
                            var p = t.maxResolution / Math.pow(h, i);
                            t.resolutions[i] = p
                        }
                    }
                    t.resolutions.sort((function (e, t) {
                        return t - e
                    })), this.resolutions = t.resolutions, this.maxResolution = t.resolutions[0];
                    var u = t.resolutions.length - 1;
                    this.minResolution = t.resolutions[u], this.scales = [];
                    for (i = 0; i < t.resolutions.length; i++) this.scales[i] = OpenLayers.Util.getScaleFromResolution(t.resolutions[i], t.units);
                    this.minScale = this.scales[0], this.maxScale = this.scales[this.scales.length - 1], this.numZoomLevels = t.numZoomLevels
                },
                CLASS_NAME: "OpenLayers.Layer"
            })
        },
        PYcl: function (e, t) {
            OpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {
                KEY_EVENTS: ["keydown", "keyup"],
                eventListener: null,
                initialize: function (e, t, i) {
                    OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.eventListener = OpenLayers.Function.bindAsEventListener(this.handleKeyEvent, this)
                },
                destroy: function () {
                    this.deactivate(), this.eventListener = null, OpenLayers.Handler.prototype.destroy.apply(this, arguments)
                },
                activate: function () {
                    if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
                        for (var e = 0, t = this.KEY_EVENTS.length; e < t; e++) OpenLayers.Event.observe(document, this.KEY_EVENTS[e], this.eventListener);
                        return !0
                    }
                    return !1
                },
                deactivate: function () {
                    var e = !1;
                    if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
                        for (var t = 0, i = this.KEY_EVENTS.length; t < i; t++) OpenLayers.Event.stopObserving(document, this.KEY_EVENTS[t], this.eventListener);
                        e = !0
                    }
                    return e
                },
                handleKeyEvent: function (e) {
                    this.checkModifiers(e) && this.callback(e.type, [e])
                },
                CLASS_NAME: "OpenLayers.Handler.Keyboard"
            })
        },
        QhWD: function (e, t) {
            OpenLayers.Geometry.Constants = {
                EPSILON: 1e-6,
                EPSILON2: this.EPSILON * this.EPSILON
            }
        },
        UaQn: function (e, t) {
            OpenLayers.Layer.Mgrs = OpenLayers.Class(OpenLayers.Layer, {
                isBaseLayer: !1,
                overlay: !0,
                displayInLayerSwitcher: !1,
                alwaysInRange: !0,
                type: "mgrs",
                cssType: "mgrs",
                layerCenterPx: null,
                pixelCameraOffset: {
                    x: 0,
                    y: 0
                },
                initialize: function (e, t) {
                    OpenLayers.Layer.prototype.initialize.apply(this, arguments);
                    this.wgs84Projection = new OpenLayers.Projection("EPSG:4326"), this.svgRenderer = new WialonHosting.Mgrs.SvgRenderer;
                    var i = this.svgRenderer.getElement();
                    i.style.position = "absolute", this.svgElement = i, this.div.appendChild(i), this.div.style.backfaceVisibility = "hidden"
                },
                getWgs84Center: function () {
                    return this.map.getCenter().clone().transform(this.projection, this.wgs84Projection)
                },
                getDetalization: function () {
                    return this.svgRenderer.getDetalization()
                },
                moveTo: function (e, t, i) {
                    if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), !t && this.layerCenterPx) {
                        var s = this.map.getLayerPxFromLonLat(this.map.getCenter());
                        this.pixelCameraOffset.x = s.x - this.layerCenterPx.x, this.pixelCameraOffset.y = s.y - this.layerCenterPx.y, this.checkRedrawGrid()
                    } else this.redrawGrid()
                },
                moveByPx: function (e, t) {
                    this.pixelCameraOffset.x += e, this.pixelCameraOffset.y += t, this.checkRedrawGrid()
                },
                checkRedrawGrid: function () {
                    var e = this.map.getSize(),
                        t = e.w / 2,
                        i = e.h / 2,
                        s = this.svgRenderer.getCenterPixelOffsets();
                    return this.pixelCameraOffset.x + t > s.right ? (this.redrawGrid(), !0) : this.pixelCameraOffset.x - t < -s.left ? (this.redrawGrid(), !0) : this.pixelCameraOffset.y + i > s.bottom ? (this.redrawGrid(), !0) : this.pixelCameraOffset.y - i < -s.top ? (this.redrawGrid(), !0) : (this.updateLabels(), !1)
                },
                updateLabels: function () {
                    var e = this.map.getSize(),
                        t = e.w / 2,
                        i = e.h / 2,
                        s = {
                            hideGzd: !1,
                            gzdFontSize: 0,
                            viewBox: {
                                left: this.pixelCameraOffset.x - t,
                                right: this.pixelCameraOffset.x + t,
                                top: this.pixelCameraOffset.y - i,
                                bottom: this.pixelCameraOffset.y + i
                            },
                            leftGridLabelsX: this.pixelCameraOffset.x - t + 80,
                            noGzdBackground: !1,
                            staticCenteredLabels: !0
                        },
                        r = this.map.getZoom();
                    r <= 3 && (s.hideGzd = !0, s.gzdFontSize = 11, s.noGzdBackground = !0), 4 === r ? s.gzdFontSize = 12 : 5 === r ? s.gzdFontSize = 12 : r >= 6 && (s.gzdFontSize = 12, s.offsetGzdToTop = !0, r >= 9 && (s.staticCenteredLabels = !1)), this.svgRenderer.updateLabels(s)
                },
                redrawGrid: function () {
                    var e = this.projection,
                        t = this.wgs84Projection,
                        i = this.map;
                    this.pixelCameraOffset.x = 0, this.pixelCameraOffset.y = 0;
                    var s = i.getLayerPxFromLonLat(i.getCenter());
                    this.layerCenterPx = s;
                    var r = i.getCenter().clone().transform(e, t),
                        n = i.getExtent().clone().transform(e, t),
                        a = n.getWidth(),
                        o = n.getHeight();
                    n.left -= a, n.right += a, n.bottom -= o, n.top += o;
                    var l, h, p = i.getZoom(),
                        u = this.map.getSize(),
                        c = {
                            width: 3 * u.w,
                            height: 3 * u.h
                        };
                    Math.abs(r.lat) < 50 ? (l = p >= 7, h = p >= 20 ? 4 : p >= 17 ? 3 : p >= 13 ? 2 : p >= 10 ? 1 : 0) : (l = p >= 6, h = p >= 20 ? 4 : p >= 16 ? 3 : p >= 13 ? 2 : p >= 9 ? 1 : 0), this.svgRenderer.redraw({
                        center: r,
                        bounds: n,
                        maxCanvasSize: c,
                        pointToPixel: function (r) {
                            var n = new OpenLayers.LonLat(r.lon, r.lat);
                            n.transform(t, e);
                            var a = i.getLayerPxFromLonLat(n);
                            return a.x -= s.x, a.y -= s.y, a.x = Math.round(a.x), a.y = Math.round(a.y), a
                        },
                        draw100k: l,
                        gzdStrokeWidth: p >= 9 ? 3 : 2,
                        k100StrokeWidth: p >= 9 ? 3 : 2,
                        draw100kDetalization: h
                    }), this.repositionSvg(), this.updateLabels()
                },
                repositionSvg: function () {
                    var e = this.svgRenderer.getCenterPixel();
                    this.svgElement.style.left = (this.layerCenterPx.x - e.x | 0) + "px", this.svgElement.style.top = (this.layerCenterPx.y - e.y | 0) + "px"
                },
                destroy: function () {
                    console.log("destroy mgrs layer"), OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                },
                CLASS_NAME: "OpenLayers.Layer.Mgrs"
            })
        },
        XzKa: function (e, t) {
            OpenLayers.Layer.Google = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
                MIN_ZOOM_LEVEL: 0,
                MAX_ZOOM_LEVEL: 21,
                RESOLUTIONS: [1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20, 536441802978515e-20, 268220901489257e-20, 1341104507446289e-21, 6.705522537231445e-7],
                type: null,
                wrapDateLine: !0,
                sphericalMercator: !1,
                version: null,
                initialize: function (e, t) {
                    (t = t || {}).version || (t.version = "function" == typeof GMap2 ? "2" : "3");
                    var i = OpenLayers.Layer.Google["v" + t.version.replace(/\./g, "_")];
                    if (!i) throw "Unsupported Google Maps API version: " + t.version;
                    OpenLayers.Util.applyDefaults(t, i), OpenLayers.Util.applyDefaults(t, i.DEFAULTS), t.maxExtent && (t.maxExtent = t.maxExtent.clone()), OpenLayers.Layer.EventPane.prototype.initialize.apply(this, [e, t]), OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, [e, t]), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), this.initMercatorParameters())
                },
                clone: function () {
                    return new OpenLayers.Layer.Google(this.name, this.getOptions())
                },
                setVisibility: function (e) {
                    if (OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this, arguments), this.mapObject && this.mapObject.getDiv()) {
                        var t = null == this.opacity ? 1 : this.opacity;
                        this.setOpacity(t)
                    }
                },
                display: function (e) {
                    this._dragging || this.setGMapVisibility(e), OpenLayers.Layer.EventPane.prototype.display.apply(this, arguments)
                },
                moveTo: function (e, t, i) {
                    i = i || !0, this._dragging = i, OpenLayers.Layer.EventPane.prototype.moveTo.apply(this, arguments), delete this._dragging
                },
                setOpacity: function (e) {
                    if (e !== this.opacity && (null != this.map && this.map.events.triggerEvent("changelayer", {
                            layer: this,
                            property: "opacity"
                        }), this.opacity = e), this.getVisibility()) {
                        var t = this.getMapContainer();
                        OpenLayers.Util.modifyDOMElement(t, null, null, null, null, null, null, e)
                    }
                },
                destroy: function () {
                    if (this.map) {
                        this.setGMapVisibility(!1);
                        var e = OpenLayers.Layer.Google.cache[this.map.id];
                        e && e.count <= 1 && this.removeGMapElements()
                    }
                    OpenLayers.Layer.EventPane.prototype.destroy.apply(this, arguments)
                },
                removeGMapElements: function () {
                    var e = OpenLayers.Layer.Google.cache[this.map.id];
                    if (e) {
                        var t = this.mapObject && this.getMapContainer();
                        t && t.parentNode && t.parentNode.removeChild(t);
                        var i = e.termsOfUse;
                        i && i.parentNode && i.parentNode.removeChild(i);
                        var s = e.poweredBy;
                        s && s.parentNode && s.parentNode.removeChild(s), this.mapObject && window.google && google.maps && google.maps.event && google.maps.event.clearListeners && google.maps.event.clearListeners(this.mapObject, "tilesloaded")
                    }
                },
                removeMap: function (e) {
                    this.visibility && this.mapObject && this.setGMapVisibility(!1);
                    var t = OpenLayers.Layer.Google.cache[e.id];
                    t && (t.count <= 1 ? (this.removeGMapElements(), delete OpenLayers.Layer.Google.cache[e.id]) : --t.count), delete this.termsOfUse, delete this.poweredBy, delete this.mapObject, delete this.dragObject, OpenLayers.Layer.EventPane.prototype.removeMap.apply(this, arguments)
                },
                getOLBoundsFromMapObjectBounds: function (e) {
                    var t = null;
                    if (null != e) {
                        var i = e.getSouthWest(),
                            s = e.getNorthEast();
                        this.sphericalMercator ? (i = this.forwardMercator(i.lng(), i.lat()), s = this.forwardMercator(s.lng(), s.lat())) : (i = new OpenLayers.LonLat(i.lng(), i.lat()), s = new OpenLayers.LonLat(s.lng(), s.lat())), t = new OpenLayers.Bounds(i.lon, i.lat, s.lon, s.lat)
                    }
                    return t
                },
                getWarningHTML: function () {
                    return OpenLayers.i18n("googleWarning")
                },
                getMapObjectCenter: function () {
                    return this.mapObject.getCenter()
                },
                getMapObjectZoom: function () {
                    return this.mapObject.getZoom()
                },
                getLongitudeFromMapObjectLonLat: function (e) {
                    return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lon : e.lng()
                },
                getLatitudeFromMapObjectLonLat: function (e) {
                    return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lat : e.lat()
                },
                getXFromMapObjectPixel: function (e) {
                    return e.x
                },
                getYFromMapObjectPixel: function (e) {
                    return e.y
                },
                CLASS_NAME: "OpenLayers.Layer.Google"
            }), OpenLayers.Layer.Google.cache = {}
        },
        aJrX: function (e, t) {
            OpenLayers.Control.ScaleLine = overwrite(OpenLayers.Control.ScaleLine, {
                geodesic: !0
            })
        },
        b3rJ: function (e, t) {
            OpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {
                slideFactor: 75,
                initialize: function () {
                    OpenLayers.Control.prototype.initialize.apply(this, arguments)
                },
                destroy: function () {
                    this.handler && this.handler.destroy(), this.handler = null, OpenLayers.Control.prototype.destroy.apply(this, arguments)
                },
                draw: function () {
                    this.handler = new OpenLayers.Handler.Keyboard(this, {
                        keydown: this.defaultKeyPress
                    }), this.activate()
                },
                defaultKeyPress: function (e) {
                    switch (e.keyCode) {
                        case OpenLayers.Event.KEY_LEFT:
                            this.map.pan(-this.slideFactor, 0);
                            break;
                        case OpenLayers.Event.KEY_RIGHT:
                            this.map.pan(this.slideFactor, 0);
                            break;
                        case OpenLayers.Event.KEY_UP:
                            this.map.pan(0, -this.slideFactor);
                            break;
                        case OpenLayers.Event.KEY_DOWN:
                            this.map.pan(0, this.slideFactor);
                            break;
                        case 33:
                            var t = this.map.getSize();
                            this.map.pan(0, -.75 * t.h);
                            break;
                        case 34:
                            t = this.map.getSize();
                            this.map.pan(0, .75 * t.h);
                            break;
                        case 35:
                            t = this.map.getSize();
                            this.map.pan(.75 * t.w, 0);
                            break;
                        case 36:
                            t = this.map.getSize();
                            this.map.pan(-.75 * t.w, 0);
                            break;
                        case 43:
                        case 61:
                        case 187:
                        case 107:
                            this.map.zoomIn();
                            break;
                        case 45:
                        case 109:
                        case 189:
                        case 95:
                            this.map.zoomOut()
                    }
                },
                CLASS_NAME: "OpenLayers.Control.KeyboardDefaults"
            })
        },
        bkjM: function (e, t) {
            OpenLayers.Layer.GoMap = OpenLayers.Class.create(), OpenLayers.Layer.GoMap.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                MAX_ZOOM_LEVEL: 19,
                MIN_ZOOM_LEVEL: 4,
                minZoom: 4,
                initialize: function (e, t, i, s) {
                    this.url = t, OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments)
                },
                getURL: function (e) {
                    var t = this.getServerResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom();
                    if (this.wrapDateLine) {
                        var n = Math.pow(2, r);
                        i = (i % n + n) % n
                    }
                    return s < 0 || s >= n || r > this.MAX_ZOOM_LEVEL || r < this.minZoom ? OpenLayers.Util.getImagesLocation() + "404.png" : OpenLayers.String.format(this.url, {
                        x: i,
                        y: s,
                        z: r
                    })
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.GoMap(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.url, e
                },
                setMap: function (e) {
                    OpenLayers.Layer.TMS.prototype.setMap.apply(this, arguments);
                    var t = e.getControlsByClass("OpenLayers.Control.PanZoomBar");
                    t && t.length && (this.numZoomLevels = this.MAX_ZOOM_LEVEL, t[0].redraw())
                },
                CLASS_NAME: "OpenLayers.Layer.GoMap"
            })
        },
        "e+7I": function (e, t) {
            OpenLayers.Geometry.Text = OpenLayers.Class(OpenLayers.Geometry, {
                x: null,
                y: null,
                text: null,
                initialize: function (e, t, i) {
                    OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.x = parseFloat(e), this.y = parseFloat(t), this.text = i
                },
                setText: function (e) {
                    this.text = e
                },
                move: function (e, t) {
                    this.x = this.x + e, this.y = this.y + t, this.clearBounds()
                },
                transform: function (e, t) {
                    return e && t && OpenLayers.Projection.transform(this, e, t), this
                },
                calculateBounds: function () {
                    this.bounds = new OpenLayers.Bounds(this.x, this.y, this.x, this.y)
                },
                CLASS_NAME: "OpenLayers.Geometry.Text"
            })
        },
        eRgs: function (e, t) {
            OpenLayers.Control.SmartSearch = OpenLayers.Class(OpenLayers.Control, {
                draw: function (e) {
                    return null == this.div && (!e && this.position ? e = this.position.clone() : e || (e = new OpenLayers.Pixel(10, 20)), this.div = OpenLayers.Util.createDiv("OpenLayers_Control_Search_" + this.map.id, e, null, null, "absolute"), this.div.className = "control-search", this.addButton(), this.addMenu(), this.bindEvents()), null != e && (this.position = e.clone()), this.moveTo(this.position), this.div
                },
                addButton: function () {
                    var e = OpenLayers.Util.createDiv("OpenLayers_Control_Search_Btn_" + this.map.id, new OpenLayers.Pixel(0, 0), null, null, "absolute");
                    e.className = this.displayClass + " ol-search ol-smooth ol-button", this.div.appendChild(e), jQuery(e).on("mouseenter", (function () {
                        jQuery.Tooltip.show({
                            bodyHandler: function () {
                                return HorizontalBarCMSModule.translation.search || ""
                            }
                        })
                    })).on("mouseleave", (function () {
                        jQuery.Tooltip.hide()
                    }))
                },
                addMenu: function () {
                    var e = '<div id="menu_smart_search"><input type="text" id="menu_smart_search_input" class="all-search-width" placeholder=' + this.translation.search + '><div class="menu_smart_search_input_clear icon"></div></div>',
                        t = OpenLayers.Util.createDiv("OpenLayers_Control_Search_Bar_" + this.map.id, new OpenLayers.Pixel(30, 0), null, null, "absolute");
                    t.className = "ol-bar-container all-search-witdh", t.style.display = "none", t.innerHTML = e, this.div.appendChild(t);
                    var i = WebCMS.get_module("smart_search");
                    i && i.bind_event_handlers(t)
                },
                bindEvents: function () {
                    jQuery(this.div).bind("dblclick touchmove mousemove", (function () {
                        return !1
                    }));
                    var e = function () {
                        document.getElementById("menu_smart_search_input").value = "";
                        var e = document.getElementById("smart_search_result");
                        e && (e.style.display = "none")
                    };
                    this.div.querySelector(".menu_smart_search_input_clear").addEventListener("click", e), this.div.querySelector(".menu_smart_search_input_clear").addEventListener("touchstart", e);
                    var t = this;
                    jQuery(document).bind("wheel mousewheel mousedown touchstart", (function (e) {
                        var i = "OpenLayers_Control_Search_Bar_" + t.map.id,
                            s = "OpenLayers_Control_Search_Btn_" + t.map.id,
                            r = e.target.id,
                            n = document.getElementById("menu_smart_search_input"),
                            a = document.getElementById("smart_search_result");
                        if (r === s) {
                            var o = jQuery("#" + s).hasClass("pressed");
                            jQuery("#" + s).toggleClass("pressed", !o), jQuery("#" + i).css("display", o ? "none" : "block"), o ? (n.style.display = "none", a && (a.style.display = "none"), n.value = "") : (n.style.display = "", n.focus())
                        } else r == s || r == i || jQuery(e.target).parents("#" + i)[0] || (jQuery("#" + s).removeClass("pressed"), jQuery("#" + i).hide(), n.value = "")
                    }));
                    var i = this.map,
                        s = function () {
                            jQuery("#OpenLayers_Control_Search_Btn_" + i.id).removeClass("pressed"), jQuery("#OpenLayers_Control_Search_Bar_" + i.id).hide()
                        };
                    this.map.events.register("zoomBarDown", this, s), this.map.events.register("zoomBarBtnClick", this, s)
                },
                CLASS_NAME: "OpenLayers.Control.SmartSearch"
            })
        },
        efXn: function (e, t) {
            OpenLayers.Layer.Markers = overwrite(OpenLayers.Layer.Markers, {
                isBaseLayer: !1,
                markers: null,
                moveMarkersRedrawTimeout: 0,
                drawn: !1,
                boundsWGS: null,
                trace_icons: !1,
                initialize: function (e, t) {
                    OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.markers = []
                },
                drag_counter: 0,
                destroy: function () {
                    this.clearMarkers(), this.markers = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                },
                setOpacity: function (e) {
                    if (e != this.opacity) {
                        this.opacity = e;
                        for (var t = 0; t < this.markers.length; t++) this.markers[t].setOpacity(this.opacity)
                    }
                },
                drawMarkers: function (e, t) {
                    clearTimeout(this.moveMarkersRedrawTimeout), this.moveMarkersRedrawTimeout = setTimeout(OpenLayers.Function.bind((function (e) {
                        var t = null;
                        if (this.markers)
                            for (var i = 0, s = this.markers.length; i < s; i++) {
                                var r = this.markers[i];
                                if (r.lonlat.lat > e.top && r.lonlat.lat < e.bottom) r.display(!1);
                                else {
                                    var n = {};
                                    (t = this.fixMarkerPos(r.lonlat)).lon == r.lonlat.lon && t.lat == r.lonlat.lat || (n.shiftedCoords = t), this.drawMarker(r, n)
                                }
                            }
                    }), this, e), 1)
                },
                moveTo: function (e, t, i) {
                    this.drag_counter++, this.bounds = this.map.getExtent().clone().transform(this.map.getProjectionObject(), this.map.displayProjection), this.drawMarkers(e)
                },
                addMarker: function (e, t) {
                    if (this.markers.push(e), null != this.opacity && e.setOpacity(this.opacity), this.map && this.map.getExtent()) {
                        e.map = this.map;
                        var i = this.map.getExtent(),
                            s = null;
                        if (e.lonlat.lat > i.top && e.lonlat.lat < i.bottom) e.display(!1);
                        else {
                            var r = {
                                dragging: !1,
                                z_index: t
                            };
                            (s = this.fixMarkerPos(e.lonlat)).lon == e.lonlat.lon && s.lat == e.lonlat.lat || (r.shiftedCoords = s), this.drawMarker(e, r)
                        }
                    }
                },
                fixMarkerPos: function (e) {
                    if (this.map.infiniteMap) {
                        var t = e.clone().transform(this.map.getProjectionObject(), this.map.displayProjection);
                        if (t.lon < this.bounds.left || t.lon > this.bounds.right) {
                            if (t.lon += 360, t.lon >= this.bounds.left && t.lon <= this.bounds.right) return t.transform(this.map.displayProjection, this.map.getProjectionObject()), t;
                            if (t.lon -= 720, t.lon >= this.bounds.left && t.lon <= this.bounds.right) return t.transform(this.map.displayProjection, this.map.getProjectionObject()), t
                        }
                    }
                    return e
                },
                removeMarker: function (e) {
                    this.markers && this.markers.length && (OpenLayers.Util.removeItem(this.markers, e), null != e.icon && null != e.icon.imageDiv && e.icon.imageDiv.parentNode == this.div && (jQuery(e.icon.imageDiv).remove(), e.drawn = !1))
                },
                clearMarkers: function () {
                    if (null != this.markers)
                        for (; this.markers.length > 0;) this.removeMarker(this.markers[0])
                },
                line_cross_line: function (e, t, i, s) {
                    var r = (t.y - e.y) * (i.x - s.x) - (i.y - s.y) * (t.x - e.x),
                        n = (t.y - e.y) * (i.x - e.x) - (i.y - e.y) * (t.x - e.x),
                        a = (i.y - e.y) * (i.x - s.x) - (i.y - s.y) * (i.x - e.x);
                    if (!r && !n && !a) return null;
                    if (!r) return null;
                    var o = n / r,
                        l = a / r,
                        h = new OpenLayers.Pixel;
                    return h.x = e.x + (t.x - e.x) * l, h.y = e.y + (t.y - e.y) * l, 0 <= o && o <= 1 && 0 <= l && l <= 1 ? h : null
                },
                drawMarker: function (e, t) {
                    var i = !1;
                    t && void 0 !== t.dragging && (i = t.dragging);
                    t && void 0 !== t.z_index && t.z_index;
                    var s = 0;
                    t && void 0 !== t.shiftedCoords && (s = t.shiftedCoords);
                    var r = s || e.lonlat,
                        n = this.map.getLayerPxFromLonLat(r);
                    if (null == n) e.display(!1);
                    else {
                        var a = null;
                        if (!this.trace_icons) {
                            if (e.isDrawn() /*!marker.drawn*/ ) e.icon && e.icon.moveTo(n);
                            else {
                                var o = e.draw(n);
                                this.div.appendChild(o), e.drawn = !0
                            }
                            return
                        }
                        var l = this.map.getCurrentSize();
                        l.w -= e.icon.size.w, l.h -= e.icon.size.h;
                        var h = this.map.fixPoint(this.map.getCenter().clone()),
                            p = this.map.getLayerPxFromLonLat(h),
                            u = new OpenLayers.Pixel(p.x - l.w / 2, p.y - l.h / 2),
                            c = new OpenLayers.Pixel(p.x - l.w / 2, p.y + l.h / 2),
                            y = new OpenLayers.Pixel(p.x + l.w / 2, p.y + l.h / 2),
                            d = new OpenLayers.Pixel(p.x + l.w / 2, p.y - l.h / 2);
                        if ((a = this.line_cross_line(n, p, u, c)) || (a = this.line_cross_line(n, p, c, y)) || (a = this.line_cross_line(n, p, y, d)) || (a = this.line_cross_line(n, p, d, u)), a || (a = n), (!e.drawn || !i || Math.abs(e.icon.px.x - a.x) > 5 || Math.abs(e.icon.px.y - a.y) > 5) && e.drawn && (Math.abs(e.icon.px.x - a.x) > 5 || Math.abs(e.icon.px.y - a.y) > 5) && this.map.events.triggerEvent("icons_border", {
                                pos: a,
                                marker: e
                            }), e.isDrawn() /*!marker.drawn*/ ) e.icon.moveTo(a);
                        else {
                            o = e.draw(a);
                            this.div.appendChild(o), e.drawn = !0
                        }
                    }
                },
                getDataExtent: function () {
                    var e = null;
                    if (this.markers && this.markers.length > 0) {
                        e = new OpenLayers.Bounds;
                        for (var t = 0; t < this.markers.length; t++) {
                            var i = this.markers[t];
                            e.extend(i.lonlat)
                        }
                    }
                    return e
                },
                moveByPx: function (e, t) {
                    if (this.trace_icons || this.drawn) {
                        var i = this.map.getExtent();
                        this.bounds = this.map.getExtent().clone().transform(this.map.getProjectionObject(), this.map.displayProjection), this.drawMarkers(i, !0)
                    }
                },
                CLASS_NAME: "OpenLayers.Layer.Markers"
            })
        },
        g2Ny: function (e, t) {
            ! function () {
                var e = {};

                function t(e, i, s) {
                    if (!(this instanceof t)) return new t(e, i, s);
                    this.x = Number(e), this.y = Number(i), this.z = Number(s)
                }

                function i(e, t, s) {
                    if (!(this instanceof i)) return new i(e, t, s);
                    void 0 === s && (s = i.datum.WGS84), this.lat = Number(e), this.lon = Number(t), this.datum = s
                }

                function s(e, t, r, n, a, o, l) {
                    if (!(this instanceof s)) return new s(e, t, r, n, a, o, l);
                    if (void 0 === a && (a = i.datum.WGS84), void 0 === o && (o = null), void 0 === l && (l = null), !(1 <= e && e <= 60)) throw new Error("Invalid UTM zone " + e);
                    if (!t.match(/[NS]/i)) throw new Error("Invalid UTM hemisphere " + t);
                    this.zone = Number(e), this.hemisphere = t.toUpperCase(), this.easting = Number(r), this.northing = Number(n), this.datum = a, this.convergence = null === o ? null : Number(o), this.scale = null === l ? null : Number(l)
                }

                function r(e, t, s, n, a, o, l) {
                    if (!(this instanceof r)) return new r(e, t, s, n, a, o, l);
                    if (void 0 === l && (l = i.datum.WGS84), !(1 <= e && e <= 60)) throw new Error("Invalid MGRS grid reference (zone ‘" + e + "’)");
                    if (1 != t.length) throw new Error("Invalid MGRS grid reference (band ‘" + t + "’)");
                    if (-1 == r.latBands.indexOf(t)) throw new Error("Invalid MGRS grid reference (band ‘" + t + "’)");
                    if (1 != s.length) throw new Error("Invalid MGRS grid reference (e100k ‘" + s + "’)");
                    if (1 != n.length) throw new Error("Invalid MGRS grid reference (n100k ‘" + n + "’)");
                    this.zone = Number(e), this.band = t, this.e100k = s, this.n100k = n, this.easting = Number(a), this.northing = Number(o), this.datum = l
                }
                e.parseDMS = function (e) {
                    if ("number" == typeof e && isFinite(e)) return Number(e);
                    var t, i = String(e).trim().replace(/^-/, "").replace(/[NSEW]$/i, "").split(/[^0-9.,]+/);
                    if ("" == i[i.length - 1] && i.splice(i.length - 1), "" == i) return NaN;
                    switch (i.length) {
                        case 3:
                            t = i[0] / 1 + i[1] / 60 + i[2] / 3600;
                            break;
                        case 2:
                            t = i[0] / 1 + i[1] / 60;
                            break;
                        case 1:
                            t = i[0];
                            break;
                        default:
                            return NaN
                    }
                    return /^-|[WS]$/i.test(e.trim()) && (t = -t), Number(t)
                }, e.separator = "", e.toDMS = function (t, i, s) {
                    if (isNaN(t)) return null;
                    if (void 0 === i && (i = "dms"), void 0 === s) switch (i) {
                        case "d":
                        case "deg":
                            s = 4;
                            break;
                        case "dm":
                        case "deg+min":
                            s = 2;
                            break;
                        case "dms":
                        case "deg+min+sec":
                            s = 0;
                            break;
                        default:
                            i = "dms", s = 0
                    }
                    var r, n, a, o;
                    switch (t = Math.abs(t), i) {
                        default:
                        case "d":
                        case "deg":
                            (n = t.toFixed(s)) < 100 && (n = "0" + n), n < 10 && (n = "0" + n), r = n + "°";
                            break;
                        case "dm":
                        case "deg+min":
                            n = Math.floor(t), 60 == (a = (60 * t % 60).toFixed(s)) && (a = 0, n++), a < 10 && (a = "0" + a), r = (n = ("000" + n).slice(-3)) + "°" + e.separator + a + "′";
                            break;
                        case "dms":
                        case "deg+min+sec":
                            n = Math.floor(t), a = Math.floor(3600 * t / 60) % 60, 60 == (o = (3600 * t % 60).toFixed(s)) && (o = (0).toFixed(s), a++), 60 == a && (a = 0, n++), n = ("000" + n).slice(-3), a = ("00" + a).slice(-2), o < 10 && (o = "0" + o), r = n + "°" + e.separator + a + "′" + e.separator + o + "″"
                    }
                    return r
                }, e.toLat = function (t, i, s) {
                    var r = e.toDMS(t, i, s);
                    return null === r ? "–" : r.slice(1) + e.separator + (t < 0 ? "S" : "N")
                }, e.toLon = function (t, i, s) {
                    var r = e.toDMS(t, i, s);
                    return null === r ? "–" : r + e.separator + (t < 0 ? "W" : "E")
                }, e.toBrng = function (t, i, s) {
                    t = (Number(t) + 360) % 360;
                    var r = e.toDMS(t, i, s);
                    return null === r ? "–" : r.replace("360", "0")
                }, e.compassPoint = function (e, t) {
                    void 0 === t && (t = 3), e = (e % 360 + 360) % 360;
                    var i = {
                            1: ["N", "E", "S", "W"],
                            2: ["N", "NE", "E", "SE", "S", "SW", "W", "NW"],
                            3: ["N", "NNE", "NE", "ENE", "E", "ESE", "SE", "SSE", "S", "SSW", "SW", "WSW", "W", "WNW", "NW", "NNW"]
                        },
                        s = i[t].length;
                    return i[t][Math.round(e / 360 * s) % s]
                }, void 0 === Number.prototype.toRadians && (Number.prototype.toRadians = function () {
                    return this * Math.PI / 180
                }), void 0 === Number.prototype.toDegrees && (Number.prototype.toDegrees = function () {
                    return 180 * this / Math.PI
                }), t.prototype.plus = function (e) {
                    if (!(e instanceof t)) throw new TypeError("v is not Vector3d object");
                    return new t(this.x + e.x, this.y + e.y, this.z + e.z)
                }, t.prototype.minus = function (e) {
                    if (!(e instanceof t)) throw new TypeError("v is not Vector3d object");
                    return new t(this.x - e.x, this.y - e.y, this.z - e.z)
                }, t.prototype.times = function (e) {
                    return e = Number(e), new t(this.x * e, this.y * e, this.z * e)
                }, t.prototype.dividedBy = function (e) {
                    return e = Number(e), new t(this.x / e, this.y / e, this.z / e)
                }, t.prototype.dot = function (e) {
                    if (!(e instanceof t)) throw new TypeError("v is not Vector3d object");
                    return this.x * e.x + this.y * e.y + this.z * e.z
                }, t.prototype.cross = function (e) {
                    if (!(e instanceof t)) throw new TypeError("v is not Vector3d object");
                    return new t(this.y * e.z - this.z * e.y, this.z * e.x - this.x * e.z, this.x * e.y - this.y * e.x)
                }, t.prototype.negate = function () {
                    return new t(-this.x, -this.y, -this.z)
                }, t.prototype.length = function () {
                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
                }, t.prototype.unit = function () {
                    var e = this.length();
                    return 1 == e ? this : 0 == e ? this : new t(this.x / e, this.y / e, this.z / e)
                }, t.prototype.angleTo = function (e, i) {
                    if (!(e instanceof t)) throw new TypeError("v is not Vector3d object");
                    if (!(i instanceof t || null == i)) throw new TypeError("n is not Vector3d object");
                    var s = null == i ? 1 : Math.sign(this.cross(e).dot(i)),
                        r = this.cross(e).length() * s,
                        n = this.dot(e);
                    return Math.atan2(r, n)
                }, t.prototype.rotateAround = function (e, i) {
                    if (!(e instanceof t)) throw new TypeError("axis is not Vector3d object");
                    for (var s = this.unit(), r = [s.x, s.y, s.z], n = e.unit(), a = Math.sin(i), o = Math.cos(i), l = [
                            [n.x * n.x * (1 - o) + o, n.x * n.y * (1 - o) - n.z * a, n.x * n.z * (1 - o) + n.y * a],
                            [n.y * n.x * (1 - o) + n.z * a, n.y * n.y * (1 - o) + o, n.y * n.z * (1 - o) - n.x * a],
                            [n.z * n.x * (1 - o) - n.y * a, n.z * n.y * (1 - o) + n.x * a, n.z * n.z * (1 - o) + o]
                        ], h = [0, 0, 0], p = 0; p < 3; p++)
                        for (var u = 0; u < 3; u++) h[p] += l[p][u] * r[u];
                    return new t(h[0], h[1], h[2])
                }, t.prototype.toString = function (e) {
                    var t = void 0 === e ? 3 : Number(e);
                    return "[" + this.x.toFixed(t) + "," + this.y.toFixed(t) + "," + this.z.toFixed(t) + "]"
                }, void 0 === Math.sign && (Math.sign = function (e) {
                    return 0 === (e = +e) || isNaN(e) ? e : e > 0 ? 1 : -1
                }), i.prototype.clone = function () {
                    return new i(this.lat, this.lon, this.datum)
                }, i.ellipsoid = {
                    WGS84: {
                        a: 6378137,
                        b: 6356752.314245,
                        f: 1 / 298.257223563
                    },
                    Airy1830: {
                        a: 6377563.396,
                        b: 6356256.909,
                        f: 1 / 299.3249646
                    },
                    AiryModified: {
                        a: 6377340.189,
                        b: 6356034.448,
                        f: 1 / 299.3249646
                    },
                    Bessel1841: {
                        a: 6377397.155,
                        b: 6356078.962818,
                        f: 1 / 299.1528128
                    },
                    Clarke1866: {
                        a: 6378206.4,
                        b: 6356583.8,
                        f: 1 / 294.978698214
                    },
                    Clarke1880IGN: {
                        a: 6378249.2,
                        b: 6356515,
                        f: 1 / 293.466021294
                    },
                    GRS80: {
                        a: 6378137,
                        b: 6356752.31414,
                        f: 1 / 298.257222101
                    },
                    Intl1924: {
                        a: 6378388,
                        b: 6356911.946,
                        f: 1 / 297
                    },
                    WGS72: {
                        a: 6378135,
                        b: 6356750.5,
                        f: 1 / 298.26
                    }
                }, i.datum = {
                    ED50: {
                        ellipsoid: i.ellipsoid.Intl1924,
                        transform: [89.5, 93.8, 123.1, -1.2, 0, 0, .156]
                    },
                    Irl1975: {
                        ellipsoid: i.ellipsoid.AiryModified,
                        transform: [-482.53, 130.596, -564.557, -8.15, -1.042, -.214, -.631]
                    },
                    NAD27: {
                        ellipsoid: i.ellipsoid.Clarke1866,
                        transform: [8, -160, -176, 0, 0, 0, 0]
                    },
                    NAD83: {
                        ellipsoid: i.ellipsoid.GRS80,
                        transform: [1.004, -1.91, -.515, -.0015, .0267, 34e-5, .011]
                    },
                    NTF: {
                        ellipsoid: i.ellipsoid.Clarke1880IGN,
                        transform: [168, 60, -320, 0, 0, 0, 0]
                    },
                    OSGB36: {
                        ellipsoid: i.ellipsoid.Airy1830,
                        transform: [-446.448, 125.157, -542.06, 20.4894, -.1502, -.247, -.8421]
                    },
                    Potsdam: {
                        ellipsoid: i.ellipsoid.Bessel1841,
                        transform: [-582, -105, -414, -8.3, 1.04, .35, -3.08]
                    },
                    TokyoJapan: {
                        ellipsoid: i.ellipsoid.Bessel1841,
                        transform: [148, -507, -685, 0, 0, 0, 0]
                    },
                    WGS72: {
                        ellipsoid: i.ellipsoid.WGS72,
                        transform: [0, 0, -4.5, -.22, 0, 0, .554]
                    },
                    WGS84: {
                        ellipsoid: i.ellipsoid.WGS84,
                        transform: [0, 0, 0, 0, 0, 0, 0]
                    }
                }, i.prototype.convertDatum = function (e) {
                    var t = this,
                        s = null;
                    if (t.datum == i.datum.WGS84 && (s = e.transform), e == i.datum.WGS84) {
                        s = [];
                        for (var r = 0; r < 7; r++) s[r] = -t.datum.transform[r]
                    }
                    return null == s && (t = this.convertDatum(i.datum.WGS84), s = e.transform), t.toCartesian().applyTransform(s).toLatLonE(e)
                }, i.prototype.toCartesian = function () {
                    var e = this.lat.toRadians(),
                        i = this.lon.toRadians(),
                        s = this.datum.ellipsoid.a,
                        r = this.datum.ellipsoid.f,
                        n = Math.sin(e),
                        a = Math.cos(e),
                        o = Math.sin(i),
                        l = Math.cos(i),
                        h = 2 * r - r * r,
                        p = s / Math.sqrt(1 - h * n * n);
                    return new t((p + 0) * a * l, (p + 0) * a * o, (p * (1 - h) + 0) * n)
                }, t.prototype.toLatLonE = function (e) {
                    var t = this.x,
                        s = this.y,
                        r = this.z,
                        n = e.ellipsoid.a,
                        a = e.ellipsoid.b,
                        o = e.ellipsoid.f,
                        l = 2 * o - o * o,
                        h = l / (1 - l),
                        p = Math.sqrt(t * t + s * s),
                        u = a * r / (n * p) * (1 + h * a / Math.sqrt(p * p + r * r)),
                        c = u / Math.sqrt(1 + u * u),
                        y = c / u,
                        d = isNaN(y) ? 0 : Math.atan2(r + h * a * c * c * c, p - l * n * y * y * y),
                        m = Math.atan2(s, t),
                        f = Math.sin(d);
                    Math.cos(d), Math.sqrt(1 - l * f * f);
                    return new i(d.toDegrees(), m.toDegrees(), e)
                }, t.prototype.applyTransform = function (e) {
                    var i = this.x,
                        s = this.y,
                        r = this.z,
                        n = e[0],
                        a = e[1],
                        o = e[2],
                        l = e[3] / 1e6 + 1,
                        h = (e[4] / 3600).toRadians(),
                        p = (e[5] / 3600).toRadians(),
                        u = (e[6] / 3600).toRadians();
                    return new t(n + i * l - s * u + r * p, a + i * u + s * l - r * h, o - i * p + s * h + r * l)
                }, i.prototype.toString = function (t, i) {
                    return e.toLat(this.lat, t, i) + ", " + e.toLon(this.lon, t, i)
                }, void 0 === Number.prototype.toRadians && (Number.prototype.toRadians = function () {
                    return this * Math.PI / 180
                }), void 0 === Number.prototype.toDegrees && (Number.prototype.toDegrees = function () {
                    return 180 * this / Math.PI
                }), i.prototype.distanceTo = function (e) {
                    if (!(e instanceof i)) throw new TypeError("point is not LatLon object");
                    try {
                        return Number(this.inverse(e).distance.toFixed(3))
                    } catch (e) {
                        return NaN
                    }
                }, i.prototype.initialBearingTo = function (e) {
                    if (!(e instanceof i)) throw new TypeError("point is not LatLon object");
                    try {
                        return Number(this.inverse(e).initialBearing.toFixed(9))
                    } catch (e) {
                        return NaN
                    }
                }, i.prototype.finalBearingTo = function (e) {
                    if (!(e instanceof i)) throw new TypeError("point is not LatLon object");
                    try {
                        return Number(this.inverse(e).finalBearing.toFixed(9))
                    } catch (e) {
                        return NaN
                    }
                }, i.prototype.destinationPoint = function (e, t) {
                    return this.direct(Number(e), Number(t)).point
                }, i.prototype.finalBearingOn = function (e, t) {
                    return Number(this.direct(Number(e), Number(t)).finalBearing.toFixed(9))
                }, i.prototype.direct = function (e, t) {
                    var s, r, n, a, o = this.lat.toRadians(),
                        l = this.lon.toRadians(),
                        h = t.toRadians(),
                        p = e,
                        u = this.datum.ellipsoid.a,
                        c = this.datum.ellipsoid.b,
                        y = this.datum.ellipsoid.f,
                        d = Math.sin(h),
                        m = Math.cos(h),
                        f = (1 - y) * Math.tan(o),
                        g = 1 / Math.sqrt(1 + f * f),
                        L = f * g,
                        v = Math.atan2(f, m),
                        O = g * d,
                        S = 1 - O * O,
                        x = S * (u * u - c * c) / (c * c),
                        w = 1 + x / 16384 * (4096 + x * (x * (320 - 175 * x) - 768)),
                        C = x / 1024 * (256 + x * (x * (74 - 47 * x) - 128)),
                        b = p / (c * w),
                        E = 0;
                    do {
                        s = Math.cos(2 * v + b), a = b, b = p / (c * w) + C * (r = Math.sin(b)) * (s + C / 4 * ((n = Math.cos(b)) * (2 * s * s - 1) - C / 6 * s * (4 * r * r - 3) * (4 * s * s - 3)))
                    } while (Math.abs(b - a) > 1e-12 && ++E < 100);
                    if (E >= 100) throw new Error("Formula failed to converge");
                    var N = L * r - g * n * m,
                        M = Math.atan2(L * n + g * r * m, (1 - y) * Math.sqrt(O * O + N * N)),
                        P = y / 16 * S * (4 + y * (4 - 3 * S)),
                        _ = (l + (Math.atan2(r * d, g * n - L * r * m) - (1 - P) * y * O * (b + P * r * (s + P * n * (2 * s * s - 1)))) + 3 * Math.PI) % (2 * Math.PI) - Math.PI,
                        T = Math.atan2(O, -N);
                    return T = (T + 2 * Math.PI) % (2 * Math.PI), {
                        point: new i(M.toDegrees(), _.toDegrees(), this.datum),
                        finalBearing: T.toDegrees(),
                        iterations: E
                    }
                }, i.prototype.inverse = function (e) {
                    var t = e; - 180 == this.lon && (this.lon = 180);
                    var i, s, r, n, a, o, l = this.lat.toRadians(),
                        h = this.lon.toRadians(),
                        p = t.lat.toRadians(),
                        u = t.lon.toRadians(),
                        c = this.datum.ellipsoid.a,
                        y = this.datum.ellipsoid.b,
                        d = this.datum.ellipsoid.f,
                        m = u - h,
                        f = (1 - d) * Math.tan(l),
                        g = 1 / Math.sqrt(1 + f * f),
                        L = f * g,
                        v = (1 - d) * Math.tan(p),
                        O = 1 / Math.sqrt(1 + v * v),
                        S = v * O,
                        x = 0,
                        w = 0,
                        C = 0,
                        b = 0,
                        E = 0,
                        N = m,
                        M = 0;
                    do {
                        if (0 == (r = O * (i = Math.sin(N)) * (O * i) + (g * S - L * O * (s = Math.cos(N))) * (g * S - L * O * s))) break;
                        if (w = L * S + g * O * s, o = N, N = m + (1 - (a = d / 16 * (b = 1 - (n = g * O * i / (x = Math.sqrt(r))) * n) * (4 + d * (4 - 3 * b)))) * d * n * ((C = Math.atan2(x, w)) + a * x * ((E = 0 != b ? w - 2 * L * S / b : 0) + a * w * (2 * E * E - 1))), Math.abs(N) > Math.PI) throw new Error("λ > π")
                    } while (Math.abs(N - o) > 1e-12 && ++M < 1e3);
                    if (M >= 1e3) throw new Error("Formula failed to converge");
                    var P = b * (c * c - y * y) / (y * y),
                        _ = P / 1024 * (256 + P * (P * (74 - 47 * P) - 128)),
                        T = y * (1 + P / 16384 * (4096 + P * (P * (320 - 175 * P) - 768))) * (C - _ * x * (E + _ / 4 * (w * (2 * E * E - 1) - _ / 6 * E * (4 * x * x - 3) * (4 * E * E - 3)))),
                        F = Math.atan2(O * i, g * S - L * O * s),
                        A = Math.atan2(g * i, -L * O + g * S * s);
                    return F = (F + 2 * Math.PI) % (2 * Math.PI), A = (A + 2 * Math.PI) % (2 * Math.PI), {
                        distance: T,
                        initialBearing: 0 == T ? NaN : F.toDegrees(),
                        finalBearing: 0 == T ? NaN : A.toDegrees(),
                        iterations: M
                    }
                }, void 0 === Number.prototype.toRadians && (Number.prototype.toRadians = function () {
                    return this * Math.PI / 180
                }), void 0 === Number.prototype.toDegrees && (Number.prototype.toDegrees = function () {
                    return 180 * this / Math.PI
                }), t.prototype.greatCircle = function (e) {
                    var i = Number(e).toRadians(),
                        s = new t(0, 0, 1).cross(this),
                        r = this.cross(s),
                        n = s.times(Math.cos(i) / s.length());
                    return r.times(Math.sin(i) / r.length()).minus(n)
                }, void 0 === Number.prototype.toRadians && (Number.prototype.toRadians = function () {
                    return this * Math.PI / 180
                }), void 0 === Number.prototype.toDegrees && (Number.prototype.toDegrees = function () {
                    return 180 * this / Math.PI
                }), void 0 === Math.sign && (Math.sign = function (e) {
                    return 0 === (e = +e) || isNaN(e) ? e : e > 0 ? 1 : -1
                }), i.prototype.toUtm = function (e) {
                    if (isNaN(this.lat) || isNaN(this.lon)) throw new Error("Invalid point");
                    if (this.lon >= 180 && (this.lon = this.lon - 360), this.lon < -180 || this.lon >= 180) throw new Error("Invalid longitude");
                    if (!(-80 <= this.lat && this.lat <= 84)) throw new Error("Outside UTM limits");
                    var t = !!e;
                    e || (e = Math.floor((this.lon + 180) / 6) + 1);
                    var i = (6 * (e - 1) - 180 + 3).toRadians(),
                        r = "CDEFGHJKLMNPQRSTUVWXX".charAt(Math.floor(this.lat / 8 + 10));
                    t || (31 == e && "V" == r && this.lon >= 3 && (e++, i += 6..toRadians()), 32 == e && "X" == r && this.lon < 9 && (e--, i -= 6..toRadians()), 32 == e && "X" == r && this.lon >= 9 && (e++, i += 6..toRadians()), 34 == e && "X" == r && this.lon < 21 && (e--, i -= 6..toRadians()), 34 == e && "X" == r && this.lon >= 21 && (e++, i += 6..toRadians()), 36 == e && "X" == r && this.lon < 33 && (e--, i -= 6..toRadians()), 36 == e && "X" == r && this.lon >= 33 && (e++, i += 6..toRadians()));
                    for (var n = this.lat.toRadians(), a = this.lon.toRadians() - i, o = this.datum.ellipsoid.a, l = this.datum.ellipsoid.f, h = Math.sqrt(l * (2 - l)), p = l / (2 - l), u = p * p, c = p * u, y = p * c, d = p * y, m = p * d, f = Math.cos(a), g = Math.sin(a), L = Math.tan(a), v = Math.tan(n), O = Math.sinh(h * Math.atanh(h * v / Math.sqrt(1 + v * v))), S = v * Math.sqrt(1 + O * O) - O * Math.sqrt(1 + v * v), x = Math.atan2(S, f), w = Math.asinh(g / Math.sqrt(S * S + f * f)), C = o / (1 + p) * (1 + .25 * u + 1 / 64 * y + 1 / 256 * m), b = [null, .5 * p - 2 / 3 * u + 5 / 16 * c + 41 / 180 * y - 127 / 288 * d + 7891 / 37800 * m, 13 / 48 * u - .6 * c + 557 / 1440 * y + 281 / 630 * d - 1983433 / 1935360 * m, 61 / 240 * c - 103 / 140 * y + 15061 / 26880 * d + 167603 / 181440 * m, 49561 / 161280 * y - 179 / 168 * d + 6601661 / 7257600 * m, 34729 / 80640 * d - 3418889 / 1995840 * m, .6650675310896665 * m], E = x, N = 1; N <= 6; N++) E += b[N] * Math.sin(2 * N * x) * Math.cosh(2 * N * w);
                    var M = w;
                    for (N = 1; N <= 6; N++) M += b[N] * Math.cos(2 * N * x) * Math.sinh(2 * N * w);
                    var P = .9996 * C * M,
                        _ = .9996 * C * E,
                        T = 1;
                    for (N = 1; N <= 6; N++) T += 2 * N * b[N] * Math.cos(2 * N * x) * Math.cosh(2 * N * w);
                    var F = 0;
                    for (N = 1; N <= 6; N++) F += 2 * N * b[N] * Math.sin(2 * N * x) * Math.sinh(2 * N * w);
                    var A = Math.atan(S / Math.sqrt(1 + S * S) * L) + Math.atan2(F, T),
                        R = Math.sin(n),
                        I = .9996 * (Math.sqrt(1 - h * h * R * R) * Math.sqrt(1 + v * v) / Math.sqrt(S * S + f * f)) * (C / o * Math.sqrt(T * T + F * F));
                    P += 5e5, _ < 0 && (_ += 1e7), P = Number(P.toFixed(6)), _ = Number(_.toFixed(6));
                    var D = Number(A.toDegrees().toFixed(9)),
                        k = Number(I.toFixed(12));
                    return new s(e, this.lat >= 0 ? "N" : "S", P, _, this.datum, D, k)
                }, s.prototype.toLatLonE = function () {
                    var e = this.zone,
                        t = this.hemisphere,
                        s = this.easting,
                        r = this.northing;
                    if (isNaN(e) || isNaN(s) || isNaN(r)) throw new Error("Invalid coordinate");
                    var n = this.datum.ellipsoid.a,
                        a = this.datum.ellipsoid.f;
                    s -= 5e5, r = "S" == t ? r - 1e7 : r;
                    for (var o = Math.sqrt(a * (2 - a)), l = a / (2 - a), h = l * l, p = l * h, u = l * p, c = l * u, y = l * c, d = n / (1 + l) * (1 + .25 * h + 1 / 64 * u + 1 / 256 * y), m = s / (.9996 * d), f = r / (.9996 * d), g = [null, .5 * l - 2 / 3 * h + 37 / 96 * p - 1 / 360 * u - 81 / 512 * c + 96199 / 604800 * y, 1 / 48 * h + 1 / 15 * p - 437 / 1440 * u + 46 / 105 * c - 1118711 / 3870720 * y, 17 / 480 * p - 37 / 840 * u - 209 / 4480 * c + 5569 / 90720 * y, 4397 / 161280 * u - 11 / 504 * c - 830251 / 7257600 * y, 4583 / 161280 * c - 108847 / 3991680 * y, .03233083094085698 * y], L = f, v = 1; v <= 6; v++) L -= g[v] * Math.sin(2 * v * f) * Math.cosh(2 * v * m);
                    var O = m;
                    for (v = 1; v <= 6; v++) O -= g[v] * Math.cos(2 * v * f) * Math.sinh(2 * v * m);
                    var S = Math.sinh(O),
                        x = Math.sin(L),
                        w = Math.cos(L),
                        C = x / Math.sqrt(S * S + w * w),
                        b = C;
                    do {
                        var E = Math.sinh(o * Math.atanh(o * b / Math.sqrt(1 + b * b))),
                            N = b * Math.sqrt(1 + E * E) - E * Math.sqrt(1 + b * b),
                            M = (C - N) / Math.sqrt(1 + N * N) * (1 + (1 - o * o) * b * b) / ((1 - o * o) * Math.sqrt(1 + b * b));
                        b += M
                    } while (Math.abs(M) > 1e-12);
                    var P = b,
                        _ = Math.atan(P),
                        T = Math.atan2(S, w),
                        F = 1;
                    for (v = 1; v <= 6; v++) F -= 2 * v * g[v] * Math.cos(2 * v * f) * Math.cosh(2 * v * m);
                    var A = 0;
                    for (v = 1; v <= 6; v++) A += 2 * v * g[v] * Math.sin(2 * v * f) * Math.sinh(2 * v * m);
                    var R = Math.atan(Math.tan(L) * Math.tanh(O)) + Math.atan2(A, F),
                        I = Math.sin(_),
                        D = .9996 * (Math.sqrt(1 - o * o * I * I) * Math.sqrt(1 + P * P) * Math.sqrt(S * S + w * w)) * (d / n / Math.sqrt(F * F + A * A));
                    T += (6 * (e - 1) - 180 + 3).toRadians();
                    var k = Number(_.toDegrees().toFixed(11)),
                        z = Number(T.toDegrees().toFixed(11)),
                        B = Number(R.toDegrees().toFixed(9)),
                        U = Number(D.toFixed(12)),
                        G = new i(k, z, this.datum);
                    return G.convergence = B, G.scale = U, G
                }, s.parse = function (e, t) {
                    if (void 0 === t && (t = i.datum.WGS84), null == (e = e.trim().match(/\S+/g)) || 4 != e.length) throw new Error("Invalid UTM coordinate ‘" + e + "’");
                    return new s(e[0], e[1], e[2], e[3], t)
                }, s.prototype.toString = function (e) {
                    e = Number(e || 0);
                    var t = this.zone < 10 ? "0" + this.zone : this.zone,
                        i = this.hemisphere,
                        s = this.easting,
                        r = this.northing;
                    return isNaN(t) || !i.match(/[NS]/) || isNaN(s) || isNaN(r) ? "" : t + " " + i + " " + s.toFixed(e) + " " + r.toFixed(e)
                }, s.prototype.clone = function () {
                    return new s(this.zone, this.hemisphere, this.easting, this.northing, this.datum, this.convergence, this.scale)
                }, void 0 === Math.sinh && (Math.sinh = function (e) {
                    return (Math.exp(e) - Math.exp(-e)) / 2
                }), void 0 === Math.cosh && (Math.cosh = function (e) {
                    return (Math.exp(e) + Math.exp(-e)) / 2
                }), void 0 === Math.tanh && (Math.tanh = function (e) {
                    return (Math.exp(e) - Math.exp(-e)) / (Math.exp(e) + Math.exp(-e))
                }), void 0 === Math.asinh && (Math.asinh = function (e) {
                    return Math.log(e + Math.sqrt(1 + e * e))
                }), void 0 === Math.atanh && (Math.atanh = function (e) {
                    return Math.log((1 + e) / (1 - e)) / 2
                }), r.latBands = "CDEFGHJKLMNPQRSTUVWXX", r.e100kLetters = ["ABCDEFGH", "JKLMNPQR", "STUVWXYZ"], r.n100kLetters = ["ABCDEFGHJKLMNPQRSTUV", "FGHJKLMNPQRSTUVABCDE"], s.prototype.toMgrs = function () {
                    if (isNaN(this.zone + this.easting + this.northing)) throw new Error("Invalid UTM coordinate ‘" + this.toString() + "’");
                    var e = this.zone,
                        t = this.toLatLonE(),
                        i = r.latBands.charAt(Math.floor(t.lat / 8 + 10)),
                        s = Math.floor(this.easting / 1e5),
                        n = r.e100kLetters[(e - 1) % 3].charAt(s - 1),
                        a = Math.floor(this.northing / 1e5) % 20,
                        o = r.n100kLetters[(e - 1) % 2].charAt(a),
                        l = this.easting % 1e5,
                        h = this.northing % 1e5;
                    return new r(e, i, n, o, l = Number(l.toFixed(6)), h = Number(h.toFixed(6)))
                }, r.prototype.toUtm = function () {
                    for (var e = this.zone, t = this.band, n = this.e100k, a = this.n100k, o = this.easting, l = this.northing, h = t >= "N" ? "N" : "S", p = 1e5 * (r.e100kLetters[(e - 1) % 3].indexOf(n) + 1), u = 1e5 * r.n100kLetters[(e - 1) % 2].indexOf(a), c = 8 * (r.latBands.indexOf(t) - 10), y = 1e5 * Math.floor(new i(c, 0).toUtm().northing / 1e5), d = 0; d + u + l < y;) d += 2e6;
                    return new s(e, h, p + o, d + u + l, this.datum)
                }, r.parse = function (e) {
                    if (!(e = e.trim()).match(/\s/)) {
                        var t = e.slice(5);
                        t = t.slice(0, t.length / 2) + " " + t.slice(-t.length / 2), e = e.slice(0, 3) + " " + e.slice(3, 5) + " " + t
                    }
                    if (null == (e = e.match(/\S+/g)) || 4 != e.length) throw new Error("Invalid MGRS grid reference ‘" + e + "’");
                    var i = e[0],
                        s = i.slice(0, 2),
                        n = i.slice(2, 3),
                        a = e[1],
                        o = a.slice(0, 1),
                        l = a.slice(1, 2),
                        h = e[2],
                        p = e[3];
                    return new r(s, n, o, l, h = h.length >= 5 ? h : (h + "00000").slice(0, 5), p = p.length >= 5 ? p : (p + "00000").slice(0, 5))
                }, r.prototype.toString = function (e) {
                    if (e = void 0 === e ? 10 : Number(e), -1 == [2, 4, 6, 8, 10].indexOf(e)) throw new Error("Invalid precision ‘" + e + "’");
                    var t = ("00" + this.zone).slice(-2),
                        i = this.band,
                        s = this.e100k,
                        r = this.n100k,
                        n = Math.floor(this.easting / Math.pow(10, 5 - e / 2)),
                        a = Math.floor(this.northing / Math.pow(10, 5 - e / 2));
                    return t + i + " " + s + r + " " + ("00000" + n).slice(-e / 2) + " " + ("00000" + a).slice(-e / 2)
                }, window.AVLDeps || (window.AVLDeps = {}), AVLDeps.MGRS || (AVLDeps.MGRS = {}), AVLDeps.MGRS.LatLon = i, AVLDeps.MGRS.Utm = s, AVLDeps.MGRS.Mgrs = r
            }()
        },
        gMGY: function (e, t) {
            OpenLayers.Control.GNavigation = OpenLayers.Class(OpenLayers.Control.Navigation, {
                zoomWheelEnabled: !0,
                mouseWheelOptions: {
                    interval: 100,
                    cumulative: !0,
                    maxDelta: 3
                },
                lastNewZoom: 0,
                minZoom: 0,
                wheelChange: function (e, t) {
                    this.map.fractionalZoom || (t = Math.round(t));
                    var i = this.map.getZoom(),
                        s = i + t;
                    s < i ? s = Math.max(s, 0 | this.map.baseLayer.minZoom) : s > i && (s = Math.min(s, this.map.getNumZoomLevels() - 1)), s !== i && this.map.zoomTo(s, e.xy)
                },
                CLASS_NAME: "OpenLayers.Control.Navigation"
            })
        },
        h9sB: function (e, t) {
            OpenLayers.Layer.Regio = OpenLayers.Class.create(), OpenLayers.Layer.Regio.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                res_name: ".png?type=google",
                url: "",
                key: "",
                urls: [],
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], this.key = i.key, OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments);
                    var r = this.url.split(",");
                    if (r.length >= 2) {
                        for (var n = 0; n < r.length; n++) this.urls.push(r[n]);
                        this.url = r[0]
                    }
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > 20) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = this.url + this.key + "/";
                    if (this.urls.length >= 2) {
                        var o = i % this.urls.length;
                        a = this.urls[Math.floor(o)]
                    }
                    this.create_quadkey(i, s, r);
                    return a += r + "/" + i + "/" + s + this.res_name
                },
                create_quadkey: function (e, t, i) {
                    for (var s = "", r = i; r > 0; r--) {
                        var n = 0,
                            a = 1 << r - 1;
                        0 != (e & a) && n++, 0 != (t & a) && (n++, n++), s += n
                    }
                    return s
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Regio(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                CLASS_NAME: "OpenLayers.Layer.Regio"
            })
        },
        hVOH: function (e, t) {
            OpenLayers.Renderer.SVG = overwrite(OpenLayers.Renderer.SVG, {
                xmlns: "http://www.w3.org/2000/svg",
                MAX_PIXEL: Number.MAX_VALUE,
                localResolution: null,
                translationParameters: null,
                symbolMetrics: null,
                initialize: function (e) {
                    this.supported() && (OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments), this.translationParameters = {
                        x: 0,
                        y: 0
                    }, this.symbolMetrics = {})
                },
                destroy: function () {
                    OpenLayers.Renderer.Elements.prototype.destroy.apply(this, arguments)
                },
                supported: function () {
                    var e = "http://www.w3.org/TR/SVG11/feature#";
                    return document.implementation && (document.implementation.hasFeature("org.w3c.svg", "1.0") || document.implementation.hasFeature(e + "SVG", "1.1") || document.implementation.hasFeature(e + "BasicStructure", "1.1"))
                },
                inValidRange: function (e, t, i) {
                    var s = e + (i ? 0 : this.translationParameters.x),
                        r = t + (i ? 0 : this.translationParameters.y);
                    return s >= -this.MAX_PIXEL && s <= this.MAX_PIXEL && r >= -this.MAX_PIXEL && r <= this.MAX_PIXEL
                },
                setExtent: function (e, t) {
                    var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments),
                        s = this.getResolution(),
                        r = -e.left / s,
                        n = e.top / s;
                    if (t) {
                        this.left = r, this.top = n;
                        var a = "0 0 " + this.size.w + " " + this.size.h;
                        return this.rendererRoot.setAttributeNS(null, "viewBox", a), Math.abs(this.xOffset) > 15e6 && (this.xOffset += 2 * this.left, this.left = -this.left, this.featureDx = 0), this.translate(this.xOffset, 0), !0
                    }
                    var o = r - this.left + this.xOffset;
                    Math.abs(o) > 15e6 && (o += 2 * this.left);
                    var l = this.translate(o, n - this.top);
                    return l || this.setExtent(e, !0), i && l
                },
                translate: function (e, t) {
                    if (this.inValidRange(e, t, !0)) {
                        var i = "";
                        return (e || t) && (i = "translate(" + e + "," + t + ")"), this.root.setAttributeNS(null, "transform", i), this.translationParameters = {
                            x: e,
                            y: t
                        }, !0
                    }
                    return !1
                },
                setSize: function (e) {
                    OpenLayers.Renderer.prototype.setSize.apply(this, arguments), this.rendererRoot.setAttributeNS(null, "width", this.size.w), this.rendererRoot.setAttributeNS(null, "height", this.size.h)
                },
                getNodeType: function (e, t) {
                    var i = null;
                    switch (e.CLASS_NAME) {
                        case "OpenLayers.Geometry.Point":
                            i = t.externalGraphic ? "image" : "circle";
                            break;
                        case "OpenLayers.Geometry.Rectangle":
                            i = "rect";
                            break;
                        case "OpenLayers.Geometry.LineString":
                            i = "polyline";
                            break;
                        case "OpenLayers.Geometry.LinearRing":
                            i = "polygon";
                            break;
                        case "OpenLayers.Geometry.Polygon":
                        case "OpenLayers.Geometry.Curve":
                        case "OpenLayers.Geometry.Surface":
                            i = "path";
                            break;
                        case "OpenLayers.Geometry.Text":
                            i = "text"
                    }
                    return i
                },
                setStyle: function (e, t, i) {
                    t = t || e._style, i = i || e._options;
                    var s = parseFloat(e.getAttributeNS(null, "r"));
                    if ("OpenLayers.Geometry.Point" == e._geometryClass && s)
                        if (t.externalGraphic) {
                            var r = parseFloat(e.getAttributeNS(null, "cx")),
                                n = parseFloat(e.getAttributeNS(null, "cy"));
                            t.graphicWidth && t.graphicHeight && e.setAttributeNS(null, "preserveAspectRatio", "none");
                            var a = t.graphicWidth || t.graphicHeight,
                                o = t.graphicHeight || t.graphicWidth;
                            a = a || 2 * t.pointRadius, o = o || 2 * t.pointRadius;
                            var l = null != t.graphicXOffset ? t.graphicXOffset : -.5 * a,
                                h = null != t.graphicYOffset ? t.graphicYOffset : -.5 * o,
                                p = t.graphicOpacity || t.fillOpacity;
                            e.setAttributeNS(null, "x", (r + l).toFixed()), e.setAttributeNS(null, "y", (n + h).toFixed()), e.setAttributeNS(null, "width", a), e.setAttributeNS(null, "height", o), e.setAttributeNS("http://www.w3.org/1999/xlink", "href", t.externalGraphic), e.setAttributeNS(null, "style", "opacity: " + p)
                        } else e.setAttributeNS(null, "r", t.pointRadius);
                    return i.isFilled ? (e.setAttributeNS(null, "fill", t.fillColor), e.setAttributeNS(null, "fill-opacity", t.fillOpacity)) : e.setAttributeNS(null, "fill", "none"), i.isStroked ? (e.setAttributeNS(null, "stroke", t.strokeColor), e.setAttributeNS(null, "stroke-opacity", t.strokeOpacity), e.setAttributeNS(null, "stroke-width", t.strokeWidth), e.setAttributeNS(null, "stroke-linecap", t.strokeLinecap), e.setAttributeNS(null, "stroke-linejoin", t.strokeLinejoin), t.strokeDashstyle && e.setAttributeNS(null, "stroke-dasharray", t.strokeDashstyle)) : e.setAttributeNS(null, "stroke", "none"), void 0 !== t.fontSize && e.setAttributeNS(null, "font-size", t.fontSize), t.pointerEvents && e.setAttributeNS(null, "pointer-events", t.pointerEvents), null != t.cursor && e.setAttributeNS(null, "cursor", t.cursor), e
                },
                createNode: function (e, t) {
                    var i = document.createElementNS(this.xmlns, e);
                    return t && i.setAttributeNS(null, "id", t), i
                },
                nodeTypeCompare: function (e, t) {
                    return t == e.nodeName
                },
                createRenderRoot: function () {
                    var e = this.nodeFactory(this.container.id + "_svgRoot", "svg");
                    return e.style.display = "block", e
                },
                createRoot: function () {
                    return this.nodeFactory(this.container.id + "_root", "g")
                },
                fixGeometry: function (e) {
                    return e
                },
                drawPoint: function (e, t) {
                    this.drawCircle(e, t, 1)
                },
                drawCircle: function (e, t, i) {
                    var s = this.getResolution(),
                        r = (t.x - this.featureDx) / s + this.left,
                        n = this.top - t.y / s;
                    this.inValidRange(r, n) ? (e.setAttributeNS(null, "cx", r), e.setAttributeNS(null, "cy", n), e.setAttributeNS(null, "r", i)) : (e.setAttributeNS(null, "cx", ""), e.setAttributeNS(null, "cy", ""), e.setAttributeNS(null, "r", 0))
                },
                drawText: function (e, t, i) {
                    var s = this,
                        r = this.fixGeometry(t),
                        n = i.max_syms ? i.max_syms : 10,
                        a = this.getResolution(),
                        o = (r.x - this.featureDx) / a + this.left,
                        l = this.top - r.y / a;
                    t.shift && (o += 0 | t.shift.x, l += 0 | t.shift.y);
                    var h, p = t.text,
                        u = null;
                    t._wialon_feature_options && t._wialon_feature_options.compound_text && (u = t._wialon_feature_options.compound_text, h = t._wialon_feature_options.watchPrivateMode);
                    var c = WialonHosting.Text.containsRTL(p);
                    if (i.autoWrap) {
                        if (i.y_offset < 0 ? l += 0 | -(i.fontSize + i.y_offset) : l += .4 * i.fontSize + i.y_offset | 0, 1 === e.childNodes.length && !u) return e.childNodes[0].setAttributeNS(null, "x", o), e.childNodes[0].setAttributeNS(null, "y", l), e.childNodes[0].textContent != p && (e.childNodes[0].textContent = p), void(void 0 !== e._outline_node && e._outline_node && (e._outline_node.childNodes[0].setAttributeNS(null, "x", o), e._outline_node.childNodes[0].setAttributeNS(null, "y", l), e._outline_node.childNodes[0].textContent != p && (e._outline_node.childNodes[0].textContent = p)));
                        var y;
                        for (void 0 !== e._outline_node && e._outline_node && (e._outline_node.className.baseVal = "ol-stroke-outline", e._outline_node.setAttributeNS(null, "font-size", i.fontSize), window.opera && (e._outline_node.setAttributeNS(null, "stroke", i.labelOutlineColor), e._outline_node.setAttributeNS(null, "stroke-width", i.labelOutlineWidth)), e._outline_node.setAttributeNS(null, "glyph-anchor", "centerline")), u && "undefined" != typeof WialonHosting && WialonHosting && WialonHosting.Text ? y = WialonHosting.Text.renderCompoundTextToLinesLrmRlm(u, {
                                maxSymbolsInLine: n
                            }).map((function (e) {
                                return {
                                    text: e,
                                    x: o
                                }
                            })) : (c && (e.setAttributeNS(null, "direction", "rtl"), e._outline_node && e._outline_node.setAttributeNS(null, "direction", "rtl")), y = function (e) {
                                var t = e.split(" "),
                                    i = [],
                                    s = -1,
                                    r = -1,
                                    a = 0,
                                    l = 0;
                                for (l = 0; l < t.length; l++)
                                    if (-1 == s && (s = l), (a += t[l].length) >= n || l == t.length - 1) {
                                        r = l;
                                        for (var h = "", p = s; p <= r; p++) p == s ? h = t[p] : h += " " + t[p];
                                        i.push({
                                            text: h,
                                            x: o
                                        }), a = 0, s = -1, r = -1
                                    } else a += 1;
                                return i
                            }(p)); e.childNodes.length;) e.removeChild(e.childNodes[0]), void 0 !== e._outline_node && e._outline_node && e._outline_node.removeChild(e._outline_node.childNodes[0]);
                        for (var d, m, f = null, g = 0; g < y.length; g++) {
                            var L = this.createNode("tspan", "line" + g);
                            if (f || (f = L, d = y[0].x, m = l), L.textContent = y[g].text, L.setAttributeNS(null, "x", y[g].x), L.setAttributeNS(null, "y", 0 | l), void 0 !== e._outline_node && e._outline_node) {
                                var v = this.createNode("tspan", "line" + g);
                                v.textContent = y[g].text, v.setAttributeNS(null, "x", y[g].x), v.setAttributeNS(null, "y", 0 | l), e._outline_node.appendChild(v)
                            }
                            l += i.fontSize + 1 | 0, e.appendChild(L)
                        }
                        if (h && f && "undefined" != typeof WialonHosting) {
                            var O = e._wialon_svg_context;
                            O || (O = {
                                isPostDrawn: !1,
                                privateModeWatching: null,
                                isPrivateMode: !1,
                                togglePrivateMode: function (e) {
                                    this.isPrivateMode = e
                                }
                            }, e._wialon_svg_context = O, O.privateModeWatching = h((function (e) {
                                O.togglePrivateMode(e)
                            })), WialonHosting.Dom.addDisposeHandler(e, (function () {
                                O.privateModeWatching && (O.privateModeWatching.cancel(), O.privateModeWatching = null)
                            }))), e._wialon_on_post_draw = function () {
                                var t = s.createNode("tspan");
                                t.style.display = "none", t.style.fontFamily = "HostingFont", t.style.fontSize = "18px", t.textContent = "";
                                var i, r = f.getBoundingClientRect();
                                t.setAttributeNS(null, "x", .5 + (d - r.width / 2 - 13 | 0)), t.setAttributeNS(null, "y", .5 + (m + 4 | 0)), e.appendChild(t), void 0 !== e._outline_node && e._outline_node && (i = t.cloneNode(!0), e._outline_node.appendChild(i)), O.togglePrivateMode = function (e) {
                                    this.isPrivateMode = e, t.style.display = e ? "" : "none", i && (i.style.display = e ? "" : "none")
                                }, O.togglePrivateMode(O.isPrivateMode)
                            }
                        }
                        e.className.baseVal = "ol-stroke", e.setAttributeNS(null, "glyph-anchor", "centerline")
                    } else e.textContent = p, e.setAttributeNS(null, "x", 0 | o), e.setAttributeNS(null, "y", 0 | l), c && e.setAttributeNS(null, "direction", "rtl"), void 0 !== e._outline_node && e._outline_node && (e._outline_node.textContent = p, e._outline_node.setAttributeNS(null, "x", 0 | o), e._outline_node.setAttributeNS(null, "y", 0 | l), c && e._outline_node.setAttributeNS(null, "direction", "rtl"))
                },
                drawLineString: function (e, t) {
                    var i = this.getComponentsString(t.components);
                    return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null)
                },
                drawLinearRing: function (e, t) {
                    var i = this.getComponentsString(t.components);
                    return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null)
                },
                drawPolygon: function (e, t) {
                    for (var i, s, r = "", n = !0, a = !0, o = 0, l = t.components.length; o < l; o++) r += " M", (s = (i = this.getComponentsString(t.components[o].components, " ")).path) ? (r += " " + s, a = i.complete && a) : n = !1;
                    return r += " z", !!n && (e.setAttributeNS(null, "d", r), e.setAttributeNS(null, "fill-rule", "evenodd"), a ? e : null)
                },
                drawRectangle: function (e, t) {
                    var i = this.getResolution(),
                        s = this.fixGeometry(t),
                        r = (s.x - this.featureDx) / i + this.left | 0,
                        n = this.top - s.y / i | 0;
                    t.shift && (r += t.shift.x, n += t.shift.y), this.inValidRange(r, n) ? (e.setAttributeNS(null, "x", 0 | r), e.setAttributeNS(null, "y", 0 | n), t.keep_aspect ? (e.setAttributeNS(null, "width", t.width), e.setAttributeNS(null, "height", t.height)) : (e.setAttributeNS(null, "width", t.width / i | 0), e.setAttributeNS(null, "height", t.height / i | 0))) : (e.setAttributeNS(null, "x", ""), e.setAttributeNS(null, "y", ""), e.setAttributeNS(null, "width", 0), e.setAttributeNS(null, "height", 0))
                },
                drawSurface: function (e, t) {
                    for (var i = null, s = !0, r = 0; r < t.components.length; r++) {
                        if (r % 3 == 0 && r / 3 == 0)(n = this.getShortString(t.components[r])) || (s = !1), i = "M " + n;
                        else if (r % 3 == 1) {
                            (n = this.getShortString(t.components[r])) || (s = !1), i += " C " + n
                        } else {
                            var n;
                            (n = this.getShortString(t.components[r])) || (s = !1), i += " " + n
                        }
                    }
                    i += " Z", s ? e.setAttributeNS(null, "d", i) : e.setAttributeNS(null, "d", "")
                },
                getComponentsString: function (e, t) {
                    for (var i, s, r = [], n = !0, a = e.length, o = [], l = 0; l < a; l++) s = e[l], r.push(s), (i = this.getShortString(s)) ? o.push(i) : (l > 0 && this.getShortString(e[l - 1]) && o.push(this.clipLine(e[l], e[l - 1])), l < a - 1 && this.getShortString(e[l + 1]) && o.push(this.clipLine(e[l], e[l + 1])), n = !1);
                    return {
                        path: o.join(t || ","),
                        complete: n
                    }
                },
                getShortString: function (e) {
                    var t = this.getResolution(),
                        i = this.fixGeometry(e),
                        s = (i.x - this.featureDx) / t + this.left,
                        r = this.top - i.y / t;
                    return !!this.inValidRange(s, r) && s + "," + r
                },
                CLASS_NAME: "OpenLayers.Renderer.SVG"
            })
        },
        "i/O0": function (e, t) {
            var i;
            OpenLayers.Tile.Image = overwrite(OpenLayers.Tile.Image, {
                url: null,
                imgDiv: null,
                imgCached: !1,
                frame: null,
                imageReloadAttempts: null,
                layerAlphaHack: null,
                asyncRequestId: null,
                maxGetUrlLength: null,
                canvasContext: null,
                crossOriginKeyword: null,
                initialize: function (e, t, i, s, r, n) {
                    OpenLayers.Tile.prototype.initialize.apply(this, arguments), this.url = s, this.layerAlphaHack = this.layer.alpha && OpenLayers.Util.alphaHack(), (null != this.maxGetUrlLength || this.layer.gutter || this.layerAlphaHack) && (this.frame = document.createElement("div"), this.frame.style.position = "absolute", this.frame.style.overflow = "hidden"), null != this.maxGetUrlLength && OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame)
                },
                destroy: function () {
                    this.imgDiv && (this.clear(), this.imgDiv = null, this.frame = null), this.asyncRequestId = null, OpenLayers.Tile.prototype.destroy.apply(this, arguments)
                },
                draw: function () {
                    var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
                    return e ? (this.layer != this.layer.map.baseLayer && this.layer.reproject && (this.bounds = this.getBoundsFromBaseLayer(this.position)), this.isLoading ? this._loadEvent = "reload" : (this.isLoading = !0, this._loadEvent = "loadstart"), this.renderTile(), this.positionTile()) : !1 === e && this.unload(), e
                },
                renderTile: function () {
                    if (this.layer.async) {
                        var e = this.asyncRequestId = (this.asyncRequestId || 0) + 1;
                        this.layer.getURLasync(this.bounds, (function (t) {
                            e == this.asyncRequestId && (this.url = t, this.initImage())
                        }), this)
                    } else this.url = this.layer.getURL(this.bounds), this.initImage()
                },
                positionTile: function () {
                    var e = this.getTile().style,
                        t = this.frame ? this.size : this.layer.getImageSize(this.bounds),
                        i = 1;
                    this.layer instanceof OpenLayers.Layer.Grid && (i = this.layer.getServerResolution() / this.layer.map.getResolution()), e.left = this.position.x + "px", e.top = this.position.y + "px", e.width = Math.round(i * t.w) + "px", e.height = Math.round(i * t.h) + "px"
                },
                clear: function () {
                    OpenLayers.Tile.prototype.clear.apply(this, arguments);
                    var e = this.imgDiv;
                    if (e) {
                        var t = this.getTile();
                        t.parentNode === this.layer.div && this.layer.div.removeChild(t), this.setImgSrc(), !0 === this.layerAlphaHack && (e.style.filter = ""), OpenLayers.Element.removeClass(e, "olImageLoadError")
                    }
                    this.canvasContext = null
                },
                getImage: function () {
                    if (!this.imgDiv) {
                        this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(!1);
                        var e = this.imgDiv.style;
                        if (this.frame) {
                            var t = 0,
                                i = 0;
                            this.layer.gutter && (t = this.layer.gutter / this.layer.tileSize.w * 100, i = this.layer.gutter / this.layer.tileSize.h * 100), e.left = -t + "%", e.top = -i + "%", e.width = 2 * t + 100 + "%", e.height = 2 * i + 100 + "%"
                        }
                        e.visibility = "hidden", e.opacity = 0, this.layer.opacity < 1 && (e.filter = "alpha(opacity=" + 100 * this.layer.opacity + ")"), e.position = "absolute", this.layerAlphaHack && (e.paddingTop = e.height, e.height = "0", e.width = "100%"), this.frame && this.frame.appendChild(this.imgDiv)
                    }
                    return this.imgDiv
                },
                setImage: function (e) {
                    this.imgDiv = e, this.imgCached = !0
                },
                initImage: function () {
                    if (this.url || this.imgDiv) {
                        this.events.triggerEvent("beforeload"), this.layer.div.appendChild(this.getTile()), this.events.triggerEvent(this._loadEvent);
                        var e = this.getImage(),
                            t = e.getAttribute("src") || "";
                        this.url && OpenLayers.Util.isEquivalentUrl(t, this.url) ? this.imgCached ? OpenLayers.Function.bind(this.onImageLoad, this) : this._loadTimeout = window.setTimeout(OpenLayers.Function.bind(this.onImageLoad, this), 0) : (this.stopLoading(), this.crossOriginKeyword && e.removeAttribute("crossorigin"), OpenLayers.Event.observe(e, "load", OpenLayers.Function.bind(this.onImageLoad, this)), OpenLayers.Event.observe(e, "error", OpenLayers.Function.bind(this.onImageError, this)), this.imageReloadAttempts = 0, this.setImgSrc(this.url))
                    } else this.isLoading = !1
                },
                setImgSrc: function (e) {
                    var t = this.imgDiv;
                    this.imgCached = !1, e ? (t.style.visibility = "hidden", t.style.opacity = 0, this.crossOriginKeyword && ("data:" !== e.substr(0, 5) ? t.setAttribute("crossorigin", this.crossOriginKeyword) : t.removeAttribute("crossorigin")), t.src = e) : (this.stopLoading(), this.imgDiv = null, t.parentNode && t.parentNode.removeChild(t))
                },
                getTile: function () {
                    return this.frame ? this.frame : this.getImage()
                },
                createBackBuffer: function () {
                    var e;
                    if (this.imgDiv && !this.isLoading) return this.frame ? (e = this.frame.cloneNode(!1)).appendChild(this.imgDiv) : e = this.imgDiv, this.imgDiv = null, e
                },
                onImageLoad: function () {
                    var e = this.imgDiv;
                    this.stopLoading(), e.style.visibility = "inherit", e.style.opacity = this.layer.opacity, this.isLoading = !1, this.canvasContext = null, this.events.triggerEvent("loadend"), !0 === this.layerAlphaHack && (e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + e.src + "', sizingMethod='scale')")
                },
                onImageError: function () {
                    var e = this.imgDiv;
                    null != e.src && (this.imageReloadAttempts++, this.imageReloadAttempts <= OpenLayers.IMAGE_RELOAD_ATTEMPTS ? this.setImgSrc(this.layer.getURL(this.bounds)) : (OpenLayers.Element.addClass(e, "olImageLoadError"), this.events.triggerEvent("loaderror"), this.onImageLoad()))
                },
                stopLoading: function () {
                    OpenLayers.Event.stopObservingElement(this.imgDiv), window.clearTimeout(this._loadTimeout), delete this._loadTimeout
                },
                getCanvasContext: function () {
                    if (OpenLayers.CANVAS_SUPPORTED && this.imgDiv && !this.isLoading) {
                        if (!this.canvasContext) {
                            var e = document.createElement("canvas");
                            e.width = this.size.w, e.height = this.size.h, this.canvasContext = e.getContext("2d"), this.canvasContext.drawImage(this.imgDiv, 0, 0)
                        }
                        return this.canvasContext
                    }
                },
                CLASS_NAME: "OpenLayers.Tile.Image"
            }), OpenLayers.Tile.Image.IMAGE = ((i = new Image).className = "olTileImage", i.galleryImg = "no", i)
        },
        jJhU: function (e, t) {
            OpenLayers.Layer.Navitel = OpenLayers.Class.create(), OpenLayers.Layer.Navitel.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                MAX_ZOOM_LEVEL: 17,
                MIN_ZOOM_LEVEL: 4,
                minZoom: 4,
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments)
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((e.bottom - this.maxExtent.bottom) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > this.MAX_ZOOM_LEVEL || r < this.minZoom) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n, s = (s % n + n) % n;
                    var a = this.url,
                        o = this.url.split("%d");
                    if (2 === o.length) {
                        var l = i % 3 + 1;
                        a = o[0] + l + o[1]
                    }
                    return a += "?t=" + this.pad(i, 8) + "," + this.pad(s, 8) + "," + this.pad(r, 2)
                },
                pad: function (e, t) {
                    for (var i = "" + e; i.length < t;) i = "0" + i;
                    return i
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Navitel(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                setMap: function (e) {
                    OpenLayers.Layer.TMS.prototype.setMap.apply(this, arguments);
                    var t = e.getControlsByClass("OpenLayers.Control.PanZoomBar");
                    t && t.length && (this.numZoomLevels = this.MAX_ZOOM_LEVEL, t[0].redraw())
                },
                CLASS_NAME: "OpenLayers.Layer.Navitel"
            })
        },
        mnGn: function (e, t) {
            OpenLayers.Layer.Mapbox = OpenLayers.Class.create(), OpenLayers.Layer.Mapbox.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                protocol: "https://",
                url: "",
                format: "png",
                codename: "",
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments);
                    var r = this.url.split(",");
                    if (r.length >= 2) {
                        for (var n = 0; n < r.length; n++) this.urls.push(r[n]);
                        this.url = r[0]
                    }
                    i && (this.format = i.format || this.format, this.codename = i.layer_codename || "")
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > 21) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = "";
                    this.use_quad ? a += this.create_quadkey(i, s, r) : a += r + "/" + i + "/" + s + "." + this.format + "?access_token=" + this.app_code;
                    var o = this.url + "mapbox." + this.codename + "/" + a;
                    if (this.map && void 0 !== this.map.tileManager && void 0 !== this.map.tileManager.tileCache)
                        for (var l in this.map.tileManager.tileCache)
                            if (l.indexOf(o) >= 0) {
                                !0, a = l;
                                break
                            } return a = this.protocol + o
                },
                create_quadkey: function (e, t, i) {
                    for (var s = "", r = i; r > 0; r--) {
                        var n = 0,
                            a = 1 << r - 1;
                        0 != (e & a) && n++, 0 != (t & a) && (n++, n++), s += n
                    }
                    return s
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Here(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.url, e
                },
                CLASS_NAME: "OpenLayers.Layer.Mapbox"
            })
        },
        oAkn: function (e, t) {},
        pT1T: function (e, t) {
            OpenLayers.Layer.Wikimapia = OpenLayers.Class.create(), OpenLayers.Layer.Wikimapia.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                supZoom: 22,
                infZoom: 1,
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments)
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > this.supZoom) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = this.url;
                    if (this.urls.length >= 2) {
                        var o = i % this.urls.length;
                        a = this.urls[Math.floor(o)]
                    }
                    var l = i % 4 + s % 4 * 4;
                    lurl = a.split("//");
                    var h = "?x=" + i + "&y=" + s + "&zoom=" + r + "&lng=0";
                    return a = lurl[0] + "//i" + l + "." + lurl[1] + h
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Wikimapia(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                CLASS_NAME: "OpenLayers.Layer.Wikimapia"
            })
        },
        qm5l: function (e, t) {
            ! function () {
                function e(e, t) {
                    if ("function" == typeof t.initialize && e === e.prototype.initialize) {
                        var i = e.prototype,
                            s = OpenLayers.Util.extend({}, e);
                        (e = t.initialize).prototype = i, OpenLayers.Util.extend(e, s)
                    }
                    return OpenLayers.Util.extend(e.prototype, t), e
                }
                OpenLayers.Map = e(OpenLayers.Map, {
                        Z_INDEX_BASE: {
                            BaseLayer: 100,
                            Overlay: 250,
                            BaseVector: 450,
                            VectorFeatures: 500,
                            Markers: 550,
                            Tools: 600,
                            Edit: 650,
                            Feature: 725,
                            Popup: 750,
                            Control: 1e3
                        },
                        zIndexCounters: {
                            BaseLayer: 0,
                            Overlay: 0,
                            BaseVector: 0,
                            VectorFeatures: 0,
                            Markers: 0,
                            Control: 0
                        },
                        zoomDuration: 0,
                        panDuration: 24,
                        boundingClientRect: null,
                        initialize: function (e, t) {
                            1 === arguments.length && "object" == typeof e && (e = (t = e) && t.div), this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH, OpenLayers.Map.TILE_HEIGHT), this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15), this.theme = OpenLayers._getScriptLocation() + "theme/default/style.css", this.options = OpenLayers.Util.extend({}, t), OpenLayers.Util.extend(this, t);
                            var i = this.projection instanceof OpenLayers.Projection ? this.projection.projCode : this.projection;
                            OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[i]), !this.maxExtent || this.maxExtent instanceof OpenLayers.Bounds || (this.maxExtent = new OpenLayers.Bounds(this.maxExtent)), !this.minExtent || this.minExtent instanceof OpenLayers.Bounds || (this.minExtent = new OpenLayers.Bounds(this.minExtent)), !this.restrictedExtent || this.restrictedExtent instanceof OpenLayers.Bounds || (this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent)), !this.center || this.center instanceof OpenLayers.LonLat || (this.center = new OpenLayers.LonLat(this.center)), this.layers = [], this.id = OpenLayers.Util.createUniqueID("OpenLayers.Map_"), this.div = OpenLayers.Util.getElement(e), this.div || (this.div = document.createElement("div"), this.div.style.height = "1px", this.div.style.width = "1px"), OpenLayers.Element.addClass(this.div, "olMap");
                            var s = this.id + "_OpenLayers_ViewPort";
                            if (this.viewPortDiv = OpenLayers.Util.createDiv(s, null, null, null, "relative", null, "hidden"), this.viewPortDiv.style.width = "100%", this.viewPortDiv.style.height = "100%", this.viewPortDiv.className = "olMapViewport", this.div.appendChild(this.viewPortDiv), this.events = new OpenLayers.Events(this, this.viewPortDiv, null, this.fallThrough, {
                                    includeXY: !0
                                }), OpenLayers.TileManager && null !== this.tileManager && (this.tileManager instanceof OpenLayers.TileManager || (this.tileManager = new OpenLayers.TileManager(this.tileManager)), this.tileManager.addMap(this)), s = this.id + "_OpenLayers_Container", this.layerContainerDiv = OpenLayers.Util.createDiv(s), this.layerContainerDiv.style.zIndex = this.Z_INDEX_BASE.Popup - 1, this.layerContainerOriginPx = {
                                    x: 0,
                                    y: 0
                                }, this.applyTransform(), this.viewPortDiv.appendChild(this.layerContainerDiv), this.updateSize(), this.eventListeners instanceof Object && this.events.on(this.eventListeners), !0 === this.autoUpdateSize && (this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, this), OpenLayers.Event.observe(window, "resize", this.updateSizeDestroy)), this.theme) {
                                for (var r = !0, n = document.getElementsByTagName("link"), a = 0, o = n.length; a < o; ++a)
                                    if (OpenLayers.Util.isEquivalentUrl(n.item(a).href, this.theme)) {
                                        r = !1;
                                        break
                                    } if (r) {
                                    var l = document.createElement("link");
                                    l.setAttribute("rel", "stylesheet"), l.setAttribute("type", "text/css"), l.setAttribute("href", this.theme), document.getElementsByTagName("head")[0].appendChild(l)
                                }
                            }
                            null == this.controls && (this.controls = [], null != OpenLayers.Control && (OpenLayers.Control.Navigation ? this.controls.push(new OpenLayers.Control.Navigation) : OpenLayers.Control.TouchNavigation && this.controls.push(new OpenLayers.Control.TouchNavigation), OpenLayers.Control.Zoom ? this.controls.push(new OpenLayers.Control.Zoom) : OpenLayers.Control.PanZoom && this.controls.push(new OpenLayers.Control.PanZoom), OpenLayers.Control.ArgParser && this.controls.push(new OpenLayers.Control.ArgParser), OpenLayers.Control.Attribution && this.controls.push(new OpenLayers.Control.Attribution)));
                            for (a = 0, o = this.controls.length; a < o; a++) this.addControlToMap(this.controls[a]);
                            this.popups = [], this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this), OpenLayers.Event.observe(window, "unload", this.unloadDestroy), t && t.layers && (delete this.center, delete this.zoom, this.addLayers(t.layers), t.center && !this.getCenter() && this.setCenter(t.center, t.zoom)), this.panMethod && (this.panTween = new OpenLayers.Tween(this.panMethod)), this.zoomMethod && this.applyTransform.transform && (this.zoomTween = new OpenLayers.Tween(this.zoomMethod))
                        },
                        addLayer: function (e) {
                            for (var t = 0, i = this.layers.length; t < i; t++)
                                if (this.layers[t] == e) return !1;
                            if (!1 === this.events.triggerEvent("preaddlayer", {
                                    layer: e
                                })) return !1;
                            this.allOverlays && (e.isBaseLayer = !1), e.div.className = "olLayerDiv" + (e.overlay ? " olLayerOverlay" : ""), e.div.style.overflow = "";
                            var s = 0;
                            if (e.overlay || e.zIndexType && this.Z_INDEX_BASE[e.zIndexType]) {
                                var r = e.overlay ? "Overlay" : e.zIndexType;
                                s = "Tools" == r || "Edit" == r ? 0 : this.zIndexCounters[r]++
                            } else s = this.zIndexCounters[e.isBaseLayer ? "BaseLayer" : "Control"]++;
                            return this.setLayerZIndex(e, s), e.isFixed ? this.viewPortDiv.appendChild(e.div) : this.layerContainerDiv.appendChild(e.div), this.layers.push(e), e.setMap(this), e.isBaseLayer || this.allOverlays && !this.baseLayer ? null == this.baseLayer ? this.setBaseLayer(e) : e.setVisibility(!1) : e.redraw(), this.events.triggerEvent("addlayer", {
                                layer: e
                            }), e.events.triggerEvent("added", {
                                map: this,
                                layer: e
                            }), e.afterAdd(), !0
                        },
                        removeLayer: function (e, t) {
                            if (!1 !== this.events.triggerEvent("preremovelayer", {
                                    layer: e
                                })) {
                                if (null == t && (t = !0), e.isFixed ? this.viewPortDiv.removeChild(e.div) : this.layerContainerDiv.removeChild(e.div), OpenLayers.Util.removeItem(this.layers, e), e.removeMap(this), e.map = null, this.baseLayer == e && (this.baseLayer = null, t))
                                    for (var i = 0, s = this.layers.length; i < s; i++) {
                                        var r = this.layers[i];
                                        if (r.isBaseLayer || this.allOverlays) {
                                            this.setBaseLayer(r);
                                            break
                                        }
                                    }
                                this.events.triggerEvent("removelayer", {
                                    layer: e
                                }), e.events.triggerEvent("removed", {
                                    map: this,
                                    layer: e
                                })
                            }
                        },
                        applyTransform: function (e, t, i) {
                            i = i || 1;
                            var s = this.layerContainerOriginPx,
                                r = 1 !== i;
                            e = e || s.x, t = t || s.y;
                            var n = this.layerContainerDiv.style,
                                a = this.applyTransform.transform,
                                o = this.applyTransform.template;
                            if (void 0 === a && (a = OpenLayers.Util.vendorPrefix.style("transform"), this.applyTransform.transform = a, a)) {
                                var l = OpenLayers.Element.getStyle(this.viewPortDiv, OpenLayers.Util.vendorPrefix.css("transform"));
                                l && "none" === l || (o = ["translate3d(", ",0) ", "scale3d(", ",1)"], n[a] = [o[0], "0,0", o[1]].join("")), o && ~n[a].indexOf(o[0]) || (o = ["translate(", ") ", "scale(", ")"]), this.applyTransform.template = o
                            }
                            var h = this.layerContainerDiv.getElementsByClassName("olAPILayer"),
                                p = null;
                            if (!0 === r) {
                                for (var u = 0, c = h.length; u < c; u++) "none" != (p = h[u]).style.display && ("none" != p.style.display || "0" != p.style.opacity && "0.0" != p.style.opacity) && (h[u].style.top = "0px", h[u].style.left = "0px", h[u].position = "absolute", h[u].style.display = "block");
                                this.boundingClientRect = null
                            }
                            if (null === a || "translate3d(" !== o[0] && !0 !== r) {
                                if (n.left = e + "px", n.top = t + "px", null !== a && (n[a] = "", void 0 !== h))
                                    for (u = 0, c = h.length; u < c; u++) this.correct_div_element(h[u], r)
                            } else {
                                if (!0 === r && "translate(" === o[0] && (e -= s.x, t -= s.y, n.left = s.x + "px", n.top = s.y + "px"), !0 === r && (s.x || s.y)) {
                                    p = null;
                                    for (var u = 0, c = h.length; u < c; u++)("none" != (p = h[u]).style.display || "0" != p.style.opacity && "0.0" != p.style.opacity) && (h[u].style.top = -s.y + "px", h[u].style.left = -s.x + "px")
                                }
                                n[a] = [o[0], e, "px,", t, "px", o[1], o[2], i, ",", i, o[3]].join("")
                            }
                        },
                        correct_div_element: function (e) {
                            var t = e,
                                i = this.getSize();
                            if (t.style.overflow && (t.style.overflow = ""), "0" != t.style.opacity && "0.0" != t.style.opacity) {
                                this.boundingClientRect = (this.viewPortDiv || this.div).getBoundingClientRect();
                                var s = this.boundingClientRect.left,
                                    r = this.boundingClientRect.top;
                                t.style.width !== i.w + "px" && (t.style.width = i.w + "px"), t.style.height !== i.h + "px" && (t.style.height = i.h + "px"), "fixed" !== t.style.position && (t.style.position = "fixed"), t.style.top !== r + "px" && (t.style.top = r + "px"), t.style.left !== s + "px" && (t.style.left = s + "px"), t.style.transform = ""
                            }
                        },
                        panTo: function (e) {
                            if (this.panTween && this.getExtent().scale(this.panRatio).containsLonLat(e)) {
                                var t = this.getCachedCenter();
                                if (e.equals(t)) return;
                                var i = this.getPixelFromLonLat(t),
                                    s = this.getPixelFromLonLat(e),
                                    r = {
                                        x: s.x - i.x,
                                        y: s.y - i.y
                                    },
                                    n = {
                                        x: 0,
                                        y: 0
                                    };
                                this.panTween.start({
                                    x: 0,
                                    y: 0
                                }, r, this.panDuration, {
                                    callbacks: {
                                        eachStep: OpenLayers.Function.bind((function (e) {
                                            var t = e.x - n.x,
                                                i = e.y - n.y;
                                            this.moveByPx(t, i), n.x = Math.round(e.x), n.y = Math.round(e.y)
                                        }), this),
                                        done: OpenLayers.Function.bind((function (t) {
                                            this.moveTo(e), this.dragging = !1, this.events.triggerEvent("moveend")
                                        }), this)
                                    }
                                })
                            } else this.setCenter(e, this.zoom, !1, !0)
                        },
                        setCenter: function (e, t, i, s) {
                            this.panTween && this.panTween.stop(), this.zoomTween && this.zoomTween.stop(), this.moveTo(e, t, {
                                dragging: i,
                                forceZoomChange: s
                            })
                        },
                        moveTo: function (e, t, i) {
                            null == e || e instanceof OpenLayers.LonLat || (e = new OpenLayers.LonLat(e)), i || (i = {}), null != t && (t = parseFloat(t), this.fractionalZoom || (t = Math.round(t)));
                            var s = t;
                            (t = this.adjustZoom(t)) !== s && (e = this.getCenter());
                            var r = i.dragging || this.dragging,
                                n = i.forceZoomChange;
                            if (this.getCachedCenter() || this.isValidLonLat(e) || (e = this.maxExtent.getCenterLonLat(), this.center = e.clone()), null != this.restrictedExtent) {
                                null == e && (e = this.center), null == t && (t = this.getZoom());
                                var a = this.getResolutionForZoom(t),
                                    o = this.calculateBounds(e, a);
                                if (!this.restrictedExtent.containsBounds(o)) {
                                    var l = this.restrictedExtent.getCenterLonLat();
                                    o.getWidth() > this.restrictedExtent.getWidth() ? e = new OpenLayers.LonLat(l.lon, e.lat) : o.left < this.restrictedExtent.left ? e = e.add(this.restrictedExtent.left - o.left, 0) : o.right > this.restrictedExtent.right && (e = e.add(this.restrictedExtent.right - o.right, 0)), o.getHeight() > this.restrictedExtent.getHeight() ? e = new OpenLayers.LonLat(e.lon, l.lat) : o.bottom < this.restrictedExtent.bottom ? e = e.add(0, this.restrictedExtent.bottom - o.bottom) : o.top > this.restrictedExtent.top && (e = e.add(0, this.restrictedExtent.top - o.top))
                                }
                            }
                            var h = n || this.isValidZoomLevel(t) && t != this.getZoom(),
                                p = this.isValidLonLat(e) && !e.equals(this.center);
                            if (h || p || r) {
                                r || this.events.triggerEvent("movestart", {
                                    zoomChanged: h
                                }), p && (!h && this.center && this.centerLayerContainer(e), this.center = e.clone());
                                var u = h ? this.getResolutionForZoom(t) : this.getResolution();
                                if (h || null == this.layerContainerOrigin) {
                                    this.layerContainerOrigin = this.getCachedCenter(), this.layerContainerOriginPx.x = 0, this.layerContainerOriginPx.y = 0, this.applyTransform();
                                    var c = this.getMaxExtent({
                                            restricted: !0
                                        }),
                                        y = c.getCenterLonLat(),
                                        d = this.center.lon - y.lon,
                                        m = y.lat - this.center.lat,
                                        f = Math.round(c.getWidth() / u),
                                        g = Math.round(c.getHeight() / u);
                                    this.minPx = {
                                        x: (this.size.w - f) / 2 - d / u,
                                        y: (this.size.h - g) / 2 - m / u
                                    }, this.maxPx = {
                                        x: this.minPx.x + Math.round(c.getWidth() / u),
                                        y: this.minPx.y + Math.round(c.getHeight() / u)
                                    }
                                }
                                h && (this.zoom = t, this.resolution = u);
                                var L = this.getExtent();
                                this.baseLayer.visibility && (this.baseLayer.moveTo(L, h, i.dragging), i.dragging || this.baseLayer.events.triggerEvent("moveend", {
                                    zoomChanged: h
                                })), L = this.baseLayer.getExtent();
                                for (var v = this.layers.length - 1; v >= 0; --v) {
                                    var O = this.layers[v];
                                    if (O !== this.baseLayer && !O.isBaseLayer) {
                                        var S = O.calculateInRange();
                                        O.inRange != S && (O.inRange = S, S || O.display(!1), this.events.triggerEvent("changelayer", {
                                            layer: O,
                                            property: "visibility"
                                        })), S && O.visibility && (O.moveTo(L, h, i.dragging), i.dragging || O.events.triggerEvent("moveend", {
                                            zoomChanged: h
                                        }))
                                    }
                                }
                                if (this.events.triggerEvent("move"), r || this.events.triggerEvent("moveend"), h) {
                                    v = 0;
                                    for (var x = this.popups.length; v < x; v++) this.popups[v].updatePosition();
                                    this.events.triggerEvent("zoomend")
                                }
                            }
                        },
                        setLayerZIndex: function (e, t) {
                            var i = parseFloat(e.zIndexOrder);
                            if (i = isNaN(i) ? null : i, e.overlay || e.zIndexType && this.Z_INDEX_BASE[e.zIndexType]) {
                                var s = e.overlay ? "Overlay" : e.zIndexType;
                                e.setZIndex(this.Z_INDEX_BASE[s] + (null == e.zIndexOrder ? t : e.zIndexOrder))
                            } else e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer ? "BaseLayer" : "Control"] + (null == e.zIndexOrder ? t : e.zIndexOrder))
                        },
                        setLayerIndex: function (e, t) {
                            var i = this.getLayerIndex(e);
                            t < 0 ? t = 0 : t > this.layers.length && (t = this.layers.length), i != t && (this.layers.splice(i, 1), this.layers.splice(t, 0, e), this.events.triggerEvent("changelayer", {
                                layer: e,
                                property: "order"
                            }), this.allOverlays && (0 === t ? this.setBaseLayer(e) : this.baseLayer !== this.layers[0] && this.setBaseLayer(this.layers[0])))
                        },
                        fixPoint: function (e, t, i) {
                            if (!e) return null;
                            if (t) {
                                var s = "function" == typeof e.clone ? e.clone() : e,
                                    r = "function" == typeof t.clone ? t.clone() : t;
                                i && i.noTransform || (s.transform(this.getProjectionObject(), this.displayProjection), r.transform(this.getProjectionObject(), this.displayProjection));
                                var n = "lon";
                                i && void 0 !== i.lonName && (n = i.lonName);
                                var a = r[n] - s[n],
                                    o = !1;
                                return Math.abs(a) > 180 && (r[n] < s[n] ? (s[n] -= 360, o = !0) : (s[n] += 360, o = !0)), i && i.noTransform ? o ? s : e : o ? s.transform(this.displayProjection, this.getProjectionObject()) : e
                            }
                            return e
                        },
                        fixPoints: function (e, t) {
                            if (e && e.length) {
                                var i = [],
                                    s = this.baseLayer.maxExtent.clone();
                                s.transform(this.getProjectionObject(), this.displayProjection);
                                var r = "lon",
                                    n = "lat";
                                t && void 0 !== t.lonName && "x" == (r = t.lonName) && (n = "y");
                                for (var a = !1, o = 1.2, l = 0; l < e.length; l++) {
                                    var h = "function" == typeof e[l].clone ? e[l].clone() : e[l];
                                    t && (t.noTransform || "function" != typeof h.transform) || h.transform(this.getProjectionObject(), this.displayProjection), !a && (s.right - h[r] < o || h[r] - s.left < o || s.top - h[n] < o || h[n] - s.bottom < o) && (a = !0), i.push(h)
                                }
                                if (!a) return e;
                                l = i.length;
                                for (var p = 0, u = [], c = [], y = null, d = 1; l--;) Math.abs(i[l][r]) > 180 && (i[l][r] = i[l][r] % 360, Math.abs(i[l][r]) > 180 && (i[l][r] += i[l][r] < 0 ? 360 : -360)), Math.abs(i[l][n]) > 90 && (i[l][n] = i[l][n] % 180, Math.abs(i[l][n]) > 90 && (i[l][n] += i[l][n] < 0 ? 180 : -180)), i[l][r] < 0 ? u.push(l) : c.push(l);
                                for (u.length > c.length ? (y = c, d = -1) : (y = u, d = 1), l = y.length; l--;) p = i[y[l]][r] + 360 * d, Math.abs(p) < 360 && (i[y[l]][r] = p, t && t.markUpdated && (i[y[l]].updated = 1));
                                if (!t || !t.noTransform && "function" == typeof i[0].transform)
                                    for (l = 0; l < i.length; l++) i[l].transform(this.displayProjection, this.getProjectionObject());
                                e = i
                            }
                            return e
                        },
                        CLASS_NAME: "OpenLayers.Map"
                    }), OpenLayers.Projection.defaults = {
                        "EPSG:4326": {
                            units: "degrees",
                            maxExtent: [-180, -90, 180, 90],
                            yx: !0
                        },
                        "CRS:84": {
                            units: "degrees",
                            maxExtent: [-180, -90, 180, 90]
                        },
                        "EPSG:900913": {
                            units: "m",
                            maxExtent: [-20037508.3427892, -20037508.3427892, 20037508.3427892, 20037508.3427892]
                        }
                    },
                    function () {
                        var e = 20037508.3427892;

                        function t(t) {
                            return t.x = 180 * t.x / e, t.y = 180 / Math.PI * (2 * Math.atan(Math.exp(t.y / e * Math.PI)) - Math.PI / 2), t
                        }

                        function i(t) {
                            t.x = t.x * e / 180;
                            var i = Math.log(Math.tan((90 + t.y) * Math.PI / 360)) / Math.PI * e;
                            return t.y = Math.max(-20037508.3427892, Math.min(i, 20037508.3427892)), t
                        }

                        function s(e, s) {
                            var r, n, a, o, l, h = OpenLayers.Projection.addTransform,
                                p = OpenLayers.Projection.nullTransform;
                            for (r = 0, n = s.length; r < n; ++r)
                                for (h(e, a = s[r], i), h(a, e, t), l = r + 1; l < n; ++l) h(a, o = s[l], p), h(o, a, p)
                        }
                        var r, n = ["EPSG:900913", "EPSG:3857", "EPSG:102113", "EPSG:102100"],
                            a = ["CRS:84", "urn:ogc:def:crs:EPSG:6.6:4326", "EPSG:4326"];
                        for (r = n.length - 1; r >= 0; --r) s(n[r], a);
                        for (r = a.length - 1; r >= 0; --r) s(a[r], n)
                    }(), window.overwrite = e
            }()
        },
        tPud: function (module, exports) {
            ! function () {
                var OpenLayers = {
                        VERSION_NUMBER: "Release 2.13.1",
                        singleFile: !0,
                        _getScriptLocation: function () {
                            for (var e, t = /(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/, i = document.getElementsByTagName("script"), s = "", r = 0, n = i.length; r < n; r++)
                                if ((e = i[r].getAttribute("src")) && (e = e.match(t))) {
                                    s = e[1];
                                    break
                                } return function () {
                                return s
                            }
                        }(),
                        ImgPath: ""
                    },
                    a, b;
                OpenLayers.Class = function () {
                        var e = arguments.length,
                            t = arguments[0],
                            i = arguments[e - 1],
                            s = "function" == typeof i.initialize ? i.initialize : function () {
                                t.prototype.initialize.apply(this, arguments)
                            };
                        return 1 < e ? (e = [s, t].concat(Array.prototype.slice.call(arguments).slice(1, e - 1), i), OpenLayers.inherit.apply(null, e)) : s.prototype = i, s
                    }, OpenLayers.inherit = function (e, t) {
                        (r = function () {}).prototype = t.prototype, e.prototype = new r;
                        var i, s, r = 2;
                        for (i = arguments.length; r < i; r++) "function" == typeof (s = arguments[r]) && (s = s.prototype), OpenLayers.Util.extend(e.prototype, s)
                    }, OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.extend = function (e, t) {
                        if (e = e || {}, t) {
                            for (var i in t) {
                                var s = t[i];
                                void 0 !== s && (e[i] = s)
                            }
                            "function" == typeof window.Event && t instanceof window.Event || !t.hasOwnProperty || !t.hasOwnProperty("toString") || (e.toString = t.toString)
                        }
                        return e
                    }, OpenLayers.String = {
                        startsWith: function (e, t) {
                            return 0 == e.indexOf(t)
                        },
                        contains: function (e, t) {
                            return -1 != e.indexOf(t)
                        },
                        trim: function (e) {
                            return e.replace(/^\s\s*/, "").replace(/\s\s*$/, "")
                        },
                        camelize: function (e) {
                            for (var t = (e = e.split("-"))[0], i = 1, s = e.length; i < s; i++) {
                                var r = e[i];
                                t = t + (r.charAt(0).toUpperCase() + r.substring(1))
                            }
                            return t
                        },
                        format: function (e, t, i) {
                            return t || (t = window), e.replace(OpenLayers.String.tokenRegEx, (function (e, s) {
                                for (var r, n = s.split(/\.+/), a = 0; a < n.length && (0 == a && (r = t), void 0 !== r); a++) r = r[n[a]];
                                return "function" == typeof r && (r = i ? r.apply(null, i) : r()), void 0 === r ? "undefined" : r
                            }))
                        },
                        tokenRegEx: /\$\{([\w.]+?)\}/g,
                        numberRegEx: /^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,
                        isNumeric: function (e) {
                            return OpenLayers.String.numberRegEx.test(e)
                        },
                        numericIf: function (e, t) {
                            var i = e;
                            return !0 === t && null != e && e.replace && (e = e.replace(/^\s*|\s*$/g, "")), OpenLayers.String.isNumeric(e) ? parseFloat(e) : i
                        }
                    }, OpenLayers.Number = {
                        decimalSeparator: ".",
                        thousandsSeparator: ",",
                        limitSigDigs: function (e, t) {
                            var i = 0;
                            return 0 < t && (i = parseFloat(e.toPrecision(t))), i
                        },
                        format: function (e, t, i, s) {
                            t = void 0 !== t ? t : 0, i = void 0 !== i ? i : OpenLayers.Number.thousandsSeparator, s = void 0 !== s ? s : OpenLayers.Number.decimalSeparator, null != t && (e = parseFloat(e.toFixed(t)));
                            var r = e.toString().split(".");
                            if (1 == r.length && null == t && (t = 0), e = r[0], i)
                                for (var n = /(-?[0-9]+)([0-9]{3})/; n.test(e);) e = e.replace(n, "$1" + i + "$2");
                            return 0 == t ? t = e : (i = 1 < r.length ? r[1] : "0", null != t && (i += Array(t - i.length + 1).join("0")), t = e + s + i), t
                        },
                        zeroPad: function (e, t, i) {
                            for (e = e.toString(i || 10); e.length < t;) e = "0" + e;
                            return e
                        }
                    }, OpenLayers.Function = {
                        bind: function (e, t) {
                            var i = Array.prototype.slice.apply(arguments, [2]);
                            return function () {
                                var s = i.concat(Array.prototype.slice.apply(arguments, [0]));
                                return e.apply(t, s)
                            }
                        },
                        bindAsEventListener: function (e, t) {
                            return function (i) {
                                return e.call(t, i || window.event)
                            }
                        },
                        False: function () {
                            return !1
                        },
                        True: function () {
                            return !0
                        },
                        Void: function () {}
                    }, OpenLayers.Array = {
                        filter: function (e, t, i) {
                            var s = [];
                            if (Array.prototype.filter) s = e.filter(t, i);
                            else {
                                var r = e.length;
                                if ("function" != typeof t) throw new TypeError;
                                for (var n = 0; n < r; n++)
                                    if (n in e) {
                                        var a = e[n];
                                        t.call(i, a, n, e) && s.push(a)
                                    }
                            }
                            return s
                        }
                    }, OpenLayers.Bounds = OpenLayers.Class({
                        left: null,
                        bottom: null,
                        right: null,
                        top: null,
                        centerLonLat: null,
                        initialize: function (e, t, i, s) {
                            OpenLayers.Util.isArray(e) && (s = e[3], i = e[2], t = e[1], e = e[0]), null != e && (this.left = OpenLayers.Util.toFloat(e)), null != t && (this.bottom = OpenLayers.Util.toFloat(t)), null != i && (this.right = OpenLayers.Util.toFloat(i)), null != s && (this.top = OpenLayers.Util.toFloat(s))
                        },
                        clone: function () {
                            return new OpenLayers.Bounds(this.left, this.bottom, this.right, this.top)
                        },
                        equals: function (e) {
                            var t = !1;
                            return null != e && (t = this.left == e.left && this.right == e.right && this.top == e.top && this.bottom == e.bottom), t
                        },
                        toString: function () {
                            return [this.left, this.bottom, this.right, this.top].join()
                        },
                        toArray: function (e) {
                            return !0 === e ? [this.bottom, this.left, this.top, this.right] : [this.left, this.bottom, this.right, this.top]
                        },
                        toBBOX: function (e, t) {
                            null == e && (e = 6);
                            var i = Math.pow(10, e),
                                s = Math.round(this.left * i) / i,
                                r = Math.round(this.bottom * i) / i,
                                n = Math.round(this.right * i) / i;
                            i = Math.round(this.top * i) / i;
                            return !0 === t ? r + "," + s + "," + i + "," + n : s + "," + r + "," + n + "," + i
                        },
                        toGeometry: function () {
                            return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left, this.bottom), new OpenLayers.Geometry.Point(this.right, this.bottom), new OpenLayers.Geometry.Point(this.right, this.top), new OpenLayers.Geometry.Point(this.left, this.top)])])
                        },
                        getWidth: function () {
                            return this.right - this.left
                        },
                        getHeight: function () {
                            return this.top - this.bottom
                        },
                        getSize: function () {
                            return new OpenLayers.Size(this.getWidth(), this.getHeight())
                        },
                        getCenterPixel: function () {
                            return new OpenLayers.Pixel((this.left + this.right) / 2, (this.bottom + this.top) / 2)
                        },
                        getCenterLonLat: function () {
                            return this.centerLonLat || (this.centerLonLat = new OpenLayers.LonLat((this.left + this.right) / 2, (this.bottom + this.top) / 2)), this.centerLonLat
                        },
                        scale: function (e, t) {
                            var i, s;
                            return null == t && (t = this.getCenterLonLat()), "OpenLayers.LonLat" == t.CLASS_NAME ? (i = t.lon, s = t.lat) : (i = t.x, s = t.y), new OpenLayers.Bounds((this.left - i) * e + i, (this.bottom - s) * e + s, (this.right - i) * e + i, (this.top - s) * e + s)
                        },
                        add: function (e, t) {
                            if (null == e || null == t) throw new TypeError("Bounds.add cannot receive null values");
                            return new OpenLayers.Bounds(this.left + e, this.bottom + t, this.right + e, this.top + t)
                        },
                        extend: function (e) {
                            if (e) switch (e.CLASS_NAME) {
                                case "OpenLayers.LonLat":
                                    this.extendXY(e.lon, e.lat);
                                    break;
                                case "OpenLayers.Geometry.Point":
                                    this.extendXY(e.x, e.y);
                                    break;
                                case "OpenLayers.Bounds":
                                    this.centerLonLat = null, (null == this.left || e.left < this.left) && (this.left = e.left), (null == this.bottom || e.bottom < this.bottom) && (this.bottom = e.bottom), (null == this.right || e.right > this.right) && (this.right = e.right), (null == this.top || e.top > this.top) && (this.top = e.top)
                            }
                        },
                        extendXY: function (e, t) {
                            this.centerLonLat = null, (null == this.left || e < this.left) && (this.left = e), (null == this.bottom || t < this.bottom) && (this.bottom = t), (null == this.right || e > this.right) && (this.right = e), (null == this.top || t > this.top) && (this.top = t)
                        },
                        containsLonLat: function (e, t) {
                            "boolean" == typeof t && (t = {
                                inclusive: t
                            }), t = t || {};
                            var i = this.contains(e.lon, e.lat, t.inclusive),
                                s = t.worldBounds;
                            return s && !i && (i = s.getWidth(), s = Math.round((e.lon - (s.left + s.right) / 2) / i), i = this.containsLonLat({
                                lon: e.lon - s * i,
                                lat: e.lat
                            }, {
                                inclusive: t.inclusive
                            })), i
                        },
                        containsPixel: function (e, t) {
                            return this.contains(e.x, e.y, t)
                        },
                        contains: function (e, t, i) {
                            if (null == i && (i = !0), null == e || null == t) return !1;
                            e = OpenLayers.Util.toFloat(e), t = OpenLayers.Util.toFloat(t);
                            return i ? e >= this.left && e <= this.right && t >= this.bottom && t <= this.top : e > this.left && e < this.right && t > this.bottom && t < this.top
                        },
                        intersectsBounds: function (e, t) {
                            if ("boolean" == typeof t && (t = {
                                    inclusive: t
                                }), (t = t || {}).worldBounds) {
                                var i = this.wrapDateLine(t.worldBounds);
                                e = e.wrapDateLine(t.worldBounds)
                            } else i = this;
                            null == t.inclusive && (t.inclusive = !0);
                            var s = !1,
                                r = i.left == e.right || i.right == e.left || i.top == e.bottom || i.bottom == e.top;
                            if (t.inclusive || !r) {
                                s = e.top >= i.bottom && e.top <= i.top || i.top > e.bottom && i.top < e.top, r = e.left >= i.left && e.left <= i.right || i.left >= e.left && i.left <= e.right;
                                var n = e.right >= i.left && e.right <= i.right || i.right >= e.left && i.right <= e.right;
                                s = (e.bottom >= i.bottom && e.bottom <= i.top || i.bottom >= e.bottom && i.bottom <= e.top || s) && (r || n)
                            }
                            if (t.worldBounds && !s) {
                                r = (a = t.worldBounds).getWidth(), n = !a.containsBounds(i);
                                var a = !a.containsBounds(e);
                                n && !a ? (e = e.add(-r, 0), s = i.intersectsBounds(e, {
                                    inclusive: t.inclusive
                                })) : a && !n && (i = i.add(-r, 0), s = e.intersectsBounds(i, {
                                    inclusive: t.inclusive
                                }))
                            }
                            return s
                        },
                        containsBounds: function (e, t, i) {
                            null == t && (t = !1), null == i && (i = !0);
                            var s = this.contains(e.left, e.bottom, i),
                                r = this.contains(e.right, e.bottom, i),
                                n = this.contains(e.left, e.top, i);
                            return e = this.contains(e.right, e.top, i), t ? s || r || n || e : s && r && n && e
                        },
                        determineQuadrant: function (e) {
                            var t = "",
                                i = this.getCenterLonLat();
                            return (t = t + (e.lat < i.lat ? "b" : "t")) + (e.lon < i.lon ? "l" : "r")
                        },
                        transform: function (e, t) {
                            this.centerLonLat = null;
                            var i = OpenLayers.Projection.transform({
                                    x: this.left,
                                    y: this.bottom
                                }, e, t),
                                s = OpenLayers.Projection.transform({
                                    x: this.right,
                                    y: this.bottom
                                }, e, t),
                                r = OpenLayers.Projection.transform({
                                    x: this.left,
                                    y: this.top
                                }, e, t),
                                n = OpenLayers.Projection.transform({
                                    x: this.right,
                                    y: this.top
                                }, e, t);
                            return this.left = Math.min(i.x, r.x), this.bottom = Math.min(i.y, s.y), this.right = Math.max(s.x, n.x), this.top = Math.max(r.y, n.y), this
                        },
                        wrapDateLine: function (e, t) {
                            var i = (t = t || {}).leftTolerance || 0,
                                s = t.rightTolerance || 0,
                                r = this.clone();
                            if (e) {
                                for (var n = e.getWidth(); r.left < e.left && r.right - s <= e.left;) r = r.add(n, 0);
                                for (; r.left + i >= e.right && r.right > e.right;) r = r.add(-n, 0);
                                (i = r.left + i) < e.right && i > e.left && r.right - s > e.right && (r = r.add(-n, 0))
                            }
                            return r
                        },
                        CLASS_NAME: "OpenLayers.Bounds"
                    }), OpenLayers.Bounds.fromString = function (e, t) {
                        var i = e.split(",");
                        return OpenLayers.Bounds.fromArray(i, t)
                    }, OpenLayers.Bounds.fromArray = function (e, t) {
                        return !0 === t ? new OpenLayers.Bounds(e[1], e[0], e[3], e[2]) : new OpenLayers.Bounds(e[0], e[1], e[2], e[3])
                    }, OpenLayers.Bounds.fromSize = function (e) {
                        return new OpenLayers.Bounds(0, e.h, e.w, 0)
                    }, OpenLayers.Bounds.oppositeQuadrant = function (e) {
                        return ("t" == e.charAt(0) ? "b" : "t") + ("l" == e.charAt(1) ? "r" : "l")
                    }, OpenLayers.Element = {
                        visible: function (e) {
                            return "none" != OpenLayers.Util.getElement(e).style.display
                        },
                        toggle: function () {
                            for (var e = 0, t = arguments.length; e < t; e++) {
                                var i = OpenLayers.Util.getElement(arguments[e]),
                                    s = OpenLayers.Element.visible(i) ? "none" : "";
                                i.style.display = s
                            }
                        },
                        remove: function (e) {
                            (e = OpenLayers.Util.getElement(e)).parentNode.removeChild(e)
                        },
                        getHeight: function (e) {
                            return (e = OpenLayers.Util.getElement(e)).offsetHeight
                        },
                        hasClass: function (e, t) {
                            var i = e.className;
                            return !!i && RegExp("(^|\\s)" + t + "(\\s|$)").test(i)
                        },
                        addClass: function (e, t) {
                            return OpenLayers.Element.hasClass(e, t) || (e.className += (e.className ? " " : "") + t), e
                        },
                        removeClass: function (e, t) {
                            var i = e.className;
                            return i && (e.className = OpenLayers.String.trim(i.replace(RegExp("(^|\\s+)" + t + "(\\s+|$)"), " "))), e
                        },
                        toggleClass: function (e, t) {
                            return OpenLayers.Element.hasClass(e, t) ? OpenLayers.Element.removeClass(e, t) : OpenLayers.Element.addClass(e, t), e
                        },
                        getStyle: function (e, t) {
                            var i = null;
                            if ((e = OpenLayers.Util.getElement(e)) && e.style) {
                                (i = e.style[OpenLayers.String.camelize(t)]) || (document.defaultView && document.defaultView.getComputedStyle ? i = (i = document.defaultView.getComputedStyle(e, null)) ? i.getPropertyValue(t) : null : e.currentStyle && (i = e.currentStyle[OpenLayers.String.camelize(t)]));
                                window.opera && -1 != OpenLayers.Util.indexOf(["left", "top", "right", "bottom"], t) && "static" == OpenLayers.Element.getStyle(e, "position") && (i = "auto")
                            }
                            return "auto" == i ? null : i
                        }
                    }, OpenLayers.LonLat = OpenLayers.Class({
                        lon: 0,
                        lat: 0,
                        initialize: function (e, t) {
                            OpenLayers.Util.isArray(e) && (t = e[1], e = e[0]), this.lon = OpenLayers.Util.toFloat(e), this.lat = OpenLayers.Util.toFloat(t)
                        },
                        toString: function () {
                            return "lon=" + this.lon + ",lat=" + this.lat
                        },
                        toShortString: function () {
                            return this.lon + ", " + this.lat
                        },
                        clone: function () {
                            return new OpenLayers.LonLat(this.lon, this.lat)
                        },
                        add: function (e, t) {
                            if (null == e || null == t) throw new TypeError("LonLat.add cannot receive null values");
                            return new OpenLayers.LonLat(this.lon + OpenLayers.Util.toFloat(e), this.lat + OpenLayers.Util.toFloat(t))
                        },
                        equals: function (e) {
                            var t = !1;
                            return null != e && (t = this.lon == e.lon && this.lat == e.lat || isNaN(this.lon) && isNaN(this.lat) && isNaN(e.lon) && isNaN(e.lat)), t
                        },
                        transform: function (e, t) {
                            var i = OpenLayers.Projection.transform({
                                x: this.lon,
                                y: this.lat
                            }, e, t);
                            return this.lon = i.x, this.lat = i.y, this
                        },
                        wrapDateLine: function (e) {
                            var t = this.clone();
                            if (e) {
                                for (; t.lon < e.left;) t.lon += e.getWidth();
                                for (; t.lon > e.right;) t.lon -= e.getWidth()
                            }
                            return t
                        },
                        CLASS_NAME: "OpenLayers.LonLat"
                    }), OpenLayers.LonLat.fromString = function (e) {
                        return e = e.split(","), new OpenLayers.LonLat(e[0], e[1])
                    }, OpenLayers.LonLat.fromArray = function (e) {
                        var t = OpenLayers.Util.isArray(e);
                        return new OpenLayers.LonLat(t && e[0], t && e[1])
                    }, OpenLayers.Pixel = OpenLayers.Class({
                        x: 0,
                        y: 0,
                        initialize: function (e, t) {
                            this.x = parseFloat(e), this.y = parseFloat(t)
                        },
                        toString: function () {
                            return "x=" + this.x + ",y=" + this.y
                        },
                        clone: function () {
                            return new OpenLayers.Pixel(this.x, this.y)
                        },
                        equals: function (e) {
                            var t = !1;
                            return null != e && (t = this.x == e.x && this.y == e.y || isNaN(this.x) && isNaN(this.y) && isNaN(e.x) && isNaN(e.y)), t
                        },
                        distanceTo: function (e) {
                            return Math.sqrt(Math.pow(this.x - e.x, 2) + Math.pow(this.y - e.y, 2))
                        },
                        add: function (e, t) {
                            if (null == e || null == t) throw new TypeError("Pixel.add cannot receive null values");
                            return new OpenLayers.Pixel(this.x + e, this.y + t)
                        },
                        offset: function (e) {
                            var t = this.clone();
                            return e && (t = this.add(e.x, e.y)), t
                        },
                        CLASS_NAME: "OpenLayers.Pixel"
                    }), OpenLayers.Size = OpenLayers.Class({
                        w: 0,
                        h: 0,
                        initialize: function (e, t) {
                            this.w = parseFloat(e), this.h = parseFloat(t)
                        },
                        toString: function () {
                            return "w=" + this.w + ",h=" + this.h
                        },
                        clone: function () {
                            return new OpenLayers.Size(this.w, this.h)
                        },
                        equals: function (e) {
                            var t = !1;
                            return null != e && (t = this.w == e.w && this.h == e.h || isNaN(this.w) && isNaN(this.h) && isNaN(e.w) && isNaN(e.h)), t
                        },
                        CLASS_NAME: "OpenLayers.Size"
                    }), OpenLayers.Console = {
                        log: function () {},
                        debug: function () {},
                        info: function () {},
                        warn: function () {},
                        error: function () {},
                        userError: function (e) {
                            alert(e)
                        },
                        assert: function () {},
                        dir: function () {},
                        dirxml: function () {},
                        trace: function () {},
                        group: function () {},
                        groupEnd: function () {},
                        time: function () {},
                        timeEnd: function () {},
                        profile: function () {},
                        profileEnd: function () {},
                        count: function () {},
                        CLASS_NAME: "OpenLayers.Console"
                    },
                    function () {
                        for (var e = document.getElementsByTagName("script"), t = 0, i = e.length; t < i; ++t)
                            if (-1 != e[t].src.indexOf("firebug.js") && console) {
                                OpenLayers.Util.extend(OpenLayers.Console, console);
                                break
                            }
                    }(), OpenLayers.Lang = {
                        code: null,
                        defaultCode: "en",
                        getCode: function () {
                            return OpenLayers.Lang.code || OpenLayers.Lang.setCode(), OpenLayers.Lang.code
                        },
                        setCode: function (e) {
                            var t;
                            if (e || (e = "msie" == OpenLayers.BROWSER_NAME ? navigator.userLanguage : navigator.language), (e = e.split("-"))[0] = e[0].toLowerCase(), "object" == typeof OpenLayers.Lang[e[0]] && (t = e[0]), e[1]) {
                                var i = e[0] + "-" + e[1].toUpperCase();
                                "object" == typeof OpenLayers.Lang[i] && (t = i)
                            }
                            t || (OpenLayers.Console.warn("Failed to find OpenLayers.Lang." + e.join("-") + " dictionary, falling back to default language"), t = OpenLayers.Lang.defaultCode), OpenLayers.Lang.code = t
                        },
                        translate: function (e, t) {
                            var i = OpenLayers.Lang[OpenLayers.Lang.getCode()];
                            return (i = i && i[e]) || (i = e), t && (i = OpenLayers.String.format(i, t)), i
                        }
                    }, OpenLayers.i18n = OpenLayers.Lang.translate, OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.getElement = function () {
                        for (var e = [], t = 0, i = arguments.length; t < i; t++) {
                            var s = arguments[t];
                            if ("string" == typeof s && (s = document.getElementById(s)), 1 == arguments.length) return s;
                            e.push(s)
                        }
                        return e
                    }, OpenLayers.Util.isElement = function (e) {
                        return !(!e || 1 !== e.nodeType)
                    }, OpenLayers.Util.isArray = function (e) {
                        return "[object Array]" === Object.prototype.toString.call(e)
                    }, OpenLayers.Util.removeItem = function (e, t) {
                        for (var i = e.length - 1; 0 <= i; i--) e[i] == t && e.splice(i, 1);
                        return e
                    }, OpenLayers.Util.indexOf = function (e, t) {
                        if ("function" == typeof e.indexOf) return e.indexOf(t);
                        for (var i = 0, s = e.length; i < s; i++)
                            if (e[i] == t) return i;
                        return -1
                    }, OpenLayers.Util.dotless = /\./g, OpenLayers.Util.modifyDOMElement = function (e, t, i, s, r, n, a, o) {
                        t && (e.id = t.replace(OpenLayers.Util.dotless, "_")), i && (e.style.left = i.x + "px", e.style.top = i.y + "px"), s && (e.style.width = s.w + "px", e.style.height = s.h + "px"), r && (e.style.position = r), n && (e.style.border = n), a && (e.style.overflow = a), 0 <= parseFloat(o) && 1 > parseFloat(o) ? (e.style.filter = "alpha(opacity=" + 100 * o + ")", e.style.opacity = o) : 1 == parseFloat(o) && (e.style.filter = "", e.style.opacity = "")
                    }, OpenLayers.Util.createDiv = function (e, t, i, s, r, n, a, o) {
                        var l = document.createElement("div");
                        return s && (l.style.backgroundImage = "url(" + s + ")"), e || (e = OpenLayers.Util.createUniqueID("OpenLayersDiv")), r || (r = "absolute"), OpenLayers.Util.modifyDOMElement(l, e, t, i, r, n, a, o), l
                    }, OpenLayers.Util.createImage = function (e, t, i, s, r, n, a, o) {
                        var l = document.createElement("img");
                        return e || (e = OpenLayers.Util.createUniqueID("OpenLayersDiv")), r || (r = "relative"), OpenLayers.Util.modifyDOMElement(l, e, t, i, r, n, null, a), o && (l.style.display = "none", t = function () {
                            l.style.display = "", OpenLayers.Event.stopObservingElement(l)
                        }, OpenLayers.Event.observe(l, "load", t), OpenLayers.Event.observe(l, "error", t)), l.style.alt = e, l.galleryImg = "no", s && (l.src = s), l
                    }, OpenLayers.IMAGE_RELOAD_ATTEMPTS = 0, OpenLayers.Util.alphaHackNeeded = null, OpenLayers.Util.alphaHack = function () {
                        if (null == OpenLayers.Util.alphaHackNeeded) {
                            var e = navigator.appVersion.split("MSIE"),
                                t = (e = parseFloat(e[1]), !1);
                            try {
                                t = !!document.body.filters
                            } catch (e) {}
                            OpenLayers.Util.alphaHackNeeded = t && 5.5 <= e && 7 > e
                        }
                        return OpenLayers.Util.alphaHackNeeded
                    }, OpenLayers.Util.modifyAlphaImageDiv = function (e, t, i, s, r, n, a, o, l) {
                        OpenLayers.Util.modifyDOMElement(e, t, i, s, n, null, null, l), t = e.childNodes[0], r && (t.src = r), OpenLayers.Util.modifyDOMElement(t, e.id + "_innerImage", null, s, "relative", a), OpenLayers.Util.alphaHack() && ("none" != e.style.display && (e.style.display = "inline-block"), null == o && (o = "scale"), e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + t.src + "', sizingMethod='" + o + "')", 0 <= parseFloat(e.style.opacity) && 1 > parseFloat(e.style.opacity) && (e.style.filter += " alpha(opacity=" + 100 * e.style.opacity + ")"), t.style.filter = "alpha(opacity=0)")
                    }, OpenLayers.Util.createAlphaImageDiv = function (e, t, i, s, r, n, a, o, l) {
                        var h = OpenLayers.Util.createDiv();
                        return (l = OpenLayers.Util.createImage(null, null, null, null, null, null, null, l)).className = "olAlphaImg", h.appendChild(l), OpenLayers.Util.modifyAlphaImageDiv(h, e, t, i, s, r, n, a, o), h
                    }, OpenLayers.Util.upperCaseObject = function (e) {
                        var t, i = {};
                        for (t in e) i[t.toUpperCase()] = e[t];
                        return i
                    }, OpenLayers.Util.applyDefaults = function (e, t) {
                        e = e || {};
                        var i, s = "function" == typeof window.Event && t instanceof window.Event;
                        for (i in t)(void 0 === e[i] || !s && t.hasOwnProperty && t.hasOwnProperty(i) && !e.hasOwnProperty(i)) && (e[i] = t[i]);
                        return !s && t && t.hasOwnProperty && t.hasOwnProperty("toString") && !e.hasOwnProperty("toString") && (e.toString = t.toString), e
                    }, OpenLayers.Util.getParameterString = function (e) {
                        var t, i = [];
                        for (t in e) {
                            var s = e[t];
                            if (null != s && "function" != typeof s) {
                                if ("object" == typeof s && s.constructor == Array) {
                                    for (var r, n = [], a = 0, o = s.length; a < o; a++) r = s[a], n.push(encodeURIComponent(null == r ? "" : r));
                                    s = n.join(",")
                                } else s = encodeURIComponent(s);
                                i.push(encodeURIComponent(t) + "=" + s)
                            }
                        }
                        return i.join("&")
                    }, OpenLayers.Util.urlAppend = function (e, t) {
                        var i = e;
                        if (t) {
                            var s = (e + " ").split(/[?&]/);
                            i = i + (" " === s.pop() ? t : s.length ? "&" + t : "?" + t)
                        }
                        return i
                    }, OpenLayers.Util.getImagesLocation = function () {
                        return OpenLayers.ImgPath || OpenLayers._getScriptLocation() + "img/"
                    }, OpenLayers.Util.getImageLocation = function (e) {
                        return OpenLayers.Util.getImagesLocation() + e
                    }, OpenLayers.Util.Try = function () {
                        for (var e = null, t = 0, i = arguments.length; t < i; t++) {
                            var s = arguments[t];
                            try {
                                e = s();
                                break
                            } catch (e) {}
                        }
                        return e
                    }, OpenLayers.Util.getXmlNodeValue = function (e) {
                        var t = null;
                        return OpenLayers.Util.Try((function () {
                            (t = e.text) || (t = e.textContent), t || (t = e.firstChild.nodeValue)
                        }), (function () {
                            t = e.textContent
                        })), t
                    }, OpenLayers.Util.mouseLeft = function (e, t) {
                        for (var i = e.relatedTarget ? e.relatedTarget : e.toElement; i != t && null != i;) i = i.parentNode;
                        return i != t
                    }, OpenLayers.Util.DEFAULT_PRECISION = 14, OpenLayers.Util.toFloat = function (e, t) {
                        return null == t && (t = OpenLayers.Util.DEFAULT_PRECISION), "number" != typeof e && (e = parseFloat(e)), 0 === t ? e : parseFloat(e.toPrecision(t))
                    }, OpenLayers.Util.rad = function (e) {
                        return e * Math.PI / 180
                    }, OpenLayers.Util.deg = function (e) {
                        return 180 * e / Math.PI
                    }, OpenLayers.Util.VincentyConstants = {
                        a: 6378137,
                        b: 6356752.3142,
                        f: 1 / 298.257223563
                    }, OpenLayers.Util.distVincenty = function (e, t) {
                        for (var i = (r = OpenLayers.Util.VincentyConstants).a, s = r.b, r = r.f, n = OpenLayers.Util.rad(t.lon - e.lon), a = Math.atan((1 - r) * Math.tan(OpenLayers.Util.rad(e.lat))), o = Math.atan((1 - r) * Math.tan(OpenLayers.Util.rad(t.lat))), l = Math.sin(a), h = (a = Math.cos(a), Math.sin(o)), p = (o = Math.cos(o), n), u = 2 * Math.PI, c = 20; 1e-12 < Math.abs(p - u) && 0 < --c;) {
                            var y = Math.sin(p),
                                d = Math.cos(p),
                                m = Math.sqrt(o * y * o * y + (a * h - l * o * d) * (a * h - l * o * d));
                            if (0 == m) return 0;
                            d = l * h + a * o * d;
                            var f = Math.atan2(m, d),
                                g = Math.asin(a * o * y / m),
                                L = Math.cos(g) * Math.cos(g),
                                v = (y = d - 2 * l * h / L, r / 16 * L * (4 + r * (4 - 3 * L)));
                            u = p, p = n + (1 - v) * r * Math.sin(g) * (f + v * m * (y + v * d * (2 * y * y - 1)))
                        }
                        return 0 == c ? NaN : (s * (1 + (i = L * (i * i - s * s) / (s * s)) / 16384 * (4096 + i * (i * (320 - 175 * i) - 768))) * (f - (r = i / 1024 * (256 + i * (i * (74 - 47 * i) - 128))) * m * (y + r / 4 * (d * (2 * y * y - 1) - r / 6 * y * (4 * m * m - 3) * (4 * y * y - 3))))).toFixed(3) / 1e3
                    }, OpenLayers.Util.destinationVincenty = function (e, t, i) {
                        var s = OpenLayers.Util,
                            r = (o = s.VincentyConstants).a,
                            n = o.b,
                            a = o.f,
                            o = e.lon;
                        e = e.lat;
                        var l = s.rad(t);
                        t = Math.sin(l), l = Math.cos(l), e = (1 - a) * Math.tan(s.rad(e));
                        for (var h = 1 / Math.sqrt(1 + e * e), p = e * h, u = Math.atan2(e, l), c = 1 - (e = h * t) * e, y = 1 + (r = c * (r * r - n * n) / (n * n)) / 16384 * (4096 + r * (r * (320 - 175 * r) - 768)), d = r / 1024 * (256 + r * (r * (74 - 47 * r) - 128)), m = (r = i / (n * y), 2 * Math.PI); 1e-12 < Math.abs(r - m);) {
                            var f = Math.cos(2 * u + r),
                                g = Math.sin(r),
                                L = Math.cos(r);
                            m = r, r = i / (n * y) + d * g * (f + d / 4 * (L * (2 * f * f - 1) - d / 6 * f * (4 * g * g - 3) * (4 * f * f - 3)))
                        }
                        return i = p * g - h * L * l, n = Math.atan2(p * L + h * g * l, (1 - a) * Math.sqrt(e * e + i * i)), f = (t = Math.atan2(g * t, h * L - p * g * l)) - (1 - (l = a / 16 * c * (4 + a * (4 - 3 * c)))) * a * e * (r + l * g * (f + l * L * (2 * f * f - 1))), Math.atan2(e, -i), new OpenLayers.LonLat(o + s.deg(f), s.deg(n))
                    }, OpenLayers.Util.getParameters = function (e, t) {
                        t = t || {}, e = null == e ? window.location.href : e;
                        var i = "";
                        if (OpenLayers.String.contains(e, "?")) {
                            var s = e.indexOf("?") + 1;
                            i = OpenLayers.String.contains(e, "#") ? e.indexOf("#") : e.length, i = e.substring(s, i)
                        }
                        s = {};
                        for (var r = 0, n = (i = i.split(/[&;]/)).length; r < n; ++r) {
                            var a = i[r].split("=");
                            if (a[0]) {
                                var o = a[0];
                                try {
                                    o = decodeURIComponent(o)
                                } catch (e) {
                                    o = unescape(o)
                                }
                                a = (a[1] || "").replace(/\+/g, " ");
                                try {
                                    a = decodeURIComponent(a)
                                } catch (e) {
                                    a = unescape(a)
                                }!1 !== t.splitArgs && (a = a.split(",")), 1 == a.length && (a = a[0]), s[o] = a
                            }
                        }
                        return s
                    }, OpenLayers.Util.lastSeqID = 0, OpenLayers.Util.createUniqueID = function (e) {
                        return e = null == e ? "id_" : e.replace(OpenLayers.Util.dotless, "_"), OpenLayers.Util.lastSeqID += 1, e + OpenLayers.Util.lastSeqID
                    }, OpenLayers.INCHES_PER_UNIT = {
                        inches: 1,
                        ft: 12,
                        mi: 63360,
                        m: 39.37,
                        km: 39370,
                        dd: 4374754,
                        yd: 36
                    }, OpenLayers.INCHES_PER_UNIT.in = OpenLayers.INCHES_PER_UNIT.inches, OpenLayers.INCHES_PER_UNIT.degrees = OpenLayers.INCHES_PER_UNIT.dd, OpenLayers.INCHES_PER_UNIT.nmi = 1852 * OpenLayers.INCHES_PER_UNIT.m, OpenLayers.METERS_PER_INCH = .0254000508001016, OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {
                        Inch: OpenLayers.INCHES_PER_UNIT.inches,
                        Meter: 1 / OpenLayers.METERS_PER_INCH,
                        Foot: .3048006096012192 / OpenLayers.METERS_PER_INCH,
                        IFoot: .3048 / OpenLayers.METERS_PER_INCH,
                        ClarkeFoot: .3047972651151 / OpenLayers.METERS_PER_INCH,
                        SearsFoot: .30479947153867626 / OpenLayers.METERS_PER_INCH,
                        GoldCoastFoot: .3047997101815088 / OpenLayers.METERS_PER_INCH,
                        IInch: .0254 / OpenLayers.METERS_PER_INCH,
                        MicroInch: 254e-7 / OpenLayers.METERS_PER_INCH,
                        Mil: 2.54e-8 / OpenLayers.METERS_PER_INCH,
                        Centimeter: .01 / OpenLayers.METERS_PER_INCH,
                        Kilometer: 1e3 / OpenLayers.METERS_PER_INCH,
                        Yard: .9144018288036576 / OpenLayers.METERS_PER_INCH,
                        SearsYard: .914398414616029 / OpenLayers.METERS_PER_INCH,
                        IndianYard: .9143985307444408 / OpenLayers.METERS_PER_INCH,
                        IndianYd37: .91439523 / OpenLayers.METERS_PER_INCH,
                        IndianYd62: .9143988 / OpenLayers.METERS_PER_INCH,
                        IndianYd75: .9143985 / OpenLayers.METERS_PER_INCH,
                        IndianFoot: .30479951 / OpenLayers.METERS_PER_INCH,
                        IndianFt37: .30479841 / OpenLayers.METERS_PER_INCH,
                        IndianFt62: .3047996 / OpenLayers.METERS_PER_INCH,
                        IndianFt75: .3047995 / OpenLayers.METERS_PER_INCH,
                        Mile: 1609.3472186944373 / OpenLayers.METERS_PER_INCH,
                        IYard: .9144 / OpenLayers.METERS_PER_INCH,
                        IMile: 1609.344 / OpenLayers.METERS_PER_INCH,
                        NautM: 1852 / OpenLayers.METERS_PER_INCH,
                        "Lat-66": 110943.31648893273 / OpenLayers.METERS_PER_INCH,
                        "Lat-83": 110946.25736872235 / OpenLayers.METERS_PER_INCH,
                        Decimeter: .1 / OpenLayers.METERS_PER_INCH,
                        Millimeter: .001 / OpenLayers.METERS_PER_INCH,
                        Dekameter: 10 / OpenLayers.METERS_PER_INCH,
                        Decameter: 10 / OpenLayers.METERS_PER_INCH,
                        Hectometer: 100 / OpenLayers.METERS_PER_INCH,
                        GermanMeter: 1.0000135965 / OpenLayers.METERS_PER_INCH,
                        CaGrid: .999738 / OpenLayers.METERS_PER_INCH,
                        ClarkeChain: 20.1166194976 / OpenLayers.METERS_PER_INCH,
                        GunterChain: 20.11684023368047 / OpenLayers.METERS_PER_INCH,
                        BenoitChain: 20.116782494375872 / OpenLayers.METERS_PER_INCH,
                        SearsChain: 20.11676512155 / OpenLayers.METERS_PER_INCH,
                        ClarkeLink: .201166194976 / OpenLayers.METERS_PER_INCH,
                        GunterLink: .2011684023368047 / OpenLayers.METERS_PER_INCH,
                        BenoitLink: .20116782494375873 / OpenLayers.METERS_PER_INCH,
                        SearsLink: .2011676512155 / OpenLayers.METERS_PER_INCH,
                        Rod: 5.02921005842012 / OpenLayers.METERS_PER_INCH,
                        IntnlChain: 20.1168 / OpenLayers.METERS_PER_INCH,
                        IntnlLink: .201168 / OpenLayers.METERS_PER_INCH,
                        Perch: 5.02921005842012 / OpenLayers.METERS_PER_INCH,
                        Pole: 5.02921005842012 / OpenLayers.METERS_PER_INCH,
                        Furlong: 201.1684023368046 / OpenLayers.METERS_PER_INCH,
                        Rood: 3.778266898 / OpenLayers.METERS_PER_INCH,
                        CapeFoot: .3047972615 / OpenLayers.METERS_PER_INCH,
                        Brealey: 375 / OpenLayers.METERS_PER_INCH,
                        ModAmFt: .304812252984506 / OpenLayers.METERS_PER_INCH,
                        Fathom: 1.8288 / OpenLayers.METERS_PER_INCH,
                        "NautM-UK": 1853.184 / OpenLayers.METERS_PER_INCH,
                        "50kilometers": 5e4 / OpenLayers.METERS_PER_INCH,
                        "150kilometers": 15e4 / OpenLayers.METERS_PER_INCH
                    }), OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {
                        mm: OpenLayers.INCHES_PER_UNIT.Meter / 1e3,
                        cm: OpenLayers.INCHES_PER_UNIT.Meter / 100,
                        dm: 100 * OpenLayers.INCHES_PER_UNIT.Meter,
                        km: 1e3 * OpenLayers.INCHES_PER_UNIT.Meter,
                        kmi: OpenLayers.INCHES_PER_UNIT.nmi,
                        fath: OpenLayers.INCHES_PER_UNIT.Fathom,
                        ch: OpenLayers.INCHES_PER_UNIT.IntnlChain,
                        link: OpenLayers.INCHES_PER_UNIT.IntnlLink,
                        "us-in": OpenLayers.INCHES_PER_UNIT.inches,
                        "us-ft": OpenLayers.INCHES_PER_UNIT.Foot,
                        "us-yd": OpenLayers.INCHES_PER_UNIT.Yard,
                        "us-ch": OpenLayers.INCHES_PER_UNIT.GunterChain,
                        "us-mi": OpenLayers.INCHES_PER_UNIT.Mile,
                        "ind-yd": OpenLayers.INCHES_PER_UNIT.IndianYd37,
                        "ind-ft": OpenLayers.INCHES_PER_UNIT.IndianFt37,
                        "ind-ch": 20.11669506 / OpenLayers.METERS_PER_INCH
                    }), OpenLayers.DOTS_PER_INCH = 72, OpenLayers.Util.normalizeScale = function (e) {
                        return 1 < e ? 1 / e : e
                    }, OpenLayers.Util.getResolutionFromScale = function (e, t) {
                        var i;
                        return e && (null == t && (t = "degrees"), i = 1 / (OpenLayers.Util.normalizeScale(e) * OpenLayers.INCHES_PER_UNIT[t] * OpenLayers.DOTS_PER_INCH)), i
                    }, OpenLayers.Util.getScaleFromResolution = function (e, t) {
                        return null == t && (t = "degrees"), e * OpenLayers.INCHES_PER_UNIT[t] * OpenLayers.DOTS_PER_INCH
                    }, OpenLayers.Util.pagePosition = function (e) {
                        var t = [0, 0],
                            i = OpenLayers.Util.getViewportElement();
                        if (!e || e == window || e == i) return t;
                        var s = OpenLayers.IS_GECKO && document.getBoxObjectFor && "absolute" == OpenLayers.Element.getStyle(e, "position") && ("" == e.style.top || "" == e.style.left),
                            r = null;
                        if (e.getBoundingClientRect) e = e.getBoundingClientRect(), r = window.pageYOffset || i.scrollTop, t[0] = e.left + (window.pageXOffset || i.scrollLeft), t[1] = e.top + r;
                        else if (document.getBoxObjectFor && !s) e = document.getBoxObjectFor(e), i = document.getBoxObjectFor(i), t[0] = e.screenX - i.screenX, t[1] = e.screenY - i.screenY;
                        else {
                            if (t[0] = e.offsetLeft, t[1] = e.offsetTop, (r = e.offsetParent) != e)
                                for (; r;) t[0] += r.offsetLeft, t[1] += r.offsetTop, r = r.offsetParent;
                            for (("opera" == (i = OpenLayers.BROWSER_NAME) || "safari" == i && "absolute" == OpenLayers.Element.getStyle(e, "position")) && (t[1] -= document.body.offsetTop), r = e.offsetParent; r && r != document.body;) t[0] -= r.scrollLeft, "opera" == i && "TR" == r.tagName || (t[1] -= r.scrollTop), r = r.offsetParent
                        }
                        return t
                    }, OpenLayers.Util.getViewportElement = function () {
                        var e = arguments.callee.viewportElement;
                        return null == e && (e = "msie" == OpenLayers.BROWSER_NAME && "CSS1Compat" != document.compatMode ? document.body : document.documentElement, arguments.callee.viewportElement = e), e
                    }, OpenLayers.Util.isEquivalentUrl = function (e, t, i) {
                        for (var s in i = i || {}, OpenLayers.Util.applyDefaults(i, {
                                ignoreCase: !0,
                                ignorePort80: !0,
                                ignoreHash: !0,
                                splitArgs: !1
                            }), e = OpenLayers.Util.createUrlObject(e, i), t = OpenLayers.Util.createUrlObject(t, i), e)
                            if ("args" !== s && e[s] != t[s]) return !1;
                        for (s in e.args) {
                            if (e.args[s] != t.args[s]) return !1;
                            delete t.args[s]
                        }
                        for (s in t.args) return !1;
                        return !0
                    }, OpenLayers.Util.createUrlObject = function (e, t) {
                        if (t = t || {}, !/^\w+:\/\//.test(e)) {
                            var i = window.location,
                                s = i.port ? ":" + i.port : "";
                            s = i.protocol + "//" + i.host.split(":").shift() + s;
                            0 === e.indexOf("/") ? e = s + e : ((i = i.pathname.split("/")).pop(), e = s + i.join("/") + "/" + e)
                        }
                        t.ignoreCase && (e = e.toLowerCase()), (i = document.createElement("a")).href = e, (s = {}).host = i.host.split(":").shift(), s.protocol = i.protocol, s.port = t.ignorePort80 ? "80" == i.port || "0" == i.port ? "" : i.port : "" == i.port || "0" == i.port ? "80" : i.port, s.hash = t.ignoreHash || "#" === i.hash ? "" : i.hash;
                        var r = i.search;
                        return r || (r = -1 != (r = e.indexOf("?")) ? e.substr(r) : ""), s.args = OpenLayers.Util.getParameters(r, {
                            splitArgs: t.splitArgs
                        }), s.pathname = "/" == i.pathname.charAt(0) ? i.pathname : "/" + i.pathname, s
                    }, OpenLayers.Util.removeTail = function (e) {
                        var t = null,
                            i = (t = e.indexOf("?"), e.indexOf("#"));
                        return -1 == t ? -1 != i ? e.substr(0, i) : e : -1 != i ? e.substr(0, Math.min(t, i)) : e.substr(0, t)
                    }, OpenLayers.IS_GECKO = (a = navigator.userAgent.toLowerCase(), -1 == a.indexOf("webkit") && -1 != a.indexOf("gecko")), OpenLayers.CANVAS_SUPPORTED = function () {
                        var e = document.createElement("canvas");
                        return !(!e.getContext || !e.getContext("2d"))
                    }(), OpenLayers.BROWSER_NAME = function () {
                        var e = "",
                            t = navigator.userAgent.toLowerCase();
                        return -1 != t.indexOf("opera") ? e = "opera" : -1 != t.indexOf("msie") ? e = "msie" : -1 != t.indexOf("safari") ? e = "safari" : -1 != t.indexOf("mozilla") && (e = -1 != t.indexOf("firefox") ? "firefox" : "mozilla"), e
                    }(), OpenLayers.Util.getBrowserName = function () {
                        return OpenLayers.BROWSER_NAME
                    }, OpenLayers.Util.getRenderedDimensions = function (e, t, i) {
                        var s, r, n = document.createElement("div");
                        n.style.visibility = "hidden";
                        for (var a = i && i.containerElement ? i.containerElement : document.body, o = !1, l = null, h = a; h && "body" != h.tagName.toLowerCase();) {
                            var p = OpenLayers.Element.getStyle(h, "position");
                            if ("absolute" == p) {
                                o = !0;
                                break
                            }
                            if (p && "static" != p) break;
                            h = h.parentNode
                        }
                        if (!o || 0 !== a.clientHeight && 0 !== a.clientWidth || ((l = document.createElement("div")).style.visibility = "hidden", l.style.position = "absolute", l.style.overflow = "visible", l.style.width = document.body.clientWidth + "px", l.style.height = document.body.clientHeight + "px", l.appendChild(n)), n.style.position = "absolute", t && (t.w ? (s = t.w, n.style.width = s + "px") : t.h && (r = t.h, n.style.height = r + "px")), i && i.displayClass && (n.className = i.displayClass), (t = document.createElement("div")).innerHTML = e, t.style.overflow = "visible", t.childNodes)
                            for (e = 0, i = t.childNodes.length; e < i; e++) t.childNodes[e].style && (t.childNodes[e].style.overflow = "visible");
                        return n.appendChild(t), l ? a.appendChild(l) : a.appendChild(n), s || (s = parseInt(t.scrollWidth), n.style.width = s + "px"), r || (r = parseInt(t.scrollHeight)), n.removeChild(t), l ? (l.removeChild(n), a.removeChild(l)) : a.removeChild(n), new OpenLayers.Size(s, r)
                    }, OpenLayers.Util.getScrollbarWidth = function () {
                        var e = OpenLayers.Util._scrollbarWidth;
                        if (null == e) {
                            var t = null,
                                i = null;
                            t = e = 0;
                            (t = document.createElement("div")).style.position = "absolute", t.style.top = "-1000px", t.style.left = "-1000px", t.style.width = "100px", t.style.height = "50px", t.style.overflow = "hidden", (i = document.createElement("div")).style.width = "100%", i.style.height = "200px", t.appendChild(i), document.body.appendChild(t), e = i.offsetWidth, t.style.overflow = "scroll", t = i.offsetWidth, document.body.removeChild(document.body.lastChild), OpenLayers.Util._scrollbarWidth = e - t, e = OpenLayers.Util._scrollbarWidth
                        }
                        return e
                    }, OpenLayers.Util.getFormattedLonLat = function (e, t, i) {
                        i || (i = "dms"), e = (e + 540) % 360 - 180;
                        var s = Math.abs(e),
                            r = Math.floor(s),
                            n = s = (s - r) / (1 / 60);
                        s = Math.floor(s);
                        return 60 <= (n = (n = Math.round((n - s) / (1 / 60) * 10)) / 10) && (n -= 60, 60 <= (s += 1) && (s -= 60, r += 1)), 10 > r && (r = "0" + r), r += "°", 0 <= i.indexOf("dm") && (10 > s && (s = "0" + s), r += s + "'", 0 <= i.indexOf("dms") && (10 > n && (n = "0" + n), r += n + '"')), "lon" == t ? r + (0 > e ? OpenLayers.i18n("W") : OpenLayers.i18n("E")) : r + (0 > e ? OpenLayers.i18n("S") : OpenLayers.i18n("N"))
                    }, OpenLayers.Format = OpenLayers.Class({
                        options: null,
                        externalProjection: null,
                        internalProjection: null,
                        data: null,
                        keepData: !1,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e), this.options = e
                        },
                        destroy: function () {},
                        read: function (e) {
                            throw Error("Read not implemented.")
                        },
                        write: function (e) {
                            throw Error("Write not implemented.")
                        },
                        CLASS_NAME: "OpenLayers.Format"
                    }), OpenLayers.Format.CSWGetRecords = function (e) {
                        e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.CSWGetRecords.DEFAULTS);
                        var t = OpenLayers.Format.CSWGetRecords["v" + e.version.replace(/\./g, "_")];
                        if (!t) throw "Unsupported CSWGetRecords version: " + e.version;
                        return new t(e)
                    }, OpenLayers.Format.CSWGetRecords.DEFAULTS = {
                        version: "2.0.2"
                    }, OpenLayers.Control = OpenLayers.Class({
                        id: null,
                        map: null,
                        div: null,
                        type: null,
                        allowSelection: !1,
                        displayClass: "",
                        title: "",
                        autoActivate: !1,
                        active: null,
                        handlerOptions: null,
                        handler: null,
                        eventListeners: null,
                        events: null,
                        initialize: function (e) {
                            this.displayClass = this.CLASS_NAME.replace("OpenLayers.", "ol").replace(/\./g, ""), OpenLayers.Util.extend(this, e), this.events = new OpenLayers.Events(this), this.eventListeners instanceof Object && this.events.on(this.eventListeners), null == this.id && (this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_"))
                        },
                        destroy: function () {
                            if (this.events && (this.eventListeners && this.events.un(this.eventListeners), this.events.destroy(), this.events = null), this.eventListeners = null, this.handler && (this.handler.destroy(), this.handler = null), this.handlers) {
                                for (var e in this.handlers) this.handlers.hasOwnProperty(e) && "function" == typeof this.handlers[e].destroy && this.handlers[e].destroy();
                                this.handlers = null
                            }
                            this.map && (this.map.removeControl(this), this.map = null), this.div = null
                        },
                        setMap: function (e) {
                            this.map = e, this.handler && this.handler.setMap(e)
                        },
                        draw: function (e) {
                            return null == this.div && (this.div = OpenLayers.Util.createDiv(this.id), this.div.className = this.displayClass, this.allowSelection || (this.div.className += " olControlNoSelect", this.div.setAttribute("unselectable", "on", 0), this.div.onselectstart = OpenLayers.Function.False), "" != this.title && (this.div.title = this.title)), null != e && (this.position = e.clone()), this.moveTo(this.position), this.div
                        },
                        moveTo: function (e) {
                            null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px")
                        },
                        activate: function () {
                            return !this.active && (this.handler && this.handler.activate(), this.active = !0, this.map && OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass.replace(/ /g, "") + "Active"), this.events.triggerEvent("activate"), !0)
                        },
                        deactivate: function () {
                            return !!this.active && (this.handler && this.handler.deactivate(), this.active = !1, this.map && OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass.replace(/ /g, "") + "Active"), this.events.triggerEvent("deactivate"), !0)
                        },
                        CLASS_NAME: "OpenLayers.Control"
                    }), OpenLayers.Control.TYPE_BUTTON = 1, OpenLayers.Control.TYPE_TOGGLE = 2, OpenLayers.Control.TYPE_TOOL = 3, OpenLayers.Event = {
                        observers: !1,
                        KEY_SPACE: 32,
                        KEY_BACKSPACE: 8,
                        KEY_TAB: 9,
                        KEY_RETURN: 13,
                        KEY_ESC: 27,
                        KEY_LEFT: 37,
                        KEY_UP: 38,
                        KEY_RIGHT: 39,
                        KEY_DOWN: 40,
                        KEY_DELETE: 46,
                        element: function (e) {
                            return e.target || e.srcElement
                        },
                        isSingleTouch: function (e) {
                            return e.touches && 1 == e.touches.length
                        },
                        isMultiTouch: function (e) {
                            return e.touches && 1 < e.touches.length
                        },
                        isLeftClick: function (e) {
                            return e.which && 1 == e.which || e.button && 1 == e.button
                        },
                        isRightClick: function (e) {
                            return e.which && 3 == e.which || e.button && 2 == e.button
                        },
                        stop: function (e, t) {
                            t || OpenLayers.Event.preventDefault(e), e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0
                        },
                        preventDefault: function (e) {
                            e.preventDefault ? e.preventDefault() : e.returnValue = !1
                        },
                        findElement: function (e, t) {
                            for (var i = OpenLayers.Event.element(e); i.parentNode && (!i.tagName || i.tagName.toUpperCase() != t.toUpperCase());) i = i.parentNode;
                            return i
                        },
                        observe: function (e, t, i, s) {
                            if (e = OpenLayers.Util.getElement(e), s = s || !1, "keypress" == t && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || e.attachEvent) && (t = "keydown"), this.observers || (this.observers = {}), !e._eventCacheID) {
                                var r = "eventCacheID_";
                                e.id && (r = e.id + "_" + r), e._eventCacheID = OpenLayers.Util.createUniqueID(r)
                            }
                            r = e._eventCacheID, this.observers[r] || (this.observers[r] = []), this.observers[r].push({
                                element: e,
                                name: t,
                                observer: i,
                                useCapture: s
                            }), e.addEventListener ? e.addEventListener(t, i, s) : e.attachEvent && e.attachEvent("on" + t, i)
                        },
                        stopObservingElement: function (e) {
                            e = OpenLayers.Util.getElement(e)._eventCacheID, this._removeElementObservers(OpenLayers.Event.observers[e])
                        },
                        _removeElementObservers: function (e) {
                            if (e)
                                for (var t = e.length - 1; 0 <= t; t--) {
                                    var i = e[t];
                                    OpenLayers.Event.stopObserving.apply(this, [i.element, i.name, i.observer, i.useCapture])
                                }
                        },
                        stopObserving: function (e, t, i, s) {
                            s = s || !1;
                            var r = (e = OpenLayers.Util.getElement(e))._eventCacheID;
                            "keypress" == t && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || e.detachEvent) && (t = "keydown");
                            var n = !1,
                                a = OpenLayers.Event.observers[r];
                            if (a)
                                for (var o = 0; !n && o < a.length;) {
                                    var l = a[o];
                                    if (l.name == t && l.observer == i && l.useCapture == s) {
                                        a.splice(o, 1), 0 == a.length && delete OpenLayers.Event.observers[r], n = !0;
                                        break
                                    }
                                    o++
                                }
                            return n && (e.removeEventListener ? e.removeEventListener(t, i, s) : e && e.detachEvent && e.detachEvent("on" + t, i)), n
                        },
                        unloadCache: function () {
                            if (OpenLayers.Event && OpenLayers.Event.observers) {
                                for (var e in OpenLayers.Event.observers) OpenLayers.Event._removeElementObservers.apply(this, [OpenLayers.Event.observers[e]]);
                                OpenLayers.Event.observers = !1
                            }
                        },
                        CLASS_NAME: "OpenLayers.Event"
                    }, OpenLayers.Event.observe(window, "unload", OpenLayers.Event.unloadCache, !1), OpenLayers.Events = OpenLayers.Class({
                        BROWSER_EVENTS: "mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),
                        listeners: null,
                        object: null,
                        element: null,
                        eventHandler: null,
                        fallThrough: null,
                        includeXY: !1,
                        extensions: null,
                        extensionCount: null,
                        clearMouseListener: null,
                        initialize: function (e, t, i, s, r) {
                            OpenLayers.Util.extend(this, r), this.object = e, this.fallThrough = s, this.listeners = {}, this.extensions = {}, this.extensionCount = {}, this._msTouches = [], null != t && this.attachToElement(t)
                        },
                        destroy: function () {
                            for (var e in this.extensions) "boolean" != typeof this.extensions[e] && this.extensions[e].destroy();
                            this.extensions = null, this.element && (OpenLayers.Event.stopObservingElement(this.element), this.element.hasScrollEvent && OpenLayers.Event.stopObserving(window, "scroll", this.clearMouseListener)), this.eventHandler = this.fallThrough = this.object = this.listeners = this.element = null
                        },
                        addEventType: function (e) {},
                        attachToElement: function (e) {
                            this.element ? OpenLayers.Event.stopObservingElement(this.element) : (this.eventHandler = OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent, this), this.clearMouseListener = OpenLayers.Function.bind(this.clearMouseCache, this)), this.element = e;
                            for (var t, i = !!window.navigator.msMaxTouchPoints, s = 0, r = this.BROWSER_EVENTS.length; s < r; s++) t = this.BROWSER_EVENTS[s], OpenLayers.Event.observe(e, t, this.eventHandler), i && 0 === t.indexOf("touch") && this.addMsTouchListener(e, t, this.eventHandler);
                            OpenLayers.Event.observe(e, "dragstart", OpenLayers.Event.stop)
                        },
                        on: function (e) {
                            for (var t in e) "scope" != t && e.hasOwnProperty(t) && this.register(t, e.scope, e[t])
                        },
                        register: function (e, t, i, s) {
                            if (e in OpenLayers.Events && !this.extensions[e] && (this.extensions[e] = new OpenLayers.Events[e](this)), null != i) {
                                null == t && (t = this.object);
                                var r = this.listeners[e];
                                r || (r = [], this.listeners[e] = r, this.extensionCount[e] = 0), t = {
                                    obj: t,
                                    func: i
                                }, s ? (r.splice(this.extensionCount[e], 0, t), "object" == typeof s && s.extension && this.extensionCount[e]++) : r.push(t)
                            }
                        },
                        registerPriority: function (e, t, i) {
                            this.register(e, t, i, !0)
                        },
                        un: function (e) {
                            for (var t in e) "scope" != t && e.hasOwnProperty(t) && this.unregister(t, e.scope, e[t])
                        },
                        unregister: function (e, t, i) {
                            if (null == t && (t = this.object), null != (e = this.listeners[e]))
                                for (var s = 0, r = e.length; s < r; s++)
                                    if (e[s].obj == t && e[s].func == i) {
                                        e.splice(s, 1);
                                        break
                                    }
                        },
                        remove: function (e) {
                            null != this.listeners[e] && (this.listeners[e] = [])
                        },
                        triggerEvent: function (e, t) {
                            if ((i = this.listeners[e]) && 0 != i.length) {
                                null == t && (t = {}), t.object = this.object, t.element = this.element, t.type || (t.type = e);
                                for (var i, s, r = 0, n = (i = i.slice()).length; r < n && (null == (s = (s = i[r]).func.apply(s.obj, [t])) || 0 != s); r++);
                                return this.fallThrough || OpenLayers.Event.stop(t, !0), s
                            }
                        },
                        handleBrowserEvent: function (e) {
                            var t = e.type,
                                i = this.listeners[t];
                            if (i && 0 != i.length) {
                                if ((i = e.touches) && i[0]) {
                                    for (var s, r = 0, n = 0, a = i.length, o = 0; o < a; ++o) r += (s = this.getTouchClientXY(i[o])).clientX, n += s.clientY;
                                    e.clientX = r / a, e.clientY = n / a
                                }
                                this.includeXY && (e.xy = this.getMousePosition(e)), this.triggerEvent(t, e)
                            }
                        },
                        getTouchClientXY: function (e) {
                            var t = (i = window.olMockWin || window).pageXOffset,
                                i = i.pageYOffset,
                                s = e.clientX,
                                r = e.clientY;
                            return 0 === e.pageY && Math.floor(r) > Math.floor(e.pageY) || 0 === e.pageX && Math.floor(s) > Math.floor(e.pageX) ? (s -= t, r -= i) : (r < e.pageY - i || s < e.pageX - t) && (s = e.pageX - t, r = e.pageY - i), e.olClientX = s, e.olClientY = r, {
                                clientX: s,
                                clientY: r
                            }
                        },
                        clearMouseCache: function () {
                            this.element.scrolls = null, this.element.lefttop = null, this.element.offsets = null
                        },
                        getMousePosition: function (e) {
                            if (this.includeXY ? this.element.hasScrollEvent || (OpenLayers.Event.observe(window, "scroll", this.clearMouseListener), this.element.hasScrollEvent = !0) : this.clearMouseCache(), !this.element.scrolls) {
                                var t = OpenLayers.Util.getViewportElement();
                                this.element.scrolls = [window.pageXOffset || t.scrollLeft, window.pageYOffset || t.scrollTop]
                            }
                            return this.element.lefttop || (this.element.lefttop = [document.documentElement.clientLeft || 0, document.documentElement.clientTop || 0]), this.element.offsets || (this.element.offsets = OpenLayers.Util.pagePosition(this.element)), new OpenLayers.Pixel(e.clientX + this.element.scrolls[0] - this.element.offsets[0] - this.element.lefttop[0], e.clientY + this.element.scrolls[1] - this.element.offsets[1] - this.element.lefttop[1])
                        },
                        addMsTouchListener: function (e, t, i) {
                            function s(e) {
                                i(OpenLayers.Util.applyDefaults({
                                    stopPropagation: function () {
                                        for (var e = r.length - 1; 0 <= e; --e) r[e].stopPropagation()
                                    },
                                    preventDefault: function () {
                                        for (var e = r.length - 1; 0 <= e; --e) r[e].preventDefault()
                                    },
                                    type: t
                                }, e))
                            }
                            var r = this._msTouches;
                            switch (t) {
                                case "touchstart":
                                    return this.addMsTouchListenerStart(e, t, s);
                                case "touchend":
                                    return this.addMsTouchListenerEnd(e, t, s);
                                case "touchmove":
                                    return this.addMsTouchListenerMove(e, t, s);
                                default:
                                    throw "Unknown touch event type"
                            }
                        },
                        addMsTouchListenerStart: function (e, t, i) {
                            var s = this._msTouches;
                            OpenLayers.Event.observe(e, "MSPointerDown", (function (e) {
                                for (var t = !1, r = 0, n = s.length; r < n; ++r)
                                    if (s[r].pointerId == e.pointerId) {
                                        t = !0;
                                        break
                                    } t || s.push(e), e.touches = s.slice(), i(e)
                            })), OpenLayers.Event.observe(e, "MSPointerUp", (function (e) {
                                for (var t = 0, i = s.length; t < i; ++t)
                                    if (s[t].pointerId == e.pointerId) {
                                        s.splice(t, 1);
                                        break
                                    }
                            }))
                        },
                        addMsTouchListenerMove: function (e, t, i) {
                            var s = this._msTouches;
                            OpenLayers.Event.observe(e, "MSPointerMove", (function (e) {
                                if (!(e.pointerType == e.MSPOINTER_TYPE_MOUSE && 0 == e.buttons || 1 == s.length && s[0].pageX == e.pageX && s[0].pageY == e.pageY)) {
                                    for (var t = 0, r = s.length; t < r; ++t)
                                        if (s[t].pointerId == e.pointerId) {
                                            s[t] = e;
                                            break
                                        } e.touches = s.slice(), i(e)
                                }
                            }))
                        },
                        addMsTouchListenerEnd: function (e, t, i) {
                            var s = this._msTouches;
                            OpenLayers.Event.observe(e, "MSPointerUp", (function (e) {
                                for (var t = 0, r = s.length; t < r; ++t)
                                    if (s[t].pointerId == e.pointerId) {
                                        s.splice(t, 1);
                                        break
                                    } e.touches = s.slice(), i(e)
                            }))
                        },
                        CLASS_NAME: "OpenLayers.Events"
                    }), OpenLayers.Events.buttonclick = OpenLayers.Class({
                        target: null,
                        events: "mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),
                        startRegEx: /^mousedown|touchstart$/,
                        cancelRegEx: /^touchmove$/,
                        completeRegEx: /^mouseup|touchend$/,
                        initialize: function (e) {
                            for (this.target = e, e = this.events.length - 1; 0 <= e; --e) this.target.register(this.events[e], this, this.buttonClick, {
                                extension: !0
                            })
                        },
                        destroy: function () {
                            for (var e = this.events.length - 1; 0 <= e; --e) this.target.unregister(this.events[e], this, this.buttonClick);
                            delete this.target
                        },
                        getPressedButton: function (e) {
                            var t, i = 3;
                            do {
                                if (OpenLayers.Element.hasClass(e, "olButton")) {
                                    t = e;
                                    break
                                }
                                e = e.parentNode
                            } while (0 < --i && e);
                            return t
                        },
                        ignore: function (e) {
                            var t = 3,
                                i = !1;
                            do {
                                if ("a" === e.nodeName.toLowerCase()) {
                                    i = !0;
                                    break
                                }
                                e = e.parentNode
                            } while (0 < --t && e);
                            return i
                        },
                        buttonClick: function (e) {
                            var t = !0,
                                i = OpenLayers.Event.element(e);
                            if (i && (OpenLayers.Event.isLeftClick(e) || !~e.type.indexOf("mouse")))
                                if (i = this.getPressedButton(i)) {
                                    if ("keydown" === e.type) switch (e.keyCode) {
                                        case OpenLayers.Event.KEY_RETURN:
                                        case OpenLayers.Event.KEY_SPACE:
                                            this.target.triggerEvent("buttonclick", {
                                                buttonElement: i
                                            }), OpenLayers.Event.stop(e), t = !1
                                    } else if (this.startEvt) {
                                        if (this.completeRegEx.test(e.type)) {
                                            t = OpenLayers.Util.pagePosition(i);
                                            var s = OpenLayers.Util.getViewportElement(),
                                                r = window.pageYOffset || s.scrollTop;
                                            t[0] -= window.pageXOffset || s.scrollLeft, t[1] -= r, this.target.triggerEvent("buttonclick", {
                                                buttonElement: i,
                                                buttonXY: {
                                                    x: this.startEvt.clientX - t[0],
                                                    y: this.startEvt.clientY - t[1]
                                                }
                                            })
                                        }
                                        this.cancelRegEx.test(e.type) && delete this.startEvt, OpenLayers.Event.stop(e), t = !1
                                    } this.startRegEx.test(e.type) && (this.startEvt = e, OpenLayers.Event.stop(e), t = !1)
                                } else t = !this.ignore(OpenLayers.Event.element(e)), delete this.startEvt;
                            return t
                        }
                    }), OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.vendorPrefix = function () {
                        function e(e, t) {
                            if (void 0 === n[t]) {
                                var s, r = 0,
                                    a = i.length,
                                    o = void 0 !== e.cssText;
                                for (n[t] = null; r < a; r++)
                                    if ((s = i[r]) ? (o || (s = s.toLowerCase()), s = s + t.charAt(0).toUpperCase() + t.slice(1)) : s = t, void 0 !== e[s]) {
                                        n[t] = s;
                                        break
                                    }
                            }
                            return n[t]
                        }

                        function t(t) {
                            return e(s, t)
                        }
                        var i = ["", "O", "ms", "Moz", "Webkit"],
                            s = document.createElement("div").style,
                            r = {},
                            n = {};
                        return {
                            css: function (e) {
                                if (void 0 === r[e]) {
                                    var i = t(i = e.replace(/(-[\s\S])/g, (function (e) {
                                        return e.charAt(1).toUpperCase()
                                    })));
                                    r[e] = function (e) {
                                        return e ? e.replace(/([A-Z])/g, (function (e) {
                                            return "-" + e.toLowerCase()
                                        })).replace(/^ms-/, "-ms-") : null
                                    }(i)
                                }
                                return r[e]
                            },
                            js: e,
                            style: t,
                            cssCache: r,
                            jsCache: n
                        }
                    }(), OpenLayers.Animation = function (e) {
                        var t = OpenLayers.Util.vendorPrefix.js(e, "requestAnimationFrame"),
                            i = !!t,
                            s = function () {
                                var i = e[t] || function (t, i) {
                                    e.setTimeout(t, 16)
                                };
                                return function (t, s) {
                                    i.apply(e, [t, s])
                                }
                            }(),
                            r = 0,
                            n = {};
                        return {
                            isNative: i,
                            requestFrame: s,
                            start: function (e, t, i) {
                                t = 0 < t ? t : Number.POSITIVE_INFINITY;
                                var a = ++r,
                                    o = +new Date;
                                return n[a] = function () {
                                    n[a] && +new Date - o <= t ? (e(), n[a] && s(n[a], i)) : delete n[a]
                                }, s(n[a], i), a
                            },
                            stop: function (e) {
                                delete n[e]
                            }
                        }
                    }(window), OpenLayers.Tween = OpenLayers.Class({
                        easing: null,
                        begin: null,
                        finish: null,
                        duration: null,
                        callbacks: null,
                        time: null,
                        minFrameRate: null,
                        startTime: null,
                        animationId: null,
                        playing: !1,
                        initialize: function (e) {
                            this.easing = e || OpenLayers.Easing.Expo.easeOut
                        },
                        start: function (e, t, i, s) {
                            this.playing = !0, this.begin = e, this.finish = t, this.duration = i, this.callbacks = s.callbacks, this.minFrameRate = s.minFrameRate || 30, this.time = 0, this.startTime = (new Date).getTime(), OpenLayers.Animation.stop(this.animationId), this.animationId = null, this.callbacks && this.callbacks.start && this.callbacks.start.call(this, this.begin), this.animationId = OpenLayers.Animation.start(OpenLayers.Function.bind(this.play, this))
                        },
                        stop: function () {
                            this.playing && (this.callbacks && this.callbacks.done && this.callbacks.done.call(this, this.finish), OpenLayers.Animation.stop(this.animationId), this.animationId = null, this.playing = !1)
                        },
                        play: function () {
                            var e, t = {};
                            for (e in this.begin) {
                                var i = this.begin[e],
                                    s = this.finish[e];
                                if (null == i || null == s || isNaN(i) || isNaN(s)) throw new TypeError("invalid value for Tween");
                                t[e] = this.easing.apply(this, [this.time, i, s - i, this.duration])
                            }
                            this.time++, this.callbacks && this.callbacks.eachStep && ((new Date).getTime() - this.startTime) / this.time <= 1e3 / this.minFrameRate && this.callbacks.eachStep.call(this, t), this.time > this.duration && this.stop()
                        },
                        CLASS_NAME: "OpenLayers.Tween"
                    }), OpenLayers.Easing = {
                        CLASS_NAME: "OpenLayers.Easing"
                    }, OpenLayers.Easing.Linear = {
                        easeIn: function (e, t, i, s) {
                            return i * e / s + t
                        },
                        easeOut: function (e, t, i, s) {
                            return i * e / s + t
                        },
                        easeInOut: function (e, t, i, s) {
                            return i * e / s + t
                        },
                        CLASS_NAME: "OpenLayers.Easing.Linear"
                    }, OpenLayers.Easing.Expo = {
                        easeIn: function (e, t, i, s) {
                            return 0 == e ? t : i * Math.pow(2, 10 * (e / s - 1)) + t
                        },
                        easeOut: function (e, t, i, s) {
                            return e == s ? t + i : i * (1 - Math.pow(2, -10 * e / s)) + t
                        },
                        easeInOut: function (e, t, i, s) {
                            return 0 == e ? t : e == s ? t + i : 1 > (e /= s / 2) ? i / 2 * Math.pow(2, 10 * (e - 1)) + t : i / 2 * (2 - Math.pow(2, -10 * --e)) + t
                        },
                        CLASS_NAME: "OpenLayers.Easing.Expo"
                    }, OpenLayers.Easing.Quad = {
                        easeIn: function (e, t, i, s) {
                            return i * (e /= s) * e + t
                        },
                        easeOut: function (e, t, i, s) {
                            return -i * (e /= s) * (e - 2) + t
                        },
                        easeInOut: function (e, t, i, s) {
                            return 1 > (e /= s / 2) ? i / 2 * e * e + t : -i / 2 * (--e * (e - 2) - 1) + t
                        },
                        CLASS_NAME: "OpenLayers.Easing.Quad"
                    }, OpenLayers.Projection = OpenLayers.Class({
                        proj: null,
                        projCode: null,
                        titleRegEx: /\+title=[^\+]*/,
                        initialize: function (e, t) {
                            OpenLayers.Util.extend(this, t), this.projCode = e, "object" == typeof Proj4js && (this.proj = new Proj4js.Proj(e))
                        },
                        getCode: function () {
                            return this.proj ? this.proj.srsCode : this.projCode
                        },
                        getUnits: function () {
                            return this.proj ? this.proj.units : null
                        },
                        toString: function () {
                            return this.getCode()
                        },
                        equals: function (e) {
                            var t = !1;
                            return e && (e instanceof OpenLayers.Projection || (e = new OpenLayers.Projection(e)), "object" == typeof Proj4js && this.proj.defData && e.proj.defData ? t = this.proj.defData.replace(this.titleRegEx, "") == e.proj.defData.replace(this.titleRegEx, "") : e.getCode && (t = (t = this.getCode()) == (e = e.getCode()) || !!OpenLayers.Projection.transforms[t] && OpenLayers.Projection.transforms[t][e] === OpenLayers.Projection.nullTransform)), t
                        },
                        destroy: function () {
                            delete this.proj, delete this.projCode
                        },
                        CLASS_NAME: "OpenLayers.Projection"
                    }), OpenLayers.Projection.transforms = {}, OpenLayers.Projection.defaults = {
                        "EPSG:4326": {
                            units: "degrees",
                            maxExtent: [-180, -90, 180, 90],
                            yx: !0
                        },
                        "CRS:84": {
                            units: "degrees",
                            maxExtent: [-180, -90, 180, 90]
                        },
                        "EPSG:900913": {
                            units: "m",
                            maxExtent: [-20037508.34, -20037508.34, 20037508.34, 20037508.34]
                        }
                    }, OpenLayers.Projection.addTransform = function (e, t, i) {
                        if (i === OpenLayers.Projection.nullTransform) {
                            var s = OpenLayers.Projection.defaults[e];
                            s && !OpenLayers.Projection.defaults[t] && (OpenLayers.Projection.defaults[t] = s)
                        }
                        OpenLayers.Projection.transforms[e] || (OpenLayers.Projection.transforms[e] = {}), OpenLayers.Projection.transforms[e][t] = i
                    }, OpenLayers.Projection.transform = function (e, t, i) {
                        if (t && i)
                            if (t instanceof OpenLayers.Projection || (t = new OpenLayers.Projection(t)), i instanceof OpenLayers.Projection || (i = new OpenLayers.Projection(i)), t.proj && i.proj) e = Proj4js.transform(t.proj, i.proj, e);
                            else {
                                t = t.getCode(), i = i.getCode();
                                var s = OpenLayers.Projection.transforms;
                                s[t] && s[t][i] && s[t][i](e)
                            } return e
                    }, OpenLayers.Projection.nullTransform = function (e) {
                        return e
                    },
                    function () {
                        function e(e) {
                            return e.x = 180 * e.x / r, e.y = 180 / Math.PI * (2 * Math.atan(Math.exp(e.y / r * Math.PI)) - Math.PI / 2), e
                        }

                        function t(e) {
                            e.x = e.x * r / 180;
                            var t = Math.log(Math.tan((90 + e.y) * Math.PI / 360)) / Math.PI * r;
                            return e.y = Math.max(-20037508.34, Math.min(t, 20037508.34)), e
                        }

                        function i(i, s) {
                            var r, n, a, o, l, h = OpenLayers.Projection.addTransform,
                                p = OpenLayers.Projection.nullTransform;
                            for (r = 0, n = s.length; r < n; ++r)
                                for (h(i, a = s[r], t), h(a, i, e), l = r + 1; l < n; ++l) h(a, o = s[l], p), h(o, a, p)
                        }
                        var s, r = 20037508.34,
                            n = ["EPSG:900913", "EPSG:3857", "EPSG:102113", "EPSG:102100"],
                            a = ["CRS:84", "urn:ogc:def:crs:EPSG:6.6:4326", "EPSG:4326"];
                        for (s = n.length - 1; 0 <= s; --s) i(n[s], a);
                        for (s = a.length - 1; 0 <= s; --s) i(a[s], n)
                    }(), OpenLayers.Map = OpenLayers.Class({
                        Z_INDEX_BASE: {
                            BaseLayer: 100,
                            Overlay: 325,
                            Feature: 725,
                            Popup: 750,
                            Control: 1e3
                        },
                        id: null,
                        fractionalZoom: !1,
                        events: null,
                        allOverlays: !1,
                        div: null,
                        dragging: !1,
                        size: null,
                        viewPortDiv: null,
                        layerContainerOrigin: null,
                        layerContainerDiv: null,
                        layers: null,
                        controls: null,
                        popups: null,
                        baseLayer: null,
                        center: null,
                        resolution: null,
                        zoom: 0,
                        panRatio: 1.5,
                        options: null,
                        tileSize: null,
                        projection: "EPSG:4326",
                        units: null,
                        resolutions: null,
                        maxResolution: null,
                        minResolution: null,
                        maxScale: null,
                        minScale: null,
                        maxExtent: null,
                        minExtent: null,
                        restrictedExtent: null,
                        numZoomLevels: 16,
                        theme: null,
                        displayProjection: null,
                        fallThrough: !1,
                        autoUpdateSize: !0,
                        eventListeners: null,
                        panTween: null,
                        panMethod: OpenLayers.Easing.Expo.easeOut,
                        panDuration: 50,
                        zoomTween: null,
                        zoomMethod: OpenLayers.Easing.Quad.easeOut,
                        zoomDuration: 20,
                        paddingForPopups: null,
                        layerContainerOriginPx: null,
                        minPx: null,
                        maxPx: null,
                        initialize: function (e, t) {
                            1 === arguments.length && "object" == typeof e && (e = (t = e) && t.div), this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH, OpenLayers.Map.TILE_HEIGHT), this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15), this.theme = OpenLayers._getScriptLocation() + "theme/default/style.css", this.options = OpenLayers.Util.extend({}, t), OpenLayers.Util.extend(this, t), OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection ? this.projection.projCode : this.projection]), !this.maxExtent || this.maxExtent instanceof OpenLayers.Bounds || (this.maxExtent = new OpenLayers.Bounds(this.maxExtent)), !this.minExtent || this.minExtent instanceof OpenLayers.Bounds || (this.minExtent = new OpenLayers.Bounds(this.minExtent)), !this.restrictedExtent || this.restrictedExtent instanceof OpenLayers.Bounds || (this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent)), !this.center || this.center instanceof OpenLayers.LonLat || (this.center = new OpenLayers.LonLat(this.center)), this.layers = [], this.id = OpenLayers.Util.createUniqueID("OpenLayers.Map_"), this.div = OpenLayers.Util.getElement(e), this.div || (this.div = document.createElement("div"), this.div.style.height = "1px", this.div.style.width = "1px"), OpenLayers.Element.addClass(this.div, "olMap");
                            var i = this.id + "_OpenLayers_ViewPort";
                            if (this.viewPortDiv = OpenLayers.Util.createDiv(i, null, null, null, "relative", null, "hidden"), this.viewPortDiv.style.width = "100%", this.viewPortDiv.style.height = "100%", this.viewPortDiv.className = "olMapViewport", this.div.appendChild(this.viewPortDiv), this.events = new OpenLayers.Events(this, this.viewPortDiv, null, this.fallThrough, {
                                    includeXY: !0
                                }), OpenLayers.TileManager && null !== this.tileManager && (this.tileManager instanceof OpenLayers.TileManager || (this.tileManager = new OpenLayers.TileManager(this.tileManager)), this.tileManager.addMap(this)), i = this.id + "_OpenLayers_Container", this.layerContainerDiv = OpenLayers.Util.createDiv(i), this.layerContainerDiv.style.zIndex = this.Z_INDEX_BASE.Popup - 1, this.layerContainerOriginPx = {
                                    x: 0,
                                    y: 0
                                }, this.applyTransform(), this.viewPortDiv.appendChild(this.layerContainerDiv), this.updateSize(), this.eventListeners instanceof Object && this.events.on(this.eventListeners), !0 === this.autoUpdateSize && (this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, this), OpenLayers.Event.observe(window, "resize", this.updateSizeDestroy)), this.theme) {
                                i = !0;
                                for (var s = document.getElementsByTagName("link"), r = 0, n = s.length; r < n; ++r)
                                    if (OpenLayers.Util.isEquivalentUrl(s.item(r).href, this.theme)) {
                                        i = !1;
                                        break
                                    } i && ((i = document.createElement("link")).setAttribute("rel", "stylesheet"), i.setAttribute("type", "text/css"), i.setAttribute("href", this.theme), document.getElementsByTagName("head")[0].appendChild(i))
                            }
                            for (null == this.controls && (this.controls = [], null != OpenLayers.Control && (OpenLayers.Control.Navigation ? this.controls.push(new OpenLayers.Control.Navigation) : OpenLayers.Control.TouchNavigation && this.controls.push(new OpenLayers.Control.TouchNavigation), OpenLayers.Control.Zoom ? this.controls.push(new OpenLayers.Control.Zoom) : OpenLayers.Control.PanZoom && this.controls.push(new OpenLayers.Control.PanZoom), OpenLayers.Control.ArgParser && this.controls.push(new OpenLayers.Control.ArgParser), OpenLayers.Control.Attribution && this.controls.push(new OpenLayers.Control.Attribution))), r = 0, n = this.controls.length; r < n; r++) this.addControlToMap(this.controls[r]);
                            this.popups = [], this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this), OpenLayers.Event.observe(window, "unload", this.unloadDestroy), t && t.layers && (delete this.center, delete this.zoom, this.addLayers(t.layers), t.center && !this.getCenter() && this.setCenter(t.center, t.zoom)), this.panMethod && (this.panTween = new OpenLayers.Tween(this.panMethod)), this.zoomMethod && this.applyTransform.transform && (this.zoomTween = new OpenLayers.Tween(this.zoomMethod))
                        },
                        getViewport: function () {
                            return this.viewPortDiv
                        },
                        render: function (e) {
                            this.div = OpenLayers.Util.getElement(e), OpenLayers.Element.addClass(this.div, "olMap"), this.viewPortDiv.parentNode.removeChild(this.viewPortDiv), this.div.appendChild(this.viewPortDiv), this.updateSize()
                        },
                        unloadDestroy: null,
                        updateSizeDestroy: null,
                        destroy: function () {
                            if (!this.unloadDestroy) return !1;
                            if (this.panTween && (this.panTween.stop(), this.panTween = null), this.zoomTween && (this.zoomTween.stop(), this.zoomTween = null), OpenLayers.Event.stopObserving(window, "unload", this.unloadDestroy), this.unloadDestroy = null, this.updateSizeDestroy && OpenLayers.Event.stopObserving(window, "resize", this.updateSizeDestroy), this.paddingForPopups = null, null != this.controls) {
                                for (var e = this.controls.length - 1; 0 <= e; --e) this.controls[e].destroy();
                                this.controls = null
                            }
                            if (null != this.layers) {
                                for (e = this.layers.length - 1; 0 <= e; --e) this.layers[e].destroy(!1);
                                this.layers = null
                            }
                            this.viewPortDiv && this.viewPortDiv.parentNode && this.viewPortDiv.parentNode.removeChild(this.viewPortDiv), this.viewPortDiv = null, this.tileManager && (this.tileManager.removeMap(this), this.tileManager = null), this.eventListeners && (this.events.un(this.eventListeners), this.eventListeners = null), this.events.destroy(), this.options = this.events = null
                        },
                        setOptions: function (e) {
                            var t = this.minPx && e.restrictedExtent != this.restrictedExtent;
                            OpenLayers.Util.extend(this, e), t && this.moveTo(this.getCachedCenter(), this.zoom, {
                                forceZoomChange: !0
                            })
                        },
                        getTileSize: function () {
                            return this.tileSize
                        },
                        getBy: function (e, t, i) {
                            var s = "function" == typeof i.test;
                            return OpenLayers.Array.filter(this[e], (function (e) {
                                return e[t] == i || s && i.test(e[t])
                            }))
                        },
                        getLayersBy: function (e, t) {
                            return this.getBy("layers", e, t)
                        },
                        getLayersByName: function (e) {
                            return this.getLayersBy("name", e)
                        },
                        getLayersByClass: function (e) {
                            return this.getLayersBy("CLASS_NAME", e)
                        },
                        getControlsBy: function (e, t) {
                            return this.getBy("controls", e, t)
                        },
                        getControlsByClass: function (e) {
                            return this.getControlsBy("CLASS_NAME", e)
                        },
                        getLayer: function (e) {
                            for (var t = null, i = 0, s = this.layers.length; i < s; i++) {
                                var r = this.layers[i];
                                if (r.id == e) {
                                    t = r;
                                    break
                                }
                            }
                            return t
                        },
                        setLayerZIndex: function (e, t) {
                            e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer ? "BaseLayer" : "Overlay"] + 5 * t)
                        },
                        resetLayersZIndex: function () {
                            for (var e = 0, t = this.layers.length; e < t; e++) this.setLayerZIndex(this.layers[e], e)
                        },
                        addLayer: function (e) {
                            for (var t = 0, i = this.layers.length; t < i; t++)
                                if (this.layers[t] == e) return !1;
                            return !1 !== this.events.triggerEvent("preaddlayer", {
                                layer: e
                            }) && (this.allOverlays && (e.isBaseLayer = !1), e.div.className = "olLayerDiv", e.div.style.overflow = "", this.setLayerZIndex(e, this.layers.length), e.isFixed ? this.viewPortDiv.appendChild(e.div) : this.layerContainerDiv.appendChild(e.div), this.layers.push(e), e.setMap(this), e.isBaseLayer || this.allOverlays && !this.baseLayer ? null == this.baseLayer ? this.setBaseLayer(e) : e.setVisibility(!1) : e.redraw(), this.events.triggerEvent("addlayer", {
                                layer: e
                            }), e.events.triggerEvent("added", {
                                map: this,
                                layer: e
                            }), e.afterAdd(), !0)
                        },
                        addLayers: function (e) {
                            for (var t = 0, i = e.length; t < i; t++) this.addLayer(e[t])
                        },
                        removeLayer: function (e, t) {
                            if (!1 !== this.events.triggerEvent("preremovelayer", {
                                    layer: e
                                })) {
                                if (null == t && (t = !0), e.isFixed ? this.viewPortDiv.removeChild(e.div) : this.layerContainerDiv.removeChild(e.div), OpenLayers.Util.removeItem(this.layers, e), e.removeMap(this), e.map = null, this.baseLayer == e && (this.baseLayer = null, t))
                                    for (var i = 0, s = this.layers.length; i < s; i++) {
                                        var r = this.layers[i];
                                        if (r.isBaseLayer || this.allOverlays) {
                                            this.setBaseLayer(r);
                                            break
                                        }
                                    }
                                this.resetLayersZIndex(), this.events.triggerEvent("removelayer", {
                                    layer: e
                                }), e.events.triggerEvent("removed", {
                                    map: this,
                                    layer: e
                                })
                            }
                        },
                        getNumLayers: function () {
                            return this.layers.length
                        },
                        getLayerIndex: function (e) {
                            return OpenLayers.Util.indexOf(this.layers, e)
                        },
                        setLayerIndex: function (e, t) {
                            var i = this.getLayerIndex(e);
                            if (0 > t ? t = 0 : t > this.layers.length && (t = this.layers.length), i != t) {
                                this.layers.splice(i, 1), this.layers.splice(t, 0, e);
                                i = 0;
                                for (var s = this.layers.length; i < s; i++) this.setLayerZIndex(this.layers[i], i);
                                this.events.triggerEvent("changelayer", {
                                    layer: e,
                                    property: "order"
                                }), this.allOverlays && (0 === t ? this.setBaseLayer(e) : this.baseLayer !== this.layers[0] && this.setBaseLayer(this.layers[0]))
                            }
                        },
                        raiseLayer: function (e, t) {
                            var i = this.getLayerIndex(e) + t;
                            this.setLayerIndex(e, i)
                        },
                        setBaseLayer: function (e) {
                            if (e != this.baseLayer && -1 != OpenLayers.Util.indexOf(this.layers, e)) {
                                var t = this.getCachedCenter(),
                                    i = OpenLayers.Util.getResolutionFromScale(this.getScale(), e.units);
                                null == this.baseLayer || this.allOverlays || this.baseLayer.setVisibility(!1), this.baseLayer = e, this.allOverlays && !this.baseLayer.visibility || (this.baseLayer.setVisibility(!0), !1 === this.baseLayer.inRange && this.baseLayer.redraw()), null != t && (e = this.getZoomForResolution(i || this.resolution, !0), this.setCenter(t, e, !1, !0)), this.events.triggerEvent("changebaselayer", {
                                    layer: this.baseLayer
                                })
                            }
                        },
                        addControl: function (e, t) {
                            this.controls.push(e), this.addControlToMap(e, t)
                        },
                        addControls: function (e, t) {
                            for (var i = 1 === arguments.length ? [] : t, s = 0, r = e.length; s < r; s++) this.addControl(e[s], i[s] ? i[s] : null)
                        },
                        addControlToMap: function (e, t) {
                            e.outsideViewport = null != e.div, this.displayProjection && !e.displayProjection && (e.displayProjection = this.displayProjection), e.setMap(this);
                            var i = e.draw(t);
                            i && !e.outsideViewport && (i.style.zIndex = this.Z_INDEX_BASE.Control + this.controls.length, this.viewPortDiv.appendChild(i)), e.autoActivate && e.activate()
                        },
                        getControl: function (e) {
                            for (var t = null, i = 0, s = this.controls.length; i < s; i++) {
                                var r = this.controls[i];
                                if (r.id == e) {
                                    t = r;
                                    break
                                }
                            }
                            return t
                        },
                        removeControl: function (e) {
                            e && e == this.getControl(e.id) && (e.div && e.div.parentNode == this.viewPortDiv && this.viewPortDiv.removeChild(e.div), OpenLayers.Util.removeItem(this.controls, e))
                        },
                        addPopup: function (e, t) {
                            if (t)
                                for (var i = this.popups.length - 1; 0 <= i; --i) this.removePopup(this.popups[i]);
                            e.map = this, this.popups.push(e), (i = e.draw()) && (i.style.zIndex = this.Z_INDEX_BASE.Popup + this.popups.length, this.layerContainerDiv.appendChild(i))
                        },
                        removePopup: function (e) {
                            if (OpenLayers.Util.removeItem(this.popups, e), e.div) try {
                                this.layerContainerDiv.removeChild(e.div)
                            } catch (e) {}
                            e.map = null
                        },
                        getSize: function () {
                            var e = null;
                            return null != this.size && (e = this.size.clone()), e
                        },
                        updateSize: function () {
                            var e = this.getCurrentSize();
                            if (e && !isNaN(e.h) && !isNaN(e.w)) {
                                this.events.clearMouseCache();
                                var t = this.getSize();
                                if (null == t && (this.size = t = e), !e.equals(t)) {
                                    for (this.size = e, e = 0, t = this.layers.length; e < t; e++) this.layers[e].onMapResize();
                                    e = this.getCachedCenter(), null != this.baseLayer && null != e && (t = this.getZoom(), this.zoom = null, this.setCenter(e, t))
                                }
                            }
                            this.events.triggerEvent("updatesize")
                        },
                        getCurrentSize: function () {
                            var e = new OpenLayers.Size(this.div.clientWidth, this.div.clientHeight);
                            return (0 == e.w && 0 == e.h || isNaN(e.w) && isNaN(e.h)) && (e.w = this.div.offsetWidth, e.h = this.div.offsetHeight), (0 == e.w && 0 == e.h || isNaN(e.w) && isNaN(e.h)) && (e.w = parseInt(this.div.style.width), e.h = parseInt(this.div.style.height)), e
                        },
                        calculateBounds: function (e, t) {
                            var i = null;
                            if (null == e && (e = this.getCachedCenter()), null == t && (t = this.getResolution()), null != e && null != t) {
                                i = this.size.w * t / 2;
                                var s = this.size.h * t / 2;
                                i = new OpenLayers.Bounds(e.lon - i, e.lat - s, e.lon + i, e.lat + s)
                            }
                            return i
                        },
                        getCenter: function () {
                            var e = null,
                                t = this.getCachedCenter();
                            return t && (e = t.clone()), e
                        },
                        getCachedCenter: function () {
                            return !this.center && this.size && (this.center = this.getLonLatFromViewPortPx({
                                x: this.size.w / 2,
                                y: this.size.h / 2
                            })), this.center
                        },
                        getZoom: function () {
                            return this.zoom
                        },
                        pan: function (e, t, i) {
                            if ((i = OpenLayers.Util.applyDefaults(i, {
                                    animate: !0,
                                    dragging: !1
                                })).dragging) 0 == e && 0 == t || this.moveByPx(e, t);
                            else {
                                var s = this.getViewPortPxFromLonLat(this.getCachedCenter());
                                e = s.add(e, t), !this.dragging && e.equals(s) || (s = this.getLonLatFromViewPortPx(e), i.animate ? this.panTo(s) : (this.moveTo(s), this.dragging && (this.dragging = !1, this.events.triggerEvent("moveend"))))
                            }
                        },
                        panTo: function (e) {
                            if (this.panTween && this.getExtent().scale(this.panRatio).containsLonLat(e)) {
                                var t = this.getCachedCenter();
                                if (!e.equals(t)) {
                                    t = this.getPixelFromLonLat(t);
                                    var i = this.getPixelFromLonLat(e),
                                        s = 0,
                                        r = 0;
                                    this.panTween.start({
                                        x: 0,
                                        y: 0
                                    }, {
                                        x: i.x - t.x,
                                        y: i.y - t.y
                                    }, this.panDuration, {
                                        callbacks: {
                                            eachStep: OpenLayers.Function.bind((function (e) {
                                                this.moveByPx(e.x - s, e.y - r), s = Math.round(e.x), r = Math.round(e.y)
                                            }), this),
                                            done: OpenLayers.Function.bind((function (t) {
                                                this.moveTo(e), this.dragging = !1, this.events.triggerEvent("moveend")
                                            }), this)
                                        }
                                    })
                                }
                            } else this.setCenter(e)
                        },
                        setCenter: function (e, t, i, s) {
                            this.panTween && this.panTween.stop(), this.zoomTween && this.zoomTween.stop(), this.moveTo(e, t, {
                                dragging: i,
                                forceZoomChange: s
                            })
                        },
                        moveByPx: function (e, t) {
                            var i = this.size.w / 2,
                                s = this.size.h / 2,
                                r = i + e,
                                n = s + t,
                                a = this.baseLayer.wrapDateLine,
                                o = 0,
                                l = 0;
                            if (this.restrictedExtent && (o = i, l = s, a = !1), e = a || r <= this.maxPx.x - o && r >= this.minPx.x + o ? Math.round(e) : 0, t = n <= this.maxPx.y - l && n >= this.minPx.y + l ? Math.round(t) : 0, e || t) {
                                for (this.dragging || (this.dragging = !0, this.events.triggerEvent("movestart")), this.center = null, e && (this.layerContainerOriginPx.x -= e, this.minPx.x -= e, this.maxPx.x -= e), t && (this.layerContainerOriginPx.y -= t, this.minPx.y -= t, this.maxPx.y -= t), this.applyTransform(), s = 0, r = this.layers.length; s < r; ++s)(i = this.layers[s]).visibility && (i === this.baseLayer || i.inRange) && (i.moveByPx(e, t), i.events.triggerEvent("move"));
                                this.events.triggerEvent("move")
                            }
                        },
                        adjustZoom: function (e) {
                            if (this.baseLayer && this.baseLayer.wrapDateLine) {
                                var t = this.baseLayer.resolutions,
                                    i = this.getMaxExtent().getWidth() / this.size.w;
                                if (this.getResolutionForZoom(e) > i)
                                    if (this.fractionalZoom) e = this.getZoomForResolution(i);
                                    else
                                        for (var s = 0 | e, r = t.length; s < r; ++s)
                                            if (t[s] <= i) {
                                                e = s;
                                                break
                                            }
                            }
                            return e
                        },
                        getMinZoom: function () {
                            return this.adjustZoom(0)
                        },
                        moveTo: function (e, t, i) {
                            null == e || e instanceof OpenLayers.LonLat || (e = new OpenLayers.LonLat(e)), i || (i = {}), null != t && (t = parseFloat(t), this.fractionalZoom || (t = Math.round(t)));
                            var s = t;
                            (t = this.adjustZoom(t)) !== s && (e = this.getCenter());
                            s = i.dragging || this.dragging;
                            var r = i.forceZoomChange;
                            if (this.getCachedCenter() || this.isValidLonLat(e) || (e = this.maxExtent.getCenterLonLat(), this.center = e.clone()), null != this.restrictedExtent) {
                                null == e && (e = this.center), null == t && (t = this.getZoom());
                                var n = this.getResolutionForZoom(t);
                                n = this.calculateBounds(e, n);
                                if (!this.restrictedExtent.containsBounds(n)) {
                                    var a = this.restrictedExtent.getCenterLonLat();
                                    n.getWidth() > this.restrictedExtent.getWidth() ? e = new OpenLayers.LonLat(a.lon, e.lat) : n.left < this.restrictedExtent.left ? e = e.add(this.restrictedExtent.left - n.left, 0) : n.right > this.restrictedExtent.right && (e = e.add(this.restrictedExtent.right - n.right, 0)), n.getHeight() > this.restrictedExtent.getHeight() ? e = new OpenLayers.LonLat(e.lon, a.lat) : n.bottom < this.restrictedExtent.bottom ? e = e.add(0, this.restrictedExtent.bottom - n.bottom) : n.top > this.restrictedExtent.top && (e = e.add(0, this.restrictedExtent.top - n.top))
                                }
                            }
                            if (r = r || this.isValidZoomLevel(t) && t != this.getZoom(), n = this.isValidLonLat(e) && !e.equals(this.center), r || n || s) {
                                if (s || this.events.triggerEvent("movestart", {
                                        zoomChanged: r
                                    }), n && (!r && this.center && this.centerLayerContainer(e), this.center = e.clone()), e = r ? this.getResolutionForZoom(t) : this.getResolution(), r || null == this.layerContainerOrigin) {
                                    this.layerContainerOrigin = this.getCachedCenter(), this.layerContainerOriginPx.x = 0, this.layerContainerOriginPx.y = 0, this.applyTransform();
                                    var o = (n = this.getMaxExtent({
                                            restricted: !0
                                        })).getCenterLonLat(),
                                        l = (a = this.center.lon - o.lon, o = o.lat - this.center.lat, Math.round(n.getWidth() / e)),
                                        h = Math.round(n.getHeight() / e);
                                    this.minPx = {
                                        x: (this.size.w - l) / 2 - a / e,
                                        y: (this.size.h - h) / 2 - o / e
                                    }, this.maxPx = {
                                        x: this.minPx.x + Math.round(n.getWidth() / e),
                                        y: this.minPx.y + Math.round(n.getHeight() / e)
                                    }
                                }
                                for (r && (this.zoom = t, this.resolution = e), e = this.getExtent(), this.baseLayer.visibility && (this.baseLayer.moveTo(e, r, i.dragging), i.dragging || this.baseLayer.events.triggerEvent("moveend", {
                                        zoomChanged: r
                                    })), e = this.baseLayer.getExtent(), t = this.layers.length - 1; 0 <= t; --t)(n = this.layers[t]) === this.baseLayer || n.isBaseLayer || (a = n.calculateInRange(), n.inRange != a && ((n.inRange = a) || n.display(!1), this.events.triggerEvent("changelayer", {
                                    layer: n,
                                    property: "visibility"
                                })), a && n.visibility && (n.moveTo(e, r, i.dragging), i.dragging || n.events.triggerEvent("moveend", {
                                    zoomChanged: r
                                })));
                                if (this.events.triggerEvent("move"), s || this.events.triggerEvent("moveend"), r) {
                                    for (t = 0, i = this.popups.length; t < i; t++) this.popups[t].updatePosition();
                                    this.events.triggerEvent("zoomend")
                                }
                            }
                        },
                        centerLayerContainer: function (e) {
                            var t = this.getViewPortPxFromLonLat(this.layerContainerOrigin),
                                i = this.getViewPortPxFromLonLat(e);
                            if (null != t && null != i) {
                                var s = this.layerContainerOriginPx.x;
                                e = this.layerContainerOriginPx.y;
                                var r = Math.round(t.x - i.x);
                                t = Math.round(t.y - i.y);
                                this.applyTransform(this.layerContainerOriginPx.x = r, this.layerContainerOriginPx.y = t), s -= r, e -= t, this.minPx.x -= s, this.maxPx.x -= s, this.minPx.y -= e, this.maxPx.y -= e
                            }
                        },
                        isValidZoomLevel: function (e) {
                            return null != e && 0 <= e && e < this.getNumZoomLevels()
                        },
                        isValidLonLat: function (e) {
                            var t = !1;
                            return null != e && (t = (t = this.getMaxExtent()).containsLonLat(e, {
                                worldBounds: this.baseLayer.wrapDateLine && t
                            })), t
                        },
                        getProjection: function () {
                            var e = this.getProjectionObject();
                            return e ? e.getCode() : null
                        },
                        getProjectionObject: function () {
                            var e = null;
                            return null != this.baseLayer && (e = this.baseLayer.projection), e
                        },
                        getMaxResolution: function () {
                            var e = null;
                            return null != this.baseLayer && (e = this.baseLayer.maxResolution), e
                        },
                        getMaxExtent: function (e) {
                            var t = null;
                            return e && e.restricted && this.restrictedExtent ? t = this.restrictedExtent : null != this.baseLayer && (t = this.baseLayer.maxExtent), t
                        },
                        getNumZoomLevels: function () {
                            var e = null;
                            return null != this.baseLayer && (e = this.baseLayer.numZoomLevels), e
                        },
                        getExtent: function () {
                            var e = null;
                            return null != this.baseLayer && (e = this.baseLayer.getExtent()), e
                        },
                        getResolution: function () {
                            var e = null;
                            return null != this.baseLayer ? e = this.baseLayer.getResolution() : !0 === this.allOverlays && 0 < this.layers.length && (e = this.layers[0].getResolution()), e
                        },
                        getUnits: function () {
                            var e = null;
                            return null != this.baseLayer && (e = this.baseLayer.units), e
                        },
                        getScale: function () {
                            var e = null;
                            return null != this.baseLayer && (e = this.getResolution(), e = OpenLayers.Util.getScaleFromResolution(e, this.baseLayer.units)), e
                        },
                        getZoomForExtent: function (e, t) {
                            var i = null;
                            return null != this.baseLayer && (i = this.baseLayer.getZoomForExtent(e, t)), i
                        },
                        getResolutionForZoom: function (e) {
                            var t = null;
                            return this.baseLayer && (t = this.baseLayer.getResolutionForZoom(e)), t
                        },
                        getZoomForResolution: function (e, t) {
                            var i = null;
                            return null != this.baseLayer && (i = this.baseLayer.getZoomForResolution(e, t)), i
                        },
                        zoomTo: function (e, t) {
                            var i = this;
                            if (i.isValidZoomLevel(e))
                                if (i.baseLayer.wrapDateLine && (e = i.adjustZoom(e)), i.zoomTween) {
                                    var s = i.getResolution(),
                                        r = i.getResolutionForZoom(e),
                                        n = {
                                            scale: 1
                                        };
                                    s = {
                                        scale: s / r
                                    };
                                    i.zoomTween.playing && i.zoomTween.duration < 3 * i.zoomDuration ? i.zoomTween.finish = {
                                        scale: i.zoomTween.finish.scale * s.scale
                                    } : (t || (r = i.getSize(), t = {
                                        x: r.w / 2,
                                        y: r.h / 2
                                    }), i.zoomTween.start(n, s, i.zoomDuration, {
                                        minFrameRate: 50,
                                        callbacks: {
                                            eachStep: function (e) {
                                                var s = i.layerContainerOriginPx;
                                                e = e.scale, i.applyTransform(s.x + ((e - 1) * (s.x - t.x) | 0), s.y + ((e - 1) * (s.y - t.y) | 0), e)
                                            },
                                            done: function (e) {
                                                i.applyTransform(), e = i.getResolution() / e.scale;
                                                var s = i.getZoomForResolution(e, !0);
                                                i.moveTo(i.getZoomTargetCenter(t, e), s, !0)
                                            }
                                        }
                                    }))
                                } else n = t ? i.getZoomTargetCenter(t, i.getResolutionForZoom(e)) : null, i.setCenter(n, e)
                        },
                        zoomIn: function () {
                            this.zoomTo(this.getZoom() + 1)
                        },
                        zoomOut: function () {
                            this.zoomTo(this.getZoom() - 1)
                        },
                        zoomToExtent: function (e, t) {
                            e instanceof OpenLayers.Bounds || (e = new OpenLayers.Bounds(e));
                            var i = e.getCenterLonLat();
                            if (this.baseLayer.wrapDateLine) {
                                for (i = this.getMaxExtent(), e = e.clone(); e.right < e.left;) e.right += i.getWidth();
                                i = e.getCenterLonLat().wrapDateLine(i)
                            }
                            this.setCenter(i, this.getZoomForExtent(e, t))
                        },
                        zoomToMaxExtent: function (e) {
                            e = this.getMaxExtent({
                                restricted: !e || e.restricted
                            }), this.zoomToExtent(e)
                        },
                        zoomToScale: function (e, t) {
                            var i = OpenLayers.Util.getResolutionFromScale(e, this.baseLayer.units),
                                s = this.size.w * i / 2,
                                r = (i = this.size.h * i / 2, this.getCachedCenter());
                            s = new OpenLayers.Bounds(r.lon - s, r.lat - i, r.lon + s, r.lat + i);
                            this.zoomToExtent(s, t)
                        },
                        getLonLatFromViewPortPx: function (e) {
                            var t = null;
                            return null != this.baseLayer && (t = this.baseLayer.getLonLatFromViewPortPx(e)), t
                        },
                        getViewPortPxFromLonLat: function (e) {
                            var t = null;
                            return null != this.baseLayer && (t = this.baseLayer.getViewPortPxFromLonLat(e)), t
                        },
                        getZoomTargetCenter: function (e, t) {
                            var i = null,
                                s = (r = this.getSize()).w / 2 - e.x,
                                r = e.y - r.h / 2,
                                n = this.getLonLatFromPixel(e);
                            return n && (i = new OpenLayers.LonLat(n.lon + s * t, n.lat + r * t)), i
                        },
                        getLonLatFromPixel: function (e) {
                            return this.getLonLatFromViewPortPx(e)
                        },
                        getPixelFromLonLat: function (e) {
                            return (e = this.getViewPortPxFromLonLat(e)).x = Math.round(e.x), e.y = Math.round(e.y), e
                        },
                        getGeodesicPixelSize: function (e) {
                            var t = e ? this.getLonLatFromPixel(e) : this.getCachedCenter() || new OpenLayers.LonLat(0, 0),
                                i = this.getResolution();
                            e = t.add(-i / 2, 0);
                            var s = t.add(i / 2, 0),
                                r = t.add(0, -i / 2),
                                n = (t = t.add(0, i / 2), i = new OpenLayers.Projection("EPSG:4326"), this.getProjectionObject() || i);
                            return n.equals(i) || (e.transform(n, i), s.transform(n, i), r.transform(n, i), t.transform(n, i)), new OpenLayers.Size(OpenLayers.Util.distVincenty(e, s), OpenLayers.Util.distVincenty(r, t))
                        },
                        getViewPortPxFromLayerPx: function (e) {
                            var t = null;
                            return null != e && (t = e.add(this.layerContainerOriginPx.x, this.layerContainerOriginPx.y)), t
                        },
                        getLayerPxFromViewPortPx: function (e) {
                            var t = null;
                            return null != e && (t = e.add(-this.layerContainerOriginPx.x, -this.layerContainerOriginPx.y), isNaN(t.x) || isNaN(t.y)) && (t = null), t
                        },
                        getLonLatFromLayerPx: function (e) {
                            return e = this.getViewPortPxFromLayerPx(e), this.getLonLatFromViewPortPx(e)
                        },
                        getLayerPxFromLonLat: function (e) {
                            return e = this.getPixelFromLonLat(e), this.getLayerPxFromViewPortPx(e)
                        },
                        applyTransform: function (e, t, i) {
                            i = i || 1;
                            var s = this.layerContainerOriginPx,
                                r = 1 !== i;
                            e = e || s.x, t = t || s.y;
                            var n = this.layerContainerDiv.style,
                                a = this.applyTransform.transform,
                                o = this.applyTransform.template;
                            if (void 0 === a && (a = OpenLayers.Util.vendorPrefix.style("transform"), this.applyTransform.transform = a)) {
                                var l = OpenLayers.Element.getStyle(this.viewPortDiv, OpenLayers.Util.vendorPrefix.css("transform"));
                                l && "none" === l || (o = ["translate3d(", ",0) ", "scale3d(", ",1)"], n[a] = [o[0], "0,0", o[1]].join("")), o && ~n[a].indexOf(o[0]) || (o = ["translate(", ") ", "scale(", ")"]), this.applyTransform.template = o
                            }
                            null === a || "translate3d(" !== o[0] && !0 !== r ? (n.left = e + "px", n.top = t + "px", null !== a && (n[a] = "")) : (!0 === r && "translate(" === o[0] && (e -= s.x, t -= s.y, n.left = s.x + "px", n.top = s.y + "px"), n[a] = [o[0], e, "px,", t, "px", o[1], o[2], i, ",", i, o[3]].join(""))
                        },
                        CLASS_NAME: "OpenLayers.Map"
                    }), OpenLayers.Map.TILE_WIDTH = 256, OpenLayers.Map.TILE_HEIGHT = 256, OpenLayers.Handler = OpenLayers.Class({
                        id: null,
                        control: null,
                        map: null,
                        keyMask: null,
                        active: !1,
                        evt: null,
                        touch: !1,
                        initialize: function (e, t, i) {
                            OpenLayers.Util.extend(this, i), this.control = e, this.callbacks = t, (e = this.map || e.map) && this.setMap(e), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")
                        },
                        setMap: function (e) {
                            this.map = e
                        },
                        checkModifiers: function (e) {
                            return null == this.keyMask || ((e.shiftKey ? OpenLayers.Handler.MOD_SHIFT : 0) | (e.ctrlKey ? OpenLayers.Handler.MOD_CTRL : 0) | (e.altKey ? OpenLayers.Handler.MOD_ALT : 0) | (e.metaKey ? OpenLayers.Handler.MOD_META : 0)) == this.keyMask
                        },
                        activate: function () {
                            if (this.active) return !1;
                            for (var e = OpenLayers.Events.prototype.BROWSER_EVENTS, t = 0, i = e.length; t < i; t++) this[e[t]] && this.register(e[t], this[e[t]]);
                            return this.active = !0
                        },
                        deactivate: function () {
                            if (!this.active) return !1;
                            for (var e = OpenLayers.Events.prototype.BROWSER_EVENTS, t = 0, i = e.length; t < i; t++) this[e[t]] && this.unregister(e[t], this[e[t]]);
                            return this.active = this.touch = !1, !0
                        },
                        startTouch: function () {
                            if (!this.touch) {
                                this.touch = !0;
                                for (var e = "mousedown mouseup mousemove click dblclick mouseout".split(" "), t = 0, i = e.length; t < i; t++) this[e[t]] && this.unregister(e[t], this[e[t]])
                            }
                        },
                        callback: function (e, t) {
                            e && this.callbacks[e] && this.callbacks[e].apply(this.control, t)
                        },
                        register: function (e, t) {
                            this.map.events.registerPriority(e, this, t), this.map.events.registerPriority(e, this, this.setEvent)
                        },
                        unregister: function (e, t) {
                            this.map.events.unregister(e, this, t), this.map.events.unregister(e, this, this.setEvent)
                        },
                        setEvent: function (e) {
                            return this.evt = e, !0
                        },
                        destroy: function () {
                            this.deactivate(), this.control = this.map = null
                        },
                        CLASS_NAME: "OpenLayers.Handler"
                    }), OpenLayers.Handler.MOD_NONE = 0, OpenLayers.Handler.MOD_SHIFT = 1, OpenLayers.Handler.MOD_CTRL = 2, OpenLayers.Handler.MOD_ALT = 4, OpenLayers.Handler.MOD_META = 8, OpenLayers.Handler.Click = OpenLayers.Class(OpenLayers.Handler, {
                        delay: 300,
                        single: !0,
                        double: !1,
                        pixelTolerance: 0,
                        dblclickTolerance: 13,
                        stopSingle: !1,
                        stopDouble: !1,
                        timerId: null,
                        down: null,
                        last: null,
                        first: null,
                        rightclickTimerId: null,
                        touchstart: function (e) {
                            return this.startTouch(), this.down = this.getEventInfo(e), this.last = this.getEventInfo(e), !0
                        },
                        touchmove: function (e) {
                            return this.last = this.getEventInfo(e), !0
                        },
                        touchend: function (e) {
                            return this.down && (e.xy = this.last.xy, e.lastTouches = this.last.touches, this.handleSingle(e), this.down = null), !0
                        },
                        mousedown: function (e) {
                            return this.down = this.getEventInfo(e), this.last = this.getEventInfo(e), !0
                        },
                        mouseup: function (e) {
                            var t = !0;
                            return this.checkModifiers(e) && this.control.handleRightClicks && OpenLayers.Event.isRightClick(e) && (t = this.rightclick(e)), t
                        },
                        rightclick: function (e) {
                            if (this.passesTolerance(e)) {
                                if (null != this.rightclickTimerId) return this.clearTimer(), this.callback("dblrightclick", [e]), !this.stopDouble;
                                e = this.double ? OpenLayers.Util.extend({}, e) : this.callback("rightclick", [e]), e = OpenLayers.Function.bind(this.delayedRightCall, this, e), this.rightclickTimerId = window.setTimeout(e, this.delay)
                            }
                            return !this.stopSingle
                        },
                        delayedRightCall: function (e) {
                            this.rightclickTimerId = null, e && this.callback("rightclick", [e])
                        },
                        click: function (e) {
                            return this.last || (this.last = this.getEventInfo(e)), this.handleSingle(e), !this.stopSingle
                        },
                        dblclick: function (e) {
                            return this.handleDouble(e), !this.stopDouble
                        },
                        handleDouble: function (e) {
                            this.passesDblclickTolerance(e) && (this.double && this.callback("dblclick", [e]), this.clearTimer())
                        },
                        handleSingle: function (e) {
                            this.passesTolerance(e) && (null != this.timerId ? (this.last.touches && 1 === this.last.touches.length && (this.double && OpenLayers.Event.preventDefault(e), this.handleDouble(e)), this.last.touches && 2 === this.last.touches.length || this.clearTimer()) : (this.first = this.getEventInfo(e), e = this.single ? OpenLayers.Util.extend({}, e) : null, this.queuePotentialClick(e)))
                        },
                        queuePotentialClick: function (e) {
                            this.timerId = window.setTimeout(OpenLayers.Function.bind(this.delayedCall, this, e), this.delay)
                        },
                        passesTolerance: function (e) {
                            var t = !0;
                            if (null != this.pixelTolerance && this.down && this.down.xy && (t = this.pixelTolerance >= this.down.xy.distanceTo(e.xy)) && this.touch && this.down.touches && this.last.touches && this.down.touches.length === this.last.touches.length) {
                                e = 0;
                                for (var i = this.down.touches.length; e < i; ++e)
                                    if (this.getTouchDistance(this.down.touches[e], this.last.touches[e]) > this.pixelTolerance) {
                                        t = !1;
                                        break
                                    }
                            }
                            return t
                        },
                        getTouchDistance: function (e, t) {
                            return Math.sqrt(Math.pow(e.clientX - t.clientX, 2) + Math.pow(e.clientY - t.clientY, 2))
                        },
                        passesDblclickTolerance: function (e) {
                            return e = !0, this.down && this.first && (e = this.down.xy.distanceTo(this.first.xy) <= this.dblclickTolerance), e
                        },
                        clearTimer: function () {
                            null != this.timerId && (window.clearTimeout(this.timerId), this.timerId = null), null != this.rightclickTimerId && (window.clearTimeout(this.rightclickTimerId), this.rightclickTimerId = null)
                        },
                        delayedCall: function (e) {
                            this.timerId = null, e && this.callback("click", [e])
                        },
                        getEventInfo: function (e) {
                            var t;
                            if (e.touches) {
                                var i = e.touches.length;
                                t = Array(i);
                                for (var s, r = 0; r < i; r++) s = e.touches[r], t[r] = {
                                    clientX: s.olClientX,
                                    clientY: s.olClientY
                                }
                            }
                            return {
                                xy: e.xy,
                                touches: t
                            }
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.clearTimer(), this.last = this.first = this.down = null, e = !0), e
                        },
                        CLASS_NAME: "OpenLayers.Handler.Click"
                    }), OpenLayers.Handler.Drag = OpenLayers.Class(OpenLayers.Handler, {
                        started: !1,
                        stopDown: !0,
                        dragging: !1,
                        last: null,
                        start: null,
                        lastMoveEvt: null,
                        oldOnselectstart: null,
                        interval: 0,
                        timeoutId: null,
                        documentDrag: !1,
                        documentEvents: null,
                        initialize: function (e, t, i) {
                            if (OpenLayers.Handler.prototype.initialize.apply(this, arguments), !0 === this.documentDrag) {
                                var s = this;
                                this._docMove = function (e) {
                                    s.mousemove({
                                        xy: {
                                            x: e.clientX,
                                            y: e.clientY
                                        },
                                        element: document
                                    })
                                }, this._docUp = function (e) {
                                    s.mouseup({
                                        xy: {
                                            x: e.clientX,
                                            y: e.clientY
                                        }
                                    })
                                }
                            }
                        },
                        dragstart: function (e) {
                            var t = !0;
                            return this.dragging = !1, this.checkModifiers(e) && (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) ? (this.started = !0, this.last = this.start = e.xy, OpenLayers.Element.addClass(this.map.viewPortDiv, "olDragDown"), this.down(e), this.callback("down", [e.xy]), OpenLayers.Event.preventDefault(e), this.oldOnselectstart || (this.oldOnselectstart = document.onselectstart ? document.onselectstart : OpenLayers.Function.True), document.onselectstart = OpenLayers.Function.False, t = !this.stopDown) : (this.started = !1, this.last = this.start = null), t
                        },
                        dragmove: function (e) {
                            return this.lastMoveEvt = e, !this.started || this.timeoutId || e.xy.x == this.last.x && e.xy.y == this.last.y || (!0 === this.documentDrag && this.documentEvents && (e.element === document ? (this.adjustXY(e), this.setEvent(e)) : this.removeDocumentEvents()), 0 < this.interval && (this.timeoutId = setTimeout(OpenLayers.Function.bind(this.removeTimeout, this), this.interval)), this.dragging = !0, this.move(e), this.callback("move", [e.xy]), this.oldOnselectstart || (this.oldOnselectstart = document.onselectstart, document.onselectstart = OpenLayers.Function.False), this.last = e.xy), !0
                        },
                        dragend: function (e) {
                            if (this.started) {
                                !0 === this.documentDrag && this.documentEvents && (this.adjustXY(e), this.removeDocumentEvents());
                                var t = this.start != this.last;
                                this.dragging = this.started = !1, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown"), this.up(e), this.callback("up", [e.xy]), t && this.callback("done", [e.xy]), document.onselectstart = this.oldOnselectstart
                            }
                            return !0
                        },
                        down: function (e) {},
                        move: function (e) {},
                        up: function (e) {},
                        out: function (e) {},
                        mousedown: function (e) {
                            return this.dragstart(e)
                        },
                        touchstart: function (e) {
                            return this.startTouch(), this.dragstart(e)
                        },
                        mousemove: function (e) {
                            return this.dragmove(e)
                        },
                        touchmove: function (e) {
                            return this.dragmove(e)
                        },
                        removeTimeout: function () {
                            this.timeoutId = null, this.dragging && this.mousemove(this.lastMoveEvt)
                        },
                        mouseup: function (e) {
                            return this.dragend(e)
                        },
                        touchend: function (e) {
                            return e.xy = this.last, this.dragend(e)
                        },
                        mouseout: function (e) {
                            if (this.started && OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv))
                                if (!0 === this.documentDrag) this.addDocumentEvents();
                                else {
                                    var t = this.start != this.last;
                                    this.dragging = this.started = !1, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown"), this.out(e), this.callback("out", []), t && this.callback("done", [e.xy]), document.onselectstart && (document.onselectstart = this.oldOnselectstart)
                                } return !0
                        },
                        click: function (e) {
                            return this.start == this.last
                        },
                        activate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.dragging = !1, e = !0), e
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.dragging = this.started = !1, this.last = this.start = null, e = !0, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown")), e
                        },
                        adjustXY: function (e) {
                            var t = OpenLayers.Util.pagePosition(this.map.viewPortDiv);
                            e.xy.x -= t[0], e.xy.y -= t[1]
                        },
                        addDocumentEvents: function () {
                            OpenLayers.Element.addClass(document.body, "olDragDown"), this.documentEvents = !0, OpenLayers.Event.observe(document, "mousemove", this._docMove), OpenLayers.Event.observe(document, "mouseup", this._docUp)
                        },
                        removeDocumentEvents: function () {
                            OpenLayers.Element.removeClass(document.body, "olDragDown"), this.documentEvents = !1, OpenLayers.Event.stopObserving(document, "mousemove", this._docMove), OpenLayers.Event.stopObserving(document, "mouseup", this._docUp)
                        },
                        CLASS_NAME: "OpenLayers.Handler.Drag"
                    }), OpenLayers.Control.OverviewMap = OpenLayers.Class(OpenLayers.Control, {
                        element: null,
                        ovmap: null,
                        size: {
                            w: 180,
                            h: 90
                        },
                        layers: null,
                        minRectSize: 15,
                        minRectDisplayClass: "RectReplacement",
                        minRatio: 8,
                        maxRatio: 32,
                        mapOptions: null,
                        autoPan: !1,
                        handlers: null,
                        resolutionFactor: 1,
                        maximized: !1,
                        maximizeTitle: "",
                        minimizeTitle: "",
                        initialize: function (e) {
                            this.layers = [], this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, [e])
                        },
                        destroy: function () {
                            this.mapDiv && (this.handlers.click && this.handlers.click.destroy(), this.handlers.drag && this.handlers.drag.destroy(), this.ovmap && this.ovmap.viewPortDiv.removeChild(this.extentRectangle), this.extentRectangle = null, this.rectEvents && (this.rectEvents.destroy(), this.rectEvents = null), this.ovmap && (this.ovmap.destroy(), this.ovmap = null), this.element.removeChild(this.mapDiv), this.mapDiv = null, this.div.removeChild(this.element), this.element = null, this.maximizeDiv && (this.div.removeChild(this.maximizeDiv), this.maximizeDiv = null), this.minimizeDiv && (this.div.removeChild(this.minimizeDiv), this.minimizeDiv = null), this.map.events.un({
                                buttonclick: this.onButtonClick,
                                moveend: this.update,
                                changebaselayer: this.baseLayerDraw,
                                scope: this
                            }), OpenLayers.Control.prototype.destroy.apply(this, arguments))
                        },
                        draw: function () {
                            if (OpenLayers.Control.prototype.draw.apply(this, arguments), 0 === this.layers.length) {
                                if (!this.map.baseLayer) return this.map.events.register("changebaselayer", this, this.baseLayerDraw), this.div;
                                this.layers = [this.map.baseLayer.clone()]
                            }
                            if (this.element = document.createElement("div"), this.element.className = this.displayClass + "Element", this.element.style.display = "none", this.mapDiv = document.createElement("div"), this.mapDiv.style.width = this.size.w + "px", this.mapDiv.style.height = this.size.h + "px", this.mapDiv.style.position = "relative", this.mapDiv.style.overflow = "hidden", this.mapDiv.id = OpenLayers.Util.createUniqueID("overviewMap"), this.extentRectangle = document.createElement("div"), this.extentRectangle.style.position = "absolute", this.extentRectangle.style.zIndex = 1e3, this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.element.appendChild(this.mapDiv), this.div.appendChild(this.element), this.outsideViewport) this.element.style.display = "";
                            else {
                                this.div.className += " " + this.displayClass + "Container";
                                var e = OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");
                                this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(this.displayClass + "MaximizeButton", null, null, e, "absolute"), this.maximizeDiv.style.display = "none", this.maximizeDiv.className = this.displayClass + "MaximizeButton olButton", this.maximizeTitle && (this.maximizeDiv.title = this.maximizeTitle), this.div.appendChild(this.maximizeDiv), e = OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"), this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv", null, null, e, "absolute"), this.minimizeDiv.style.display = "none", this.minimizeDiv.className = this.displayClass + "MinimizeButton olButton", this.minimizeTitle && (this.minimizeDiv.title = this.minimizeTitle), this.div.appendChild(this.minimizeDiv), this.minimizeControl()
                            }
                            return this.map.getExtent() && this.update(), this.map.events.on({
                                buttonclick: this.onButtonClick,
                                moveend: this.update,
                                scope: this
                            }), this.maximized && this.maximizeControl(), this.div
                        },
                        baseLayerDraw: function () {
                            this.draw(), this.map.events.unregister("changebaselayer", this, this.baseLayerDraw)
                        },
                        rectDrag: function (e) {
                            var t = this.handlers.drag.last.x - e.x,
                                i = this.handlers.drag.last.y - e.y;
                            if (0 != t || 0 != i) {
                                var s = this.rectPxBounds.top,
                                    r = this.rectPxBounds.left;
                                e = Math.abs(this.rectPxBounds.getHeight());
                                var n = this.rectPxBounds.getWidth();
                                i = Math.max(0, s - i), i = Math.min(i, this.ovmap.size.h - this.hComp - e), t = Math.max(0, r - t), t = Math.min(t, this.ovmap.size.w - this.wComp - n);
                                this.setRectPxBounds(new OpenLayers.Bounds(t, i + e, t + n, i))
                            }
                        },
                        mapDivClick: function (e) {
                            var t = this.rectPxBounds.getCenterPixel(),
                                i = e.xy.x - t.x,
                                s = e.xy.y - t.y,
                                r = this.rectPxBounds.top,
                                n = this.rectPxBounds.left;
                            e = Math.abs(this.rectPxBounds.getHeight()), t = this.rectPxBounds.getWidth(), s = Math.max(0, r + s), s = Math.min(s, this.ovmap.size.h - e), i = Math.max(0, n + i), i = Math.min(i, this.ovmap.size.w - t), this.setRectPxBounds(new OpenLayers.Bounds(i, s + e, i + t, s)), this.updateMapToRect()
                        },
                        onButtonClick: function (e) {
                            e.buttonElement === this.minimizeDiv ? this.minimizeControl() : e.buttonElement === this.maximizeDiv && this.maximizeControl()
                        },
                        maximizeControl: function (e) {
                            this.element.style.display = "", this.showToggle(!1), null != e && OpenLayers.Event.stop(e)
                        },
                        minimizeControl: function (e) {
                            this.element.style.display = "none", this.showToggle(!0), null != e && OpenLayers.Event.stop(e)
                        },
                        showToggle: function (e) {
                            this.maximizeDiv && (this.maximizeDiv.style.display = e ? "" : "none"), this.minimizeDiv && (this.minimizeDiv.style.display = e ? "none" : "")
                        },
                        update: function () {
                            null == this.ovmap && this.createMap(), !this.autoPan && this.isSuitableOverview() || this.updateOverview(), this.updateRectToMap()
                        },
                        isSuitableOverview: function () {
                            var e = this.map.getExtent(),
                                t = this.map.getMaxExtent();
                            e = new OpenLayers.Bounds(Math.max(e.left, t.left), Math.max(e.bottom, t.bottom), Math.min(e.right, t.right), Math.min(e.top, t.top));
                            return this.ovmap.getProjection() != this.map.getProjection() && (e = e.transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject())), (t = this.ovmap.getResolution() / this.map.getResolution()) > this.minRatio && t <= this.maxRatio && this.ovmap.getExtent().containsBounds(e)
                        },
                        updateOverview: function () {
                            var e = this.map.getResolution(),
                                t = this.ovmap.getResolution(),
                                i = t / e;
                            i > this.maxRatio ? t = this.minRatio * e : i <= this.minRatio && (t = this.maxRatio * e), this.ovmap.getProjection() != this.map.getProjection() ? (e = this.map.center.clone()).transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : e = this.map.center, this.ovmap.setCenter(e, this.ovmap.getZoomForResolution(t * this.resolutionFactor)), this.updateRectToMap()
                        },
                        createMap: function () {
                            var e = OpenLayers.Util.extend({
                                controls: [],
                                maxResolution: "auto",
                                fallThrough: !1
                            }, this.mapOptions);
                            if (this.ovmap = new OpenLayers.Map(this.mapDiv, e), this.ovmap.viewPortDiv.appendChild(this.extentRectangle), OpenLayers.Event.stopObserving(window, "unload", this.ovmap.unloadDestroy), this.ovmap.addLayers(this.layers), this.ovmap.zoomToMaxExtent(), this.wComp = (this.wComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-left-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-right-width"))) ? this.wComp : 2, this.hComp = (this.hComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-top-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-bottom-width"))) ? this.hComp : 2, this.handlers.drag = new OpenLayers.Handler.Drag(this, {
                                    move: this.rectDrag,
                                    done: this.updateMapToRect
                                }, {
                                    map: this.ovmap
                                }), this.handlers.click = new OpenLayers.Handler.Click(this, {
                                    click: this.mapDivClick
                                }, {
                                    single: !0,
                                    double: !1,
                                    stopSingle: !0,
                                    stopDouble: !0,
                                    pixelTolerance: 1,
                                    map: this.ovmap
                                }), this.handlers.click.activate(), this.rectEvents = new OpenLayers.Events(this, this.extentRectangle, null, !0), this.rectEvents.register("mouseover", this, (function (e) {
                                    this.handlers.drag.active || this.map.dragging || this.handlers.drag.activate()
                                })), this.rectEvents.register("mouseout", this, (function (e) {
                                    this.handlers.drag.dragging || this.handlers.drag.deactivate()
                                })), this.ovmap.getProjection() != this.map.getProjection()) {
                                e = this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units;
                                var t = this.ovmap.getProjectionObject().getUnits() || this.ovmap.units || this.ovmap.baseLayer.units;
                                this.resolutionFactor = e && t ? OpenLayers.INCHES_PER_UNIT[e] / OpenLayers.INCHES_PER_UNIT[t] : 1
                            }
                        },
                        updateRectToMap: function () {
                            var e;
                            e = this.ovmap.getProjection() != this.map.getProjection() ? this.map.getExtent().transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : this.map.getExtent(), (e = this.getRectBoundsFromMapBounds(e)) && this.setRectPxBounds(e)
                        },
                        updateMapToRect: function () {
                            var e = this.getMapBoundsFromRectBounds(this.rectPxBounds);
                            this.ovmap.getProjection() != this.map.getProjection() && (e = e.transform(this.ovmap.getProjectionObject(), this.map.getProjectionObject())), this.map.panTo(e.getCenterLonLat())
                        },
                        setRectPxBounds: function (e) {
                            var t = Math.max(e.top, 0),
                                i = Math.max(e.left, 0),
                                s = Math.min(e.top + Math.abs(e.getHeight()), this.ovmap.size.h - this.hComp);
                            e = Math.min(e.left + e.getWidth(), this.ovmap.size.w - this.wComp);
                            var r = Math.max(e - i, 0),
                                n = Math.max(s - t, 0);
                            r < this.minRectSize || n < this.minRectSize ? (this.extentRectangle.className = this.displayClass + this.minRectDisplayClass, r = i + r / 2 - this.minRectSize / 2, this.extentRectangle.style.top = Math.round(t + n / 2 - this.minRectSize / 2) + "px", this.extentRectangle.style.left = Math.round(r) + "px", this.extentRectangle.style.height = this.minRectSize + "px", this.extentRectangle.style.width = this.minRectSize + "px") : (this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.extentRectangle.style.top = Math.round(t) + "px", this.extentRectangle.style.left = Math.round(i) + "px", this.extentRectangle.style.height = Math.round(n) + "px", this.extentRectangle.style.width = Math.round(r) + "px"), this.rectPxBounds = new OpenLayers.Bounds(Math.round(i), Math.round(s), Math.round(e), Math.round(t))
                        },
                        getRectBoundsFromMapBounds: function (e) {
                            var t = this.getOverviewPxFromLonLat({
                                lon: e.left,
                                lat: e.bottom
                            });
                            e = this.getOverviewPxFromLonLat({
                                lon: e.right,
                                lat: e.top
                            });
                            var i = null;
                            return t && e && (i = new OpenLayers.Bounds(t.x, t.y, e.x, e.y)), i
                        },
                        getMapBoundsFromRectBounds: function (e) {
                            var t = this.getLonLatFromOverviewPx({
                                x: e.left,
                                y: e.bottom
                            });
                            return e = this.getLonLatFromOverviewPx({
                                x: e.right,
                                y: e.top
                            }), new OpenLayers.Bounds(t.lon, t.lat, e.lon, e.lat)
                        },
                        getLonLatFromOverviewPx: function (e) {
                            var t = this.ovmap.size,
                                i = this.ovmap.getResolution(),
                                s = this.ovmap.getExtent().getCenterLonLat();
                            return {
                                lon: s.lon + (e.x - t.w / 2) * i,
                                lat: s.lat - (e.y - t.h / 2) * i
                            }
                        },
                        getOverviewPxFromLonLat: function (e) {
                            var t = this.ovmap.getResolution(),
                                i = this.ovmap.getExtent();
                            if (i) return {
                                x: Math.round(1 / t * (e.lon - i.left)),
                                y: Math.round(1 / t * (i.top - e.lat))
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.OverviewMap"
                    }), OpenLayers.Layer = OpenLayers.Class({
                        id: null,
                        name: null,
                        div: null,
                        opacity: 1,
                        alwaysInRange: null,
                        RESOLUTION_PROPERTIES: "scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),
                        events: null,
                        map: null,
                        isBaseLayer: !1,
                        alpha: !1,
                        displayInLayerSwitcher: !0,
                        visibility: !0,
                        attribution: null,
                        inRange: !1,
                        imageSize: null,
                        options: null,
                        eventListeners: null,
                        gutter: 0,
                        projection: null,
                        units: null,
                        scales: null,
                        resolutions: null,
                        maxExtent: null,
                        minExtent: null,
                        maxResolution: null,
                        minResolution: null,
                        numZoomLevels: null,
                        minScale: null,
                        maxScale: null,
                        displayOutsideMaxExtent: !1,
                        wrapDateLine: !1,
                        metadata: null,
                        initialize: function (e, t) {
                            this.metadata = {}, t = OpenLayers.Util.extend({}, t), null != this.alwaysInRange && (t.alwaysInRange = this.alwaysInRange), this.addOptions(t), this.name = e, null == this.id && (this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_"), this.div = OpenLayers.Util.createDiv(this.id), this.div.style.width = "100%", this.div.style.height = "100%", this.div.dir = "ltr", this.events = new OpenLayers.Events(this, this.div), this.eventListeners instanceof Object) && this.events.on(this.eventListeners)
                        },
                        destroy: function (e) {
                            null == e && (e = !0), null != this.map && this.map.removeLayer(this, e), this.options = this.div = this.name = this.map = this.projection = null, this.events && (this.eventListeners && this.events.un(this.eventListeners), this.events.destroy()), this.events = this.eventListeners = null
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer(this.name, this.getOptions())), OpenLayers.Util.applyDefaults(e, this), e.map = null, e
                        },
                        getOptions: function () {
                            var e, t = {};
                            for (e in this.options) t[e] = this[e];
                            return t
                        },
                        setName: function (e) {
                            e != this.name && (this.name = e, null != this.map && this.map.events.triggerEvent("changelayer", {
                                layer: this,
                                property: "name"
                            }))
                        },
                        addOptions: function (e, t) {
                            if (null == this.options && (this.options = {}), e && ("string" == typeof e.projection && (e.projection = new OpenLayers.Projection(e.projection)), e.projection && OpenLayers.Util.applyDefaults(e, OpenLayers.Projection.defaults[e.projection.getCode()]), !e.maxExtent || e.maxExtent instanceof OpenLayers.Bounds || (e.maxExtent = new OpenLayers.Bounds(e.maxExtent)), !e.minExtent || e.minExtent instanceof OpenLayers.Bounds || (e.minExtent = new OpenLayers.Bounds(e.minExtent))), OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e), this.projection && this.projection.getUnits() && (this.units = this.projection.getUnits()), this.map) {
                                var i, s = this.map.getResolution(),
                                    r = this.RESOLUTION_PROPERTIES.concat(["projection", "units", "minExtent", "maxExtent"]);
                                for (i in e)
                                    if (e.hasOwnProperty(i) && 0 <= OpenLayers.Util.indexOf(r, i)) {
                                        this.initResolutions(), t && this.map.baseLayer === this && (this.map.setCenter(this.map.getCenter(), this.map.getZoomForResolution(s), !1, !0), this.map.events.triggerEvent("changebaselayer", {
                                            layer: this
                                        }));
                                        break
                                    }
                            }
                        },
                        onMapResize: function () {},
                        redraw: function () {
                            var e = !1;
                            if (this.map) {
                                this.inRange = this.calculateInRange();
                                var t = this.getExtent();
                                t && this.inRange && this.visibility && (this.moveTo(t, !0, !1), this.events.triggerEvent("moveend", {
                                    zoomChanged: !0
                                }), e = !0)
                            }
                            return e
                        },
                        moveTo: function (e, t, i) {
                            e = this.visibility, this.isBaseLayer || (e = e && this.inRange), this.display(e)
                        },
                        moveByPx: function (e, t) {},
                        setMap: function (e) {
                            null == this.map && (this.map = e, this.maxExtent = this.maxExtent || this.map.maxExtent, this.minExtent = this.minExtent || this.map.minExtent, this.projection = this.projection || this.map.projection, "string" == typeof this.projection && (this.projection = new OpenLayers.Projection(this.projection)), this.units = this.projection.getUnits() || this.units || this.map.units, this.initResolutions(), this.isBaseLayer || (this.inRange = this.calculateInRange(), this.div.style.display = this.visibility && this.inRange ? "" : "none"), this.setTileSize())
                        },
                        afterAdd: function () {},
                        removeMap: function (e) {},
                        getImageSize: function (e) {
                            return this.imageSize || this.tileSize
                        },
                        setTileSize: function (e) {
                            this.tileSize = e = e || (this.tileSize ? this.tileSize : this.map.getTileSize()), this.gutter && (this.imageSize = new OpenLayers.Size(e.w + 2 * this.gutter, e.h + 2 * this.gutter))
                        },
                        getVisibility: function () {
                            return this.visibility
                        },
                        setVisibility: function (e) {
                            e != this.visibility && (this.visibility = e, this.display(e), this.redraw(), null != this.map && this.map.events.triggerEvent("changelayer", {
                                layer: this,
                                property: "visibility"
                            }), this.events.triggerEvent("visibilitychanged"))
                        },
                        display: function (e) {
                            e != ("none" != this.div.style.display) && (this.div.style.display = e && this.calculateInRange() ? "block" : "none")
                        },
                        calculateInRange: function () {
                            var e = !1;
                            return this.alwaysInRange ? e = !0 : this.map && (e = (e = this.map.getResolution()) >= this.minResolution && e <= this.maxResolution), e
                        },
                        setIsBaseLayer: function (e) {
                            e != this.isBaseLayer && (this.isBaseLayer = e, null != this.map && this.map.events.triggerEvent("changebaselayer", {
                                layer: this
                            }))
                        },
                        initResolutions: function () {
                            var e, t, i, s, r, n = {},
                                a = !0;
                            for (e = 0, t = this.RESOLUTION_PROPERTIES.length; e < t; e++) n[i = this.RESOLUTION_PROPERTIES[e]] = this.options[i], a && this.options[i] && (a = !1);
                            if (null == this.options.alwaysInRange && (this.alwaysInRange = a), null == n.resolutions && (n.resolutions = this.resolutionsFromScales(n.scales)), null == n.resolutions && (n.resolutions = this.calculateResolutions(n)), null == n.resolutions) {
                                for (e = 0, t = this.RESOLUTION_PROPERTIES.length; e < t; e++) n[i = this.RESOLUTION_PROPERTIES[e]] = null != this.options[i] ? this.options[i] : this.map[i];
                                null == n.resolutions && (n.resolutions = this.resolutionsFromScales(n.scales)), null == n.resolutions && (n.resolutions = this.calculateResolutions(n))
                            }
                            if (this.options.maxResolution && "auto" !== this.options.maxResolution && (s = this.options.maxResolution), this.options.minScale && (s = OpenLayers.Util.getResolutionFromScale(this.options.minScale, this.units)), this.options.minResolution && "auto" !== this.options.minResolution && (r = this.options.minResolution), this.options.maxScale && (r = OpenLayers.Util.getResolutionFromScale(this.options.maxScale, this.units)), n.resolutions && (n.resolutions.sort((function (e, t) {
                                    return t - e
                                })), s || (s = n.resolutions[0]), r || (r = n.resolutions[n.resolutions.length - 1])), this.resolutions = n.resolutions) {
                                for (t = this.resolutions.length, this.scales = Array(t), e = 0; e < t; e++) this.scales[e] = OpenLayers.Util.getScaleFromResolution(this.resolutions[e], this.units);
                                this.numZoomLevels = t
                            }(this.minResolution = r) && (this.maxScale = OpenLayers.Util.getScaleFromResolution(r, this.units)), (this.maxResolution = s) && (this.minScale = OpenLayers.Util.getScaleFromResolution(s, this.units))
                        },
                        resolutionsFromScales: function (e) {
                            if (null != e) {
                                var t, i, s;
                                for (s = e.length, t = Array(s), i = 0; i < s; i++) t[i] = OpenLayers.Util.getResolutionFromScale(e[i], this.units);
                                return t
                            }
                        },
                        calculateResolutions: function (e) {
                            var t, i, s = e.maxResolution;
                            if (null != e.minScale ? s = OpenLayers.Util.getResolutionFromScale(e.minScale, this.units) : "auto" == s && null != this.maxExtent && (t = this.map.getSize(), i = this.maxExtent.getWidth() / t.w, t = this.maxExtent.getHeight() / t.h, s = Math.max(i, t)), i = e.minResolution, null != e.maxScale ? i = OpenLayers.Util.getResolutionFromScale(e.maxScale, this.units) : "auto" == e.minResolution && null != this.minExtent && (t = this.map.getSize(), i = this.minExtent.getWidth() / t.w, t = this.minExtent.getHeight() / t.h, i = Math.max(i, t)), "number" != typeof s && "number" != typeof i && null != this.maxExtent && (s = this.map.getTileSize(), s = Math.max(this.maxExtent.getWidth() / s.w, this.maxExtent.getHeight() / s.h)), t = e.maxZoomLevel, e = e.numZoomLevels, "number" == typeof i && "number" == typeof s && void 0 === e ? e = Math.floor(Math.log(s / i) / Math.log(2)) + 1 : void 0 === e && null != t && (e = t + 1), !("number" != typeof e || 0 >= e || "number" != typeof s && "number" != typeof i)) {
                                t = Array(e);
                                var r, n = 2;
                                if ("number" == typeof i && "number" == typeof s && (n = Math.pow(s / i, 1 / (e - 1))), "number" == typeof s)
                                    for (r = 0; r < e; r++) t[r] = s / Math.pow(n, r);
                                else
                                    for (r = 0; r < e; r++) t[e - 1 - r] = i * Math.pow(n, r);
                                return t
                            }
                        },
                        getResolution: function () {
                            var e = this.map.getZoom();
                            return this.getResolutionForZoom(e)
                        },
                        getExtent: function () {
                            return this.map.calculateBounds()
                        },
                        getZoomForExtent: function (e, t) {
                            var i = this.map.getSize();
                            i = Math.max(e.getWidth() / i.w, e.getHeight() / i.h);
                            return this.getZoomForResolution(i, t)
                        },
                        getDataExtent: function () {},
                        getResolutionForZoom: function (e) {
                            if (e = Math.max(0, Math.min(e, this.resolutions.length - 1)), this.map.fractionalZoom) {
                                var t = Math.floor(e),
                                    i = Math.ceil(e);
                                e = this.resolutions[t] - (e - t) * (this.resolutions[t] - this.resolutions[i])
                            } else e = this.resolutions[Math.round(e)];
                            return e
                        },
                        getZoomForResolution: function (e, t) {
                            var i, s;
                            if (this.map.fractionalZoom) {
                                var r, n = 0,
                                    a = this.resolutions[n],
                                    o = this.resolutions[this.resolutions.length - 1];
                                for (i = 0, s = this.resolutions.length; i < s; ++i)
                                    if ((r = this.resolutions[i]) >= e && (a = r, n = i), r <= e) {
                                        o = r;
                                        break
                                    } i = 0 < (i = a - o) ? n + (a - e) / i : n
                            } else {
                                for (a = Number.POSITIVE_INFINITY, i = 0, s = this.resolutions.length; i < s; i++)
                                    if (t) {
                                        if ((n = Math.abs(this.resolutions[i] - e)) > a) break;
                                        a = n
                                    } else if (this.resolutions[i] < e) break;
                                i = Math.max(0, i - 1)
                            }
                            return i
                        },
                        getLonLatFromViewPortPx: function (e) {
                            var t = null,
                                i = this.map;
                            if (null != e && i.minPx) {
                                t = i.getResolution();
                                var s = i.getMaxExtent({
                                    restricted: !0
                                });
                                t = new OpenLayers.LonLat((e.x - i.minPx.x) * t + s.left, (i.minPx.y - e.y) * t + s.top);
                                this.wrapDateLine && (t = t.wrapDateLine(this.maxExtent))
                            }
                            return t
                        },
                        getViewPortPxFromLonLat: function (e, t) {
                            var i = null;
                            return null != e && (t = t || this.map.getResolution(), i = this.map.calculateBounds(null, t), i = new OpenLayers.Pixel(1 / t * (e.lon - i.left), 1 / t * (i.top - e.lat))), i
                        },
                        setOpacity: function (e) {
                            if (e != this.opacity) {
                                this.opacity = e;
                                for (var t = this.div.childNodes, i = 0, s = t.length; i < s; ++i) {
                                    var r = t[i].firstChild || t[i],
                                        n = t[i].lastChild;
                                    n && "iframe" === n.nodeName.toLowerCase() && (r = n.parentNode), OpenLayers.Util.modifyDOMElement(r, null, null, null, null, null, null, e)
                                }
                                null != this.map && this.map.events.triggerEvent("changelayer", {
                                    layer: this,
                                    property: "opacity"
                                })
                            }
                        },
                        getZIndex: function () {
                            return this.div.style.zIndex
                        },
                        setZIndex: function (e) {
                            this.div.style.zIndex = e
                        },
                        adjustBounds: function (e) {
                            if (this.gutter) {
                                var t = this.gutter * this.map.getResolution();
                                e = new OpenLayers.Bounds(e.left - t, e.bottom - t, e.right + t, e.top + t)
                            }
                            return this.wrapDateLine && (t = {
                                rightTolerance: this.getResolution(),
                                leftTolerance: this.getResolution()
                            }, e = e.wrapDateLine(this.maxExtent, t)), e
                        },
                        CLASS_NAME: "OpenLayers.Layer"
                    }), OpenLayers.Layer.SphericalMercator = {
                        getExtent: function () {
                            return this.sphericalMercator ? this.map.calculateBounds() : OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)
                        },
                        getLonLatFromViewPortPx: function (e) {
                            return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this, arguments)
                        },
                        getViewPortPxFromLonLat: function (e) {
                            return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this, arguments)
                        },
                        initMercatorParameters: function () {
                            this.RESOLUTIONS = [];
                            for (var e = 0; e <= this.MAX_ZOOM_LEVEL; ++e) this.RESOLUTIONS[e] = 156543.03390625 / Math.pow(2, e);
                            this.units = "m", this.projection = this.projection || "EPSG:900913"
                        },
                        forwardMercator: function () {
                            var e = new OpenLayers.Projection("EPSG:4326"),
                                t = new OpenLayers.Projection("EPSG:900913");
                            return function (i, s) {
                                var r = OpenLayers.Projection.transform({
                                    x: i,
                                    y: s
                                }, e, t);
                                return new OpenLayers.LonLat(r.x, r.y)
                            }
                        }(),
                        inverseMercator: function () {
                            var e = new OpenLayers.Projection("EPSG:4326"),
                                t = new OpenLayers.Projection("EPSG:900913");
                            return function (i, s) {
                                var r = OpenLayers.Projection.transform({
                                    x: i,
                                    y: s
                                }, t, e);
                                return new OpenLayers.LonLat(r.x, r.y)
                            }
                        }()
                    }, OpenLayers.Layer.EventPane = OpenLayers.Class(OpenLayers.Layer, {
                        smoothDragPan: !0,
                        isBaseLayer: !0,
                        isFixed: !0,
                        pane: null,
                        mapObject: null,
                        initialize: function (e, t) {
                            OpenLayers.Layer.prototype.initialize.apply(this, arguments), null == this.pane && (this.pane = OpenLayers.Util.createDiv(this.div.id + "_EventPane"))
                        },
                        destroy: function () {
                            this.pane = this.mapObject = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.prototype.setMap.apply(this, arguments), this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1, this.pane.style.display = this.div.style.display, this.pane.style.width = "100%", this.pane.style.height = "100%", "msie" == OpenLayers.BROWSER_NAME && (this.pane.style.background = "url(" + OpenLayers.Util.getImageLocation("blank.gif") + ")"), this.isFixed ? this.map.viewPortDiv.appendChild(this.pane) : this.map.layerContainerDiv.appendChild(this.pane), this.loadMapObject(), null == this.mapObject && this.loadWarningMessage()
                        },
                        removeMap: function (e) {
                            this.pane && this.pane.parentNode && this.pane.parentNode.removeChild(this.pane), OpenLayers.Layer.prototype.removeMap.apply(this, arguments)
                        },
                        loadWarningMessage: function () {
                            this.div.style.backgroundColor = "darkblue";
                            var e = this.map.getSize(),
                                t = Math.min(e.w, 300),
                                i = Math.min(e.h, 200);
                            t = new OpenLayers.Size(t, i), e = new OpenLayers.Pixel(e.w / 2, e.h / 2).add(-t.w / 2, -t.h / 2);
                            (e = OpenLayers.Util.createDiv(this.name + "_warning", e, t, null, null, null, "auto")).style.padding = "7px", e.style.backgroundColor = "yellow", e.innerHTML = this.getWarningHTML(), this.div.appendChild(e)
                        },
                        getWarningHTML: function () {
                            return ""
                        },
                        display: function (e) {
                            OpenLayers.Layer.prototype.display.apply(this, arguments), this.pane.style.display = this.div.style.display
                        },
                        setZIndex: function (e) {
                            OpenLayers.Layer.prototype.setZIndex.apply(this, arguments), this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1
                        },
                        moveByPx: function (e, t) {
                            OpenLayers.Layer.prototype.moveByPx.apply(this, arguments), this.dragPanMapObject ? this.dragPanMapObject(e, -t) : this.moveTo(this.map.getCachedCenter())
                        },
                        moveTo: function (e, t, i) {
                            if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), null != this.mapObject) {
                                var s = this.map.getCenter(),
                                    r = this.map.getZoom();
                                if (null != s) {
                                    var n = this.getMapObjectCenter(),
                                        a = (n = this.getOLLonLatFromMapObjectLonLat(n), this.getMapObjectZoom());
                                    a = this.getOLZoomFromMapObjectZoom(a);
                                    s.equals(n) && r == a || (!t && n && this.dragPanMapObject && this.smoothDragPan ? (r = this.map.getViewPortPxFromLonLat(n), s = this.map.getViewPortPxFromLonLat(s), this.dragPanMapObject(s.x - r.x, r.y - s.y)) : (s = this.getMapObjectLonLatFromOLLonLat(s), r = this.getMapObjectZoomFromOLZoom(r), this.setMapObjectCenter(s, r, i)))
                                }
                            }
                        },
                        getLonLatFromViewPortPx: function (e) {
                            var t = null;
                            return null != this.mapObject && null != this.getMapObjectCenter() && (e = this.getMapObjectPixelFromOLPixel(e), e = this.getMapObjectLonLatFromMapObjectPixel(e), t = this.getOLLonLatFromMapObjectLonLat(e)), t
                        },
                        getViewPortPxFromLonLat: function (e) {
                            var t = null;
                            return null != this.mapObject && null != this.getMapObjectCenter() && (e = this.getMapObjectLonLatFromOLLonLat(e), e = this.getMapObjectPixelFromMapObjectLonLat(e), t = this.getOLPixelFromMapObjectPixel(e)), t
                        },
                        getOLLonLatFromMapObjectLonLat: function (e) {
                            var t = null;
                            return null != e && (t = this.getLongitudeFromMapObjectLonLat(e), e = this.getLatitudeFromMapObjectLonLat(e), t = new OpenLayers.LonLat(t, e)), t
                        },
                        getMapObjectLonLatFromOLLonLat: function (e) {
                            var t = null;
                            return null != e && (t = this.getMapObjectLonLatFromLonLat(e.lon, e.lat)), t
                        },
                        getOLPixelFromMapObjectPixel: function (e) {
                            var t = null;
                            return null != e && (t = this.getXFromMapObjectPixel(e), e = this.getYFromMapObjectPixel(e), t = new OpenLayers.Pixel(t, e)), t
                        },
                        getMapObjectPixelFromOLPixel: function (e) {
                            var t = null;
                            return null != e && (t = this.getMapObjectPixelFromXY(e.x, e.y)), t
                        },
                        CLASS_NAME: "OpenLayers.Layer.EventPane"
                    }), OpenLayers.Layer.FixedZoomLevels = OpenLayers.Class({
                        initialize: function () {},
                        initResolutions: function () {
                            for (var e = ["minZoomLevel", "maxZoomLevel", "numZoomLevels"], t = 0, i = e.length; t < i; t++) {
                                var s = e[t];
                                this[s] = null != this.options[s] ? this.options[s] : this.map[s]
                            }
                            if ((null == this.minZoomLevel || this.minZoomLevel < this.MIN_ZOOM_LEVEL) && (this.minZoomLevel = this.MIN_ZOOM_LEVEL), e = this.MAX_ZOOM_LEVEL - this.minZoomLevel + 1, t = null == this.options.numZoomLevels && null != this.options.maxZoomLevel || null == this.numZoomLevels && null != this.maxZoomLevel ? this.maxZoomLevel - this.minZoomLevel + 1 : this.numZoomLevels, this.numZoomLevels = null != t ? Math.min(t, e) : e, this.maxZoomLevel = this.minZoomLevel + this.numZoomLevels - 1, null != this.RESOLUTIONS) {
                                for (e = 0, this.resolutions = [], t = this.minZoomLevel; t <= this.maxZoomLevel; t++) this.resolutions[e++] = this.RESOLUTIONS[t];
                                this.maxResolution = this.resolutions[0], this.minResolution = this.resolutions[this.resolutions.length - 1]
                            }
                        },
                        getResolution: function () {
                            if (null != this.resolutions) return OpenLayers.Layer.prototype.getResolution.apply(this, arguments);
                            var e = null,
                                t = this.map.getSize(),
                                i = this.getExtent();
                            return null != t && null != i && (e = Math.max(i.getWidth() / t.w, i.getHeight() / t.h)), e
                        },
                        getExtent: function () {
                            var e = this.map.getSize(),
                                t = this.getLonLatFromViewPortPx({
                                    x: 0,
                                    y: 0
                                });
                            e = this.getLonLatFromViewPortPx({
                                x: e.w,
                                y: e.h
                            });
                            return null != t && null != e ? new OpenLayers.Bounds(t.lon, e.lat, e.lon, t.lat) : null
                        },
                        getZoomForResolution: function (e) {
                            if (null != this.resolutions) return OpenLayers.Layer.prototype.getZoomForResolution.apply(this, arguments);
                            var t = OpenLayers.Layer.prototype.getExtent.apply(this, []);
                            return this.getZoomForExtent(t)
                        },
                        getOLZoomFromMapObjectZoom: function (e) {
                            var t = null;
                            return null != e && (t = e - this.minZoomLevel, this.map.baseLayer !== this && (t = this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))), t
                        },
                        getMapObjectZoomFromOLZoom: function (e) {
                            var t = null;
                            return null != e && (t = e + this.minZoomLevel, this.map.baseLayer !== this && (t = this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))), t
                        },
                        CLASS_NAME: "OpenLayers.Layer.FixedZoomLevels"
                    }), OpenLayers.Layer.Google = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
                        MIN_ZOOM_LEVEL: 0,
                        MAX_ZOOM_LEVEL: 21,
                        RESOLUTIONS: [1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20, 536441802978515e-20, 268220901489257e-20, 1341104507446289e-21, 6.705522537231445e-7],
                        type: null,
                        wrapDateLine: !0,
                        sphericalMercator: !1,
                        version: null,
                        initialize: function (e, t) {
                            (t = t || {}).version || (t.version = "function" == typeof GMap2 ? "2" : "3");
                            var i = OpenLayers.Layer.Google["v" + t.version.replace(/\./g, "_")];
                            if (!i) throw "Unsupported Google Maps API version: " + t.version;
                            OpenLayers.Util.applyDefaults(t, i), OpenLayers.Util.applyDefaults(t, i.DEFAULTS), t.maxExtent && (t.maxExtent = t.maxExtent.clone()), OpenLayers.Layer.EventPane.prototype.initialize.apply(this, [e, t]), OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, [e, t]), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), this.initMercatorParameters())
                        },
                        clone: function () {
                            return new OpenLayers.Layer.Google(this.name, this.getOptions())
                        },
                        setVisibility: function (e) {
                            var t = null == this.opacity ? 1 : this.opacity;
                            OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this, arguments), this.setOpacity(t)
                        },
                        display: function (e) {
                            this._dragging || this.setGMapVisibility(e), OpenLayers.Layer.EventPane.prototype.display.apply(this, arguments)
                        },
                        moveTo: function (e, t, i) {
                            this._dragging = i, OpenLayers.Layer.EventPane.prototype.moveTo.apply(this, arguments), delete this._dragging
                        },
                        setOpacity: function (e) {
                            if (e !== this.opacity && (null != this.map && this.map.events.triggerEvent("changelayer", {
                                    layer: this,
                                    property: "opacity"
                                }), this.opacity = e), this.getVisibility()) {
                                var t = this.getMapContainer();
                                OpenLayers.Util.modifyDOMElement(t, null, null, null, null, null, null, e)
                            }
                        },
                        destroy: function () {
                            if (this.map) {
                                this.setGMapVisibility(!1);
                                var e = OpenLayers.Layer.Google.cache[this.map.id];
                                e && 1 >= e.count && this.removeGMapElements()
                            }
                            OpenLayers.Layer.EventPane.prototype.destroy.apply(this, arguments)
                        },
                        removeGMapElements: function () {
                            var e = OpenLayers.Layer.Google.cache[this.map.id];
                            if (e) {
                                var t = this.mapObject && this.getMapContainer();
                                t && t.parentNode && t.parentNode.removeChild(t), (t = e.termsOfUse) && t.parentNode && t.parentNode.removeChild(t), (e = e.poweredBy) && e.parentNode && e.parentNode.removeChild(e), this.mapObject && window.google && google.maps && google.maps.event && google.maps.event.clearListeners && google.maps.event.clearListeners(this.mapObject, "tilesloaded")
                            }
                        },
                        removeMap: function (e) {
                            this.visibility && this.mapObject && this.setGMapVisibility(!1);
                            var t = OpenLayers.Layer.Google.cache[e.id];
                            t && (1 >= t.count ? (this.removeGMapElements(), delete OpenLayers.Layer.Google.cache[e.id]) : --t.count), delete this.termsOfUse, delete this.poweredBy, delete this.mapObject, delete this.dragObject, OpenLayers.Layer.EventPane.prototype.removeMap.apply(this, arguments)
                        },
                        getOLBoundsFromMapObjectBounds: function (e) {
                            var t = null;
                            return null != e && (t = e.getSouthWest(), e = e.getNorthEast(), this.sphericalMercator ? (t = this.forwardMercator(t.lng(), t.lat()), e = this.forwardMercator(e.lng(), e.lat())) : (t = new OpenLayers.LonLat(t.lng(), t.lat()), e = new OpenLayers.LonLat(e.lng(), e.lat())), t = new OpenLayers.Bounds(t.lon, t.lat, e.lon, e.lat)), t
                        },
                        getWarningHTML: function () {
                            return OpenLayers.i18n("googleWarning")
                        },
                        getMapObjectCenter: function () {
                            return this.mapObject.getCenter()
                        },
                        getMapObjectZoom: function () {
                            return this.mapObject.getZoom()
                        },
                        getLongitudeFromMapObjectLonLat: function (e) {
                            return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lon : e.lng()
                        },
                        getLatitudeFromMapObjectLonLat: function (e) {
                            return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lat : e.lat()
                        },
                        getXFromMapObjectPixel: function (e) {
                            return e.x
                        },
                        getYFromMapObjectPixel: function (e) {
                            return e.y
                        },
                        CLASS_NAME: "OpenLayers.Layer.Google"
                    }), OpenLayers.Layer.Google.cache = {}, OpenLayers.Layer.Google.v2 = {
                        termsOfUse: null,
                        poweredBy: null,
                        dragObject: null,
                        loadMapObject: function () {
                            var e, t, i;
                            if (this.type || (this.type = G_NORMAL_MAP), s = OpenLayers.Layer.Google.cache[this.map.id]) e = s.mapObject, t = s.termsOfUse, i = s.poweredBy, ++s.count;
                            else {
                                var s = this.map.viewPortDiv,
                                    r = document.createElement("div");
                                r.id = this.map.id + "_GMap2Container", r.style.position = "absolute", r.style.width = "100%", r.style.height = "100%", s.appendChild(r);
                                try {
                                    e = new GMap2(r), t = r.lastChild, s.appendChild(t), t.style.zIndex = "1100", t.style.right = "", t.style.bottom = "", t.className = "olLayerGoogleCopyright", i = r.lastChild, s.appendChild(i), i.style.zIndex = "1100", i.style.right = "", i.style.bottom = "", i.className = "olLayerGooglePoweredBy gmnoprint"
                                } catch (e) {
                                    throw e
                                }
                                OpenLayers.Layer.Google.cache[this.map.id] = {
                                    mapObject: e,
                                    termsOfUse: t,
                                    poweredBy: i,
                                    count: 1
                                }
                            }
                            this.mapObject = e, this.termsOfUse = t, this.poweredBy = i, -1 === OpenLayers.Util.indexOf(this.mapObject.getMapTypes(), this.type) && this.mapObject.addMapType(this.type), "function" == typeof e.getDragObject ? this.dragObject = e.getDragObject() : this.dragPanMapObject = null, !1 === this.isBaseLayer && this.setGMapVisibility("none" !== this.div.style.display)
                        },
                        onMapResize: function () {
                            if (this.visibility && this.mapObject.isLoaded()) this.mapObject.checkResize();
                            else {
                                if (!this._resized) var e = this,
                                    t = GEvent.addListener(this.mapObject, "load", (function () {
                                        GEvent.removeListener(t), delete e._resized, e.mapObject.checkResize(), e.moveTo(e.map.getCenter(), e.map.getZoom())
                                    }));
                                this._resized = !0
                            }
                        },
                        setGMapVisibility: function (e) {
                            var t = OpenLayers.Layer.Google.cache[this.map.id];
                            if (t) {
                                var i = this.mapObject.getContainer();
                                !0 === e ? (this.mapObject.setMapType(this.type), i.style.display = "", this.termsOfUse.style.left = "", this.termsOfUse.style.display = "", this.poweredBy.style.display = "", t.displayed = this.id) : (t.displayed === this.id && delete t.displayed, t.displayed || (i.style.display = "none", this.termsOfUse.style.display = "none", this.termsOfUse.style.left = "-9999px", this.poweredBy.style.display = "none"))
                            }
                        },
                        getMapContainer: function () {
                            return this.mapObject.getContainer()
                        },
                        getMapObjectBoundsFromOLBounds: function (e) {
                            var t = null;
                            return null != e && (t = this.sphericalMercator ? this.inverseMercator(e.bottom, e.left) : new OpenLayers.LonLat(e.bottom, e.left), e = this.sphericalMercator ? this.inverseMercator(e.top, e.right) : new OpenLayers.LonLat(e.top, e.right), t = new GLatLngBounds(new GLatLng(t.lat, t.lon), new GLatLng(e.lat, e.lon))), t
                        },
                        setMapObjectCenter: function (e, t) {
                            this.mapObject.setCenter(e, t)
                        },
                        dragPanMapObject: function (e, t) {
                            this.dragObject.moveBy(new GSize(-e, t))
                        },
                        getMapObjectLonLatFromMapObjectPixel: function (e) {
                            return this.mapObject.fromContainerPixelToLatLng(e)
                        },
                        getMapObjectPixelFromMapObjectLonLat: function (e) {
                            return this.mapObject.fromLatLngToContainerPixel(e)
                        },
                        getMapObjectZoomFromMapObjectBounds: function (e) {
                            return this.mapObject.getBoundsZoomLevel(e)
                        },
                        getMapObjectLonLatFromLonLat: function (e, t) {
                            var i;
                            return this.sphericalMercator ? (i = this.inverseMercator(e, t), i = new GLatLng(i.lat, i.lon)) : i = new GLatLng(t, e), i
                        },
                        getMapObjectPixelFromXY: function (e, t) {
                            return new GPoint(e, t)
                        }
                    }, OpenLayers.Format.XML = OpenLayers.Class(OpenLayers.Format, {
                        namespaces: null,
                        namespaceAlias: null,
                        defaultPrefix: null,
                        readers: {},
                        writers: {},
                        xmldom: null,
                        initialize: function (e) {
                            for (var t in window.ActiveXObject && (this.xmldom = new ActiveXObject("Microsoft.XMLDOM")), OpenLayers.Format.prototype.initialize.apply(this, [e]), this.namespaces = OpenLayers.Util.extend({}, this.namespaces), this.namespaceAlias = {}, this.namespaces) this.namespaceAlias[this.namespaces[t]] = t
                        },
                        destroy: function () {
                            this.xmldom = null, OpenLayers.Format.prototype.destroy.apply(this, arguments)
                        },
                        setNamespace: function (e, t) {
                            this.namespaces[e] = t, this.namespaceAlias[t] = e
                        },
                        read: function (e) {
                            var t = e.indexOf("<");
                            return 0 < t && (e = e.substring(t)), t = OpenLayers.Util.Try(OpenLayers.Function.bind((function () {
                                var t;
                                return (t = window.ActiveXObject && !this.xmldom ? new ActiveXObject("Microsoft.XMLDOM") : this.xmldom).loadXML(e), t
                            }), this), (function () {
                                return (new DOMParser).parseFromString(e, "text/xml")
                            }), (function () {
                                var t = new XMLHttpRequest;
                                return t.open("GET", "data:text/xml;charset=utf-8," + encodeURIComponent(e), !1), t.overrideMimeType && t.overrideMimeType("text/xml"), t.send(null), t.responseXML
                            })), this.keepData && (this.data = t), t
                        },
                        write: function (e) {
                            if (this.xmldom) e = e.xml;
                            else {
                                var t = new XMLSerializer;
                                if (1 == e.nodeType) {
                                    var i = document.implementation.createDocument("", "", null);
                                    i.importNode && (e = i.importNode(e, !0)), i.appendChild(e), e = t.serializeToString(i)
                                } else e = t.serializeToString(e)
                            }
                            return e
                        },
                        createElementNS: function (e, t) {
                            return this.xmldom ? "string" == typeof e ? this.xmldom.createNode(1, t, e) : this.xmldom.createNode(1, t, "") : document.createElementNS(e, t)
                        },
                        createDocumentFragment: function () {
                            return this.xmldom ? this.xmldom.createDocumentFragment() : document.createDocumentFragment()
                        },
                        createTextNode: function (e) {
                            return "string" != typeof e && (e = String(e)), this.xmldom ? this.xmldom.createTextNode(e) : document.createTextNode(e)
                        },
                        getElementsByTagNameNS: function (e, t, i) {
                            var s = [];
                            if (e.getElementsByTagNameNS) s = e.getElementsByTagNameNS(t, i);
                            else
                                for (var r, n, a = 0, o = (e = e.getElementsByTagName("*")).length; a < o; ++a) n = (r = e[a]).prefix ? r.prefix + ":" + i : i, ("*" == i || n == r.nodeName) && ("*" != t && t != r.namespaceURI || s.push(r));
                            return s
                        },
                        getAttributeNodeNS: function (e, t, i) {
                            var s = null;
                            if (e.getAttributeNodeNS) s = e.getAttributeNodeNS(t, i);
                            else
                                for (var r, n = 0, a = (e = e.attributes).length; n < a; ++n)
                                    if ((r = e[n]).namespaceURI == t && (r.prefix ? r.prefix + ":" + i : i) == r.nodeName) {
                                        s = r;
                                        break
                                    } return s
                        },
                        getAttributeNS: function (e, t, i) {
                            var s = "";
                            return e.getAttributeNS ? s = e.getAttributeNS(t, i) || "" : (e = this.getAttributeNodeNS(e, t, i)) && (s = e.nodeValue), s
                        },
                        getChildValue: function (e, t) {
                            var i = t || "";
                            if (e)
                                for (var s = e.firstChild; s; s = s.nextSibling) switch (s.nodeType) {
                                    case 3:
                                    case 4:
                                        i += s.nodeValue
                                }
                            return i
                        },
                        isSimpleContent: function (e) {
                            var t = !0;
                            for (e = e.firstChild; e; e = e.nextSibling)
                                if (1 === e.nodeType) {
                                    t = !1;
                                    break
                                } return t
                        },
                        contentType: function (e) {
                            var t = !1,
                                i = !1,
                                s = OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;
                            for (e = e.firstChild; e; e = e.nextSibling) {
                                switch (e.nodeType) {
                                    case 1:
                                        i = !0;
                                        break;
                                    case 8:
                                        break;
                                    default:
                                        t = !0
                                }
                                if (i && t) break
                            }
                            if (i && t) s = OpenLayers.Format.XML.CONTENT_TYPE.MIXED;
                            else {
                                if (i) return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;
                                if (t) return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE
                            }
                            return s
                        },
                        hasAttributeNS: function (e, t, i) {
                            return e.hasAttributeNS ? e.hasAttributeNS(t, i) : !!this.getAttributeNodeNS(e, t, i)
                        },
                        setAttributeNS: function (e, t, i, s) {
                            if (e.setAttributeNS) e.setAttributeNS(t, i, s);
                            else {
                                if (!this.xmldom) throw "setAttributeNS not implemented";
                                t ? ((t = e.ownerDocument.createNode(2, i, t)).nodeValue = s, e.setAttributeNode(t)) : e.setAttribute(i, s)
                            }
                        },
                        createElementNSPlus: function (e, t) {
                            var i = (t = t || {}).uri || this.namespaces[t.prefix];
                            i || (i = e.indexOf(":"), i = this.namespaces[e.substring(0, i)]), i || (i = this.namespaces[this.defaultPrefix]), i = this.createElementNS(i, e), t.attributes && this.setAttributes(i, t.attributes);
                            var s = t.value;
                            return null != s && i.appendChild(this.createTextNode(s)), i
                        },
                        setAttributes: function (e, t) {
                            var i, s, r;
                            for (r in t) null != t[r] && t[r].toString && (i = t[r].toString(), s = this.namespaces[r.substring(0, r.indexOf(":"))] || null, this.setAttributeNS(e, s, r, i))
                        },
                        readNode: function (e, t) {
                            t || (t = {});
                            var i = this.readers[e.namespaceURI ? this.namespaceAlias[e.namespaceURI] : this.defaultPrefix];
                            i && ((i = i[e.localName || e.nodeName.split(":").pop()] || i["*"]) && i.apply(this, [e, t]));
                            return t
                        },
                        readChildNodes: function (e, t) {
                            t || (t = {});
                            for (var i, s = e.childNodes, r = 0, n = s.length; r < n; ++r) 1 == (i = s[r]).nodeType && this.readNode(i, t);
                            return t
                        },
                        writeNode: function (e, t, i) {
                            var s, r = e.indexOf(":");
                            return 0 < r ? (s = e.substring(0, r), e = e.substring(r + 1)) : s = i ? this.namespaceAlias[i.namespaceURI] : this.defaultPrefix, t = this.writers[s][e].apply(this, [t]), i && i.appendChild(t), t
                        },
                        getChildEl: function (e, t, i) {
                            return e && this.getThisOrNextEl(e.firstChild, t, i)
                        },
                        getNextEl: function (e, t, i) {
                            return e && this.getThisOrNextEl(e.nextSibling, t, i)
                        },
                        getThisOrNextEl: function (e, t, i) {
                            e: for (; e; e = e.nextSibling) switch (e.nodeType) {
                                case 1:
                                    if (!(t && t !== (e.localName || e.nodeName.split(":").pop()) || i && i !== e.namespaceURI)) break e;
                                    e = null;
                                    break e;
                                case 3:
                                    if (/^\s*$/.test(e.nodeValue)) break;
                                case 4:
                                case 6:
                                case 12:
                                case 10:
                                case 11:
                                    e = null;
                                    break e
                            }
                            return e || null
                        },
                        lookupNamespaceURI: function (e, t) {
                            var i = null;
                            if (e)
                                if (e.lookupNamespaceURI) i = e.lookupNamespaceURI(t);
                                else e: switch (e.nodeType) {
                                    case 1:
                                        if (null !== e.namespaceURI && e.prefix === t) {
                                            i = e.namespaceURI;
                                            break e
                                        }
                                        if (i = e.attributes.length)
                                            for (var s, r = 0; r < i; ++r) {
                                                if ("xmlns" === (s = e.attributes[r]).prefix && s.name === "xmlns:" + t) {
                                                    i = s.value || null;
                                                    break e
                                                }
                                                if ("xmlns" === s.name && null === t) {
                                                    i = s.value || null;
                                                    break e
                                                }
                                            }
                                        i = this.lookupNamespaceURI(e.parentNode, t);
                                        break e;
                                    case 2:
                                        i = this.lookupNamespaceURI(e.ownerElement, t);
                                        break e;
                                    case 9:
                                        i = this.lookupNamespaceURI(e.documentElement, t);
                                        break e;
                                    case 6:
                                    case 12:
                                    case 10:
                                    case 11:
                                        break e;
                                    default:
                                        i = this.lookupNamespaceURI(e.parentNode, t)
                                }
                            return i
                        },
                        getXMLDoc: function () {
                            return OpenLayers.Format.XML.document || this.xmldom || (document.implementation && document.implementation.createDocument ? OpenLayers.Format.XML.document = document.implementation.createDocument("", "", null) : !this.xmldom && window.ActiveXObject && (this.xmldom = new ActiveXObject("Microsoft.XMLDOM"))), OpenLayers.Format.XML.document || this.xmldom
                        },
                        CLASS_NAME: "OpenLayers.Format.XML"
                    }), OpenLayers.Format.XML.CONTENT_TYPE = {
                        EMPTY: 0,
                        SIMPLE: 1,
                        COMPLEX: 2,
                        MIXED: 3
                    }, OpenLayers.Format.XML.lookupNamespaceURI = OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI, OpenLayers.Format.XML.prototype), OpenLayers.Format.XML.document = null, OpenLayers.Format.WFST = function (e) {
                        e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.WFST.DEFAULTS);
                        var t = OpenLayers.Format.WFST["v" + e.version.replace(/\./g, "_")];
                        if (!t) throw "Unsupported WFST version: " + e.version;
                        return new t(e)
                    }, OpenLayers.Format.WFST.DEFAULTS = {
                        version: "1.0.0"
                    }, OpenLayers.Feature = OpenLayers.Class({
                        layer: null,
                        id: null,
                        lonlat: null,
                        data: null,
                        marker: null,
                        popupClass: null,
                        popup: null,
                        initialize: function (e, t, i) {
                            this.layer = e, this.lonlat = t, this.data = null != i ? i : {}, this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")
                        },
                        destroy: function () {
                            null != this.layer && null != this.layer.map && null != this.popup && this.layer.map.removePopup(this.popup), null != this.layer && null != this.marker && this.layer.removeMarker(this.marker), this.data = this.lonlat = this.id = this.layer = null, null != this.marker && (this.destroyMarker(this.marker), this.marker = null), null != this.popup && (this.destroyPopup(this.popup), this.popup = null)
                        },
                        onScreen: function () {
                            var e = !1;
                            return null != this.layer && null != this.layer.map && (e = this.layer.map.getExtent().containsLonLat(this.lonlat)), e
                        },
                        createMarker: function () {
                            return null != this.lonlat && (this.marker = new OpenLayers.Marker(this.lonlat, this.data.icon)), this.marker
                        },
                        destroyMarker: function () {
                            this.marker.destroy()
                        },
                        createPopup: function (e) {
                            return null != this.lonlat && (this.popup || (this.popup = new(this.popupClass ? this.popupClass : OpenLayers.Popup.Anchored)(this.id + "_popup", this.lonlat, this.data.popupSize, this.data.popupContentHTML, this.marker ? this.marker.icon : null, e)), null != this.data.overflow && (this.popup.contentDiv.style.overflow = this.data.overflow), this.popup.feature = this), this.popup
                        },
                        destroyPopup: function () {
                            this.popup && (this.popup.feature = null, this.popup.destroy(), this.popup = null)
                        },
                        CLASS_NAME: "OpenLayers.Feature"
                    }), OpenLayers.State = {
                        UNKNOWN: "Unknown",
                        INSERT: "Insert",
                        UPDATE: "Update",
                        DELETE: "Delete"
                    }, OpenLayers.Feature.Vector = OpenLayers.Class(OpenLayers.Feature, {
                        fid: null,
                        geometry: null,
                        attributes: null,
                        bounds: null,
                        state: null,
                        style: null,
                        url: null,
                        renderIntent: "default",
                        modified: null,
                        initialize: function (e, t, i) {
                            OpenLayers.Feature.prototype.initialize.apply(this, [null, null, t]), this.lonlat = null, this.geometry = e || null, this.state = null, this.attributes = {}, t && (this.attributes = OpenLayers.Util.extend(this.attributes, t)), this.style = i || null
                        },
                        destroy: function () {
                            this.layer && (this.layer.removeFeatures(this), this.layer = null), this.modified = this.geometry = null, OpenLayers.Feature.prototype.destroy.apply(this, arguments)
                        },
                        clone: function () {
                            return new OpenLayers.Feature.Vector(this.geometry ? this.geometry.clone() : null, this.attributes, this.style)
                        },
                        onScreen: function (e) {
                            var t = !1;
                            return this.layer && this.layer.map && (t = this.layer.map.getExtent(), e ? (e = this.geometry.getBounds(), t = t.intersectsBounds(e)) : t = t.toGeometry().intersects(this.geometry)), t
                        },
                        getVisibility: function () {
                            return !(this.style && "none" == this.style.display || !this.layer || this.layer && this.layer.styleMap && "none" == this.layer.styleMap.createSymbolizer(this, this.renderIntent).display || this.layer && !this.layer.getVisibility())
                        },
                        createMarker: function () {
                            return null
                        },
                        destroyMarker: function () {},
                        createPopup: function () {
                            return null
                        },
                        atPoint: function (e, t, i) {
                            var s = !1;
                            return this.geometry && (s = this.geometry.atPoint(e, t, i)), s
                        },
                        destroyPopup: function () {},
                        move: function (e) {
                            if (this.layer && this.geometry.move) {
                                e = "OpenLayers.LonLat" == e.CLASS_NAME ? this.layer.getViewPortPxFromLonLat(e) : e;
                                var t = this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),
                                    i = this.layer.map.getResolution();
                                return this.geometry.move(i * (e.x - t.x), i * (t.y - e.y)), this.layer.drawFeature(this), t
                            }
                        },
                        toState: function (e) {
                            if (e == OpenLayers.State.UPDATE) switch (this.state) {
                                case OpenLayers.State.UNKNOWN:
                                case OpenLayers.State.DELETE:
                                    this.state = e
                            } else if (e == OpenLayers.State.INSERT) switch (this.state) {
                                case OpenLayers.State.UNKNOWN:
                                    break;
                                default:
                                    this.state = e
                            } else if (e == OpenLayers.State.DELETE) switch (this.state) {
                                case OpenLayers.State.UNKNOWN:
                                case OpenLayers.State.UPDATE:
                                    this.state = e
                            } else e == OpenLayers.State.UNKNOWN && (this.state = e)
                        },
                        CLASS_NAME: "OpenLayers.Feature.Vector"
                    }), OpenLayers.Feature.Vector.style = {
                        default: {
                            fillColor: "#ee9900",
                            fillOpacity: .4,
                            hoverFillColor: "white",
                            hoverFillOpacity: .8,
                            strokeColor: "#ee9900",
                            strokeOpacity: 1,
                            strokeWidth: 1,
                            strokeLinecap: "round",
                            strokeDashstyle: "solid",
                            hoverStrokeColor: "red",
                            hoverStrokeOpacity: 1,
                            hoverStrokeWidth: .2,
                            pointRadius: 6,
                            hoverPointRadius: 1,
                            hoverPointUnit: "%",
                            pointerEvents: "visiblePainted",
                            cursor: "inherit",
                            fontColor: "#000000",
                            labelAlign: "cm",
                            labelOutlineColor: "white",
                            labelOutlineWidth: 3
                        },
                        select: {
                            fillColor: "blue",
                            fillOpacity: .4,
                            hoverFillColor: "white",
                            hoverFillOpacity: .8,
                            strokeColor: "blue",
                            strokeOpacity: 1,
                            strokeWidth: 2,
                            strokeLinecap: "round",
                            strokeDashstyle: "solid",
                            hoverStrokeColor: "red",
                            hoverStrokeOpacity: 1,
                            hoverStrokeWidth: .2,
                            pointRadius: 6,
                            hoverPointRadius: 1,
                            hoverPointUnit: "%",
                            pointerEvents: "visiblePainted",
                            cursor: "pointer",
                            fontColor: "#000000",
                            labelAlign: "cm",
                            labelOutlineColor: "white",
                            labelOutlineWidth: 3
                        },
                        temporary: {
                            fillColor: "#66cccc",
                            fillOpacity: .2,
                            hoverFillColor: "white",
                            hoverFillOpacity: .8,
                            strokeColor: "#66cccc",
                            strokeOpacity: 1,
                            strokeLinecap: "round",
                            strokeWidth: 2,
                            strokeDashstyle: "solid",
                            hoverStrokeColor: "red",
                            hoverStrokeOpacity: 1,
                            hoverStrokeWidth: .2,
                            pointRadius: 6,
                            hoverPointRadius: 1,
                            hoverPointUnit: "%",
                            pointerEvents: "visiblePainted",
                            cursor: "inherit",
                            fontColor: "#000000",
                            labelAlign: "cm",
                            labelOutlineColor: "white",
                            labelOutlineWidth: 3
                        },
                        delete: {
                            display: "none"
                        }
                    }, OpenLayers.Style = OpenLayers.Class({
                        id: null,
                        name: null,
                        title: null,
                        description: null,
                        layerName: null,
                        isDefault: !1,
                        rules: null,
                        context: null,
                        defaultStyle: null,
                        defaultsPerSymbolizer: !1,
                        propertyStyles: null,
                        initialize: function (e, t) {
                            OpenLayers.Util.extend(this, t), this.rules = [], t && t.rules && this.addRules(t.rules), this.setDefaultStyle(e || OpenLayers.Feature.Vector.style.default), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")
                        },
                        destroy: function () {
                            for (var e = 0, t = this.rules.length; e < t; e++) this.rules[e].destroy(), this.rules[e] = null;
                            this.defaultStyle = this.rules = null
                        },
                        createSymbolizer: function (e) {
                            for (var t, i = this.defaultsPerSymbolizer ? {} : this.createLiterals(OpenLayers.Util.extend({}, this.defaultStyle), e), s = this.rules, r = [], n = !1, a = 0, o = s.length; a < o; a++)(t = s[a]).evaluate(e) && (t instanceof OpenLayers.Rule && t.elseFilter ? r.push(t) : (n = !0, this.applySymbolizer(t, i, e)));
                            if (0 == n && 0 < r.length)
                                for (n = !0, a = 0, o = r.length; a < o; a++) this.applySymbolizer(r[a], i, e);
                            return 0 < s.length && 0 == n && (i.display = "none"), null != i.label && "string" != typeof i.label && (i.label = String(i.label)), i
                        },
                        applySymbolizer: function (e, t, i) {
                            var s = i.geometry ? this.getSymbolizerPrefix(i.geometry) : OpenLayers.Style.SYMBOLIZER_PREFIXES[0];
                            return e = e.symbolizer[s] || e.symbolizer, !0 === this.defaultsPerSymbolizer && (s = this.defaultStyle, OpenLayers.Util.applyDefaults(e, {
                                pointRadius: s.pointRadius
                            }), !0 !== e.stroke && !0 !== e.graphic || OpenLayers.Util.applyDefaults(e, {
                                strokeWidth: s.strokeWidth,
                                strokeColor: s.strokeColor,
                                strokeOpacity: s.strokeOpacity,
                                strokeDashstyle: s.strokeDashstyle,
                                strokeLinecap: s.strokeLinecap
                            }), !0 !== e.fill && !0 !== e.graphic || OpenLayers.Util.applyDefaults(e, {
                                fillColor: s.fillColor,
                                fillOpacity: s.fillOpacity
                            }), !0 === e.graphic && OpenLayers.Util.applyDefaults(e, {
                                pointRadius: this.defaultStyle.pointRadius,
                                externalGraphic: this.defaultStyle.externalGraphic,
                                graphicName: this.defaultStyle.graphicName,
                                graphicOpacity: this.defaultStyle.graphicOpacity,
                                graphicWidth: this.defaultStyle.graphicWidth,
                                graphicHeight: this.defaultStyle.graphicHeight,
                                graphicXOffset: this.defaultStyle.graphicXOffset,
                                graphicYOffset: this.defaultStyle.graphicYOffset
                            })), this.createLiterals(OpenLayers.Util.extend(t, e), i)
                        },
                        createLiterals: function (e, t) {
                            var i = OpenLayers.Util.extend({}, t.attributes || t.data);
                            for (var s in OpenLayers.Util.extend(i, this.context), this.propertyStyles) e[s] = OpenLayers.Style.createLiteral(e[s], i, t, s);
                            return e
                        },
                        findPropertyStyles: function () {
                            var e = {};
                            this.addPropertyStyles(e, this.defaultStyle);
                            for (var t, i, s = this.rules, r = 0, n = s.length; r < n; r++)
                                for (var a in t = s[r].symbolizer) {
                                    if ("object" != typeof (i = t[a])) {
                                        this.addPropertyStyles(e, t);
                                        break
                                    }
                                    this.addPropertyStyles(e, i)
                                }
                            return e
                        },
                        addPropertyStyles: function (e, t) {
                            var i, s;
                            for (s in t) "string" == typeof (i = t[s]) && i.match(/\$\{\w+\}/) && (e[s] = !0);
                            return e
                        },
                        addRules: function (e) {
                            Array.prototype.push.apply(this.rules, e), this.propertyStyles = this.findPropertyStyles()
                        },
                        setDefaultStyle: function (e) {
                            this.defaultStyle = e, this.propertyStyles = this.findPropertyStyles()
                        },
                        getSymbolizerPrefix: function (e) {
                            for (var t = OpenLayers.Style.SYMBOLIZER_PREFIXES, i = 0, s = t.length; i < s; i++)
                                if (-1 != e.CLASS_NAME.indexOf(t[i])) return t[i]
                        },
                        clone: function () {
                            var e = OpenLayers.Util.extend({}, this);
                            if (this.rules) {
                                e.rules = [];
                                for (var t = 0, i = this.rules.length; t < i; ++t) e.rules.push(this.rules[t].clone())
                            }
                            return e.context = this.context && OpenLayers.Util.extend({}, this.context), t = OpenLayers.Util.extend({}, this.defaultStyle), new OpenLayers.Style(t, e)
                        },
                        CLASS_NAME: "OpenLayers.Style"
                    }), OpenLayers.Style.createLiteral = function (e, t, i, s) {
                        return "string" == typeof e && -1 != e.indexOf("${") && (e = OpenLayers.String.format(e, t, [i, s]), e = isNaN(e) || !e ? e : parseFloat(e)), e
                    }, OpenLayers.Style.SYMBOLIZER_PREFIXES = ["Point", "Line", "Polygon", "Text", "Raster"], OpenLayers.Filter = OpenLayers.Class({
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e)
                        },
                        destroy: function () {},
                        evaluate: function (e) {
                            return !0
                        },
                        clone: function () {
                            return null
                        },
                        toString: function () {
                            return OpenLayers.Format && OpenLayers.Format.CQL ? OpenLayers.Format.CQL.prototype.write(this) : Object.prototype.toString.call(this)
                        },
                        CLASS_NAME: "OpenLayers.Filter"
                    }), OpenLayers.Filter.Spatial = OpenLayers.Class(OpenLayers.Filter, {
                        type: null,
                        property: null,
                        value: null,
                        distance: null,
                        distanceUnits: null,
                        evaluate: function (e) {
                            var t = !1;
                            switch (this.type) {
                                case OpenLayers.Filter.Spatial.BBOX:
                                case OpenLayers.Filter.Spatial.INTERSECTS:
                                    if (e.geometry) {
                                        var i = this.value;
                                        "OpenLayers.Bounds" == this.value.CLASS_NAME && (i = this.value.toGeometry()), e.geometry.intersects(i) && (t = !0)
                                    }
                                    break;
                                default:
                                    throw Error("evaluate is not implemented for this filter type.")
                            }
                            return t
                        },
                        clone: function () {
                            var e = OpenLayers.Util.applyDefaults({
                                value: this.value && this.value.clone && this.value.clone()
                            }, this);
                            return new OpenLayers.Filter.Spatial(e)
                        },
                        CLASS_NAME: "OpenLayers.Filter.Spatial"
                    }), OpenLayers.Filter.Spatial.BBOX = "BBOX", OpenLayers.Filter.Spatial.INTERSECTS = "INTERSECTS", OpenLayers.Filter.Spatial.DWITHIN = "DWITHIN", OpenLayers.Filter.Spatial.WITHIN = "WITHIN", OpenLayers.Filter.Spatial.CONTAINS = "CONTAINS", OpenLayers.Filter.FeatureId = OpenLayers.Class(OpenLayers.Filter, {
                        fids: null,
                        type: "FID",
                        initialize: function (e) {
                            this.fids = [], OpenLayers.Filter.prototype.initialize.apply(this, [e])
                        },
                        evaluate: function (e) {
                            for (var t = 0, i = this.fids.length; t < i; t++)
                                if ((e.fid || e.id) == this.fids[t]) return !0;
                            return !1
                        },
                        clone: function () {
                            var e = new OpenLayers.Filter.FeatureId;
                            return OpenLayers.Util.extend(e, this), e.fids = this.fids.slice(), e
                        },
                        CLASS_NAME: "OpenLayers.Filter.FeatureId"
                    }), OpenLayers.Format.WFST.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance",
                            wfs: "http://www.opengis.net/wfs",
                            gml: "http://www.opengis.net/gml",
                            ogc: "http://www.opengis.net/ogc",
                            ows: "http://www.opengis.net/ows"
                        },
                        defaultPrefix: "wfs",
                        version: null,
                        schemaLocations: null,
                        srsName: null,
                        extractAttributes: !0,
                        xy: !0,
                        stateName: null,
                        initialize: function (e) {
                            this.stateName = {}, this.stateName[OpenLayers.State.INSERT] = "wfs:Insert", this.stateName[OpenLayers.State.UPDATE] = "wfs:Update", this.stateName[OpenLayers.State.DELETE] = "wfs:Delete", OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        getSrsName: function (e, t) {
                            var i = t && t.srsName;
                            return i || (i = e && e.layer ? e.layer.projection.getCode() : this.srsName), i
                        },
                        read: function (e, t) {
                            t = t || {}, OpenLayers.Util.applyDefaults(t, {
                                output: "features"
                            }), "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var i = {};
                            return e && this.readNode(e, i, !0), i.features && "features" === t.output && (i = i.features), i
                        },
                        readers: {
                            wfs: {
                                FeatureCollection: function (e, t) {
                                    t.features = [], this.readChildNodes(e, t)
                                }
                            }
                        },
                        write: function (e, t) {
                            var i = this.writeNode("wfs:Transaction", {
                                    features: e,
                                    options: t
                                }),
                                s = this.schemaLocationAttr();
                            return s && this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", s), OpenLayers.Format.XML.prototype.write.apply(this, [i])
                        },
                        writers: {
                            wfs: {
                                GetFeature: function (e) {
                                    var t = this.createElementNSPlus("wfs:GetFeature", {
                                        attributes: {
                                            service: "WFS",
                                            version: this.version,
                                            handle: e && e.handle,
                                            outputFormat: e && e.outputFormat,
                                            maxFeatures: e && e.maxFeatures,
                                            "xsi:schemaLocation": this.schemaLocationAttr(e)
                                        }
                                    });
                                    if ("string" == typeof this.featureType) this.writeNode("Query", e, t);
                                    else
                                        for (var i = 0, s = this.featureType.length; i < s; i++) e.featureType = this.featureType[i], this.writeNode("Query", e, t);
                                    return t
                                },
                                Transaction: function (e) {
                                    var t, i = (e = e || {}).options || {},
                                        s = this.createElementNSPlus("wfs:Transaction", {
                                            attributes: {
                                                service: "WFS",
                                                version: this.version,
                                                handle: i.handle
                                            }
                                        }),
                                        r = e.features;
                                    if (r) {
                                        var n, a;
                                        for (!0 === i.multi && OpenLayers.Util.extend(this.geometryTypes, {
                                                "OpenLayers.Geometry.Point": "MultiPoint",
                                                "OpenLayers.Geometry.LineString": !0 === this.multiCurve ? "MultiCurve" : "MultiLineString",
                                                "OpenLayers.Geometry.Polygon": !0 === this.multiSurface ? "MultiSurface" : "MultiPolygon"
                                            }), e = 0, t = r.length; e < t; ++e) a = r[e], (n = this.stateName[a.state]) && this.writeNode(n, {
                                            feature: a,
                                            options: i
                                        }, s);
                                        !0 === i.multi && this.setGeometryTypes()
                                    }
                                    if (i.nativeElements)
                                        for (e = 0, t = i.nativeElements.length; e < t; ++e) this.writeNode("wfs:Native", i.nativeElements[e], s);
                                    return s
                                },
                                Native: function (e) {
                                    return this.createElementNSPlus("wfs:Native", {
                                        attributes: {
                                            vendorId: e.vendorId,
                                            safeToIgnore: e.safeToIgnore
                                        },
                                        value: e.value
                                    })
                                },
                                Insert: function (e) {
                                    var t = e.feature;
                                    return e = e.options, e = this.createElementNSPlus("wfs:Insert", {
                                        attributes: {
                                            handle: e && e.handle
                                        }
                                    }), this.srsName = this.getSrsName(t), this.writeNode("feature:_typeName", t, e), e
                                },
                                Update: function (e) {
                                    var t = e.feature;
                                    e = e.options, e = this.createElementNSPlus("wfs:Update", {
                                        attributes: {
                                            handle: e && e.handle,
                                            typeName: (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                                        }
                                    }), this.featureNS && e.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
                                    var i = t.modified;
                                    for (var s in null === this.geometryName || i && void 0 === i.geometry || (this.srsName = this.getSrsName(t), this.writeNode("Property", {
                                            name: this.geometryName,
                                            value: t.geometry
                                        }, e)), t.attributes) void 0 === t.attributes[s] || i && i.attributes && (!i.attributes || void 0 === i.attributes[s]) || this.writeNode("Property", {
                                        name: s,
                                        value: t.attributes[s]
                                    }, e);
                                    return this.writeNode("ogc:Filter", new OpenLayers.Filter.FeatureId({
                                        fids: [t.fid]
                                    }), e), e
                                },
                                Property: function (e) {
                                    var t = this.createElementNSPlus("wfs:Property");
                                    return this.writeNode("Name", e.name, t), null !== e.value && this.writeNode("Value", e.value, t), t
                                },
                                Name: function (e) {
                                    return this.createElementNSPlus("wfs:Name", {
                                        value: e
                                    })
                                },
                                Value: function (e) {
                                    var t;
                                    return e instanceof OpenLayers.Geometry ? (t = this.createElementNSPlus("wfs:Value"), e = this.writeNode("feature:_geometry", e).firstChild, t.appendChild(e)) : t = this.createElementNSPlus("wfs:Value", {
                                        value: e
                                    }), t
                                },
                                Delete: function (e) {
                                    var t = e.feature;
                                    return e = e.options, e = this.createElementNSPlus("wfs:Delete", {
                                        attributes: {
                                            handle: e && e.handle,
                                            typeName: (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                                        }
                                    }), this.featureNS && e.setAttribute("xmlns:" + this.featurePrefix, this.featureNS), this.writeNode("ogc:Filter", new OpenLayers.Filter.FeatureId({
                                        fids: [t.fid]
                                    }), e), e
                                }
                            }
                        },
                        schemaLocationAttr: function (e) {
                            e = OpenLayers.Util.extend({
                                featurePrefix: this.featurePrefix,
                                schema: this.schema
                            }, e);
                            var t, i, s = OpenLayers.Util.extend({}, this.schemaLocations);
                            for (i in e.schema && (s[e.featurePrefix] = e.schema), e = [], s)(t = this.namespaces[i]) && e.push(t + " " + s[i]);
                            return e.join(" ") || void 0
                        },
                        setFilterProperty: function (e) {
                            if (e.filters)
                                for (var t = 0, i = e.filters.length; t < i; ++t) OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this, e.filters[t]);
                            else e instanceof OpenLayers.Filter.Spatial && !e.property && (e.property = this.geometryName)
                        },
                        CLASS_NAME: "OpenLayers.Format.WFST.v1"
                    }), OpenLayers.Format.OGCExceptionReport = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            ogc: "http://www.opengis.net/ogc"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        defaultPrefix: "ogc",
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = {
                                exceptionReport: null
                            };
                            return e.documentElement && (this.readChildNodes(e, t), null === t.exceptionReport && (t = (new OpenLayers.Format.OWSCommon).read(e))), t
                        },
                        readers: {
                            ogc: {
                                ServiceExceptionReport: function (e, t) {
                                    t.exceptionReport = {
                                        exceptions: []
                                    }, this.readChildNodes(e, t.exceptionReport)
                                },
                                ServiceException: function (e, t) {
                                    var i = {
                                        code: e.getAttribute("code"),
                                        locator: e.getAttribute("locator"),
                                        text: this.getChildValue(e)
                                    };
                                    t.exceptions.push(i)
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.OGCExceptionReport"
                    }), OpenLayers.Format.XML.VersionedOGC = OpenLayers.Class(OpenLayers.Format.XML, {
                        defaultVersion: null,
                        version: null,
                        profile: null,
                        allowFallback: !1,
                        name: null,
                        stringifyOutput: !1,
                        parser: null,
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e]), e = this.CLASS_NAME, this.name = e.substring(e.lastIndexOf(".") + 1)
                        },
                        getVersion: function (e, t) {
                            var i;
                            return e ? (i = this.version) || ((i = e.getAttribute("version")) || (i = this.defaultVersion)) : i = t && t.version || this.version || this.defaultVersion, i
                        },
                        getParser: function (e) {
                            e = e || this.defaultVersion;
                            var t = this.profile ? "_" + this.profile : "";
                            if (!this.parser || this.parser.VERSION != e) {
                                var i = OpenLayers.Format[this.name]["v" + e.replace(/\./g, "_") + t];
                                if (!i && ("" !== t && this.allowFallback && (t = "", i = OpenLayers.Format[this.name]["v" + e.replace(/\./g, "_")]), !i)) throw "Can't find a " + this.name + " parser for version " + e + t;
                                this.parser = new i(this.options)
                            }
                            return this.parser
                        },
                        write: function (e, t) {
                            var i = this.getVersion(null, t);
                            return this.parser = this.getParser(i), i = this.parser.write(e, t), !1 === this.stringifyOutput ? i : OpenLayers.Format.XML.prototype.write.apply(this, [i])
                        },
                        read: function (e, t) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var i = this.getVersion(e.documentElement);
                            this.parser = this.getParser(i);
                            var s = this.parser.read(e, t),
                                r = this.parser.errorProperty || null;
                            return null !== r && void 0 === s[r] && (r = new OpenLayers.Format.OGCExceptionReport, s.error = r.read(e)), s.version = i, s
                        },
                        CLASS_NAME: "OpenLayers.Format.XML.VersionedOGC"
                    }), OpenLayers.Filter.Logical = OpenLayers.Class(OpenLayers.Filter, {
                        filters: null,
                        type: null,
                        initialize: function (e) {
                            this.filters = [], OpenLayers.Filter.prototype.initialize.apply(this, [e])
                        },
                        destroy: function () {
                            this.filters = null, OpenLayers.Filter.prototype.destroy.apply(this)
                        },
                        evaluate: function (e) {
                            var t, i;
                            switch (this.type) {
                                case OpenLayers.Filter.Logical.AND:
                                    for (t = 0, i = this.filters.length; t < i; t++)
                                        if (0 == this.filters[t].evaluate(e)) return !1;
                                    return !0;
                                case OpenLayers.Filter.Logical.OR:
                                    for (t = 0, i = this.filters.length; t < i; t++)
                                        if (1 == this.filters[t].evaluate(e)) return !0;
                                    return !1;
                                case OpenLayers.Filter.Logical.NOT:
                                    return !this.filters[0].evaluate(e)
                            }
                        },
                        clone: function () {
                            for (var e = [], t = 0, i = this.filters.length; t < i; ++t) e.push(this.filters[t].clone());
                            return new OpenLayers.Filter.Logical({
                                type: this.type,
                                filters: e
                            })
                        },
                        CLASS_NAME: "OpenLayers.Filter.Logical"
                    }), OpenLayers.Filter.Logical.AND = "&&", OpenLayers.Filter.Logical.OR = "||", OpenLayers.Filter.Logical.NOT = "!", OpenLayers.Filter.Comparison = OpenLayers.Class(OpenLayers.Filter, {
                        type: null,
                        property: null,
                        value: null,
                        matchCase: !0,
                        lowerBoundary: null,
                        upperBoundary: null,
                        initialize: function (e) {
                            OpenLayers.Filter.prototype.initialize.apply(this, [e]), this.type === OpenLayers.Filter.Comparison.LIKE && void 0 === e.matchCase && (this.matchCase = null)
                        },
                        evaluate: function (e) {
                            e instanceof OpenLayers.Feature.Vector && (e = e.attributes);
                            var t = !1;
                            switch (e = e[this.property], this.type) {
                                case OpenLayers.Filter.Comparison.EQUAL_TO:
                                    t = this.value, t = this.matchCase || "string" != typeof e || "string" != typeof t ? e == t : e.toUpperCase() == t.toUpperCase();
                                    break;
                                case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:
                                    t = this.value, t = this.matchCase || "string" != typeof e || "string" != typeof t ? e != t : e.toUpperCase() != t.toUpperCase();
                                    break;
                                case OpenLayers.Filter.Comparison.LESS_THAN:
                                    t = e < this.value;
                                    break;
                                case OpenLayers.Filter.Comparison.GREATER_THAN:
                                    t = e > this.value;
                                    break;
                                case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:
                                    t = e <= this.value;
                                    break;
                                case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:
                                    t = e >= this.value;
                                    break;
                                case OpenLayers.Filter.Comparison.BETWEEN:
                                    t = e >= this.lowerBoundary && e <= this.upperBoundary;
                                    break;
                                case OpenLayers.Filter.Comparison.LIKE:
                                    t = RegExp(this.value, "gi").test(e);
                                    break;
                                case OpenLayers.Filter.Comparison.IS_NULL:
                                    t = null === e
                            }
                            return t
                        },
                        value2regex: function (e, t, i) {
                            if ("." == e) throw Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");
                            return e = e || "*", t = t || ".", this.value = this.value.replace(RegExp("\\" + (i || "!") + "(.|$)", "g"), "\\$1"), this.value = this.value.replace(RegExp("\\" + t, "g"), "."), this.value = this.value.replace(RegExp("\\" + e, "g"), ".*"), this.value = this.value.replace(RegExp("\\\\.\\*", "g"), "\\" + e), this.value = this.value.replace(RegExp("\\\\\\.", "g"), "\\" + t)
                        },
                        regex2value: function () {
                            return this.value.replace(/!/g, "!!").replace(/(\\)?\\\./g, (function (e, t) {
                                return t ? e : "!."
                            })).replace(/(\\)?\\\*/g, (function (e, t) {
                                return t ? e : "!*"
                            })).replace(/\\\\/g, "\\").replace(/\.\*/g, "*")
                        },
                        clone: function () {
                            return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison, this)
                        },
                        CLASS_NAME: "OpenLayers.Filter.Comparison"
                    }), OpenLayers.Filter.Comparison.EQUAL_TO = "==", OpenLayers.Filter.Comparison.NOT_EQUAL_TO = "!=", OpenLayers.Filter.Comparison.LESS_THAN = "<", OpenLayers.Filter.Comparison.GREATER_THAN = ">", OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO = "<=", OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = ">=", OpenLayers.Filter.Comparison.BETWEEN = "..", OpenLayers.Filter.Comparison.LIKE = "~", OpenLayers.Filter.Comparison.IS_NULL = "NULL", OpenLayers.Format.Filter = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.0.0",
                        CLASS_NAME: "OpenLayers.Format.Filter"
                    }), OpenLayers.Filter.Function = OpenLayers.Class(OpenLayers.Filter, {
                        name: null,
                        params: null,
                        CLASS_NAME: "OpenLayers.Filter.Function"
                    }), OpenLayers.Date = {
                        dateRegEx: /^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,
                        toISOString: "toISOString" in Date.prototype ? function (e) {
                            return e.toISOString()
                        } : function (e) {
                            return isNaN(e.getTime()) ? "Invalid Date" : e.getUTCFullYear() + "-" + OpenLayers.Number.zeroPad(e.getUTCMonth() + 1, 2) + "-" + OpenLayers.Number.zeroPad(e.getUTCDate(), 2) + "T" + OpenLayers.Number.zeroPad(e.getUTCHours(), 2) + ":" + OpenLayers.Number.zeroPad(e.getUTCMinutes(), 2) + ":" + OpenLayers.Number.zeroPad(e.getUTCSeconds(), 2) + "." + OpenLayers.Number.zeroPad(e.getUTCMilliseconds(), 3) + "Z"
                        },
                        parse: function (e) {
                            var t;
                            if ((e = e.match(this.dateRegEx)) && (e[1] || e[7])) {
                                t = parseInt(e[1], 10) || 0;
                                var i = parseInt(e[2], 10) - 1 || 0,
                                    s = parseInt(e[3], 10) || 1;
                                if (t = new Date(Date.UTC(t, i, s)), i = e[7]) {
                                    s = parseInt(e[4], 10);
                                    var r = parseInt(e[5], 10),
                                        n = 0 | (a = parseFloat(e[6])),
                                        a = Math.round(1e3 * (a - n));
                                    t.setUTCHours(s, r, n, a), "Z" !== i && (e = -1e3 * (3600 * (i = parseInt(i, 10)) + 60 * (e = parseInt(e[8], 10) || 0)), t = new Date(t.getTime() + e))
                                }
                            } else t = new Date("invalid");
                            return t
                        }
                    }, OpenLayers.Format.Filter.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            ogc: "http://www.opengis.net/ogc",
                            gml: "http://www.opengis.net/gml",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        defaultPrefix: "ogc",
                        schemaLocation: null,
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            var t = {};
                            return this.readers.ogc.Filter.apply(this, [e, t]), t.filter
                        },
                        readers: {
                            ogc: {
                                _expression: function (e) {
                                    for (var t = "", i = e.firstChild; i; i = i.nextSibling) switch (i.nodeType) {
                                        case 1:
                                            (e = this.readNode(i)).property ? t += "${" + e.property + "}" : void 0 !== e.value && (t += e.value);
                                            break;
                                        case 3:
                                        case 4:
                                            t += i.nodeValue
                                    }
                                    return t
                                },
                                Filter: function (e, t) {
                                    var i = {
                                        fids: [],
                                        filters: []
                                    };
                                    this.readChildNodes(e, i), 0 < i.fids.length ? t.filter = new OpenLayers.Filter.FeatureId({
                                        fids: i.fids
                                    }) : 0 < i.filters.length && (t.filter = i.filters[0])
                                },
                                FeatureId: function (e, t) {
                                    var i = e.getAttribute("fid");
                                    i && t.fids.push(i)
                                },
                                And: function (e, t) {
                                    var i = new OpenLayers.Filter.Logical({
                                        type: OpenLayers.Filter.Logical.AND
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                Or: function (e, t) {
                                    var i = new OpenLayers.Filter.Logical({
                                        type: OpenLayers.Filter.Logical.OR
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                Not: function (e, t) {
                                    var i = new OpenLayers.Filter.Logical({
                                        type: OpenLayers.Filter.Logical.NOT
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsLessThan: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.LESS_THAN
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsGreaterThan: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.GREATER_THAN
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsLessThanOrEqualTo: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsGreaterThanOrEqualTo: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsBetween: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.BETWEEN
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                Literal: function (e, t) {
                                    t.value = OpenLayers.String.numericIf(this.getChildValue(e), !0)
                                },
                                PropertyName: function (e, t) {
                                    t.property = this.getChildValue(e)
                                },
                                LowerBoundary: function (e, t) {
                                    t.lowerBoundary = OpenLayers.String.numericIf(this.readers.ogc._expression.call(this, e), !0)
                                },
                                UpperBoundary: function (e, t) {
                                    t.upperBoundary = OpenLayers.String.numericIf(this.readers.ogc._expression.call(this, e), !0)
                                },
                                Intersects: function (e, t) {
                                    this.readSpatial(e, t, OpenLayers.Filter.Spatial.INTERSECTS)
                                },
                                Within: function (e, t) {
                                    this.readSpatial(e, t, OpenLayers.Filter.Spatial.WITHIN)
                                },
                                Contains: function (e, t) {
                                    this.readSpatial(e, t, OpenLayers.Filter.Spatial.CONTAINS)
                                },
                                DWithin: function (e, t) {
                                    this.readSpatial(e, t, OpenLayers.Filter.Spatial.DWITHIN)
                                },
                                Distance: function (e, t) {
                                    t.distance = parseInt(this.getChildValue(e)), t.distanceUnits = e.getAttribute("units")
                                },
                                Function: function (e, t) {},
                                PropertyIsNull: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.IS_NULL
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                }
                            }
                        },
                        readSpatial: function (e, t, i) {
                            i = new OpenLayers.Filter.Spatial({
                                type: i
                            }), this.readChildNodes(e, i), i.value = i.components[0], delete i.components, t.filters.push(i)
                        },
                        encodeLiteral: function (e) {
                            return e instanceof Date && (e = OpenLayers.Date.toISOString(e)), e
                        },
                        writeOgcExpression: function (e, t) {
                            return e instanceof OpenLayers.Filter.Function ? this.writeNode("Function", e, t) : this.writeNode("Literal", e, t), t
                        },
                        write: function (e) {
                            return this.writers.ogc.Filter.apply(this, [e])
                        },
                        writers: {
                            ogc: {
                                Filter: function (e) {
                                    var t = this.createElementNSPlus("ogc:Filter");
                                    return this.writeNode(this.getFilterType(e), e, t), t
                                },
                                _featureIds: function (e) {
                                    for (var t = this.createDocumentFragment(), i = 0, s = e.fids.length; i < s; ++i) this.writeNode("ogc:FeatureId", e.fids[i], t);
                                    return t
                                },
                                FeatureId: function (e) {
                                    return this.createElementNSPlus("ogc:FeatureId", {
                                        attributes: {
                                            fid: e
                                        }
                                    })
                                },
                                And: function (e) {
                                    for (var t, i = this.createElementNSPlus("ogc:And"), s = 0, r = e.filters.length; s < r; ++s) t = e.filters[s], this.writeNode(this.getFilterType(t), t, i);
                                    return i
                                },
                                Or: function (e) {
                                    for (var t, i = this.createElementNSPlus("ogc:Or"), s = 0, r = e.filters.length; s < r; ++s) t = e.filters[s], this.writeNode(this.getFilterType(t), t, i);
                                    return i
                                },
                                Not: function (e) {
                                    var t = this.createElementNSPlus("ogc:Not");
                                    return e = e.filters[0], this.writeNode(this.getFilterType(e), e, t), t
                                },
                                PropertyIsLessThan: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsLessThan");
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsGreaterThan: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsGreaterThan");
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsLessThanOrEqualTo: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsGreaterThanOrEqualTo: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsBetween: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsBetween");
                                    return this.writeNode("PropertyName", e, t), this.writeNode("LowerBoundary", e, t), this.writeNode("UpperBoundary", e, t), t
                                },
                                PropertyName: function (e) {
                                    return this.createElementNSPlus("ogc:PropertyName", {
                                        value: e.property
                                    })
                                },
                                Literal: function (e) {
                                    return this.createElementNSPlus("ogc:Literal", {
                                        value: (this.encodeLiteral || OpenLayers.Format.Filter.v1.prototype.encodeLiteral)(e)
                                    })
                                },
                                LowerBoundary: function (e) {
                                    var t = this.createElementNSPlus("ogc:LowerBoundary");
                                    return this.writeOgcExpression(e.lowerBoundary, t), t
                                },
                                UpperBoundary: function (e) {
                                    var t = this.createElementNSPlus("ogc:UpperBoundary");
                                    return this.writeNode("Literal", e.upperBoundary, t), t
                                },
                                INTERSECTS: function (e) {
                                    return this.writeSpatial(e, "Intersects")
                                },
                                WITHIN: function (e) {
                                    return this.writeSpatial(e, "Within")
                                },
                                CONTAINS: function (e) {
                                    return this.writeSpatial(e, "Contains")
                                },
                                DWITHIN: function (e) {
                                    var t = this.writeSpatial(e, "DWithin");
                                    return this.writeNode("Distance", e, t), t
                                },
                                Distance: function (e) {
                                    return this.createElementNSPlus("ogc:Distance", {
                                        attributes: {
                                            units: e.distanceUnits
                                        },
                                        value: e.distance
                                    })
                                },
                                Function: function (e) {
                                    for (var t = this.createElementNSPlus("ogc:Function", {
                                            attributes: {
                                                name: e.name
                                            }
                                        }), i = 0, s = (e = e.params).length; i < s; i++) this.writeOgcExpression(e[i], t);
                                    return t
                                },
                                PropertyIsNull: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsNull");
                                    return this.writeNode("PropertyName", e, t), t
                                }
                            }
                        },
                        getFilterType: function (e) {
                            var t = this.filterMap[e.type];
                            if (!t) throw "Filter writing not supported for rule type: " + e.type;
                            return t
                        },
                        filterMap: {
                            "&&": "And",
                            "||": "Or",
                            "!": "Not",
                            "==": "PropertyIsEqualTo",
                            "!=": "PropertyIsNotEqualTo",
                            "<": "PropertyIsLessThan",
                            ">": "PropertyIsGreaterThan",
                            "<=": "PropertyIsLessThanOrEqualTo",
                            ">=": "PropertyIsGreaterThanOrEqualTo",
                            "..": "PropertyIsBetween",
                            "~": "PropertyIsLike",
                            NULL: "PropertyIsNull",
                            BBOX: "BBOX",
                            DWITHIN: "DWITHIN",
                            WITHIN: "WITHIN",
                            CONTAINS: "CONTAINS",
                            INTERSECTS: "INTERSECTS",
                            FID: "_featureIds"
                        },
                        CLASS_NAME: "OpenLayers.Format.Filter.v1"
                    }), OpenLayers.Geometry = OpenLayers.Class({
                        id: null,
                        parent: null,
                        bounds: null,
                        initialize: function () {
                            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")
                        },
                        destroy: function () {
                            this.bounds = this.id = null
                        },
                        clone: function () {
                            return new OpenLayers.Geometry
                        },
                        setBounds: function (e) {
                            e && (this.bounds = e.clone())
                        },
                        clearBounds: function () {
                            this.bounds = null, this.parent && this.parent.clearBounds()
                        },
                        extendBounds: function (e) {
                            this.getBounds() ? this.bounds.extend(e) : this.setBounds(e)
                        },
                        getBounds: function () {
                            return null == this.bounds && this.calculateBounds(), this.bounds
                        },
                        calculateBounds: function () {},
                        distanceTo: function (e, t) {},
                        getVertices: function (e) {},
                        atPoint: function (e, t, i) {
                            var s = !1;
                            return null != this.getBounds() && null != e && (t = null != t ? t : 0, i = null != i ? i : 0, s = new OpenLayers.Bounds(this.bounds.left - t, this.bounds.bottom - i, this.bounds.right + t, this.bounds.top + i).containsLonLat(e)), s
                        },
                        getLength: function () {
                            return 0
                        },
                        getArea: function () {
                            return 0
                        },
                        getCentroid: function () {
                            return null
                        },
                        toString: function () {
                            return OpenLayers.Format && OpenLayers.Format.WKT ? OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)) : Object.prototype.toString.call(this)
                        },
                        CLASS_NAME: "OpenLayers.Geometry"
                    }), OpenLayers.Geometry.fromWKT = function (e) {
                        var t;
                        if (OpenLayers.Format && OpenLayers.Format.WKT)
                            if ((i = OpenLayers.Geometry.fromWKT.format) || (i = new OpenLayers.Format.WKT, OpenLayers.Geometry.fromWKT.format = i), (e = i.read(e)) instanceof OpenLayers.Feature.Vector) t = e.geometry;
                            else if (OpenLayers.Util.isArray(e)) {
                            t = e.length;
                            for (var i = Array(t), s = 0; s < t; ++s) i[s] = e[s].geometry;
                            t = new OpenLayers.Geometry.Collection(i)
                        }
                        return t
                    }, OpenLayers.Geometry.segmentsIntersect = function (e, t, i) {
                        var s = i && i.point;
                        i = i && i.tolerance;
                        var r = !1,
                            n = e.x1 - t.x1,
                            a = e.y1 - t.y1,
                            o = e.x2 - e.x1,
                            l = e.y2 - e.y1,
                            h = t.y2 - t.y1,
                            p = t.x2 - t.x1,
                            u = h * o - p * l;
                        h = p * a - h * n, a = o * a - l * n;
                        if (0 == u ? 0 == h && 0 == a && (r = !0) : (n = h / u, u = a / u, 0 <= n && 1 >= n && 0 <= u && 1 >= u && (s ? (o = e.x1 + n * o, u = e.y1 + n * l, r = new OpenLayers.Geometry.Point(o, u)) : r = !0)), i)
                            if (r) {
                                if (s) e: for (e = [e, t], t = 0; 2 > t; ++t)
                                    for (n = e[t], l = 1; 3 > l; ++l)
                                        if (o = n["x" + l], u = n["y" + l], s = Math.sqrt(Math.pow(o - r.x, 2) + Math.pow(u - r.y, 2)), s < i) {
                                            r.x = o, r.y = u;
                                            break e
                                        }
                            } else e: for (e = [e, t], t = 0; 2 > t; ++t)
                                for (o = e[t], u = e[(t + 1) % 2], l = 1; 3 > l; ++l)
                                    if (n = {
                                            x: o["x" + l],
                                            y: o["y" + l]
                                        }, a = OpenLayers.Geometry.distanceToSegment(n, u), a.distance < i) {
                                        r = !s || new OpenLayers.Geometry.Point(n.x, n.y);
                                        break e
                                    } return r
                    }, OpenLayers.Geometry.distanceToSegment = function (e, t) {
                        var i = OpenLayers.Geometry.distanceSquaredToSegment(e, t);
                        return i.distance = Math.sqrt(i.distance), i
                    }, OpenLayers.Geometry.distanceSquaredToSegment = function (e, t) {
                        var i = e.x,
                            s = e.y,
                            r = t.x1,
                            n = t.y1,
                            a = t.x2,
                            o = t.y2,
                            l = a - r,
                            h = o - n,
                            p = (l * (i - r) + h * (s - n)) / (Math.pow(l, 2) + Math.pow(h, 2));
                        return 0 >= p || (1 <= p ? (r = a, n = o) : (r += p * l, n += p * h)), {
                            distance: Math.pow(r - i, 2) + Math.pow(n - s, 2),
                            x: r,
                            y: n,
                            along: p
                        }
                    }, OpenLayers.Geometry.Point = OpenLayers.Class(OpenLayers.Geometry, {
                        x: null,
                        y: null,
                        initialize: function (e, t) {
                            OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.x = parseFloat(e), this.y = parseFloat(t)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Geometry.Point(this.x, this.y)), OpenLayers.Util.applyDefaults(e, this), e
                        },
                        calculateBounds: function () {
                            this.bounds = new OpenLayers.Bounds(this.x, this.y, this.x, this.y)
                        },
                        distanceTo: function (e, t) {
                            var i, s, r, n, a, o = !(t && !1 === t.edge) && t && t.details;
                            return e instanceof OpenLayers.Geometry.Point ? (s = this.x, r = this.y, n = e.x, a = e.y, i = Math.sqrt(Math.pow(s - n, 2) + Math.pow(r - a, 2)), i = o ? {
                                x0: s,
                                y0: r,
                                x1: n,
                                y1: a,
                                distance: i
                            } : i) : (i = e.distanceTo(this, t), o && (i = {
                                x0: i.x1,
                                y0: i.y1,
                                x1: i.x0,
                                y1: i.y0,
                                distance: i.distance
                            })), i
                        },
                        equals: function (e) {
                            var t = !1;
                            return null != e && (t = this.x == e.x && this.y == e.y || isNaN(this.x) && isNaN(this.y) && isNaN(e.x) && isNaN(e.y)), t
                        },
                        toShortString: function () {
                            return this.x + ", " + this.y
                        },
                        move: function (e, t) {
                            this.x += e, this.y += t, this.clearBounds()
                        },
                        rotate: function (e, t) {
                            e *= Math.PI / 180;
                            var i = this.distanceTo(t),
                                s = e + Math.atan2(this.y - t.y, this.x - t.x);
                            this.x = t.x + i * Math.cos(s), this.y = t.y + i * Math.sin(s), this.clearBounds()
                        },
                        getCentroid: function () {
                            return new OpenLayers.Geometry.Point(this.x, this.y)
                        },
                        resize: function (e, t, i) {
                            return this.x = t.x + e * (null == i ? 1 : i) * (this.x - t.x), this.y = t.y + e * (this.y - t.y), this.clearBounds(), this
                        },
                        intersects: function (e) {
                            return "OpenLayers.Geometry.Point" == e.CLASS_NAME ? this.equals(e) : e.intersects(this)
                        },
                        transform: function (e, t) {
                            return e && t && (OpenLayers.Projection.transform(this, e, t), this.bounds = null), this
                        },
                        getVertices: function (e) {
                            return [this]
                        },
                        CLASS_NAME: "OpenLayers.Geometry.Point"
                    }), OpenLayers.Geometry.Collection = OpenLayers.Class(OpenLayers.Geometry, {
                        components: null,
                        componentTypes: null,
                        initialize: function (e) {
                            OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.components = [], null != e && this.addComponents(e)
                        },
                        destroy: function () {
                            this.components.length = 0, this.components = null, OpenLayers.Geometry.prototype.destroy.apply(this, arguments)
                        },
                        clone: function () {
                            for (var a = eval("new " + this.CLASS_NAME + "()"), b = 0, c = this.components.length; b < c; b++) a.addComponent(this.components[b].clone());
                            return OpenLayers.Util.applyDefaults(a, this), a
                        },
                        getComponentsString: function () {
                            for (var e = [], t = 0, i = this.components.length; t < i; t++) e.push(this.components[t].toShortString());
                            return e.join(",")
                        },
                        calculateBounds: function () {
                            this.bounds = null;
                            var e = new OpenLayers.Bounds,
                                t = this.components;
                            if (t)
                                for (var i = 0, s = t.length; i < s; i++) e.extend(t[i].getBounds());
                            null != e.left && null != e.bottom && null != e.right && null != e.top && this.setBounds(e)
                        },
                        addComponents: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            for (var t = 0, i = e.length; t < i; t++) this.addComponent(e[t])
                        },
                        addComponent: function (e, t) {
                            var i = !1;
                            if (e && (null == this.componentTypes || -1 < OpenLayers.Util.indexOf(this.componentTypes, e.CLASS_NAME))) {
                                if (null != t && t < this.components.length) {
                                    i = this.components.slice(0, t);
                                    var s = this.components.slice(t, this.components.length);
                                    i.push(e), this.components = i.concat(s)
                                } else this.components.push(e);
                                e.parent = this, this.clearBounds(), i = !0
                            }
                            return i
                        },
                        removeComponents: function (e) {
                            var t = !1;
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            for (var i = e.length - 1; 0 <= i; --i) t = this.removeComponent(e[i]) || t;
                            return t
                        },
                        removeComponent: function (e) {
                            return OpenLayers.Util.removeItem(this.components, e), this.clearBounds(), !0
                        },
                        getLength: function () {
                            for (var e = 0, t = 0, i = this.components.length; t < i; t++) e += this.components[t].getLength();
                            return e
                        },
                        getArea: function () {
                            for (var e = 0, t = 0, i = this.components.length; t < i; t++) e += this.components[t].getArea();
                            return e
                        },
                        getGeodesicArea: function (e) {
                            for (var t = 0, i = 0, s = this.components.length; i < s; i++) t += this.components[i].getGeodesicArea(e);
                            return t
                        },
                        getCentroid: function (e) {
                            if (!e) return this.components.length && this.components[0].getCentroid();
                            if (!(e = this.components.length)) return !1;
                            for (var t, i = [], s = [], r = 0, n = Number.MAX_VALUE, a = 0; a < e; ++a) {
                                var o = (t = this.components[a]).getArea();
                                t = t.getCentroid(!0), isNaN(o) || isNaN(t.x) || isNaN(t.y) || (i.push(o), r += o, n = o < n && 0 < o ? o : n, s.push(t))
                            }
                            if (e = i.length, 0 === r) {
                                for (a = 0; a < e; ++a) i[a] = 1;
                                r = i.length
                            } else {
                                for (a = 0; a < e; ++a) i[a] /= n;
                                r /= n
                            }
                            var l = n = 0;
                            for (a = 0; a < e; ++a) t = s[a], o = i[a], n += t.x * o, l += t.y * o;
                            return new OpenLayers.Geometry.Point(n / r, l / r)
                        },
                        getGeodesicLength: function (e) {
                            for (var t = 0, i = 0, s = this.components.length; i < s; i++) t += this.components[i].getGeodesicLength(e);
                            return t
                        },
                        move: function (e, t) {
                            for (var i = 0, s = this.components.length; i < s; i++) this.components[i].move(e, t)
                        },
                        rotate: function (e, t) {
                            for (var i = 0, s = this.components.length; i < s; ++i) this.components[i].rotate(e, t)
                        },
                        resize: function (e, t, i) {
                            for (var s = 0; s < this.components.length; ++s) this.components[s].resize(e, t, i);
                            return this
                        },
                        distanceTo: function (e, t) {
                            for (var i, s, r, n = !(t && !1 === t.edge) && t && t.details, a = Number.POSITIVE_INFINITY, o = 0, l = this.components.length; o < l && (i = this.components[o].distanceTo(e, t), !((r = n ? i.distance : i) < a && (a = r, s = i, 0 == a))); ++o);
                            return s
                        },
                        equals: function (e) {
                            var t = !0;
                            if (e && e.CLASS_NAME && this.CLASS_NAME == e.CLASS_NAME)
                                if (OpenLayers.Util.isArray(e.components) && e.components.length == this.components.length) {
                                    for (var i = 0, s = this.components.length; i < s; ++i)
                                        if (!this.components[i].equals(e.components[i])) {
                                            t = !1;
                                            break
                                        }
                                } else t = !1;
                            else t = !1;
                            return t
                        },
                        transform: function (e, t) {
                            if (e && t) {
                                for (var i = 0, s = this.components.length; i < s; i++) this.components[i].transform(e, t);
                                this.bounds = null
                            }
                            return this
                        },
                        intersects: function (e) {
                            for (var t = !1, i = 0, s = this.components.length; i < s && !(t = e.intersects(this.components[i])); ++i);
                            return t
                        },
                        getVertices: function (e) {
                            for (var t = [], i = 0, s = this.components.length; i < s; ++i) Array.prototype.push.apply(t, this.components[i].getVertices(e));
                            return t
                        },
                        CLASS_NAME: "OpenLayers.Geometry.Collection"
                    }), OpenLayers.Geometry.MultiPoint = OpenLayers.Class(OpenLayers.Geometry.Collection, {
                        componentTypes: ["OpenLayers.Geometry.Point"],
                        addPoint: function (e, t) {
                            this.addComponent(e, t)
                        },
                        removePoint: function (e) {
                            this.removeComponent(e)
                        },
                        CLASS_NAME: "OpenLayers.Geometry.MultiPoint"
                    }), OpenLayers.Geometry.Curve = OpenLayers.Class(OpenLayers.Geometry.MultiPoint, {
                        componentTypes: ["OpenLayers.Geometry.Point"],
                        getLength: function () {
                            var e = 0;
                            if (this.components && 1 < this.components.length)
                                for (var t = 1, i = this.components.length; t < i; t++) e += this.components[t - 1].distanceTo(this.components[t]);
                            return e
                        },
                        getGeodesicLength: function (e) {
                            var t = this;
                            if (e) {
                                var i = new OpenLayers.Projection("EPSG:4326");
                                i.equals(e) || (t = this.clone().transform(e, i))
                            }
                            if (e = 0, t.components && 1 < t.components.length)
                                for (var s, r = 1, n = t.components.length; r < n; r++) i = t.components[r - 1], s = t.components[r], e += OpenLayers.Util.distVincenty({
                                    lon: i.x,
                                    lat: i.y
                                }, {
                                    lon: s.x,
                                    lat: s.y
                                });
                            return 1e3 * e
                        },
                        CLASS_NAME: "OpenLayers.Geometry.Curve"
                    }), OpenLayers.Geometry.LineString = OpenLayers.Class(OpenLayers.Geometry.Curve, {
                        removeComponent: function (e) {
                            var t = this.components && 2 < this.components.length;
                            return t && OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments), t
                        },
                        intersects: function (e) {
                            var t = !1,
                                i = e.CLASS_NAME;
                            if ("OpenLayers.Geometry.LineString" == i || "OpenLayers.Geometry.LinearRing" == i || "OpenLayers.Geometry.Point" == i) {
                                var s = this.getSortedSegments();
                                e = "OpenLayers.Geometry.Point" == i ? [{
                                    x1: e.x,
                                    y1: e.y,
                                    x2: e.x,
                                    y2: e.y
                                }] : e.getSortedSegments();
                                var r, n, a, o, l, h, p, u = 0,
                                    c = s.length;
                                e: for (; u < c; ++u) {
                                    r = (i = s[u]).x1, n = i.x2, a = i.y1, o = i.y2;
                                    for (var y = 0, d = e.length; y < d && !((l = e[y]).x1 > n); ++y)
                                        if (!(l.x2 < r || (h = l.y1, p = l.y2, Math.min(h, p) > Math.max(a, o) || Math.max(h, p) < Math.min(a, o) || !OpenLayers.Geometry.segmentsIntersect(i, l)))) {
                                            t = !0;
                                            break e
                                        }
                                }
                            } else t = e.intersects(this);
                            return t
                        },
                        getSortedSegments: function () {
                            for (var e, t, i = this.components.length - 1, s = Array(i), r = 0; r < i; ++r) e = this.components[r], t = this.components[r + 1], s[r] = e.x < t.x ? {
                                x1: e.x,
                                y1: e.y,
                                x2: t.x,
                                y2: t.y
                            } : {
                                x1: t.x,
                                y1: t.y,
                                x2: e.x,
                                y2: e.y
                            };
                            return s.sort((function (e, t) {
                                return e.x1 - t.x1
                            }))
                        },
                        splitWithSegment: function (e, t) {
                            for (var i, s, r = !(t && !1 === t.edge), n = t && t.tolerance, a = [], o = this.getVertices(), l = [], h = [], p = !1, u = {
                                    point: !0,
                                    tolerance: n
                                }, c = null, y = 0, d = o.length - 2; y <= d; ++y) n = o[y], l.push(n.clone()), i = o[y + 1], s = {
                                x1: n.x,
                                y1: n.y,
                                x2: i.x,
                                y2: i.y
                            }, (s = OpenLayers.Geometry.segmentsIntersect(e, s, u)) instanceof OpenLayers.Geometry.Point && (!!(s.x === e.x1 && s.y === e.y1 || s.x === e.x2 && s.y === e.y2 || s.equals(n) || s.equals(i)) || r) && (s.equals(h[h.length - 1]) || h.push(s.clone()), 0 === y && s.equals(n) || s.equals(i) || (p = !0, s.equals(n) || l.push(s), a.push(new OpenLayers.Geometry.LineString(l)), l = [s.clone()]));
                            if (p && (l.push(i.clone()), a.push(new OpenLayers.Geometry.LineString(l))), 0 < h.length) {
                                var m = e.x1 < e.x2 ? 1 : -1,
                                    f = e.y1 < e.y2 ? 1 : -1;
                                c = {
                                    lines: a,
                                    points: h.sort((function (e, t) {
                                        return m * e.x - m * t.x || f * e.y - f * t.y
                                    }))
                                }
                            }
                            return c
                        },
                        split: function (e, t) {
                            var i, s, r, n, a = null,
                                o = t && t.mutual;
                            if (e instanceof OpenLayers.Geometry.LineString) {
                                var l, h, p, u, c, y = this.getVertices(),
                                    d = [];
                                r = [];
                                for (var m = 0, f = y.length - 2; m <= f; ++m) {
                                    l = y[m], h = y[m + 1], p = {
                                        x1: l.x,
                                        y1: l.y,
                                        x2: h.x,
                                        y2: h.y
                                    }, n = n || [e], o && d.push(l.clone());
                                    for (var g = 0; g < n.length; ++g)
                                        if ((u = n[g].splitWithSegment(p, t)) && (0 < (c = u.lines).length && (c.unshift(g, 1), Array.prototype.splice.apply(n, c), g += c.length - 2), o))
                                            for (var L = 0, v = u.points.length; L < v; ++L)(c = u.points[L]).equals(l) || (d.push(c), r.push(new OpenLayers.Geometry.LineString(d)), d = c.equals(h) ? [] : [c.clone()])
                                }
                                o && 0 < r.length && 0 < d.length && (d.push(h.clone()), r.push(new OpenLayers.Geometry.LineString(d)))
                            } else a = e.splitWith(this, t);
                            return n && 1 < n.length ? s = !0 : n = [], r && 1 < r.length ? i = !0 : r = [], (s || i) && (a = o ? [r, n] : n), a
                        },
                        splitWith: function (e, t) {
                            return e.split(this, t)
                        },
                        getVertices: function (e) {
                            return !0 === e ? [this.components[0], this.components[this.components.length - 1]] : !1 === e ? this.components.slice(1, this.components.length - 1) : this.components.slice()
                        },
                        distanceTo: function (e, t) {
                            var i, s = !(t && !1 === t.edge) && t && t.details,
                                r = {},
                                n = Number.POSITIVE_INFINITY;
                            if (e instanceof OpenLayers.Geometry.Point) {
                                for (var a, o = this.getSortedSegments(), l = e.x, h = e.y, p = 0, u = o.length; p < u; ++p)
                                    if (a = o[p], (i = OpenLayers.Geometry.distanceToSegment(e, a)).distance < n) {
                                        if (r = i, 0 === (n = i.distance)) break
                                    } else if (a.x2 > l && (h > a.y1 && h < a.y2 || h < a.y1 && h > a.y2)) break;
                                r = s ? {
                                    distance: r.distance,
                                    x0: r.x,
                                    y0: r.y,
                                    x1: l,
                                    y1: h
                                } : r.distance
                            } else if (e instanceof OpenLayers.Geometry.LineString) {
                                o = this.getSortedSegments();
                                var c, y, d = (l = e.getSortedSegments()).length,
                                    m = {
                                        point: !0
                                    };
                                p = 0, u = o.length;
                                e: for (; p < u; ++p) {
                                    a = (h = o[p]).x1, y = h.y1;
                                    for (var f = 0; f < d; ++f) {
                                        if (i = l[f], c = OpenLayers.Geometry.segmentsIntersect(h, i, m)) {
                                            n = 0, r = {
                                                distance: 0,
                                                x0: c.x,
                                                y0: c.y,
                                                x1: c.x,
                                                y1: c.y
                                            };
                                            break e
                                        }(i = OpenLayers.Geometry.distanceToSegment({
                                            x: a,
                                            y: y
                                        }, i)).distance < n && (r = {
                                            distance: n = i.distance,
                                            x0: a,
                                            y0: y,
                                            x1: i.x,
                                            y1: i.y
                                        })
                                    }
                                }
                                s || (r = r.distance), 0 !== n && h && (i = e.distanceTo(new OpenLayers.Geometry.Point(h.x2, h.y2), t), (p = s ? i.distance : i) < n && (r = s ? {
                                    distance: n,
                                    x0: i.x1,
                                    y0: i.y1,
                                    x1: i.x0,
                                    y1: i.y0
                                } : p))
                            } else r = e.distanceTo(this, t), s && (r = {
                                distance: r.distance,
                                x0: r.x1,
                                y0: r.y1,
                                x1: r.x0,
                                y1: r.y0
                            });
                            return r
                        },
                        simplify: function (e) {
                            if (this && null !== this) {
                                var t = this.getVertices();
                                if (3 > t.length) return this;
                                var i = function (e, t, s, n) {
                                        for (var a, o = 0, l = 0, h = t; h < s; h++) {
                                            a = e[t];
                                            var p = e[s],
                                                u = e[h];
                                            (a = (u = Math.abs(.5 * (a.x * p.y + p.x * u.y + u.x * a.y - p.x * a.y - u.x * p.y - a.x * u.y))) / (a = Math.sqrt(Math.pow(a.x - p.x, 2) + Math.pow(a.y - p.y, 2))) * 2) > o && (o = a, l = h)
                                        }
                                        o > n && l != t && (r.push(l), i(e, t, l, n), i(e, l, s, n))
                                    },
                                    s = t.length - 1,
                                    r = [];
                                for (r.push(0), r.push(s); t[0].equals(t[s]);) s--, r.push(s);
                                for (i(t, 0, s, e), e = [], r.sort((function (e, t) {
                                        return e - t
                                    })), s = 0; s < r.length; s++) e.push(t[r[s]]);
                                return new OpenLayers.Geometry.LineString(e)
                            }
                            return this
                        },
                        CLASS_NAME: "OpenLayers.Geometry.LineString"
                    }), OpenLayers.Geometry.MultiLineString = OpenLayers.Class(OpenLayers.Geometry.Collection, {
                        componentTypes: ["OpenLayers.Geometry.LineString"],
                        split: function (e, t) {
                            for (var i, s, r, n, a = null, o = t && t.mutual, l = [], h = [e], p = 0, u = this.components.length; p < u; ++p) {
                                s = this.components[p], r = !1;
                                for (var c = 0; c < h.length; ++c)
                                    if (i = s.split(h[c], t)) {
                                        if (o) {
                                            for (var y = 0, d = (r = i[0]).length; y < d; ++y) 0 === y && l.length ? l[l.length - 1].addComponent(r[y]) : l.push(new OpenLayers.Geometry.MultiLineString([r[y]]));
                                            r = !0, i = i[1]
                                        }
                                        if (i.length) {
                                            i.unshift(c, 1), Array.prototype.splice.apply(h, i);
                                            break
                                        }
                                    } r || (l.length ? l[l.length - 1].addComponent(s.clone()) : l = [new OpenLayers.Geometry.MultiLineString(s.clone())])
                            }
                            return l && 1 < l.length ? r = !0 : l = [], h && 1 < h.length ? n = !0 : h = [], (r || n) && (a = o ? [l, h] : h), a
                        },
                        splitWith: function (e, t) {
                            var i, s, r, n, a, o, l = null,
                                h = t && t.mutual;
                            if (e instanceof OpenLayers.Geometry.LineString) {
                                o = [], a = [e];
                                for (var p = 0, u = this.components.length; p < u; ++p) {
                                    r = !1, s = this.components[p];
                                    for (var c = 0; c < a.length; ++c)
                                        if (i = a[c].split(s, t)) {
                                            h && ((r = i[0]).length && (r.unshift(c, 1), Array.prototype.splice.apply(a, r), c += r.length - 2), 0 === (i = i[1]).length && (i = [s.clone()])), r = 0;
                                            for (var y = i.length; r < y; ++r) 0 === r && o.length ? o[o.length - 1].addComponent(i[r]) : o.push(new OpenLayers.Geometry.MultiLineString([i[r]]));
                                            r = !0
                                        } r || (o.length ? o[o.length - 1].addComponent(s.clone()) : o = [new OpenLayers.Geometry.MultiLineString([s.clone()])])
                                }
                            } else l = e.split(this);
                            return a && 1 < a.length ? n = !0 : a = [], o && 1 < o.length ? r = !0 : o = [], (n || r) && (l = h ? [a, o] : o), l
                        },
                        CLASS_NAME: "OpenLayers.Geometry.MultiLineString"
                    }), OpenLayers.Geometry.LinearRing = OpenLayers.Class(OpenLayers.Geometry.LineString, {
                        componentTypes: ["OpenLayers.Geometry.Point"],
                        addComponent: function (e, t) {
                            var i = !1,
                                s = this.components.pop();
                            return null == t && e.equals(s) || (i = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, arguments)), OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [this.components[0]]), i
                        },
                        removeComponent: function (e) {
                            var t = this.components && 3 < this.components.length;
                            return t && (this.components.pop(), OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments), OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [this.components[0]])), t
                        },
                        move: function (e, t) {
                            for (var i = 0, s = this.components.length; i < s - 1; i++) this.components[i].move(e, t)
                        },
                        rotate: function (e, t) {
                            for (var i = 0, s = this.components.length; i < s - 1; ++i) this.components[i].rotate(e, t)
                        },
                        resize: function (e, t, i) {
                            for (var s = 0, r = this.components.length; s < r - 1; ++s) this.components[s].resize(e, t, i);
                            return this
                        },
                        transform: function (e, t) {
                            if (e && t) {
                                for (var i = 0, s = this.components.length; i < s - 1; i++) this.components[i].transform(e, t);
                                this.bounds = null
                            }
                            return this
                        },
                        getCentroid: function () {
                            if (this.components) {
                                var e = this.components.length;
                                if (0 < e && 2 >= e) return this.components[0].clone();
                                if (2 < e) {
                                    var t = 0,
                                        i = 0,
                                        s = this.components[0].x,
                                        r = this.components[0].y,
                                        n = -1 * this.getArea();
                                    if (0 != n) {
                                        for (var a = 0; a < e - 1; a++) {
                                            var o = this.components[a],
                                                l = this.components[a + 1];
                                            t = t + (o.x + l.x - 2 * s) * ((o.x - s) * (l.y - r) - (l.x - s) * (o.y - r)), i = i + (o.y + l.y - 2 * r) * ((o.x - s) * (l.y - r) - (l.x - s) * (o.y - r))
                                        }
                                        t = s + t / (6 * n), e = r + i / (6 * n)
                                    } else {
                                        for (a = 0; a < e - 1; a++) t += this.components[a].x, i += this.components[a].y;
                                        t /= e - 1, e = i / (e - 1)
                                    }
                                    return new OpenLayers.Geometry.Point(t, e)
                                }
                                return null
                            }
                        },
                        getArea: function () {
                            var e = 0;
                            if (this.components && 2 < this.components.length) {
                                for (var t = e = 0, i = this.components.length; t < i - 1; t++) {
                                    var s = this.components[t],
                                        r = this.components[t + 1];
                                    e = e + (s.x + r.x) * (r.y - s.y)
                                }
                                e = -e / 2
                            }
                            return e
                        },
                        getGeodesicArea: function (e) {
                            var t = this;
                            if (e) {
                                var i = new OpenLayers.Projection("EPSG:4326");
                                i.equals(e) || (t = this.clone().transform(e, i))
                            }
                            if (e = 0, 2 < (i = t.components && t.components.length)) {
                                for (var s, r, n = 0; n < i - 1; n++) s = t.components[n], r = t.components[n + 1], e += OpenLayers.Util.rad(r.x - s.x) * (2 + Math.sin(OpenLayers.Util.rad(s.y)) + Math.sin(OpenLayers.Util.rad(r.y)));
                                e = 40680631590769 * e / 2
                            }
                            return e
                        },
                        containsPoint: function (e) {
                            var t = OpenLayers.Number.limitSigDigs,
                                i = t(e.x, 14);
                            e = t(e.y, 14);
                            for (var s, r, n, a, o, l = this.components.length - 1, h = 0, p = 0; p < l; ++p)
                                if (n = t((s = this.components[p]).x, 14), s = t(s.y, 14), a = t((r = this.components[p + 1]).x, 14), s == (r = t(r.y, 14))) {
                                    if (e == s && (n <= a && i >= n && i <= a || n >= a && i <= n && i >= a)) {
                                        h = -1;
                                        break
                                    }
                                } else {
                                    if ((o = t((a - n) / (r - s) * (e - r) + a, 14)) == i && (s < r && e >= s && e <= r || s > r && e <= s && e >= r)) {
                                        h = -1;
                                        break
                                    }
                                    o <= i || n != a && (o < Math.min(n, a) || o > Math.max(n, a)) || (s < r && e >= s && e < r || s > r && e < s && e >= r) && ++h
                                } return -1 == h ? 1 : !!(1 & h)
                        },
                        intersects: function (e) {
                            var t = !1;
                            if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) t = this.containsPoint(e);
                            else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME) t = e.intersects(this);
                            else if ("OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) t = OpenLayers.Geometry.LineString.prototype.intersects.apply(this, [e]);
                            else
                                for (var i = 0, s = e.components.length; i < s && !(t = e.components[i].intersects(this)); ++i);
                            return t
                        },
                        getVertices: function (e) {
                            return !0 === e ? [] : this.components.slice(0, this.components.length - 1)
                        },
                        CLASS_NAME: "OpenLayers.Geometry.LinearRing"
                    }), OpenLayers.Geometry.Polygon = OpenLayers.Class(OpenLayers.Geometry.Collection, {
                        componentTypes: ["OpenLayers.Geometry.LinearRing"],
                        getArea: function () {
                            var e = 0;
                            if (this.components && 0 < this.components.length) {
                                e = e + Math.abs(this.components[0].getArea());
                                for (var t = 1, i = this.components.length; t < i; t++) e -= Math.abs(this.components[t].getArea())
                            }
                            return e
                        },
                        getGeodesicArea: function (e) {
                            var t = 0;
                            if (this.components && 0 < this.components.length) {
                                t = t + Math.abs(this.components[0].getGeodesicArea(e));
                                for (var i = 1, s = this.components.length; i < s; i++) t -= Math.abs(this.components[i].getGeodesicArea(e))
                            }
                            return t
                        },
                        containsPoint: function (e) {
                            var t = this.components.length,
                                i = !1;
                            if (0 < t && (1 !== (i = this.components[0].containsPoint(e)) && i && 1 < t))
                                for (var s, r = 1; r < t; ++r)
                                    if (s = this.components[r].containsPoint(e)) {
                                        i = 1 === s && 1;
                                        break
                                    } return i
                        },
                        intersects: function (e) {
                            var t, i, s = !1;
                            if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) s = this.containsPoint(e);
                            else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME || "OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) {
                                for (t = 0, i = this.components.length; t < i && !(s = e.intersects(this.components[t])); ++t);
                                if (!s)
                                    for (t = 0, i = e.components.length; t < i && !(s = this.containsPoint(e.components[t])); ++t);
                            } else
                                for (t = 0, i = e.components.length; t < i && !(s = this.intersects(e.components[t])); ++t);
                            if (!s && "OpenLayers.Geometry.Polygon" == e.CLASS_NAME) {
                                var r = this.components[0];
                                for (t = 0, i = r.components.length; t < i && !(s = e.containsPoint(r.components[t])); ++t);
                            }
                            return s
                        },
                        distanceTo: function (e, t) {
                            return t && !1 === t.edge && this.intersects(e) ? 0 : OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this, [e, t])
                        },
                        CLASS_NAME: "OpenLayers.Geometry.Polygon"
                    }), OpenLayers.Geometry.Polygon.createRegularPolygon = function (e, t, i, s) {
                        var r = Math.PI * (1 / i - .5);
                        s && (r += s / 180 * Math.PI);
                        for (var n, a = [], o = 0; o < i; ++o) n = r + 2 * o * Math.PI / i, s = e.x + t * Math.cos(n), n = e.y + t * Math.sin(n), a.push(new OpenLayers.Geometry.Point(s, n));
                        return e = new OpenLayers.Geometry.LinearRing(a), new OpenLayers.Geometry.Polygon([e])
                    }, OpenLayers.Geometry.MultiPolygon = OpenLayers.Class(OpenLayers.Geometry.Collection, {
                        componentTypes: ["OpenLayers.Geometry.Polygon"],
                        CLASS_NAME: "OpenLayers.Geometry.MultiPolygon"
                    }), OpenLayers.Format.GML = OpenLayers.Class(OpenLayers.Format.XML, {
                        featureNS: "http://mapserver.gis.umn.edu/mapserver",
                        featurePrefix: "feature",
                        featureName: "featureMember",
                        layerName: "features",
                        geometryName: "geometry",
                        collectionName: "FeatureCollection",
                        gmlns: "http://www.opengis.net/gml",
                        extractAttributes: !0,
                        xy: !0,
                        initialize: function (e) {
                            this.regExes = {
                                trimSpace: /^\s*|\s*$/g,
                                removeSpace: /\s*/g,
                                splitSpace: /\s+/,
                                trimComma: /\s*,\s*/g
                            }, OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e = this.getElementsByTagNameNS(e.documentElement, this.gmlns, this.featureName);
                            for (var t = [], i = 0; i < e.length; i++) {
                                var s = this.parseFeature(e[i]);
                                s && t.push(s)
                            }
                            return t
                        },
                        parseFeature: function (e) {
                            for (var t, i, s, r = "MultiPolygon Polygon MultiLineString LineString MultiPoint Point Envelope".split(" "), n = 0; n < r.length; ++n)
                                if (t = r[n], 0 < (i = this.getElementsByTagNameNS(e, this.gmlns, t)).length) {
                                    if (!(s = this.parseGeometry[t.toLowerCase()])) throw new TypeError("Unsupported geometry type: " + t);
                                    s = s.apply(this, [i[0]]), this.internalProjection && this.externalProjection && s.transform(this.externalProjection, this.internalProjection);
                                    break
                                } var a, o, l;
                            for (t = this.getElementsByTagNameNS(e, this.gmlns, "Box"), n = 0; n < t.length; ++n) r = t[n], i = this.parseGeometry.box.apply(this, [r]), "boundedBy" === ((r = r.parentNode).localName || r.nodeName.split(":").pop()) ? a = i : s = i.toGeometry();
                            for (this.extractAttributes && (o = this.parseAttributes(e)), (o = new OpenLayers.Feature.Vector(s, o)).bounds = a, o.gml = {
                                    featureType: e.firstChild.nodeName.split(":")[1],
                                    featureNS: e.firstChild.namespaceURI,
                                    featureNSPrefix: e.firstChild.prefix
                                }, e = e.firstChild; e && (1 != e.nodeType || !(l = e.getAttribute("fid") || e.getAttribute("id")));) e = e.nextSibling;
                            return o.fid = l, o
                        },
                        parseGeometry: {
                            point: function (e) {
                                var t, i;
                                return i = [], 0 < (t = this.getElementsByTagNameNS(e, this.gmlns, "pos")).length && (i = (i = (i = t[0].firstChild.nodeValue).replace(this.regExes.trimSpace, "")).split(this.regExes.splitSpace)), 0 == i.length && (0 < (t = this.getElementsByTagNameNS(e, this.gmlns, "coordinates")).length && (i = (i = (i = t[0].firstChild.nodeValue).replace(this.regExes.removeSpace, "")).split(","))), 0 == i.length && (0 < (t = this.getElementsByTagNameNS(e, this.gmlns, "coord")).length && (e = this.getElementsByTagNameNS(t[0], this.gmlns, "X"), t = this.getElementsByTagNameNS(t[0], this.gmlns, "Y"), 0 < e.length && 0 < t.length && (i = [e[0].firstChild.nodeValue, t[0].firstChild.nodeValue]))), 2 == i.length && (i[2] = null), this.xy ? new OpenLayers.Geometry.Point(i[0], i[1], i[2]) : new OpenLayers.Geometry.Point(i[1], i[0], i[2])
                            },
                            multipoint: function (e) {
                                var t = [];
                                if (0 < (e = this.getElementsByTagNameNS(e, this.gmlns, "Point")).length)
                                    for (var i, s = 0; s < e.length; ++s)(i = this.parseGeometry.point.apply(this, [e[s]])) && t.push(i);
                                return new OpenLayers.Geometry.MultiPoint(t)
                            },
                            linestring: function (e, t) {
                                var i, s;
                                s = [];
                                var r = [];
                                if (0 < (i = this.getElementsByTagNameNS(e, this.gmlns, "posList")).length) {
                                    s = (s = (s = this.getChildValue(i[0])).replace(this.regExes.trimSpace, "")).split(this.regExes.splitSpace);
                                    var n, a, o, l = parseInt(i[0].getAttribute("dimension"));
                                    for (i = 0; i < s.length / l; ++i) a = s[n = i * l], o = s[n + 1], n = 2 == l ? null : s[n + 2], this.xy ? r.push(new OpenLayers.Geometry.Point(a, o, n)) : r.push(new OpenLayers.Geometry.Point(o, a, n))
                                }
                                if (0 == s.length && 0 < (i = this.getElementsByTagNameNS(e, this.gmlns, "coordinates")).length)
                                    for (l = (s = (s = (s = this.getChildValue(i[0])).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), i = 0; i < l.length; ++i) 2 == (s = l[i].split(",")).length && (s[2] = null), this.xy ? r.push(new OpenLayers.Geometry.Point(s[0], s[1], s[2])) : r.push(new OpenLayers.Geometry.Point(s[1], s[0], s[2]));
                                return s = null, 0 != r.length && (s = t ? new OpenLayers.Geometry.LinearRing(r) : new OpenLayers.Geometry.LineString(r)), s
                            },
                            multilinestring: function (e) {
                                var t = [];
                                if (0 < (e = this.getElementsByTagNameNS(e, this.gmlns, "LineString")).length)
                                    for (var i, s = 0; s < e.length; ++s)(i = this.parseGeometry.linestring.apply(this, [e[s]])) && t.push(i);
                                return new OpenLayers.Geometry.MultiLineString(t)
                            },
                            polygon: function (e) {
                                var t = [];
                                if (0 < (e = this.getElementsByTagNameNS(e, this.gmlns, "LinearRing")).length)
                                    for (var i, s = 0; s < e.length; ++s)(i = this.parseGeometry.linestring.apply(this, [e[s], !0])) && t.push(i);
                                return new OpenLayers.Geometry.Polygon(t)
                            },
                            multipolygon: function (e) {
                                var t = [];
                                if (0 < (e = this.getElementsByTagNameNS(e, this.gmlns, "Polygon")).length)
                                    for (var i, s = 0; s < e.length; ++s)(i = this.parseGeometry.polygon.apply(this, [e[s]])) && t.push(i);
                                return new OpenLayers.Geometry.MultiPolygon(t)
                            },
                            envelope: function (e) {
                                var t, i, s = [],
                                    r = this.getElementsByTagNameNS(e, this.gmlns, "lowerCorner");
                                if (0 < r.length) {
                                    t = [], 0 < r.length && (t = (t = (t = r[0].firstChild.nodeValue).replace(this.regExes.trimSpace, "")).split(this.regExes.splitSpace)), 2 == t.length && (t[2] = null);
                                    var n = this.xy ? new OpenLayers.Geometry.Point(t[0], t[1], t[2]) : new OpenLayers.Geometry.Point(t[1], t[0], t[2])
                                }
                                if (0 < (e = this.getElementsByTagNameNS(e, this.gmlns, "upperCorner")).length) {
                                    t = [], 0 < e.length && (t = (t = (t = e[0].firstChild.nodeValue).replace(this.regExes.trimSpace, "")).split(this.regExes.splitSpace)), 2 == t.length && (t[2] = null);
                                    var a = this.xy ? new OpenLayers.Geometry.Point(t[0], t[1], t[2]) : new OpenLayers.Geometry.Point(t[1], t[0], t[2])
                                }
                                return n && a && (s.push(new OpenLayers.Geometry.Point(n.x, n.y)), s.push(new OpenLayers.Geometry.Point(a.x, n.y)), s.push(new OpenLayers.Geometry.Point(a.x, a.y)), s.push(new OpenLayers.Geometry.Point(n.x, a.y)), s.push(new OpenLayers.Geometry.Point(n.x, n.y)), s = new OpenLayers.Geometry.LinearRing(s), i = new OpenLayers.Geometry.Polygon([s])), i
                            },
                            box: function (e) {
                                var t = this.getElementsByTagNameNS(e, this.gmlns, "coordinates"),
                                    i = e = null;
                                if (0 < t.length && (2 == (t = (t = t[0].firstChild.nodeValue).split(" ")).length && (e = t[0].split(","), i = t[1].split(","))), null !== e && null !== i) return new OpenLayers.Bounds(parseFloat(e[0]), parseFloat(e[1]), parseFloat(i[0]), parseFloat(i[1]))
                            }
                        },
                        parseAttributes: function (e) {
                            var t, i, s, r = {};
                            for (e = e.firstChild; e;) {
                                if (1 == e.nodeType) {
                                    for (e = e.childNodes, t = 0; t < e.length; ++t) 1 == (i = e[t]).nodeType && (1 == (s = i.childNodes).length ? (3 == (s = s[0]).nodeType || 4 == s.nodeType) && (i = i.prefix ? i.nodeName.split(":")[1] : i.nodeName, s = s.nodeValue.replace(this.regExes.trimSpace, ""), r[i] = s) : r[i.nodeName.split(":").pop()] = null);
                                    break
                                }
                                e = e.nextSibling
                            }
                            return r
                        },
                        write: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            for (var t = this.createElementNS("http://www.opengis.net/wfs", "wfs:" + this.collectionName), i = 0; i < e.length; i++) t.appendChild(this.createFeatureXML(e[i]));
                            return OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        createFeatureXML: function (e) {
                            var t = this.buildGeometryNode(e.geometry);
                            (r = this.createElementNS(this.featureNS, this.featurePrefix + ":" + this.geometryName)).appendChild(t);
                            t = this.createElementNS(this.gmlns, "gml:" + this.featureName);
                            var i = this.createElementNS(this.featureNS, this.featurePrefix + ":" + this.layerName);
                            for (var s in i.setAttribute("fid", e.fid || e.id), i.appendChild(r), e.attributes) {
                                var r = this.createTextNode(e.attributes[s]),
                                    n = s.substring(s.lastIndexOf(":") + 1);
                                (n = this.createElementNS(this.featureNS, this.featurePrefix + ":" + n)).appendChild(r), i.appendChild(n)
                            }
                            return t.appendChild(i), t
                        },
                        buildGeometryNode: function (e) {
                            this.externalProjection && this.internalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
                            var t = (t = e.CLASS_NAME).substring(t.lastIndexOf(".") + 1);
                            return this.buildGeometry[t.toLowerCase()].apply(this, [e])
                        },
                        buildGeometry: {
                            point: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:Point");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            },
                            multipoint: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:MultiPoint");
                                e = e.components;
                                for (var i, s, r = 0; r < e.length; r++) i = this.createElementNS(this.gmlns, "gml:pointMember"), s = this.buildGeometry.point.apply(this, [e[r]]), i.appendChild(s), t.appendChild(i);
                                return t
                            },
                            linestring: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:LineString");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            },
                            multilinestring: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:MultiLineString");
                                e = e.components;
                                for (var i, s, r = 0; r < e.length; ++r) i = this.createElementNS(this.gmlns, "gml:lineStringMember"), s = this.buildGeometry.linestring.apply(this, [e[r]]), i.appendChild(s), t.appendChild(i);
                                return t
                            },
                            linearring: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:LinearRing");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            },
                            polygon: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:Polygon");
                                e = e.components;
                                for (var i, s, r = 0; r < e.length; ++r) i = 0 == r ? "outerBoundaryIs" : "innerBoundaryIs", i = this.createElementNS(this.gmlns, "gml:" + i), s = this.buildGeometry.linearring.apply(this, [e[r]]), i.appendChild(s), t.appendChild(i);
                                return t
                            },
                            multipolygon: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:MultiPolygon");
                                e = e.components;
                                for (var i, s, r = 0; r < e.length; ++r) i = this.createElementNS(this.gmlns, "gml:polygonMember"), s = this.buildGeometry.polygon.apply(this, [e[r]]), i.appendChild(s), t.appendChild(i);
                                return t
                            },
                            bounds: function (e) {
                                var t = this.createElementNS(this.gmlns, "gml:Box");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            }
                        },
                        buildCoordinatesNode: function (e) {
                            var t = this.createElementNS(this.gmlns, "gml:coordinates");
                            t.setAttribute("decimal", "."), t.setAttribute("cs", ","), t.setAttribute("ts", " ");
                            var i = [];
                            if (e instanceof OpenLayers.Bounds) i.push(e.left + "," + e.bottom), i.push(e.right + "," + e.top);
                            else {
                                e = e.components ? e.components : [e];
                                for (var s = 0; s < e.length; s++) i.push(e[s].x + "," + e[s].y)
                            }
                            return i = this.createTextNode(i.join(" ")), t.appendChild(i), t
                        },
                        CLASS_NAME: "OpenLayers.Format.GML"
                    }), OpenLayers.Format.GML || (OpenLayers.Format.GML = {}), OpenLayers.Format.GML.Base = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            gml: "http://www.opengis.net/gml",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance",
                            wfs: "http://www.opengis.net/wfs"
                        },
                        defaultPrefix: "gml",
                        schemaLocation: null,
                        featureType: null,
                        featureNS: null,
                        geometryName: "geometry",
                        extractAttributes: !0,
                        srsName: null,
                        xy: !0,
                        geometryTypes: null,
                        singleFeatureType: null,
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g,
                            featureMember: /^(.*:)?featureMembers?$/
                        },
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e]), this.setGeometryTypes(), e && e.featureNS && this.setNamespace("feature", e.featureNS), this.singleFeatureType = !e || "string" == typeof e.featureType
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = [];
                            if (this.readNode(e, {
                                    features: t
                                }, !0), 0 == t.length) {
                                var i = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMember");
                                if (i.length) {
                                    e = 0;
                                    for (var s = i.length; e < s; ++e) this.readNode(i[e], {
                                        features: t
                                    }, !0)
                                } else(i = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMembers")).length && this.readNode(i[0], {
                                    features: t
                                }, !0)
                            }
                            return t
                        },
                        readNode: function (e, t, i) {
                            return !0 === i && !0 === this.autoConfig && (this.featureType = null, delete this.namespaceAlias[this.featureNS], delete this.namespaces.feature, this.featureNS = null), this.featureNS || e.prefix in this.namespaces || e.parentNode.namespaceURI != this.namespaces.gml || !this.regExes.featureMember.test(e.parentNode.nodeName) || (this.featureType = e.nodeName.split(":").pop(), this.setNamespace("feature", e.namespaceURI), this.featureNS = e.namespaceURI, this.autoConfig = !0), OpenLayers.Format.XML.prototype.readNode.apply(this, [e, t])
                        },
                        readers: {
                            gml: {
                                _inherit: function (e, t, i) {},
                                featureMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                featureMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                name: function (e, t) {
                                    t.name = this.getChildValue(e)
                                },
                                boundedBy: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), i.components && 0 < i.components.length && (t.bounds = i.components[0])
                                },
                                Point: function (e, t) {
                                    var i = {
                                        points: []
                                    };
                                    this.readChildNodes(e, i), t.components || (t.components = []), t.components.push(i.points[0])
                                },
                                coordinates: function (e, t) {
                                    for (var i, s, r = (i = (i = (i = this.getChildValue(e).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace)).length, n = Array(r), a = 0; a < r; ++a) s = i[a].split(","), n[a] = this.xy ? new OpenLayers.Geometry.Point(s[0], s[1], s[2]) : new OpenLayers.Geometry.Point(s[1], s[0], s[2]);
                                    t.points = n
                                },
                                coord: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.points || (t.points = []), t.points.push(new OpenLayers.Geometry.Point(i.x, i.y, i.z))
                                },
                                X: function (e, t) {
                                    t.x = this.getChildValue(e)
                                },
                                Y: function (e, t) {
                                    t.y = this.getChildValue(e)
                                },
                                Z: function (e, t) {
                                    t.z = this.getChildValue(e)
                                },
                                MultiPoint: function (e, t) {
                                    var i = {
                                        components: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), t.components = [new OpenLayers.Geometry.MultiPoint(i.components)]
                                },
                                pointMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                LineString: function (e, t) {
                                    var i = {};
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), t.components || (t.components = []), t.components.push(new OpenLayers.Geometry.LineString(i.points))
                                },
                                MultiLineString: function (e, t) {
                                    var i = {
                                        components: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), t.components = [new OpenLayers.Geometry.MultiLineString(i.components)]
                                },
                                lineStringMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Polygon: function (e, t) {
                                    var i = {
                                        outer: null,
                                        inner: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), i.inner.unshift(i.outer), t.components || (t.components = []), t.components.push(new OpenLayers.Geometry.Polygon(i.inner))
                                },
                                LinearRing: function (e, t) {
                                    var i = {};
                                    this.readers.gml._inherit.apply(this, [e, i]), this.readChildNodes(e, i), t.components = [new OpenLayers.Geometry.LinearRing(i.points)]
                                },
                                MultiPolygon: function (e, t) {
                                    var i = {
                                        components: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), t.components = [new OpenLayers.Geometry.MultiPolygon(i.components)]
                                },
                                polygonMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                GeometryCollection: function (e, t) {
                                    var i = {
                                        components: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), t.components = [new OpenLayers.Geometry.Collection(i.components)]
                                },
                                geometryMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                }
                            },
                            feature: {
                                "*": function (e, t) {
                                    var i, s = e.localName || e.nodeName.split(":").pop();
                                    t.features ? this.singleFeatureType || -1 === OpenLayers.Util.indexOf(this.featureType, s) ? s === this.featureType && (i = "_typeName") : i = "_typeName" : 0 == e.childNodes.length || 1 == e.childNodes.length && 3 == e.firstChild.nodeType ? this.extractAttributes && (i = "_attribute") : i = "_geometry", i && this.readers.feature[i].apply(this, [e, t])
                                },
                                _typeName: function (e, t) {
                                    var i = {
                                        components: [],
                                        attributes: {}
                                    };
                                    this.readChildNodes(e, i), i.name && (i.attributes.name = i.name);
                                    var s = new OpenLayers.Feature.Vector(i.components[0], i.attributes);
                                    this.singleFeatureType || (s.type = e.nodeName.split(":").pop(), s.namespace = e.namespaceURI);
                                    var r = e.getAttribute("fid") || this.getAttributeNS(e, this.namespaces.gml, "id");
                                    r && (s.fid = r), this.internalProjection && this.externalProjection && s.geometry && s.geometry.transform(this.externalProjection, this.internalProjection), i.bounds && (s.bounds = i.bounds), t.features.push(s)
                                },
                                _geometry: function (e, t) {
                                    this.geometryName || (this.geometryName = e.nodeName.split(":").pop()), this.readChildNodes(e, t)
                                },
                                _attribute: function (e, t) {
                                    var i = e.localName || e.nodeName.split(":").pop(),
                                        s = this.getChildValue(e);
                                    t.attributes[i] = s
                                }
                            },
                            wfs: {
                                FeatureCollection: function (e, t) {
                                    this.readChildNodes(e, t)
                                }
                            }
                        },
                        write: function (e) {
                            var t;
                            return t = OpenLayers.Util.isArray(e) ? "featureMembers" : "featureMember", e = this.writeNode("gml:" + t, e), this.setAttributeNS(e, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        writers: {
                            gml: {
                                featureMember: function (e) {
                                    var t = this.createElementNSPlus("gml:featureMember");
                                    return this.writeNode("feature:_typeName", e, t), t
                                },
                                MultiPoint: function (e) {
                                    for (var t = this.createElementNSPlus("gml:MultiPoint"), i = 0, s = (e = e.components || [e]).length; i < s; ++i) this.writeNode("pointMember", e[i], t);
                                    return t
                                },
                                pointMember: function (e) {
                                    var t = this.createElementNSPlus("gml:pointMember");
                                    return this.writeNode("Point", e, t), t
                                },
                                MultiLineString: function (e) {
                                    for (var t = this.createElementNSPlus("gml:MultiLineString"), i = 0, s = (e = e.components || [e]).length; i < s; ++i) this.writeNode("lineStringMember", e[i], t);
                                    return t
                                },
                                lineStringMember: function (e) {
                                    var t = this.createElementNSPlus("gml:lineStringMember");
                                    return this.writeNode("LineString", e, t), t
                                },
                                MultiPolygon: function (e) {
                                    for (var t = this.createElementNSPlus("gml:MultiPolygon"), i = 0, s = (e = e.components || [e]).length; i < s; ++i) this.writeNode("polygonMember", e[i], t);
                                    return t
                                },
                                polygonMember: function (e) {
                                    var t = this.createElementNSPlus("gml:polygonMember");
                                    return this.writeNode("Polygon", e, t), t
                                },
                                GeometryCollection: function (e) {
                                    for (var t = this.createElementNSPlus("gml:GeometryCollection"), i = 0, s = e.components.length; i < s; ++i) this.writeNode("geometryMember", e.components[i], t);
                                    return t
                                },
                                geometryMember: function (e) {
                                    var t = this.createElementNSPlus("gml:geometryMember");
                                    return e = this.writeNode("feature:_geometry", e), t.appendChild(e.firstChild), t
                                }
                            },
                            feature: {
                                _typeName: function (e) {
                                    var t = this.createElementNSPlus("feature:" + this.featureType, {
                                        attributes: {
                                            fid: e.fid
                                        }
                                    });
                                    for (var i in e.geometry && this.writeNode("feature:_geometry", e.geometry, t), e.attributes) {
                                        var s = e.attributes[i];
                                        null != s && this.writeNode("feature:_attribute", {
                                            name: i,
                                            value: s
                                        }, t)
                                    }
                                    return t
                                },
                                _geometry: function (e) {
                                    this.externalProjection && this.internalProjection && (e = e.clone().transform(this.internalProjection, this.externalProjection));
                                    var t = this.createElementNSPlus("feature:" + this.geometryName);
                                    return e = this.writeNode("gml:" + this.geometryTypes[e.CLASS_NAME], e, t), this.srsName && e.setAttribute("srsName", this.srsName), t
                                },
                                _attribute: function (e) {
                                    return this.createElementNSPlus("feature:" + e.name, {
                                        value: e.value
                                    })
                                }
                            },
                            wfs: {
                                FeatureCollection: function (e) {
                                    for (var t = this.createElementNSPlus("wfs:FeatureCollection"), i = 0, s = e.length; i < s; ++i) this.writeNode("gml:featureMember", e[i], t);
                                    return t
                                }
                            }
                        },
                        setGeometryTypes: function () {
                            this.geometryTypes = {
                                "OpenLayers.Geometry.Point": "Point",
                                "OpenLayers.Geometry.MultiPoint": "MultiPoint",
                                "OpenLayers.Geometry.LineString": "LineString",
                                "OpenLayers.Geometry.MultiLineString": "MultiLineString",
                                "OpenLayers.Geometry.Polygon": "Polygon",
                                "OpenLayers.Geometry.MultiPolygon": "MultiPolygon",
                                "OpenLayers.Geometry.Collection": "GeometryCollection"
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.GML.Base"
                    }), OpenLayers.Format.GML.v3 = OpenLayers.Class(OpenLayers.Format.GML.Base, {
                        schemaLocation: "http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",
                        curve: !1,
                        multiCurve: !0,
                        surface: !1,
                        multiSurface: !0,
                        initialize: function (e) {
                            OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [e])
                        },
                        readers: {
                            gml: OpenLayers.Util.applyDefaults({
                                _inherit: function (e, t, i) {
                                    (e = parseInt(e.getAttribute("srsDimension"), 10) || i && i.srsDimension) && (t.srsDimension = e)
                                },
                                featureMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Curve: function (e, t) {
                                    var i = {
                                        points: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), t.components || (t.components = []), t.components.push(new OpenLayers.Geometry.LineString(i.points))
                                },
                                segments: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                LineStringSegment: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), i.points && Array.prototype.push.apply(t.points, i.points)
                                },
                                pos: function (e, t) {
                                    var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace);
                                    i = this.xy ? new OpenLayers.Geometry.Point(i[0], i[1], i[2]) : new OpenLayers.Geometry.Point(i[1], i[0], i[2]);
                                    t.points = [i]
                                },
                                posList: function (e, t) {
                                    for (var i, s, r, n = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace), a = t.srsDimension || parseInt(e.getAttribute("srsDimension") || e.getAttribute("dimension"), 10) || 2, o = Array(n.length / a), l = 0, h = n.length; l < h; l += a) i = n[l], s = n[l + 1], r = 2 == a ? void 0 : n[l + 2], o[l / a] = this.xy ? new OpenLayers.Geometry.Point(i, s, r) : new OpenLayers.Geometry.Point(s, i, r);
                                    t.points = o
                                },
                                Surface: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                patches: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                PolygonPatch: function (e, t) {
                                    this.readers.gml.Polygon.apply(this, [e, t])
                                },
                                exterior: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.outer = i.components[0]
                                },
                                interior: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.inner.push(i.components[0])
                                },
                                MultiCurve: function (e, t) {
                                    var i = {
                                        components: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), 0 < i.components.length && (t.components = [new OpenLayers.Geometry.MultiLineString(i.components)])
                                },
                                curveMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                MultiSurface: function (e, t) {
                                    var i = {
                                        components: []
                                    };
                                    this.readers.gml._inherit.apply(this, [e, i, t]), this.readChildNodes(e, i), 0 < i.components.length && (t.components = [new OpenLayers.Geometry.MultiPolygon(i.components)])
                                },
                                surfaceMember: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                surfaceMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                pointMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                lineStringMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                polygonMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                geometryMembers: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Envelope: function (e, t) {
                                    var i = {
                                        points: Array(2)
                                    };
                                    this.readChildNodes(e, i), t.components || (t.components = []);
                                    var s = i.points[0];
                                    i = i.points[1];
                                    t.components.push(new OpenLayers.Bounds(s.x, s.y, i.x, i.y))
                                },
                                lowerCorner: function (e, t) {
                                    var i = {};
                                    this.readers.gml.pos.apply(this, [e, i]), t.points[0] = i.points[0]
                                },
                                upperCorner: function (e, t) {
                                    var i = {};
                                    this.readers.gml.pos.apply(this, [e, i]), t.points[1] = i.points[0]
                                }
                            }, OpenLayers.Format.GML.Base.prototype.readers.gml),
                            feature: OpenLayers.Format.GML.Base.prototype.readers.feature,
                            wfs: OpenLayers.Format.GML.Base.prototype.readers.wfs
                        },
                        write: function (e) {
                            var t;
                            return t = OpenLayers.Util.isArray(e) ? "featureMembers" : "featureMember", e = this.writeNode("gml:" + t, e), this.setAttributeNS(e, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        writers: {
                            gml: OpenLayers.Util.applyDefaults({
                                featureMembers: function (e) {
                                    for (var t = this.createElementNSPlus("gml:featureMembers"), i = 0, s = e.length; i < s; ++i) this.writeNode("feature:_typeName", e[i], t);
                                    return t
                                },
                                Point: function (e) {
                                    var t = this.createElementNSPlus("gml:Point");
                                    return this.writeNode("pos", e, t), t
                                },
                                pos: function (e) {
                                    return this.createElementNSPlus("gml:pos", {
                                        value: this.xy ? e.x + " " + e.y : e.y + " " + e.x
                                    })
                                },
                                LineString: function (e) {
                                    var t = this.createElementNSPlus("gml:LineString");
                                    return this.writeNode("posList", e.components, t), t
                                },
                                Curve: function (e) {
                                    var t = this.createElementNSPlus("gml:Curve");
                                    return this.writeNode("segments", e, t), t
                                },
                                segments: function (e) {
                                    var t = this.createElementNSPlus("gml:segments");
                                    return this.writeNode("LineStringSegment", e, t), t
                                },
                                LineStringSegment: function (e) {
                                    var t = this.createElementNSPlus("gml:LineStringSegment");
                                    return this.writeNode("posList", e.components, t), t
                                },
                                posList: function (e) {
                                    for (var t, i = e.length, s = Array(i), r = 0; r < i; ++r) t = e[r], s[r] = this.xy ? t.x + " " + t.y : t.y + " " + t.x;
                                    return this.createElementNSPlus("gml:posList", {
                                        value: s.join(" ")
                                    })
                                },
                                Surface: function (e) {
                                    var t = this.createElementNSPlus("gml:Surface");
                                    return this.writeNode("patches", e, t), t
                                },
                                patches: function (e) {
                                    var t = this.createElementNSPlus("gml:patches");
                                    return this.writeNode("PolygonPatch", e, t), t
                                },
                                PolygonPatch: function (e) {
                                    var t = this.createElementNSPlus("gml:PolygonPatch", {
                                        attributes: {
                                            interpolation: "planar"
                                        }
                                    });
                                    this.writeNode("exterior", e.components[0], t);
                                    for (var i = 1, s = e.components.length; i < s; ++i) this.writeNode("interior", e.components[i], t);
                                    return t
                                },
                                Polygon: function (e) {
                                    var t = this.createElementNSPlus("gml:Polygon");
                                    this.writeNode("exterior", e.components[0], t);
                                    for (var i = 1, s = e.components.length; i < s; ++i) this.writeNode("interior", e.components[i], t);
                                    return t
                                },
                                exterior: function (e) {
                                    var t = this.createElementNSPlus("gml:exterior");
                                    return this.writeNode("LinearRing", e, t), t
                                },
                                interior: function (e) {
                                    var t = this.createElementNSPlus("gml:interior");
                                    return this.writeNode("LinearRing", e, t), t
                                },
                                LinearRing: function (e) {
                                    var t = this.createElementNSPlus("gml:LinearRing");
                                    return this.writeNode("posList", e.components, t), t
                                },
                                MultiCurve: function (e) {
                                    for (var t = this.createElementNSPlus("gml:MultiCurve"), i = 0, s = (e = e.components || [e]).length; i < s; ++i) this.writeNode("curveMember", e[i], t);
                                    return t
                                },
                                curveMember: function (e) {
                                    var t = this.createElementNSPlus("gml:curveMember");
                                    return this.curve ? this.writeNode("Curve", e, t) : this.writeNode("LineString", e, t), t
                                },
                                MultiSurface: function (e) {
                                    for (var t = this.createElementNSPlus("gml:MultiSurface"), i = 0, s = (e = e.components || [e]).length; i < s; ++i) this.writeNode("surfaceMember", e[i], t);
                                    return t
                                },
                                surfaceMember: function (e) {
                                    var t = this.createElementNSPlus("gml:surfaceMember");
                                    return this.surface ? this.writeNode("Surface", e, t) : this.writeNode("Polygon", e, t), t
                                },
                                Envelope: function (e) {
                                    var t = this.createElementNSPlus("gml:Envelope");
                                    return this.writeNode("lowerCorner", e, t), this.writeNode("upperCorner", e, t), this.srsName && t.setAttribute("srsName", this.srsName), t
                                },
                                lowerCorner: function (e) {
                                    return this.createElementNSPlus("gml:lowerCorner", {
                                        value: this.xy ? e.left + " " + e.bottom : e.bottom + " " + e.left
                                    })
                                },
                                upperCorner: function (e) {
                                    return this.createElementNSPlus("gml:upperCorner", {
                                        value: this.xy ? e.right + " " + e.top : e.top + " " + e.right
                                    })
                                }
                            }, OpenLayers.Format.GML.Base.prototype.writers.gml),
                            feature: OpenLayers.Format.GML.Base.prototype.writers.feature,
                            wfs: OpenLayers.Format.GML.Base.prototype.writers.wfs
                        },
                        setGeometryTypes: function () {
                            this.geometryTypes = {
                                "OpenLayers.Geometry.Point": "Point",
                                "OpenLayers.Geometry.MultiPoint": "MultiPoint",
                                "OpenLayers.Geometry.LineString": !0 === this.curve ? "Curve" : "LineString",
                                "OpenLayers.Geometry.MultiLineString": !1 === this.multiCurve ? "MultiLineString" : "MultiCurve",
                                "OpenLayers.Geometry.Polygon": !0 === this.surface ? "Surface" : "Polygon",
                                "OpenLayers.Geometry.MultiPolygon": !1 === this.multiSurface ? "MultiPolygon" : "MultiSurface",
                                "OpenLayers.Geometry.Collection": "GeometryCollection"
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.GML.v3"
                    }), OpenLayers.Format.Filter.v1_1_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v1, {
                        VERSION: "1.1.0",
                        schemaLocation: "http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",
                        initialize: function (e) {
                            OpenLayers.Format.GML.v3.prototype.initialize.apply(this, [e])
                        },
                        readers: {
                            ogc: OpenLayers.Util.applyDefaults({
                                PropertyIsEqualTo: function (e, t) {
                                    var i = e.getAttribute("matchCase");
                                    i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.EQUAL_TO,
                                        matchCase: !("false" === i || "0" === i)
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsNotEqualTo: function (e, t) {
                                    var i = e.getAttribute("matchCase");
                                    i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
                                        matchCase: !("false" === i || "0" === i)
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsLike: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.LIKE
                                    });
                                    this.readChildNodes(e, i);
                                    var s = e.getAttribute("wildCard"),
                                        r = e.getAttribute("singleChar"),
                                        n = e.getAttribute("escapeChar");
                                    i.value2regex(s, r, n), t.filters.push(i)
                                }
                            }, OpenLayers.Format.Filter.v1.prototype.readers.ogc),
                            gml: OpenLayers.Format.GML.v3.prototype.readers.gml,
                            feature: OpenLayers.Format.GML.v3.prototype.readers.feature
                        },
                        writers: {
                            ogc: OpenLayers.Util.applyDefaults({
                                PropertyIsEqualTo: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsEqualTo", {
                                        attributes: {
                                            matchCase: e.matchCase
                                        }
                                    });
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsNotEqualTo: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsNotEqualTo", {
                                        attributes: {
                                            matchCase: e.matchCase
                                        }
                                    });
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsLike: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsLike", {
                                        attributes: {
                                            matchCase: e.matchCase,
                                            wildCard: "*",
                                            singleChar: ".",
                                            escapeChar: "!"
                                        }
                                    });
                                    return this.writeNode("PropertyName", e, t), this.writeNode("Literal", e.regex2value(), t), t
                                },
                                BBOX: function (e) {
                                    var t = this.createElementNSPlus("ogc:BBOX");
                                    e.property && this.writeNode("PropertyName", e, t);
                                    var i = this.writeNode("gml:Envelope", e.value);
                                    return e.projection && i.setAttribute("srsName", e.projection), t.appendChild(i), t
                                },
                                SortBy: function (e) {
                                    for (var t = this.createElementNSPlus("ogc:SortBy"), i = 0, s = e.length; i < s; i++) this.writeNode("ogc:SortProperty", e[i], t);
                                    return t
                                },
                                SortProperty: function (e) {
                                    var t = this.createElementNSPlus("ogc:SortProperty");
                                    return this.writeNode("ogc:PropertyName", e, t), this.writeNode("ogc:SortOrder", "DESC" == e.order ? "DESC" : "ASC", t), t
                                },
                                SortOrder: function (e) {
                                    return this.createElementNSPlus("ogc:SortOrder", {
                                        value: e
                                    })
                                }
                            }, OpenLayers.Format.Filter.v1.prototype.writers.ogc),
                            gml: OpenLayers.Format.GML.v3.prototype.writers.gml,
                            feature: OpenLayers.Format.GML.v3.prototype.writers.feature
                        },
                        writeSpatial: function (e, t) {
                            var i, s = this.createElementNSPlus("ogc:" + t);
                            (this.writeNode("PropertyName", e, s), e.value instanceof OpenLayers.Filter.Function) ? this.writeNode("Function", e.value, s): (i = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Envelope", e.value), e.projection && i.setAttribute("srsName", e.projection), s.appendChild(i));
                            return s
                        },
                        CLASS_NAME: "OpenLayers.Format.Filter.v1_1_0"
                    }), OpenLayers.Format.OWSCommon = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.0.0",
                        getVersion: function (e, t) {
                            var i = this.version;
                            if (!i) {
                                var s = e.getAttribute("xmlns:ows");
                                s && "1.1" === s.substring(s.lastIndexOf("/") + 1) && (i = "1.1.0"), i || (i = this.defaultVersion)
                            }
                            return i
                        },
                        CLASS_NAME: "OpenLayers.Format.OWSCommon"
                    }), OpenLayers.Format.OWSCommon.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        read: function (e, t) {
                            OpenLayers.Util.applyDefaults(t, this.options);
                            var i = {};
                            return this.readChildNodes(e, i), i
                        },
                        readers: {
                            ows: {
                                Exception: function (e, t) {
                                    var i = {
                                        code: e.getAttribute("exceptionCode"),
                                        locator: e.getAttribute("locator"),
                                        texts: []
                                    };
                                    t.exceptions.push(i), this.readChildNodes(e, i)
                                },
                                ExceptionText: function (e, t) {
                                    var i = this.getChildValue(e);
                                    t.texts.push(i)
                                },
                                ServiceIdentification: function (e, t) {
                                    t.serviceIdentification = {}, this.readChildNodes(e, t.serviceIdentification)
                                },
                                Title: function (e, t) {
                                    t.title = this.getChildValue(e)
                                },
                                Abstract: function (e, t) {
                                    t.abstract = this.getChildValue(e)
                                },
                                Keywords: function (e, t) {
                                    t.keywords = {}, this.readChildNodes(e, t.keywords)
                                },
                                Keyword: function (e, t) {
                                    t[this.getChildValue(e)] = !0
                                },
                                ServiceType: function (e, t) {
                                    t.serviceType = {
                                        codeSpace: e.getAttribute("codeSpace"),
                                        value: this.getChildValue(e)
                                    }
                                },
                                ServiceTypeVersion: function (e, t) {
                                    t.serviceTypeVersion = this.getChildValue(e)
                                },
                                Fees: function (e, t) {
                                    t.fees = this.getChildValue(e)
                                },
                                AccessConstraints: function (e, t) {
                                    t.accessConstraints = this.getChildValue(e)
                                },
                                ServiceProvider: function (e, t) {
                                    t.serviceProvider = {}, this.readChildNodes(e, t.serviceProvider)
                                },
                                ProviderName: function (e, t) {
                                    t.providerName = this.getChildValue(e)
                                },
                                ProviderSite: function (e, t) {
                                    t.providerSite = this.getAttributeNS(e, this.namespaces.xlink, "href")
                                },
                                ServiceContact: function (e, t) {
                                    t.serviceContact = {}, this.readChildNodes(e, t.serviceContact)
                                },
                                IndividualName: function (e, t) {
                                    t.individualName = this.getChildValue(e)
                                },
                                PositionName: function (e, t) {
                                    t.positionName = this.getChildValue(e)
                                },
                                ContactInfo: function (e, t) {
                                    t.contactInfo = {}, this.readChildNodes(e, t.contactInfo)
                                },
                                Phone: function (e, t) {
                                    t.phone = {}, this.readChildNodes(e, t.phone)
                                },
                                Voice: function (e, t) {
                                    t.voice = this.getChildValue(e)
                                },
                                Address: function (e, t) {
                                    t.address = {}, this.readChildNodes(e, t.address)
                                },
                                DeliveryPoint: function (e, t) {
                                    t.deliveryPoint = this.getChildValue(e)
                                },
                                City: function (e, t) {
                                    t.city = this.getChildValue(e)
                                },
                                AdministrativeArea: function (e, t) {
                                    t.administrativeArea = this.getChildValue(e)
                                },
                                PostalCode: function (e, t) {
                                    t.postalCode = this.getChildValue(e)
                                },
                                Country: function (e, t) {
                                    t.country = this.getChildValue(e)
                                },
                                ElectronicMailAddress: function (e, t) {
                                    t.electronicMailAddress = this.getChildValue(e)
                                },
                                Role: function (e, t) {
                                    t.role = this.getChildValue(e)
                                },
                                OperationsMetadata: function (e, t) {
                                    t.operationsMetadata = {}, this.readChildNodes(e, t.operationsMetadata)
                                },
                                Operation: function (e, t) {
                                    var i = e.getAttribute("name");
                                    t[i] = {}, this.readChildNodes(e, t[i])
                                },
                                DCP: function (e, t) {
                                    t.dcp = {}, this.readChildNodes(e, t.dcp)
                                },
                                HTTP: function (e, t) {
                                    t.http = {}, this.readChildNodes(e, t.http)
                                },
                                Get: function (e, t) {
                                    t.get || (t.get = []);
                                    var i = {
                                        url: this.getAttributeNS(e, this.namespaces.xlink, "href")
                                    };
                                    this.readChildNodes(e, i), t.get.push(i)
                                },
                                Post: function (e, t) {
                                    t.post || (t.post = []);
                                    var i = {
                                        url: this.getAttributeNS(e, this.namespaces.xlink, "href")
                                    };
                                    this.readChildNodes(e, i), t.post.push(i)
                                },
                                Parameter: function (e, t) {
                                    t.parameters || (t.parameters = {});
                                    var i = e.getAttribute("name");
                                    t.parameters[i] = {}, this.readChildNodes(e, t.parameters[i])
                                },
                                Constraint: function (e, t) {
                                    t.constraints || (t.constraints = {});
                                    var i = e.getAttribute("name");
                                    t.constraints[i] = {}, this.readChildNodes(e, t.constraints[i])
                                },
                                Value: function (e, t) {
                                    t[this.getChildValue(e)] = !0
                                },
                                OutputFormat: function (e, t) {
                                    t.formats.push({
                                        value: this.getChildValue(e)
                                    }), this.readChildNodes(e, t)
                                },
                                WGS84BoundingBox: function (e, t) {
                                    var i = {};
                                    i.crs = e.getAttribute("crs"), t.BoundingBox ? t.BoundingBox.push(i) : (t.projection = i.crs, i = t), this.readChildNodes(e, i)
                                },
                                BoundingBox: function (e, t) {
                                    this.readers.ows.WGS84BoundingBox.apply(this, [e, t])
                                },
                                LowerCorner: function (e, t) {
                                    var i = (i = (i = this.getChildValue(e).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace);
                                    t.left = i[0], t.bottom = i[1]
                                },
                                UpperCorner: function (e, t) {
                                    var i = (i = (i = this.getChildValue(e).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace);
                                    t.right = i[0], t.top = i[1], t.bounds = new OpenLayers.Bounds(t.left, t.bottom, t.right, t.top), delete t.left, delete t.bottom, delete t.right, delete t.top
                                },
                                Language: function (e, t) {
                                    t.language = this.getChildValue(e)
                                }
                            }
                        },
                        writers: {
                            ows: {
                                BoundingBox: function (e, t) {
                                    var i = this.createElementNSPlus(t || "ows:BoundingBox", {
                                        attributes: {
                                            crs: e.projection
                                        }
                                    });
                                    return this.writeNode("ows:LowerCorner", e, i), this.writeNode("ows:UpperCorner", e, i), i
                                },
                                LowerCorner: function (e) {
                                    return this.createElementNSPlus("ows:LowerCorner", {
                                        value: e.bounds.left + " " + e.bounds.bottom
                                    })
                                },
                                UpperCorner: function (e) {
                                    return this.createElementNSPlus("ows:UpperCorner", {
                                        value: e.bounds.right + " " + e.bounds.top
                                    })
                                },
                                Identifier: function (e) {
                                    return this.createElementNSPlus("ows:Identifier", {
                                        value: e
                                    })
                                },
                                Title: function (e) {
                                    return this.createElementNSPlus("ows:Title", {
                                        value: e
                                    })
                                },
                                Abstract: function (e) {
                                    return this.createElementNSPlus("ows:Abstract", {
                                        value: e
                                    })
                                },
                                OutputFormat: function (e) {
                                    return this.createElementNSPlus("ows:OutputFormat", {
                                        value: e
                                    })
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.OWSCommon.v1"
                    }), OpenLayers.Format.OWSCommon.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows",
                            xlink: "http://www.w3.org/1999/xlink"
                        },
                        readers: {
                            ows: OpenLayers.Util.applyDefaults({
                                ExceptionReport: function (e, t) {
                                    t.success = !1, t.exceptionReport = {
                                        version: e.getAttribute("version"),
                                        language: e.getAttribute("language"),
                                        exceptions: []
                                    }, this.readChildNodes(e, t.exceptionReport)
                                }
                            }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)
                        },
                        writers: {
                            ows: OpenLayers.Format.OWSCommon.v1.prototype.writers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.OWSCommon.v1_0_0"
                    }), OpenLayers.Format.WFST.v1_1_0 = OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0, OpenLayers.Format.WFST.v1, {
                        version: "1.1.0",
                        schemaLocations: {
                            wfs: "http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"
                        },
                        initialize: function (e) {
                            OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this, [e]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [e])
                        },
                        readNode: function (e, t, i) {
                            return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments)
                        },
                        readers: {
                            wfs: OpenLayers.Util.applyDefaults({
                                FeatureCollection: function (e, t) {
                                    t.numberOfFeatures = parseInt(e.getAttribute("numberOfFeatures")), OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this, arguments)
                                },
                                TransactionResponse: function (e, t) {
                                    t.insertIds = [], t.success = !1, this.readChildNodes(e, t)
                                },
                                TransactionSummary: function (e, t) {
                                    t.success = !0
                                },
                                InsertResults: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Feature: function (e, t) {
                                    var i = {
                                        fids: []
                                    };
                                    this.readChildNodes(e, i), t.insertIds.push(i.fids[0])
                                }
                            }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
                            gml: OpenLayers.Format.GML.v3.prototype.readers.gml,
                            feature: OpenLayers.Format.GML.v3.prototype.readers.feature,
                            ogc: OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,
                            ows: OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows
                        },
                        writers: {
                            wfs: OpenLayers.Util.applyDefaults({
                                GetFeature: function (e) {
                                    var t = OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this, arguments);
                                    return e && this.setAttributes(t, {
                                        resultType: e.resultType,
                                        startIndex: e.startIndex,
                                        count: e.count
                                    }), t
                                },
                                Query: function (e) {
                                    var t = (e = OpenLayers.Util.extend({
                                            featureNS: this.featureNS,
                                            featurePrefix: this.featurePrefix,
                                            featureType: this.featureType,
                                            srsName: this.srsName
                                        }, e)).featurePrefix,
                                        i = this.createElementNSPlus("wfs:Query", {
                                            attributes: {
                                                typeName: (t ? t + ":" : "") + e.featureType,
                                                srsName: e.srsName
                                            }
                                        });
                                    if (e.featureNS && i.setAttribute("xmlns:" + t, e.featureNS), e.propertyNames) {
                                        t = 0;
                                        for (var s = e.propertyNames.length; t < s; t++) this.writeNode("wfs:PropertyName", {
                                            property: e.propertyNames[t]
                                        }, i)
                                    }
                                    return e.filter && (OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this, e.filter), this.writeNode("ogc:Filter", e.filter, i)), i
                                },
                                PropertyName: function (e) {
                                    return this.createElementNSPlus("wfs:PropertyName", {
                                        value: e.property
                                    })
                                }
                            }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
                            gml: OpenLayers.Format.GML.v3.prototype.writers.gml,
                            feature: OpenLayers.Format.GML.v3.prototype.writers.feature,
                            ogc: OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc
                        },
                        CLASS_NAME: "OpenLayers.Format.WFST.v1_1_0"
                    }), OpenLayers.Protocol = OpenLayers.Class({
                        format: null,
                        options: null,
                        autoDestroy: !0,
                        defaultFilter: null,
                        initialize: function (e) {
                            e = e || {}, OpenLayers.Util.extend(this, e), this.options = e
                        },
                        mergeWithDefaultFilter: function (e) {
                            return e && this.defaultFilter ? new OpenLayers.Filter.Logical({
                                type: OpenLayers.Filter.Logical.AND,
                                filters: [this.defaultFilter, e]
                            }) : e || this.defaultFilter || void 0
                        },
                        destroy: function () {
                            this.format = this.options = null
                        },
                        read: function (e) {
                            (e = e || {}).filter = this.mergeWithDefaultFilter(e.filter)
                        },
                        create: function () {},
                        update: function () {},
                        delete: function () {},
                        commit: function () {},
                        abort: function (e) {},
                        createCallback: function (e, t, i) {
                            return OpenLayers.Function.bind((function () {
                                e.apply(this, [t, i])
                            }), this)
                        },
                        CLASS_NAME: "OpenLayers.Protocol"
                    }), OpenLayers.Protocol.Response = OpenLayers.Class({
                        code: null,
                        requestType: null,
                        last: !0,
                        features: null,
                        data: null,
                        reqFeatures: null,
                        priv: null,
                        error: null,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e)
                        },
                        success: function () {
                            return 0 < this.code
                        },
                        CLASS_NAME: "OpenLayers.Protocol.Response"
                    }), OpenLayers.Protocol.Response.SUCCESS = 1, OpenLayers.Protocol.Response.FAILURE = 0, OpenLayers.Format.JSON = OpenLayers.Class(OpenLayers.Format, {
                        indent: "    ",
                        space: " ",
                        newline: "\n",
                        level: 0,
                        pretty: !1,
                        nativeJSON: !(!window.JSON || "function" != typeof JSON.parse || "function" != typeof JSON.stringify),
                        read: function (a, b) {
                            var c;
                            if (this.nativeJSON) c = JSON.parse(a, b);
                            else try {
                                if (/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")) && (c = eval("(" + a + ")"), "function" == typeof b)) {
                                    var d = function (e, t) {
                                        if (t && "object" == typeof t)
                                            for (var i in t) t.hasOwnProperty(i) && (t[i] = d(i, t[i]));
                                        return b(e, t)
                                    };
                                    c = d("", c)
                                }
                            } catch (e) {}
                            return this.keepData && (this.data = c), c
                        },
                        write: function (e, t) {
                            this.pretty = !!t;
                            var i = null,
                                s = typeof e;
                            if (this.serialize[s]) try {
                                i = !this.pretty && this.nativeJSON ? JSON.stringify(e) : this.serialize[s].apply(this, [e])
                            } catch (e) {
                                OpenLayers.Console.error("Trouble serializing: " + e)
                            }
                            return i
                        },
                        writeIndent: function () {
                            var e = [];
                            if (this.pretty)
                                for (var t = 0; t < this.level; ++t) e.push(this.indent);
                            return e.join("")
                        },
                        writeNewline: function () {
                            return this.pretty ? this.newline : ""
                        },
                        writeSpace: function () {
                            return this.pretty ? this.space : ""
                        },
                        serialize: {
                            object: function (e) {
                                if (null == e) return "null";
                                if (e.constructor == Date) return this.serialize.date.apply(this, [e]);
                                if (e.constructor == Array) return this.serialize.array.apply(this, [e]);
                                var t = ["{"];
                                this.level += 1;
                                var i, s, r, n = !1;
                                for (i in e) e.hasOwnProperty(i) && (s = OpenLayers.Format.JSON.prototype.write.apply(this, [i, this.pretty]), r = OpenLayers.Format.JSON.prototype.write.apply(this, [e[i], this.pretty]), null != s && null != r && (n && t.push(","), t.push(this.writeNewline(), this.writeIndent(), s, ":", this.writeSpace(), r), n = !0));
                                return this.level -= 1, t.push(this.writeNewline(), this.writeIndent(), "}"), t.join("")
                            },
                            array: function (e) {
                                var t, i = ["["];
                                this.level += 1;
                                for (var s = 0, r = e.length; s < r; ++s) null != (t = OpenLayers.Format.JSON.prototype.write.apply(this, [e[s], this.pretty])) && (0 < s && i.push(","), i.push(this.writeNewline(), this.writeIndent(), t));
                                return this.level -= 1, i.push(this.writeNewline(), this.writeIndent(), "]"), i.join("")
                            },
                            string: function (e) {
                                var t = {
                                    "\b": "\\b",
                                    "\t": "\\t",
                                    "\n": "\\n",
                                    "\f": "\\f",
                                    "\r": "\\r",
                                    '"': '\\"',
                                    "\\": "\\\\"
                                };
                                return /["\\\x00-\x1f]/.test(e) ? '"' + e.replace(/([\x00-\x1f\\"])/g, (function (e, i) {
                                    var s = t[i];
                                    return s || (s = i.charCodeAt(), "\\u00" + Math.floor(s / 16).toString(16) + (s % 16).toString(16))
                                })) + '"' : '"' + e + '"'
                            },
                            number: function (e) {
                                return isFinite(e) ? String(e) : "null"
                            },
                            boolean: function (e) {
                                return String(e)
                            },
                            date: function (e) {
                                function t(e) {
                                    return 10 > e ? "0" + e : e
                                }
                                return '"' + e.getFullYear() + "-" + t(e.getMonth() + 1) + "-" + t(e.getDate()) + "T" + t(e.getHours()) + ":" + t(e.getMinutes()) + ":" + t(e.getSeconds()) + '"'
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.JSON"
                    }), OpenLayers.Format.GeoJSON = OpenLayers.Class(OpenLayers.Format.JSON, {
                        ignoreExtraDims: !1,
                        read: function (e, t, i) {
                            t = t || "FeatureCollection";
                            var s = null,
                                r = null;
                            if (r = "string" == typeof e ? OpenLayers.Format.JSON.prototype.read.apply(this, [e, i]) : e) {
                                if ("string" != typeof r.type) OpenLayers.Console.error("Bad GeoJSON - no type: " + e);
                                else if (this.isValidType(r, t)) switch (t) {
                                    case "Geometry":
                                        try {
                                            s = this.parseGeometry(r)
                                        } catch (e) {
                                            OpenLayers.Console.error(e)
                                        }
                                        break;
                                    case "Feature":
                                        try {
                                            (s = this.parseFeature(r)).type = "Feature"
                                        } catch (e) {
                                            OpenLayers.Console.error(e)
                                        }
                                        break;
                                    case "FeatureCollection":
                                        switch (s = [], r.type) {
                                            case "Feature":
                                                try {
                                                    s.push(this.parseFeature(r))
                                                } catch (e) {
                                                    s = null, OpenLayers.Console.error(e)
                                                }
                                                break;
                                            case "FeatureCollection":
                                                for (e = 0, t = r.features.length; e < t; ++e) try {
                                                    s.push(this.parseFeature(r.features[e]))
                                                } catch (e) {
                                                    s = null, OpenLayers.Console.error(e)
                                                }
                                                break;
                                            default:
                                                try {
                                                    var n = this.parseGeometry(r);
                                                    s.push(new OpenLayers.Feature.Vector(n))
                                                } catch (e) {
                                                    s = null, OpenLayers.Console.error(e)
                                                }
                                        }
                                }
                            } else OpenLayers.Console.error("Bad JSON: " + e);
                            return s
                        },
                        isValidType: function (e, t) {
                            var i = !1;
                            switch (t) {
                                case "Geometry":
                                    -1 == OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "), e.type) ? OpenLayers.Console.error("Unsupported geometry type: " + e.type) : i = !0;
                                    break;
                                case "FeatureCollection":
                                    i = !0;
                                    break;
                                default:
                                    e.type == t ? i = !0 : OpenLayers.Console.error("Cannot convert types from " + e.type + " to " + t)
                            }
                            return i
                        },
                        parseFeature: function (e) {
                            var t, i, s;
                            i = e.properties ? e.properties : {}, s = e.geometry && e.geometry.bbox || e.bbox;
                            try {
                                t = this.parseGeometry(e.geometry)
                            } catch (e) {
                                throw e
                            }
                            return t = new OpenLayers.Feature.Vector(t, i), s && (t.bounds = OpenLayers.Bounds.fromArray(s)), e.id && (t.fid = e.id), t
                        },
                        parseGeometry: function (e) {
                            if (null == e) return null;
                            var t, i = !1;
                            if ("GeometryCollection" == e.type) {
                                if (!OpenLayers.Util.isArray(e.geometries)) throw "GeometryCollection must have geometries array: " + e;
                                t = e.geometries.length;
                                i = Array(t);
                                for (var s = 0; s < t; ++s) i[s] = this.parseGeometry.apply(this, [e.geometries[s]]);
                                t = new OpenLayers.Geometry.Collection(i), i = !0
                            } else {
                                if (!OpenLayers.Util.isArray(e.coordinates)) throw "Geometry must have coordinates array: " + e;
                                if (!this.parseCoords[e.type.toLowerCase()]) throw "Unsupported geometry type: " + e.type;
                                try {
                                    t = this.parseCoords[e.type.toLowerCase()].apply(this, [e.coordinates])
                                } catch (e) {
                                    throw e
                                }
                            }
                            return this.internalProjection && this.externalProjection && !i && t.transform(this.externalProjection, this.internalProjection), t
                        },
                        parseCoords: {
                            point: function (e) {
                                if (0 == this.ignoreExtraDims && 2 != e.length) throw "Only 2D points are supported: " + e;
                                return new OpenLayers.Geometry.Point(e[0], e[1])
                            },
                            multipoint: function (e) {
                                for (var t = [], i = null, s = 0, r = e.length; s < r; ++s) {
                                    try {
                                        i = this.parseCoords.point.apply(this, [e[s]])
                                    } catch (e) {
                                        throw e
                                    }
                                    t.push(i)
                                }
                                return new OpenLayers.Geometry.MultiPoint(t)
                            },
                            linestring: function (e) {
                                for (var t = [], i = null, s = 0, r = e.length; s < r; ++s) {
                                    try {
                                        i = this.parseCoords.point.apply(this, [e[s]])
                                    } catch (e) {
                                        throw e
                                    }
                                    t.push(i)
                                }
                                return new OpenLayers.Geometry.LineString(t)
                            },
                            multilinestring: function (e) {
                                for (var t = [], i = null, s = 0, r = e.length; s < r; ++s) {
                                    try {
                                        i = this.parseCoords.linestring.apply(this, [e[s]])
                                    } catch (e) {
                                        throw e
                                    }
                                    t.push(i)
                                }
                                return new OpenLayers.Geometry.MultiLineString(t)
                            },
                            polygon: function (e) {
                                for (var t, i, s = [], r = 0, n = e.length; r < n; ++r) {
                                    try {
                                        i = this.parseCoords.linestring.apply(this, [e[r]])
                                    } catch (e) {
                                        throw e
                                    }
                                    t = new OpenLayers.Geometry.LinearRing(i.components), s.push(t)
                                }
                                return new OpenLayers.Geometry.Polygon(s)
                            },
                            multipolygon: function (e) {
                                for (var t = [], i = null, s = 0, r = e.length; s < r; ++s) {
                                    try {
                                        i = this.parseCoords.polygon.apply(this, [e[s]])
                                    } catch (e) {
                                        throw e
                                    }
                                    t.push(i)
                                }
                                return new OpenLayers.Geometry.MultiPolygon(t)
                            },
                            box: function (e) {
                                if (2 != e.length) throw "GeoJSON box coordinates must have 2 elements";
                                return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(e[0][0], e[0][1]), new OpenLayers.Geometry.Point(e[1][0], e[0][1]), new OpenLayers.Geometry.Point(e[1][0], e[1][1]), new OpenLayers.Geometry.Point(e[0][0], e[1][1]), new OpenLayers.Geometry.Point(e[0][0], e[0][1])])])
                            }
                        },
                        write: function (e, t) {
                            var i = {
                                type: null
                            };
                            if (OpenLayers.Util.isArray(e)) {
                                i.type = "FeatureCollection";
                                var s = e.length;
                                i.features = Array(s);
                                for (var r = 0; r < s; ++r) {
                                    var n = e[r];
                                    if (!n instanceof OpenLayers.Feature.Vector) throw "FeatureCollection only supports collections of features: " + n;
                                    i.features[r] = this.extract.feature.apply(this, [n])
                                }
                            } else 0 == e.CLASS_NAME.indexOf("OpenLayers.Geometry") ? i = this.extract.geometry.apply(this, [e]) : e instanceof OpenLayers.Feature.Vector && (i = this.extract.feature.apply(this, [e]), e.layer && e.layer.projection && (i.crs = this.createCRSObject(e)));
                            return OpenLayers.Format.JSON.prototype.write.apply(this, [i, t])
                        },
                        createCRSObject: function (e) {
                            var t = {};
                            return (e = e.layer.projection.toString()).match(/epsg:/i) && (t = 4326 == (e = parseInt(e.substring(e.indexOf(":") + 1))) ? {
                                type: "name",
                                properties: {
                                    name: "urn:ogc:def:crs:OGC:1.3:CRS84"
                                }
                            } : {
                                type: "name",
                                properties: {
                                    name: "EPSG:" + e
                                }
                            }), t
                        },
                        extract: {
                            feature: function (e) {
                                var t = this.extract.geometry.apply(this, [e.geometry]);
                                t = {
                                    type: "Feature",
                                    properties: e.attributes,
                                    geometry: t
                                };
                                return null != e.fid && (t.id = e.fid), t
                            },
                            geometry: function (e) {
                                if (null == e) return null;
                                this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
                                var t = e.CLASS_NAME.split(".")[2];
                                return e = this.extract[t.toLowerCase()].apply(this, [e]), "Collection" == t ? {
                                    type: "GeometryCollection",
                                    geometries: e
                                } : {
                                    type: t,
                                    coordinates: e
                                }
                            },
                            point: function (e) {
                                return [e.x, e.y]
                            },
                            multipoint: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extract.point.apply(this, [e.components[i]]));
                                return t
                            },
                            linestring: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extract.point.apply(this, [e.components[i]]));
                                return t
                            },
                            multilinestring: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extract.linestring.apply(this, [e.components[i]]));
                                return t
                            },
                            polygon: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extract.linestring.apply(this, [e.components[i]]));
                                return t
                            },
                            multipolygon: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extract.polygon.apply(this, [e.components[i]]));
                                return t
                            },
                            collection: function (e) {
                                for (var t = e.components.length, i = Array(t), s = 0; s < t; ++s) i[s] = this.extract.geometry.apply(this, [e.components[s]]);
                                return i
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.GeoJSON"
                    }), OpenLayers.Protocol.Script = OpenLayers.Class(OpenLayers.Protocol, {
                        url: null,
                        params: null,
                        callback: null,
                        callbackTemplate: "OpenLayers.Protocol.Script.registry.${id}",
                        callbackKey: "callback",
                        callbackPrefix: "",
                        scope: null,
                        format: null,
                        pendingRequests: null,
                        srsInBBOX: !1,
                        initialize: function (e) {
                            if (e = e || {}, this.params = {}, this.pendingRequests = {}, OpenLayers.Protocol.prototype.initialize.apply(this, arguments), this.format || (this.format = new OpenLayers.Format.GeoJSON), !this.filterToParams && OpenLayers.Format.QueryStringFilter) {
                                var t = new OpenLayers.Format.QueryStringFilter({
                                    srsInBBOX: this.srsInBBOX
                                });
                                this.filterToParams = function (e, i) {
                                    return t.write(e, i)
                                }
                            }
                        },
                        read: function (e) {
                            OpenLayers.Protocol.prototype.read.apply(this, arguments), (e = OpenLayers.Util.applyDefaults(e, this.options)).params = OpenLayers.Util.applyDefaults(e.params, this.options.params), e.filter && this.filterToParams && (e.params = this.filterToParams(e.filter, e.params));
                            var t = new OpenLayers.Protocol.Response({
                                    requestType: "read"
                                }),
                                i = this.createRequest(e.url, e.params, OpenLayers.Function.bind((function (i) {
                                    t.data = i, this.handleRead(t, e)
                                }), this));
                            return t.priv = i, t
                        },
                        createRequest: function (e, t, i) {
                            i = OpenLayers.Protocol.Script.register(i);
                            var s = OpenLayers.String.format(this.callbackTemplate, {
                                id: i
                            });
                            return (t = OpenLayers.Util.extend({}, t))[this.callbackKey] = this.callbackPrefix + s, e = OpenLayers.Util.urlAppend(e, OpenLayers.Util.getParameterString(t)), (t = document.createElement("script")).type = "text/javascript", t.src = e, t.id = "OpenLayers_Protocol_Script_" + i, this.pendingRequests[t.id] = t, document.getElementsByTagName("head")[0].appendChild(t), t
                        },
                        destroyRequest: function (e) {
                            OpenLayers.Protocol.Script.unregister(e.id.split("_").pop()), delete this.pendingRequests[e.id], e.parentNode && e.parentNode.removeChild(e)
                        },
                        handleRead: function (e, t) {
                            this.handleResponse(e, t)
                        },
                        handleResponse: function (e, t) {
                            t.callback && (e.data ? (e.features = this.parseFeatures(e.data), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, this.destroyRequest(e.priv), t.callback.call(t.scope, e))
                        },
                        parseFeatures: function (e) {
                            return this.format.read(e)
                        },
                        abort: function (e) {
                            if (e) this.destroyRequest(e.priv);
                            else
                                for (var t in this.pendingRequests) this.destroyRequest(this.pendingRequests[t])
                        },
                        destroy: function () {
                            this.abort(), delete this.params, delete this.format, OpenLayers.Protocol.prototype.destroy.apply(this)
                        },
                        CLASS_NAME: "OpenLayers.Protocol.Script"
                    }),
                    function () {
                        var e = OpenLayers.Protocol.Script,
                            t = 0;
                        e.registry = {}, e.register = function (i) {
                            var s = "c" + ++t;
                            return e.registry[s] = function () {
                                i.apply(this, arguments)
                            }, s
                        }, e.unregister = function (t) {
                            delete e.registry[t]
                        }
                    }(), OpenLayers.Format.EncodedPolyline = OpenLayers.Class(OpenLayers.Format, {
                        geometryType: "linestring",
                        initialize: function (e) {
                            OpenLayers.Format.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            var t;
                            if ("linestring" == this.geometryType) t = OpenLayers.Geometry.LineString;
                            else if ("linearring" == this.geometryType) t = OpenLayers.Geometry.LinearRing;
                            else if ("multipoint" == this.geometryType) t = OpenLayers.Geometry.MultiPoint;
                            else if ("point" != this.geometryType && "polygon" != this.geometryType) return null;
                            for (var i = (e = this.decodeDeltas(e, 2)).length, s = [], r = 0; r + 1 < i;) {
                                var n = e[r++],
                                    a = e[r++];
                                s.push(new OpenLayers.Geometry.Point(a, n))
                            }
                            return "point" == this.geometryType ? new OpenLayers.Feature.Vector(s[0]) : "polygon" == this.geometryType ? new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)])) : new OpenLayers.Feature.Vector(new t(s))
                        },
                        decode: function (e, t, i) {
                            i = (e = this.decodeDeltas(e, t, i || 1e5)).length;
                            for (var s = [], r = 0; r + (t - 1) < i;) {
                                for (var n = [], a = 0; a < t; ++a) n.push(e[r++]);
                                s.push(n)
                            }
                            return s
                        },
                        write: function (e) {
                            if ("point" == (t = (e = (e.constructor == Array ? e[0] : e).geometry).CLASS_NAME.split(".")[2].toLowerCase())) e = Array(e);
                            else if ("linestring" == t || "linearring" == t || "multipoint" == t) e = e.components;
                            else {
                                if ("polygon" != t) return null;
                                e = e.components[0].components
                            }
                            for (var t = [], i = e.length, s = 0; s < i; ++s) {
                                var r = e[s];
                                t.push(r.y), t.push(r.x)
                            }
                            return this.encodeDeltas(t, 2)
                        },
                        encode: function (e, t, i) {
                            i = i || 1e5;
                            for (var s = [], r = e.length, n = 0; n < r; ++n)
                                for (var a = e[n], o = 0; o < t; ++o) s.push(a[o]);
                            return this.encodeDeltas(s, t, i)
                        },
                        encodeDeltas: function (e, t, i) {
                            var s, r = Array(t);
                            for (s = 0; s < t; ++s) r[s] = 0;
                            for (var n = e.length, a = 0; a < n;)
                                for (s = 0; s < t; ++s, ++a) {
                                    var o = e[a],
                                        l = o - r[s];
                                    r[s] = o, e[a] = l
                                }
                            return this.encodeFloats(e, i || 1e5)
                        },
                        decodeDeltas: function (e, t, i) {
                            var s, r = Array(t);
                            for (s = 0; s < t; ++s) r[s] = 0;
                            i = (e = this.decodeFloats(e, i || 1e5)).length;
                            for (var n = 0; n < i;)
                                for (s = 0; s < t; ++s, ++n) r[s] += e[n], e[n] = r[s];
                            return e
                        },
                        encodeFloats: function (e, t) {
                            for (var i = t || 1e5, s = e.length, r = 0; r < s; ++r) e[r] = Math.round(e[r] * i);
                            return this.encodeSignedIntegers(e)
                        },
                        decodeFloats: function (e, t) {
                            for (var i = t || 1e5, s = this.decodeSignedIntegers(e), r = s.length, n = 0; n < r; ++n) s[n] /= i;
                            return s
                        },
                        encodeSignedIntegers: function (e) {
                            for (var t = e.length, i = 0; i < t; ++i) {
                                var s = e[i],
                                    r = s << 1;
                                0 > s && (r = ~r), e[i] = r
                            }
                            return this.encodeUnsignedIntegers(e)
                        },
                        decodeSignedIntegers: function (e) {
                            for (var t = (e = this.decodeUnsignedIntegers(e)).length, i = 0; i < t; ++i) {
                                var s = e[i];
                                e[i] = 1 & s ? ~(s >> 1) : s >> 1
                            }
                            return e
                        },
                        encodeUnsignedIntegers: function (e) {
                            for (var t = "", i = e.length, s = 0; s < i; ++s) t += this.encodeUnsignedInteger(e[s]);
                            return t
                        },
                        decodeUnsignedIntegers: function (e) {
                            for (var t = [], i = 0, s = 0, r = e.length, n = 0; n < r; ++n) {
                                var a = e.charCodeAt(n) - 63;
                                i = i | (31 & a) << s;
                                32 > a ? (t.push(i), s = i = 0) : s += 5
                            }
                            return t
                        },
                        encodeFloat: function (e, t) {
                            return e = Math.round(e * (t || 1e5)), this.encodeSignedInteger(e)
                        },
                        decodeFloat: function (e, t) {
                            return this.decodeSignedInteger(e) / (t || 1e5)
                        },
                        encodeSignedInteger: function (e) {
                            var t = e << 1;
                            return 0 > e && (t = ~t), this.encodeUnsignedInteger(t)
                        },
                        decodeSignedInteger: function (e) {
                            return 1 & (e = this.decodeUnsignedInteger(e)) ? ~(e >> 1) : e >> 1
                        },
                        encodeUnsignedInteger: function (e) {
                            for (var t, i = ""; 32 <= e;) t = 63 + (32 | 31 & e), i += String.fromCharCode(t), e >>= 5;
                            return i + String.fromCharCode(e + 63)
                        },
                        decodeUnsignedInteger: function (e) {
                            for (var t = 0, i = 0, s = e.length, r = 0; r < s; ++r) {
                                var n = e.charCodeAt(r) - 63;
                                t = t | (31 & n) << i;
                                if (32 > n) break;
                                i += 5
                            }
                            return t
                        },
                        CLASS_NAME: "OpenLayers.Format.EncodedPolyline"
                    }), OpenLayers.Control.Panel = OpenLayers.Class(OpenLayers.Control, {
                        controls: null,
                        autoActivate: !0,
                        defaultControl: null,
                        saveState: !1,
                        allowDepress: !1,
                        activeState: null,
                        initialize: function (e) {
                            OpenLayers.Control.prototype.initialize.apply(this, [e]), this.controls = [], this.activeState = {}
                        },
                        destroy: function () {
                            this.map && this.map.events.unregister("buttonclick", this, this.onButtonClick), OpenLayers.Control.prototype.destroy.apply(this, arguments);
                            for (var e, t = this.controls.length - 1; 0 <= t; t--)(e = this.controls[t]).events && e.events.un({
                                activate: this.iconOn,
                                deactivate: this.iconOff
                            }), e.panel_div = null;
                            this.activeState = null
                        },
                        activate: function () {
                            if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {
                                for (var e, t = 0, i = this.controls.length; t < i; t++)((e = this.controls[t]) === this.defaultControl || this.saveState && this.activeState[e.id]) && e.activate();
                                return !0 === this.saveState && (this.defaultControl = null), this.redraw(), !0
                            }
                            return !1
                        },
                        deactivate: function () {
                            if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {
                                for (var e, t = 0, i = this.controls.length; t < i; t++) e = this.controls[t], this.activeState[e.id] = e.deactivate();
                                return this.redraw(), !0
                            }
                            return !1
                        },
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this, arguments), this.outsideViewport ? (this.events.attachToElement(this.div), this.events.register("buttonclick", this, this.onButtonClick)) : this.map.events.register("buttonclick", this, this.onButtonClick), this.addControlsToMap(this.controls), this.div
                        },
                        redraw: function () {
                            for (var e = this.div.childNodes.length - 1; 0 <= e; e--) this.div.removeChild(this.div.childNodes[e]);
                            if (this.div.innerHTML = "", this.active) {
                                e = 0;
                                for (var t = this.controls.length; e < t; e++) this.div.appendChild(this.controls[e].panel_div)
                            }
                        },
                        activateControl: function (e) {
                            if (!this.active) return !1;
                            if (e.type == OpenLayers.Control.TYPE_BUTTON) e.trigger();
                            else if (e.type == OpenLayers.Control.TYPE_TOGGLE) e.active ? e.deactivate() : e.activate();
                            else if (this.allowDepress && e.active) e.deactivate();
                            else {
                                for (var t, i = 0, s = this.controls.length; i < s; i++)(t = this.controls[i]) == e || t.type !== OpenLayers.Control.TYPE_TOOL && null != t.type || t.deactivate();
                                e.activate()
                            }
                        },
                        addControls: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]), this.controls = this.controls.concat(e);
                            for (var t = 0, i = e.length; t < i; t++) {
                                var s = e[t],
                                    r = this.createControlMarkup(s);
                                OpenLayers.Element.addClass(r, s.displayClass + "ItemInactive"), OpenLayers.Element.addClass(r, "olButton"), "" == s.title || r.title || (r.title = s.title), s.panel_div = r
                            }
                            this.map && (this.addControlsToMap(e), this.redraw())
                        },
                        createControlMarkup: function (e) {
                            return document.createElement("div")
                        },
                        addControlsToMap: function (e) {
                            for (var t, i = 0, s = e.length; i < s; i++) !0 === (t = e[i]).autoActivate ? (t.autoActivate = !1, this.map.addControl(t), t.autoActivate = !0) : (this.map.addControl(t), t.deactivate()), t.events.on({
                                activate: this.iconOn,
                                deactivate: this.iconOff
                            })
                        },
                        iconOn: function () {
                            var e = this.panel_div;
                            e.className = e.className.replace(RegExp("\\b(" + this.displayClass + "Item)Inactive\\b"), "$1Active")
                        },
                        iconOff: function () {
                            var e = this.panel_div;
                            e.className = e.className.replace(RegExp("\\b(" + this.displayClass + "Item)Active\\b"), "$1Inactive")
                        },
                        onButtonClick: function (e) {
                            var t = this.controls;
                            e = e.buttonElement;
                            for (var i = t.length - 1; 0 <= i; --i)
                                if (t[i].panel_div === e) {
                                    this.activateControl(t[i]);
                                    break
                                }
                        },
                        getControlsBy: function (e, t) {
                            var i = "function" == typeof t.test;
                            return OpenLayers.Array.filter(this.controls, (function (s) {
                                return s[e] == t || i && t.test(s[e])
                            }))
                        },
                        getControlsByName: function (e) {
                            return this.getControlsBy("name", e)
                        },
                        getControlsByClass: function (e) {
                            return this.getControlsBy("CLASS_NAME", e)
                        },
                        CLASS_NAME: "OpenLayers.Control.Panel"
                    }), OpenLayers.Control.Button = OpenLayers.Class(OpenLayers.Control, {
                        type: OpenLayers.Control.TYPE_BUTTON,
                        trigger: function () {},
                        CLASS_NAME: "OpenLayers.Control.Button"
                    }), OpenLayers.Control.ZoomIn = OpenLayers.Class(OpenLayers.Control.Button, {
                        trigger: function () {
                            this.map && this.map.zoomIn()
                        },
                        CLASS_NAME: "OpenLayers.Control.ZoomIn"
                    }), OpenLayers.Control.ZoomOut = OpenLayers.Class(OpenLayers.Control.Button, {
                        trigger: function () {
                            this.map && this.map.zoomOut()
                        },
                        CLASS_NAME: "OpenLayers.Control.ZoomOut"
                    }), OpenLayers.Control.ZoomToMaxExtent = OpenLayers.Class(OpenLayers.Control.Button, {
                        trigger: function () {
                            this.map && this.map.zoomToMaxExtent()
                        },
                        CLASS_NAME: "OpenLayers.Control.ZoomToMaxExtent"
                    }), OpenLayers.Control.ZoomPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
                        initialize: function (e) {
                            OpenLayers.Control.Panel.prototype.initialize.apply(this, [e]), this.addControls([new OpenLayers.Control.ZoomIn, new OpenLayers.Control.ZoomToMaxExtent, new OpenLayers.Control.ZoomOut])
                        },
                        CLASS_NAME: "OpenLayers.Control.ZoomPanel"
                    }), OpenLayers.Layer.HTTPRequest = OpenLayers.Class(OpenLayers.Layer, {
                        URL_HASH_FACTOR: (Math.sqrt(5) - 1) / 2,
                        url: null,
                        params: null,
                        reproject: !1,
                        initialize: function (e, t, i, s) {
                            OpenLayers.Layer.prototype.initialize.apply(this, [e, s]), this.url = t, this.params || (this.params = OpenLayers.Util.extend({}, i))
                        },
                        destroy: function () {
                            this.params = this.url = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.HTTPRequest(this.name, this.url, this.params, this.getOptions())), OpenLayers.Layer.prototype.clone.apply(this, [e])
                        },
                        setUrl: function (e) {
                            this.url = e
                        },
                        mergeNewParams: function (e) {
                            return this.params = OpenLayers.Util.extend(this.params, e), e = this.redraw(), null != this.map && this.map.events.triggerEvent("changelayer", {
                                layer: this,
                                property: "params"
                            }), e
                        },
                        redraw: function (e) {
                            return e ? this.mergeNewParams({
                                _olSalt: Math.random()
                            }) : OpenLayers.Layer.prototype.redraw.apply(this, [])
                        },
                        selectUrl: function (e, t) {
                            for (var i = 1, s = 0, r = e.length; s < r; s++) i *= e.charCodeAt(s) * this.URL_HASH_FACTOR, i -= Math.floor(i);
                            return t[Math.floor(i * t.length)]
                        },
                        getFullRequestString: function (e, t) {
                            var i = t || this.url,
                                s = OpenLayers.Util.extend({}, this.params),
                                r = (s = OpenLayers.Util.extend(s, e), OpenLayers.Util.getParameterString(s));
                            OpenLayers.Util.isArray(i) && (i = this.selectUrl(r, i));
                            var n;
                            r = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
                            for (n in s) n.toUpperCase() in r && delete s[n];
                            return r = OpenLayers.Util.getParameterString(s), OpenLayers.Util.urlAppend(i, r)
                        },
                        CLASS_NAME: "OpenLayers.Layer.HTTPRequest"
                    }), OpenLayers.Tile = OpenLayers.Class({
                        events: null,
                        eventListeners: null,
                        id: null,
                        layer: null,
                        url: null,
                        bounds: null,
                        size: null,
                        position: null,
                        isLoading: !1,
                        initialize: function (e, t, i, s, r, n) {
                            this.layer = e, this.position = t.clone(), this.setBounds(i), this.url = s, r && (this.size = r.clone()), this.id = OpenLayers.Util.createUniqueID("Tile_"), OpenLayers.Util.extend(this, n), this.events = new OpenLayers.Events(this), this.eventListeners instanceof Object && this.events.on(this.eventListeners)
                        },
                        unload: function () {
                            this.isLoading && (this.isLoading = !1, this.events.triggerEvent("unload"))
                        },
                        destroy: function () {
                            this.position = this.size = this.bounds = this.layer = null, this.eventListeners && this.events.un(this.eventListeners), this.events.destroy(), this.events = this.eventListeners = null
                        },
                        draw: function (e) {
                            e || this.clear();
                            var t = this.shouldDraw();
                            return t && !e && !1 === this.events.triggerEvent("beforedraw") && (t = null), t
                        },
                        shouldDraw: function () {
                            var e = !1,
                                t = this.layer.maxExtent;
                            if (t) {
                                var i = (i = this.layer.map).baseLayer.wrapDateLine && i.getMaxExtent();
                                this.bounds.intersectsBounds(t, {
                                    inclusive: !1,
                                    worldBounds: i
                                }) && (e = !0)
                            }
                            return e || this.layer.displayOutsideMaxExtent
                        },
                        setBounds: function (e) {
                            if (e = e.clone(), this.layer.map.baseLayer.wrapDateLine) {
                                var t = this.layer.map.getMaxExtent(),
                                    i = this.layer.map.getResolution();
                                e = e.wrapDateLine(t, {
                                    leftTolerance: i,
                                    rightTolerance: i
                                })
                            }
                            this.bounds = e
                        },
                        moveTo: function (e, t, i) {
                            null == i && (i = !0), this.setBounds(e), this.position = t.clone(), i && this.draw()
                        },
                        clear: function (e) {},
                        CLASS_NAME: "OpenLayers.Tile"
                    }), OpenLayers.Tile.Image = OpenLayers.Class(OpenLayers.Tile, {
                        url: null,
                        imgDiv: null,
                        frame: null,
                        imageReloadAttempts: null,
                        layerAlphaHack: null,
                        asyncRequestId: null,
                        maxGetUrlLength: null,
                        canvasContext: null,
                        crossOriginKeyword: null,
                        initialize: function (e, t, i, s, r, n) {
                            OpenLayers.Tile.prototype.initialize.apply(this, arguments), this.url = s, this.layerAlphaHack = this.layer.alpha && OpenLayers.Util.alphaHack(), (null != this.maxGetUrlLength || this.layer.gutter || this.layerAlphaHack) && (this.frame = document.createElement("div"), this.frame.style.position = "absolute", this.frame.style.overflow = "hidden"), null != this.maxGetUrlLength && OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame)
                        },
                        destroy: function () {
                            this.imgDiv && (this.clear(), this.frame = this.imgDiv = null), this.asyncRequestId = null, OpenLayers.Tile.prototype.destroy.apply(this, arguments)
                        },
                        draw: function () {
                            var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
                            return e ? (this.layer != this.layer.map.baseLayer && this.layer.reproject && (this.bounds = this.getBoundsFromBaseLayer(this.position)), this.isLoading ? this._loadEvent = "reload" : (this.isLoading = !0, this._loadEvent = "loadstart"), this.renderTile(), this.positionTile()) : !1 === e && this.unload(), e
                        },
                        renderTile: function () {
                            if (this.layer.async) {
                                var e = this.asyncRequestId = (this.asyncRequestId || 0) + 1;
                                this.layer.getURLasync(this.bounds, (function (t) {
                                    e == this.asyncRequestId && (this.url = t, this.initImage())
                                }), this)
                            } else this.url = this.layer.getURL(this.bounds), this.initImage()
                        },
                        positionTile: function () {
                            var e = this.getTile().style,
                                t = this.frame ? this.size : this.layer.getImageSize(this.bounds),
                                i = 1;
                            this.layer instanceof OpenLayers.Layer.Grid && (i = this.layer.getServerResolution() / this.layer.map.getResolution()), e.left = this.position.x + "px", e.top = this.position.y + "px", e.width = Math.round(i * t.w) + "px", e.height = Math.round(i * t.h) + "px"
                        },
                        clear: function () {
                            OpenLayers.Tile.prototype.clear.apply(this, arguments);
                            var e = this.imgDiv;
                            if (e) {
                                var t = this.getTile();
                                t.parentNode === this.layer.div && this.layer.div.removeChild(t), this.setImgSrc(), !0 === this.layerAlphaHack && (e.style.filter = ""), OpenLayers.Element.removeClass(e, "olImageLoadError")
                            }
                            this.canvasContext = null
                        },
                        getImage: function () {
                            if (!this.imgDiv) {
                                this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(!1);
                                var e = this.imgDiv.style;
                                if (this.frame) {
                                    var t = 0,
                                        i = 0;
                                    this.layer.gutter && (t = this.layer.gutter / this.layer.tileSize.w * 100, i = this.layer.gutter / this.layer.tileSize.h * 100), e.left = -t + "%", e.top = -i + "%", e.width = 2 * t + 100 + "%", e.height = 2 * i + 100 + "%"
                                }
                                e.visibility = "hidden", e.opacity = 0, 1 > this.layer.opacity && (e.filter = "alpha(opacity=" + 100 * this.layer.opacity + ")"), e.position = "absolute", this.layerAlphaHack && (e.paddingTop = e.height, e.height = "0", e.width = "100%"), this.frame && this.frame.appendChild(this.imgDiv)
                            }
                            return this.imgDiv
                        },
                        setImage: function (e) {
                            this.imgDiv = e
                        },
                        initImage: function () {
                            if (this.url || this.imgDiv) {
                                this.events.triggerEvent("beforeload"), this.layer.div.appendChild(this.getTile()), this.events.triggerEvent(this._loadEvent);
                                var e = this.getImage(),
                                    t = e.getAttribute("src") || "";
                                this.url && OpenLayers.Util.isEquivalentUrl(t, this.url) ? this._loadTimeout = window.setTimeout(OpenLayers.Function.bind(this.onImageLoad, this), 0) : (this.stopLoading(), this.crossOriginKeyword && e.removeAttribute("crossorigin"), OpenLayers.Event.observe(e, "load", OpenLayers.Function.bind(this.onImageLoad, this)), OpenLayers.Event.observe(e, "error", OpenLayers.Function.bind(this.onImageError, this)), this.imageReloadAttempts = 0, this.setImgSrc(this.url))
                            } else this.isLoading = !1
                        },
                        setImgSrc: function (e) {
                            var t = this.imgDiv;
                            e ? (t.style.visibility = "hidden", t.style.opacity = 0, this.crossOriginKeyword && ("data:" !== e.substr(0, 5) ? t.setAttribute("crossorigin", this.crossOriginKeyword) : t.removeAttribute("crossorigin")), t.src = e) : (this.stopLoading(), this.imgDiv = null, t.parentNode && t.parentNode.removeChild(t))
                        },
                        getTile: function () {
                            return this.frame ? this.frame : this.getImage()
                        },
                        createBackBuffer: function () {
                            var e;
                            if (this.imgDiv && !this.isLoading) return this.frame ? (e = this.frame.cloneNode(!1)).appendChild(this.imgDiv) : e = this.imgDiv, this.imgDiv = null, e
                        },
                        onImageLoad: function () {
                            var e = this.imgDiv;
                            this.stopLoading(), e.style.visibility = "inherit", e.style.opacity = this.layer.opacity, this.isLoading = !1, this.canvasContext = null, this.events.triggerEvent("loadend"), !0 === this.layerAlphaHack && (e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + e.src + "', sizingMethod='scale')")
                        },
                        onImageError: function () {
                            var e = this.imgDiv;
                            null != e.src && (this.imageReloadAttempts++, this.imageReloadAttempts <= OpenLayers.IMAGE_RELOAD_ATTEMPTS ? this.setImgSrc(this.layer.getURL(this.bounds)) : (OpenLayers.Element.addClass(e, "olImageLoadError"), this.events.triggerEvent("loaderror"), this.onImageLoad()))
                        },
                        stopLoading: function () {
                            OpenLayers.Event.stopObservingElement(this.imgDiv), window.clearTimeout(this._loadTimeout), delete this._loadTimeout
                        },
                        getCanvasContext: function () {
                            if (OpenLayers.CANVAS_SUPPORTED && this.imgDiv && !this.isLoading) {
                                if (!this.canvasContext) {
                                    var e = document.createElement("canvas");
                                    e.width = this.size.w, e.height = this.size.h, this.canvasContext = e.getContext("2d"), this.canvasContext.drawImage(this.imgDiv, 0, 0)
                                }
                                return this.canvasContext
                            }
                        },
                        CLASS_NAME: "OpenLayers.Tile.Image"
                    }), OpenLayers.Tile.Image.IMAGE = function () {
                        var e = new Image;
                        return e.className = "olTileImage", e.galleryImg = "no", e
                    }(), OpenLayers.Layer.Grid = OpenLayers.Class(OpenLayers.Layer.HTTPRequest, {
                        tileSize: null,
                        tileOriginCorner: "bl",
                        tileOrigin: null,
                        tileOptions: null,
                        tileClass: OpenLayers.Tile.Image,
                        grid: null,
                        singleTile: !1,
                        ratio: 1.5,
                        buffer: 0,
                        transitionEffect: "resize",
                        numLoadingTiles: 0,
                        serverResolutions: null,
                        loading: !1,
                        backBuffer: null,
                        gridResolution: null,
                        backBufferResolution: null,
                        backBufferLonLat: null,
                        backBufferTimerId: null,
                        removeBackBufferDelay: null,
                        className: null,
                        gridLayout: null,
                        rowSign: null,
                        transitionendEvents: ["transitionend", "webkitTransitionEnd", "otransitionend", "oTransitionEnd"],
                        initialize: function (e, t, i, s) {
                            OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this, arguments), this.grid = [], this._removeBackBuffer = OpenLayers.Function.bind(this.removeBackBuffer, this), this.initProperties(), this.rowSign = "t" === this.tileOriginCorner.substr(0, 1) ? 1 : -1
                        },
                        initProperties: function () {
                            void 0 === this.options.removeBackBufferDelay && (this.removeBackBufferDelay = this.singleTile ? 0 : 2500), void 0 === this.options.className && (this.className = this.singleTile ? "olLayerGridSingleTile" : "olLayerGrid")
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this, e), OpenLayers.Element.addClass(this.div, this.className)
                        },
                        removeMap: function (e) {
                            this.removeBackBuffer()
                        },
                        destroy: function () {
                            this.removeBackBuffer(), this.clearGrid(), this.tileSize = this.grid = null, OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this, arguments)
                        },
                        clearGrid: function () {
                            if (this.grid) {
                                for (var e = 0, t = this.grid.length; e < t; e++)
                                    for (var i = this.grid[e], s = 0, r = i.length; s < r; s++) this.destroyTile(i[s]);
                                this.grid = [], this.gridLayout = this.gridResolution = null
                            }
                        },
                        addOptions: function (e, t) {
                            var i = void 0 !== e.singleTile && e.singleTile !== this.singleTile;
                            OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this, arguments), this.map && i && (this.initProperties(), this.clearGrid(), this.tileSize = this.options.tileSize, this.setTileSize(), this.moveTo(null, !0))
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.Grid(this.name, this.url, this.params, this.getOptions())), e = OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this, [e]), null != this.tileSize && (e.tileSize = this.tileSize.clone()), e.grid = [], e.gridResolution = null, e.backBuffer = null, e.backBufferTimerId = null, e.loading = !1, e.numLoadingTiles = 0, e
                        },
                        moveTo: function (e, t, i) {
                            if (OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this, arguments), null != (e = e || this.map.getExtent())) {
                                var s = !this.grid.length || t,
                                    r = this.getTilesBounds(),
                                    n = this.map.getResolution();
                                this.getServerResolution(n), this.singleTile ? (s || !i && !r.containsBounds(e)) && (t && "resize" !== this.transitionEffect && this.removeBackBuffer(), t && "resize" !== this.transitionEffect || this.applyBackBuffer(n), this.initSingleTile(e)) : (s = s || !r.intersectsBounds(e, {
                                    worldBounds: this.map.baseLayer.wrapDateLine && this.map.getMaxExtent()
                                })) ? (!t || "resize" !== this.transitionEffect && this.gridResolution !== n || this.applyBackBuffer(n), this.initGriddedTiles(e)) : this.moveGriddedTiles()
                            }
                        },
                        getTileData: function (e) {
                            var t = null,
                                i = e.lon,
                                s = e.lat,
                                r = this.grid.length;
                            if (this.map && r) {
                                var n = this.map.getResolution();
                                e = this.tileSize.w;
                                var a = this.tileSize.h,
                                    o = (l = this.grid[0][0].bounds).left,
                                    l = l.top;
                                if (i < o && this.map.baseLayer.wrapDateLine) {
                                    var h = this.map.getMaxExtent().getWidth();
                                    i = i + h * Math.ceil((o - i) / h)
                                }
                                i = (i - o) / (n * e), s = (l - s) / (n * a), n = Math.floor(i), 0 <= (o = Math.floor(s)) && o < r && (r = this.grid[o][n]) && (t = {
                                    tile: r,
                                    i: Math.floor((i - n) * e),
                                    j: Math.floor((s - o) * a)
                                })
                            }
                            return t
                        },
                        destroyTile: function (e) {
                            this.removeTileMonitoringHooks(e), e.destroy()
                        },
                        getServerResolution: function (e) {
                            var t = Number.POSITIVE_INFINITY;
                            if (e = e || this.map.getResolution(), this.serverResolutions && -1 === OpenLayers.Util.indexOf(this.serverResolutions, e)) {
                                var i, s, r, n;
                                for (i = this.serverResolutions.length - 1; 0 <= i && (r = this.serverResolutions[i], !((s = Math.abs(r - e)) > t)); i--) t = s, n = r;
                                e = n
                            }
                            return e
                        },
                        getServerZoom: function () {
                            var e = this.getServerResolution();
                            return this.serverResolutions ? OpenLayers.Util.indexOf(this.serverResolutions, e) : this.map.getZoomForResolution(e) + (this.zoomOffset || 0)
                        },
                        applyBackBuffer: function (e) {
                            null !== this.backBufferTimerId && this.removeBackBuffer();
                            var t = this.backBuffer;
                            if (!t) {
                                if (!(t = this.createBackBuffer())) return;
                                e === this.gridResolution ? this.div.insertBefore(t, this.div.firstChild) : this.map.baseLayer.div.parentNode.insertBefore(t, this.map.baseLayer.div), this.backBuffer = t;
                                var i = this.grid[0][0].bounds;
                                this.backBufferLonLat = {
                                    lon: i.left,
                                    lat: i.top
                                }, this.backBufferResolution = this.gridResolution
                            }
                            i = this.backBufferResolution / e;
                            for (var s, r = t.childNodes, n = r.length - 1; 0 <= n; --n)(s = r[n]).style.top = (i * s._i * s._h | 0) + "px", s.style.left = (i * s._j * s._w | 0) + "px", s.style.width = Math.round(i * s._w) + "px", s.style.height = Math.round(i * s._h) + "px";
                            e = this.getViewPortPxFromLonLat(this.backBufferLonLat, e), i = this.map.layerContainerOriginPx.y, t.style.left = Math.round(e.x - this.map.layerContainerOriginPx.x) + "px", t.style.top = Math.round(e.y - i) + "px"
                        },
                        createBackBuffer: function () {
                            var e;
                            if (0 < this.grid.length) {
                                (e = document.createElement("div")).id = this.div.id + "_bb", e.className = "olBackBuffer", e.style.position = "absolute";
                                var t = this.map;
                                e.style.zIndex = "resize" === this.transitionEffect ? this.getZIndex() - 1 : t.Z_INDEX_BASE.BaseLayer - (t.getNumLayers() - t.getLayerIndex(this));
                                t = 0;
                                for (var i = this.grid.length; t < i; t++)
                                    for (var s = 0, r = this.grid[t].length; s < r; s++) {
                                        var n = this.grid[t][s],
                                            a = this.grid[t][s].createBackBuffer();
                                        a && (a._i = t, a._j = s, a._w = n.size.w, a._h = n.size.h, a.id = n.id + "_bb", e.appendChild(a))
                                    }
                            }
                            return e
                        },
                        removeBackBuffer: function () {
                            if (this._transitionElement) {
                                for (var e = this.transitionendEvents.length - 1; 0 <= e; --e) OpenLayers.Event.stopObserving(this._transitionElement, this.transitionendEvents[e], this._removeBackBuffer);
                                delete this._transitionElement
                            }
                            this.backBuffer && (this.backBuffer.parentNode && this.backBuffer.parentNode.removeChild(this.backBuffer), this.backBufferResolution = this.backBuffer = null, null !== this.backBufferTimerId && (window.clearTimeout(this.backBufferTimerId), this.backBufferTimerId = null))
                        },
                        moveByPx: function (e, t) {
                            this.singleTile || this.moveGriddedTiles()
                        },
                        setTileSize: function (e) {
                            this.singleTile && ((e = this.map.getSize()).h = parseInt(e.h * this.ratio, 10), e.w = parseInt(e.w * this.ratio, 10)), OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this, [e])
                        },
                        getTilesBounds: function () {
                            var e = null;
                            if (t = this.grid.length) {
                                e = this.grid[t - 1][0].bounds;
                                var t = this.grid[0].length * e.getWidth(),
                                    i = this.grid.length * e.getHeight();
                                e = new OpenLayers.Bounds(e.left, e.bottom, e.left + t, e.bottom + i)
                            }
                            return e
                        },
                        initSingleTile: function (e) {
                            this.events.triggerEvent("retile");
                            var t = e.getCenterLonLat(),
                                i = e.getWidth() * this.ratio;
                            e = e.getHeight() * this.ratio, t = new OpenLayers.Bounds(t.lon - i / 2, t.lat - e / 2, t.lon + i / 2, t.lat + e / 2), i = this.map.getLayerPxFromLonLat({
                                lon: t.left,
                                lat: t.top
                            }), this.grid.length || (this.grid[0] = []), (e = this.grid[0][0]) ? e.moveTo(t, i) : (e = this.addTile(t, i), this.addTileMonitoringHooks(e), e.draw(), this.grid[0][0] = e), this.removeExcessTiles(1, 1), this.gridResolution = this.getServerResolution()
                        },
                        calculateGridLayout: function (e, t, i) {
                            var s = i * this.tileSize.w;
                            i *= this.tileSize.h;
                            var r = Math.floor((e.left - t.lon) / s) - this.buffer,
                                n = this.rowSign;
                            return {
                                tilelon: s,
                                tilelat: i,
                                startcol: r,
                                startrow: e = Math[~n ? "floor" : "ceil"](n * (t.lat - e.top + i) / i) - this.buffer * n
                            }
                        },
                        getTileOrigin: function () {
                            if (!(e = this.tileOrigin)) {
                                var e = this.getMaxExtent(),
                                    t = {
                                        tl: ["left", "top"],
                                        tr: ["right", "top"],
                                        bl: ["left", "bottom"],
                                        br: ["right", "bottom"]
                                    } [this.tileOriginCorner];
                                e = new OpenLayers.LonLat(e[t[0]], e[t[1]])
                            }
                            return e
                        },
                        getTileBoundsForGridIndex: function (e, t) {
                            var i = this.getTileOrigin(),
                                s = (a = this.gridLayout).tilelon,
                                r = a.tilelat,
                                n = a.startcol,
                                a = a.startrow,
                                o = this.rowSign;
                            return new OpenLayers.Bounds(i.lon + (n + t) * s, i.lat - (a + e * o) * r * o, i.lon + (n + t + 1) * s, i.lat - (a + (e - 1) * o) * r * o)
                        },
                        initGriddedTiles: function (e) {
                            this.events.triggerEvent("retile");
                            var t = this.map.getSize(),
                                i = this.getTileOrigin(),
                                s = (r = this.map.getResolution()) / (o = this.getServerResolution()),
                                r = this.tileSize.w / s,
                                n = (s = this.tileSize.h / s, Math.ceil(t.h / s) + 2 * this.buffer + 1);
                            t = Math.ceil(t.w / r) + 2 * this.buffer + 1;
                            this.gridLayout = o = this.calculateGridLayout(e, i, o);
                            i = o.tilelon;
                            var a = o.tilelat,
                                o = this.map.layerContainerOriginPx.x,
                                l = this.map.layerContainerOriginPx.y,
                                h = this.getTileBoundsForGridIndex(0, 0),
                                p = this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(h.left, h.top));
                            p.x = Math.round(p.x) - o, p.y = Math.round(p.y) - l;
                            o = [], l = this.map.getCenter();
                            var u = 0;
                            do {
                                var c = this.grid[u];
                                c || (c = [], this.grid.push(c));
                                var y = 0;
                                do {
                                    h = this.getTileBoundsForGridIndex(u, y);
                                    var d = p.clone();
                                    d.x += y * Math.round(r), d.y += u * Math.round(s);
                                    var m = c[y];
                                    m ? m.moveTo(h, d, !1) : (m = this.addTile(h, d), this.addTileMonitoringHooks(m), c.push(m)), d = h.getCenterLonLat(), o.push({
                                        tile: m,
                                        distance: Math.pow(d.lon - l.lon, 2) + Math.pow(d.lat - l.lat, 2)
                                    }), y += 1
                                } while (h.right <= e.right + i * this.buffer || y < t);
                                u += 1
                            } while (h.bottom >= e.bottom - a * this.buffer || u < n);
                            for (this.removeExcessTiles(u, y), this.gridResolution = r = this.getServerResolution(), o.sort((function (e, t) {
                                    return e.distance - t.distance
                                })), e = 0, r = o.length; e < r; ++e) o[e].tile.draw()
                        },
                        getMaxExtent: function () {
                            return this.maxExtent
                        },
                        addTile: function (e, t) {
                            var i = new this.tileClass(this, t, e, null, this.tileSize, this.tileOptions);
                            return this.events.triggerEvent("addtile", {
                                tile: i
                            }), i
                        },
                        addTileMonitoringHooks: function (e) {
                            e.onLoadStart = function () {
                                !1 === this.loading && (this.loading = !0, this.events.triggerEvent("loadstart")), this.events.triggerEvent("tileloadstart", {
                                    tile: e
                                }), this.numLoadingTiles++, !this.singleTile && this.backBuffer && this.gridResolution === this.backBufferResolution && OpenLayers.Element.addClass(e.getTile(), "olTileReplacing")
                            }, e.onLoadEnd = function (t) {
                                if (this.numLoadingTiles--, t = "unload" === t.type, this.events.triggerEvent("tileloaded", {
                                        tile: e,
                                        aborted: t
                                    }), !this.singleTile && !t && this.backBuffer && this.gridResolution === this.backBufferResolution) {
                                    var i = e.getTile();
                                    if ("none" === OpenLayers.Element.getStyle(i, "display")) {
                                        var s = document.getElementById(e.id + "_bb");
                                        s && s.parentNode.removeChild(s)
                                    }
                                    OpenLayers.Element.removeClass(i, "olTileReplacing")
                                }
                                if (0 === this.numLoadingTiles) {
                                    if (this.backBuffer)
                                        if (0 === this.backBuffer.childNodes.length) this.removeBackBuffer();
                                        else {
                                            for (this._transitionElement = t ? this.div.lastChild : e.imgDiv, i = (t = this.transitionendEvents).length - 1; 0 <= i; --i) OpenLayers.Event.observe(this._transitionElement, t[i], this._removeBackBuffer);
                                            this.backBufferTimerId = window.setTimeout(this._removeBackBuffer, this.removeBackBufferDelay)
                                        } this.loading = !1, this.events.triggerEvent("loadend")
                                }
                            }, e.onLoadError = function () {
                                this.events.triggerEvent("tileerror", {
                                    tile: e
                                })
                            }, e.events.on({
                                loadstart: e.onLoadStart,
                                loadend: e.onLoadEnd,
                                unload: e.onLoadEnd,
                                loaderror: e.onLoadError,
                                scope: this
                            })
                        },
                        removeTileMonitoringHooks: function (e) {
                            e.unload(), e.events.un({
                                loadstart: e.onLoadStart,
                                loadend: e.onLoadEnd,
                                unload: e.onLoadEnd,
                                loaderror: e.onLoadError,
                                scope: this
                            })
                        },
                        moveGriddedTiles: function () {
                            for (var e = this.buffer + 1;;) {
                                var t = (i = this.grid[0][0]).position.x + this.map.layerContainerOriginPx.x,
                                    i = i.position.y + this.map.layerContainerOriginPx.y,
                                    s = this.getServerResolution() / this.map.getResolution();
                                if (t > -(s = {
                                        w: Math.round(this.tileSize.w * s),
                                        h: Math.round(this.tileSize.h * s)
                                    }).w * (e - 1)) this.shiftColumn(!0, s);
                                else if (t < -s.w * e) this.shiftColumn(!1, s);
                                else if (i > -s.h * (e - 1)) this.shiftRow(!0, s);
                                else {
                                    if (!(i < -s.h * e)) break;
                                    this.shiftRow(!1, s)
                                }
                            }
                        },
                        shiftRow: function (e, t) {
                            var i = this.grid,
                                s = e ? 0 : i.length - 1,
                                r = e ? -1 : 1;
                            this.gridLayout.startrow += r * this.rowSign;
                            for (var n = i[s], a = i[e ? "pop" : "shift"](), o = 0, l = a.length; o < l; o++) {
                                var h = a[o],
                                    p = n[o].position.clone();
                                p.y += t.h * r, h.moveTo(this.getTileBoundsForGridIndex(s, o), p)
                            }
                            i[e ? "unshift" : "push"](a)
                        },
                        shiftColumn: function (e, t) {
                            var i = this.grid,
                                s = e ? 0 : i[0].length - 1,
                                r = e ? -1 : 1;
                            this.gridLayout.startcol += r;
                            for (var n = 0, a = i.length; n < a; n++) {
                                var o = i[n],
                                    l = o[s].position.clone(),
                                    h = o[e ? "pop" : "shift"]();
                                l.x += t.w * r, h.moveTo(this.getTileBoundsForGridIndex(n, s), l), o[e ? "unshift" : "push"](h)
                            }
                        },
                        removeExcessTiles: function (e, t) {
                            for (var i, s; this.grid.length > e;) {
                                var r = this.grid.pop();
                                for (i = 0, s = r.length; i < s; i++) {
                                    var n = r[i];
                                    this.destroyTile(n)
                                }
                            }
                            for (i = 0, s = this.grid.length; i < s; i++)
                                for (; this.grid[i].length > t;) n = (r = this.grid[i]).pop(), this.destroyTile(n)
                        },
                        onMapResize: function () {
                            this.singleTile && (this.clearGrid(), this.setTileSize())
                        },
                        getTileBounds: function (e) {
                            var t = this.maxExtent,
                                i = (s = this.getResolution()) * this.tileSize.w,
                                s = s * this.tileSize.h,
                                r = this.getLonLatFromViewPortPx(e);
                            return e = t.left + i * Math.floor((r.lon - t.left) / i), t = t.bottom + s * Math.floor((r.lat - t.bottom) / s), new OpenLayers.Bounds(e, t, e + i, t + s)
                        },
                        CLASS_NAME: "OpenLayers.Layer.Grid"
                    }), OpenLayers.Format.ArcXML = OpenLayers.Class(OpenLayers.Format.XML, {
                        fontStyleKeys: "antialiasing blockout font fontcolor fontsize fontstyle glowing interval outline printmode shadow transparency".split(" "),
                        request: null,
                        response: null,
                        initialize: function (e) {
                            if (this.request = new OpenLayers.Format.ArcXML.Request, this.response = new OpenLayers.Format.ArcXML.Response, e)
                                if ("feature" == e.requesttype) {
                                    this.request.get_image = null;
                                    var t = this.request.get_feature.query;
                                    this.addCoordSys(t.featurecoordsys, e.featureCoordSys), this.addCoordSys(t.filtercoordsys, e.filterCoordSys), e.polygon ? (t.isspatial = !0, t.spatialfilter.polygon = e.polygon) : e.envelope && (t.isspatial = !0, t.spatialfilter.envelope = {
                                        minx: 0,
                                        miny: 0,
                                        maxx: 0,
                                        maxy: 0
                                    }, this.parseEnvelope(t.spatialfilter.envelope, e.envelope))
                                } else "image" == e.requesttype ? (this.request.get_feature = null, t = this.request.get_image.properties, this.parseEnvelope(t.envelope, e.envelope), this.addLayers(t.layerlist, e.layers), this.addImageSize(t.imagesize, e.tileSize), this.addCoordSys(t.featurecoordsys, e.featureCoordSys), this.addCoordSys(t.filtercoordsys, e.filterCoordSys)) : this.request = null;
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        parseEnvelope: function (e, t) {
                            t && 4 == t.length && (e.minx = t[0], e.miny = t[1], e.maxx = t[2], e.maxy = t[3])
                        },
                        addLayers: function (e, t) {
                            for (var i = 0, s = t.length; i < s; i++) e.push(t[i])
                        },
                        addImageSize: function (e, t) {
                            null !== t && (e.width = t.w, e.height = t.h, e.printwidth = t.w, e.printheight = t.h)
                        },
                        addCoordSys: function (e, t) {
                            "string" == typeof t ? (e.id = parseInt(t), e.string = t) : "object" == typeof t && null !== t.proj && (e.id = t.proj.srsProjNumber, e.string = t.proj.srsCode)
                        },
                        iserror: function (e) {
                            var t = null;
                            return e ? t = null !== (e = (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])).documentElement.getElementsByTagName("ERROR")) && 0 < e.length : t = "" !== this.response.error, t
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = null;
                            if (e && e.documentElement && (t = "ARCXML" == e.documentElement.nodeName ? e.documentElement : e.documentElement.getElementsByTagName("ARCXML")[0]), !t || "parsererror" === t.firstChild.nodeName) {
                                var i, s;
                                try {
                                    i = e.firstChild.nodeValue, s = e.firstChild.childNodes[1].firstChild.nodeValue
                                } catch (e) {}
                                throw {
                                    message: "Error parsing the ArcXML request",
                                    error: i,
                                    source: s
                                }
                            }
                            return this.parseResponse(t)
                        },
                        write: function (e) {
                            e || (e = this.request);
                            var t = this.createElementNS("", "ARCXML");
                            t.setAttribute("version", "1.1");
                            var i = this.createElementNS("", "REQUEST");
                            if (null != e.get_image) {
                                var s = this.createElementNS("", "GET_IMAGE");
                                i.appendChild(s);
                                var r = this.createElementNS("", "PROPERTIES");
                                if (s.appendChild(r), null != (e = e.get_image.properties).featurecoordsys && (s = this.createElementNS("", "FEATURECOORDSYS"), r.appendChild(s), 0 === e.featurecoordsys.id ? s.setAttribute("string", e.featurecoordsys.string) : s.setAttribute("id", e.featurecoordsys.id)), null != e.filtercoordsys && (s = this.createElementNS("", "FILTERCOORDSYS"), r.appendChild(s), 0 === e.filtercoordsys.id ? s.setAttribute("string", e.filtercoordsys.string) : s.setAttribute("id", e.filtercoordsys.id)), null != e.envelope && (s = this.createElementNS("", "ENVELOPE"), r.appendChild(s), s.setAttribute("minx", e.envelope.minx), s.setAttribute("miny", e.envelope.miny), s.setAttribute("maxx", e.envelope.maxx), s.setAttribute("maxy", e.envelope.maxy)), s = this.createElementNS("", "IMAGESIZE"), r.appendChild(s), s.setAttribute("height", e.imagesize.height), s.setAttribute("width", e.imagesize.width), e.imagesize.height == e.imagesize.printheight && e.imagesize.width == e.imagesize.printwidth || (s.setAttribute("printheight", e.imagesize.printheight), s.setArrtibute("printwidth", e.imagesize.printwidth)), null != e.background && (s = this.createElementNS("", "BACKGROUND"), r.appendChild(s), s.setAttribute("color", e.background.color.r + "," + e.background.color.g + "," + e.background.color.b), null !== e.background.transcolor && s.setAttribute("transcolor", e.background.transcolor.r + "," + e.background.transcolor.g + "," + e.background.transcolor.b)), null != e.layerlist && 0 < e.layerlist.length)
                                    for (s = this.createElementNS("", "LAYERLIST"), r.appendChild(s), r = 0; r < e.layerlist.length; r++) {
                                        var n = this.createElementNS("", "LAYERDEF");
                                        if (s.appendChild(n), n.setAttribute("id", e.layerlist[r].id), n.setAttribute("visible", e.layerlist[r].visible), "object" == typeof e.layerlist[r].query) {
                                            var a = e.layerlist[r].query;
                                            if (0 > a.where.length) continue;
                                            var o = null;
                                            (o = "boolean" == typeof a.spatialfilter && a.spatialfilter ? this.createElementNS("", "SPATIALQUERY") : this.createElementNS("", "QUERY")).setAttribute("where", a.where), "number" == typeof a.accuracy && 0 < a.accuracy && o.setAttribute("accuracy", a.accuracy), "number" == typeof a.featurelimit && 2e3 > a.featurelimit && o.setAttribute("featurelimit", a.featurelimit), "string" == typeof a.subfields && "#ALL#" != a.subfields && o.setAttribute("subfields", a.subfields), "string" == typeof a.joinexpression && 0 < a.joinexpression.length && o.setAttribute("joinexpression", a.joinexpression), "string" == typeof a.jointables && 0 < a.jointables.length && o.setAttribute("jointables", a.jointables), n.appendChild(o)
                                        }
                                        "object" == typeof e.layerlist[r].renderer && this.addRenderer(n, e.layerlist[r].renderer)
                                    }
                            } else null != e.get_feature && ((s = this.createElementNS("", "GET_FEATURES")).setAttribute("outputmode", "newxml"), s.setAttribute("checkesc", "true"), e.get_feature.geometry ? s.setAttribute("geometry", e.get_feature.geometry) : s.setAttribute("geometry", "false"), e.get_feature.compact && s.setAttribute("compact", e.get_feature.compact), "number" == e.get_feature.featurelimit && s.setAttribute("featurelimit", e.get_feature.featurelimit), s.setAttribute("globalenvelope", "true"), i.appendChild(s), null != e.get_feature.layer && 0 < e.get_feature.layer.length && ((r = this.createElementNS("", "LAYER")).setAttribute("id", e.get_feature.layer), s.appendChild(r)), null != (e = e.get_feature.query) && (r = null, r = e.isspatial ? this.createElementNS("", "SPATIALQUERY") : this.createElementNS("", "QUERY"), s.appendChild(r), "number" == typeof e.accuracy && r.setAttribute("accuracy", e.accuracy), null != e.featurecoordsys && (s = this.createElementNS("", "FEATURECOORDSYS"), 0 == e.featurecoordsys.id ? s.setAttribute("string", e.featurecoordsys.string) : s.setAttribute("id", e.featurecoordsys.id), r.appendChild(s)), null != e.filtercoordsys && (s = this.createElementNS("", "FILTERCOORDSYS"), 0 === e.filtercoordsys.id ? s.setAttribute("string", e.filtercoordsys.string) : s.setAttribute("id", e.filtercoordsys.id), r.appendChild(s)), 0 < e.buffer && ((s = this.createElementNS("", "BUFFER")).setAttribute("distance", e.buffer), r.appendChild(s)), e.isspatial && ((s = this.createElementNS("", "SPATIALFILTER")).setAttribute("relation", e.spatialfilter.relation), r.appendChild(s), e.spatialfilter.envelope ? ((n = this.createElementNS("", "ENVELOPE")).setAttribute("minx", e.spatialfilter.envelope.minx), n.setAttribute("miny", e.spatialfilter.envelope.miny), n.setAttribute("maxx", e.spatialfilter.envelope.maxx), n.setAttribute("maxy", e.spatialfilter.envelope.maxy), s.appendChild(n)) : "object" == typeof e.spatialfilter.polygon && s.appendChild(this.writePolygonGeometry(e.spatialfilter.polygon))), null != e.where && 0 < e.where.length && r.setAttribute("where", e.where)));
                            return t.appendChild(i), OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        addGroupRenderer: function (e, t) {
                            var i = this.createElementNS("", "GROUPRENDERER");
                            e.appendChild(i);
                            for (var s = 0; s < t.length; s++) this.addRenderer(i, t[s])
                        },
                        addRenderer: function (e, t) {
                            if (OpenLayers.Util.isArray(t)) this.addGroupRenderer(e, t);
                            else {
                                var i = this.createElementNS("", t.type.toUpperCase() + "RENDERER");
                                e.appendChild(i), "VALUEMAPRENDERER" == i.tagName ? this.addValueMapRenderer(i, t) : "VALUEMAPLABELRENDERER" == i.tagName ? this.addValueMapLabelRenderer(i, t) : "SIMPLELABELRENDERER" == i.tagName ? this.addSimpleLabelRenderer(i, t) : "SCALEDEPENDENTRENDERER" == i.tagName && this.addScaleDependentRenderer(i, t)
                            }
                        },
                        addScaleDependentRenderer: function (e, t) {
                            "string" != typeof t.lower && "number" != typeof t.lower || e.setAttribute("lower", t.lower), "string" != typeof t.upper && "number" != typeof t.upper || e.setAttribute("upper", t.upper), this.addRenderer(e, t.renderer)
                        },
                        addValueMapLabelRenderer: function (e, t) {
                            if (e.setAttribute("lookupfield", t.lookupfield), e.setAttribute("labelfield", t.labelfield), "object" == typeof t.exacts)
                                for (var i = 0, s = t.exacts.length; i < s; i++) {
                                    var r = t.exacts[i],
                                        n = this.createElementNS("", "EXACT");
                                    if ("string" == typeof r.value && n.setAttribute("value", r.value), "string" == typeof r.label && n.setAttribute("label", r.label), "string" == typeof r.method && n.setAttribute("method", r.method), e.appendChild(n), "object" == typeof r.symbol) {
                                        var a = null;
                                        if ("text" == r.symbol.type && (a = this.createElementNS("", "TEXTSYMBOL")), null != a) {
                                            for (var o = this.fontStyleKeys, l = 0, h = o.length; l < h; l++) {
                                                var p = o[l];
                                                r.symbol[p] && a.setAttribute(p, r.symbol[p])
                                            }
                                            n.appendChild(a)
                                        }
                                    }
                                }
                        },
                        addValueMapRenderer: function (e, t) {
                            if (e.setAttribute("lookupfield", t.lookupfield), "object" == typeof t.ranges)
                                for (var i = 0, s = t.ranges.length; i < s; i++) {
                                    var r = t.ranges[i],
                                        n = this.createElementNS("", "RANGE");
                                    if (n.setAttribute("lower", r.lower), n.setAttribute("upper", r.upper), e.appendChild(n), "object" == typeof r.symbol) {
                                        var a = null;
                                        "simplepolygon" == r.symbol.type && (a = this.createElementNS("", "SIMPLEPOLYGONSYMBOL")), null != a && ("string" == typeof r.symbol.boundarycolor && a.setAttribute("boundarycolor", r.symbol.boundarycolor), "string" == typeof r.symbol.fillcolor && a.setAttribute("fillcolor", r.symbol.fillcolor), "number" == typeof r.symbol.filltransparency && a.setAttribute("filltransparency", r.symbol.filltransparency), n.appendChild(a))
                                    }
                                } else if ("object" == typeof t.exacts)
                                    for (i = 0, s = t.exacts.length; i < s; i++) r = t.exacts[i], n = this.createElementNS("", "EXACT"), "string" == typeof r.value && n.setAttribute("value", r.value), "string" == typeof r.label && n.setAttribute("label", r.label), "string" == typeof r.method && n.setAttribute("method", r.method), e.appendChild(n), "object" == typeof r.symbol && (a = null, "simplemarker" == r.symbol.type && (a = this.createElementNS("", "SIMPLEMARKERSYMBOL")), null != a && ("string" == typeof r.symbol.antialiasing && a.setAttribute("antialiasing", r.symbol.antialiasing), "string" == typeof r.symbol.color && a.setAttribute("color", r.symbol.color), "string" == typeof r.symbol.outline && a.setAttribute("outline", r.symbol.outline), "string" == typeof r.symbol.overlap && a.setAttribute("overlap", r.symbol.overlap), "string" == typeof r.symbol.shadow && a.setAttribute("shadow", r.symbol.shadow), "number" == typeof r.symbol.transparency && a.setAttribute("transparency", r.symbol.transparency), "string" == typeof r.symbol.usecentroid && a.setAttribute("usecentroid", r.symbol.usecentroid), "number" == typeof r.symbol.width && a.setAttribute("width", r.symbol.width), n.appendChild(a)))
                        },
                        addSimpleLabelRenderer: function (e, t) {
                            e.setAttribute("field", t.field);
                            for (var i = "featureweight howmanylabels labelbufferratio labelpriorities labelweight linelabelposition rotationalangles".split(" "), s = 0, r = i.length; s < r; s++) {
                                var n = i[s];
                                t[n] && e.setAttribute(n, t[n])
                            }
                            if ("text" == t.symbol.type) {
                                var a = t.symbol,
                                    o = this.createElementNS("", "TEXTSYMBOL");
                                for (e.appendChild(o), s = 0, r = (i = this.fontStyleKeys).length; s < r; s++) a[n = i[s]] && o.setAttribute(n, t[n])
                            }
                        },
                        writePolygonGeometry: function (e) {
                            if (!(e instanceof OpenLayers.Geometry.Polygon)) throw {
                                message: "Cannot write polygon geometry to ArcXML with an " + e.CLASS_NAME + " object.",
                                geometry: e
                            };
                            for (var t = this.createElementNS("", "POLYGON"), i = 0, s = e.components.length; i < s; i++) {
                                for (var r = e.components[i], n = this.createElementNS("", "RING"), a = 0, o = r.components.length; a < o; a++) {
                                    var l = r.components[a],
                                        h = this.createElementNS("", "POINT");
                                    h.setAttribute("x", l.x), h.setAttribute("y", l.y), n.appendChild(h)
                                }
                                t.appendChild(n)
                            }
                            return t
                        },
                        parseResponse: function (e) {
                            "string" == typeof e && (e = (new OpenLayers.Format.XML).read(e));
                            var t = new OpenLayers.Format.ArcXML.Response,
                                i = e.getElementsByTagName("ERROR");
                            if (null != i && 0 < i.length) t.error = this.getChildValue(i, "Unknown error.");
                            else {
                                if (null == (i = e.getElementsByTagName("RESPONSE")) || 0 == i.length) return t.error = "No RESPONSE tag found in ArcXML response.", t;
                                if ("#text" == (s = i[0].firstChild.nodeName) && (s = i[0].firstChild.nextSibling.nodeName), "IMAGE" == s) i = e.getElementsByTagName("ENVELOPE"), e = e.getElementsByTagName("OUTPUT"), null == i || 0 == i.length ? t.error = "No ENVELOPE tag found in ArcXML response." : null == e || 0 == e.length ? t.error = "No OUTPUT tag found in ArcXML response." : (i = this.parseAttributes(i[0]), s = this.parseAttributes(e[0]), t.image = "string" == typeof s.type ? {
                                    envelope: i,
                                    output: {
                                        type: s.type,
                                        data: this.getChildValue(e[0])
                                    }
                                } : {
                                    envelope: i,
                                    output: s
                                });
                                else if ("FEATURES" == s) {
                                    if (e = i[0].getElementsByTagName("FEATURES"), i = e[0].getElementsByTagName("FEATURECOUNT"), t.features.featurecount = i[0].getAttribute("count"), 0 < t.features.featurecount)
                                        for (i = e[0].getElementsByTagName("ENVELOPE"), t.features.envelope = this.parseAttributes(i[0], "number"), e = e[0].getElementsByTagName("FEATURE"), i = 0; i < e.length; i++) {
                                            for (var s = new OpenLayers.Feature.Vector, r = e[i].getElementsByTagName("FIELD"), n = 0; n < r.length; n++) {
                                                var a = r[n].getAttribute("name"),
                                                    o = r[n].getAttribute("value");
                                                s.attributes[a] = o
                                            }
                                            if (0 < (r = e[i].getElementsByTagName("POLYGON")).length) {
                                                for (r = r[0].getElementsByTagName("RING"), n = [], a = 0; a < r.length; a++) {
                                                    (o = []).push(this.parsePointGeometry(r[a]));
                                                    for (var l = r[a].getElementsByTagName("HOLE"), h = 0; h < l.length; h++) o.push(this.parsePointGeometry(l[h]));
                                                    n.push(new OpenLayers.Geometry.Polygon(o))
                                                }
                                                s.geometry = 1 == n.length ? n[0] : new OpenLayers.Geometry.MultiPolygon(n)
                                            }
                                            t.features.feature.push(s)
                                        }
                                } else t.error = "Unidentified response type."
                            }
                            return t
                        },
                        parseAttributes: function (e, t) {
                            for (var i = {}, s = 0; s < e.attributes.length; s++) i[e.attributes[s].nodeName] = "number" == t ? parseFloat(e.attributes[s].nodeValue) : e.attributes[s].nodeValue;
                            return i
                        },
                        parsePointGeometry: function (e) {
                            var t = [],
                                i = e.getElementsByTagName("COORDS");
                            if (0 < i.length)
                                for (e = (e = this.getChildValue(i[0])).split(/;/), i = 0; i < e.length; i++) {
                                    var s = e[i].split(/ /);
                                    t.push(new OpenLayers.Geometry.Point(s[0], s[1]))
                                } else if (0 < (e = e.getElementsByTagName("POINT")).length)
                                    for (i = 0; i < e.length; i++) t.push(new OpenLayers.Geometry.Point(parseFloat(e[i].getAttribute("x")), parseFloat(e[i].getAttribute("y"))));
                            return new OpenLayers.Geometry.LinearRing(t)
                        },
                        CLASS_NAME: "OpenLayers.Format.ArcXML"
                    }), OpenLayers.Format.ArcXML.Request = OpenLayers.Class({
                        initialize: function (e) {
                            return OpenLayers.Util.extend(this, {
                                get_image: {
                                    properties: {
                                        background: null,
                                        draw: !0,
                                        envelope: {
                                            minx: 0,
                                            miny: 0,
                                            maxx: 0,
                                            maxy: 0
                                        },
                                        featurecoordsys: {
                                            id: 0,
                                            string: "",
                                            datumtransformid: 0,
                                            datumtransformstring: ""
                                        },
                                        filtercoordsys: {
                                            id: 0,
                                            string: "",
                                            datumtransformid: 0,
                                            datumtransformstring: ""
                                        },
                                        imagesize: {
                                            height: 0,
                                            width: 0,
                                            dpi: 96,
                                            printheight: 0,
                                            printwidth: 0,
                                            scalesymbols: !1
                                        },
                                        layerlist: [],
                                        output: {
                                            baseurl: "",
                                            legendbaseurl: "",
                                            legendname: "",
                                            legendpath: "",
                                            legendurl: "",
                                            name: "",
                                            path: "",
                                            type: "jpg",
                                            url: ""
                                        }
                                    }
                                },
                                get_feature: {
                                    layer: "",
                                    query: {
                                        isspatial: !1,
                                        featurecoordsys: {
                                            id: 0,
                                            string: "",
                                            datumtransformid: 0,
                                            datumtransformstring: ""
                                        },
                                        filtercoordsys: {
                                            id: 0,
                                            string: "",
                                            datumtransformid: 0,
                                            datumtransformstring: ""
                                        },
                                        buffer: 0,
                                        where: "",
                                        spatialfilter: {
                                            relation: "envelope_intersection",
                                            envelope: null
                                        }
                                    }
                                },
                                environment: {
                                    separators: {
                                        cs: " ",
                                        ts: ";"
                                    }
                                },
                                layer: [],
                                workspaces: []
                            })
                        },
                        CLASS_NAME: "OpenLayers.Format.ArcXML.Request"
                    }), OpenLayers.Format.ArcXML.Response = OpenLayers.Class({
                        initialize: function (e) {
                            return OpenLayers.Util.extend(this, {
                                image: {
                                    envelope: null,
                                    output: ""
                                },
                                features: {
                                    featurecount: 0,
                                    envelope: null,
                                    feature: []
                                },
                                error: ""
                            })
                        },
                        CLASS_NAME: "OpenLayers.Format.ArcXML.Response"
                    }),
                    function () {
                        function e() {
                            this._object = n && !l ? new n : new window.ActiveXObject("Microsoft.XMLHTTP"), this._listeners = []
                        }

                        function t() {
                            return new e
                        }

                        function i(e) {
                            t.onreadystatechange && t.onreadystatechange.apply(e), e.dispatchEvent({
                                type: "readystatechange",
                                bubbles: !1,
                                cancelable: !1,
                                timeStamp: new Date + 0
                            })
                        }

                        function s(e) {
                            try {
                                e.responseText = e._object.responseText
                            } catch (e) {}
                            try {
                                var t, i = e._object,
                                    s = i.responseXML,
                                    r = i.responseText;
                                o && r && s && !s.documentElement && i.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/) && ((s = new window.ActiveXObject("Microsoft.XMLDOM")).async = !1, s.validateOnParse = !1, s.loadXML(r)), t = s && (o && 0 != s.parseError || !s.documentElement || s.documentElement && "parsererror" == s.documentElement.tagName) ? null : s, e.responseXML = t
                            } catch (e) {}
                            try {
                                e.status = e._object.status
                            } catch (e) {}
                            try {
                                e.statusText = e._object.statusText
                            } catch (e) {}
                        }

                        function r(e) {
                            e._object.onreadystatechange = new window.Function
                        }
                        var n = window.XMLHttpRequest,
                            a = !!window.controllers,
                            o = window.document.all && !window.opera,
                            l = o && window.navigator.userAgent.match(/MSIE 7.0/);
                        t.prototype = e.prototype, a && n.wrapped && (t.wrapped = n.wrapped), t.UNSENT = 0, t.OPENED = 1, t.HEADERS_RECEIVED = 2, t.LOADING = 3, t.DONE = 4, t.prototype.readyState = t.UNSENT, t.prototype.responseText = "", t.prototype.responseXML = null, t.prototype.status = 0, t.prototype.statusText = "", t.prototype.priority = "NORMAL", t.prototype.onreadystatechange = null, t.onreadystatechange = null, t.onopen = null, t.onsend = null, t.onabort = null, t.prototype.open = function (e, n, l, h, p) {
                            delete this._headers, 3 > arguments.length && (l = !0), this._async = l;
                            var u, c = this,
                                y = this.readyState;
                            o && l && (u = function () {
                                y != t.DONE && (r(c), c.abort())
                            }, window.attachEvent("onunload", u)), t.onopen && t.onopen.apply(this, arguments), 4 < arguments.length ? this._object.open(e, n, l, h, p) : 3 < arguments.length ? this._object.open(e, n, l, h) : this._object.open(e, n, l), this.readyState = t.OPENED, i(this), this._object.onreadystatechange = function () {
                                a && !l || (c.readyState = c._object.readyState, s(c), c._aborted ? c.readyState = t.UNSENT : (c.readyState == t.DONE && (delete c._data, r(c), o && l && window.detachEvent("onunload", u)), y != c.readyState && i(c), y = c.readyState))
                            }
                        }, t.prototype.send = function (e) {
                            t.onsend && t.onsend.apply(this, arguments), arguments.length || (e = null), e && e.nodeType && (e = window.XMLSerializer ? (new window.XMLSerializer).serializeToString(e) : e.xml, this._headers["Content-Type"] || this._object.setRequestHeader("Content-Type", "application/xml")), this._data = e;
                            e: if (this._object.send(this._data), a && !this._async)
                                for (this.readyState = t.OPENED, s(this); this.readyState < t.DONE;)
                                    if (this.readyState++, i(this), this._aborted) break e
                        }, t.prototype.abort = function () {
                            t.onabort && t.onabort.apply(this, arguments), this.readyState > t.UNSENT && (this._aborted = !0), this._object.abort(), r(this), this.readyState = t.UNSENT, delete this._data
                        }, t.prototype.getAllResponseHeaders = function () {
                            return this._object.getAllResponseHeaders()
                        }, t.prototype.getResponseHeader = function (e) {
                            return this._object.getResponseHeader(e)
                        }, t.prototype.setRequestHeader = function (e, t) {
                            return this._headers || (this._headers = {}), this._headers[e] = t, this._object.setRequestHeader(e, t)
                        }, t.prototype.addEventListener = function (e, t, i) {
                            for (var s, r = 0; s = this._listeners[r]; r++)
                                if (s[0] == e && s[1] == t && s[2] == i) return;
                            this._listeners.push([e, t, i])
                        }, t.prototype.removeEventListener = function (e, t, i) {
                            for (var s, r = 0;
                                (s = this._listeners[r]) && (s[0] != e || s[1] != t || s[2] != i); r++);
                            s && this._listeners.splice(r, 1)
                        }, t.prototype.dispatchEvent = function (e) {
                            "readystatechange" == (e = {
                                type: e.type,
                                target: this,
                                currentTarget: this,
                                eventPhase: 2,
                                bubbles: e.bubbles,
                                cancelable: e.cancelable,
                                timeStamp: e.timeStamp,
                                stopPropagation: function () {},
                                preventDefault: function () {},
                                initEvent: function () {}
                            }).type && this.onreadystatechange && (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [e]);
                            for (var t, i = 0; t = this._listeners[i]; i++) t[0] != e.type || t[2] || (t[1].handleEvent || t[1]).apply(this, [e])
                        }, t.prototype.toString = function () {
                            return "[object XMLHttpRequest]"
                        }, t.toString = function () {
                            return "[XMLHttpRequest]"
                        }, window.Function.prototype.apply || (window.Function.prototype.apply = function (e, t) {
                            t || (t = []), e.__func = this, e.__func(t[0], t[1], t[2], t[3], t[4]), delete e.__func
                        }), OpenLayers.Request || (OpenLayers.Request = {}), OpenLayers.Request.XMLHttpRequest = t
                    }(), OpenLayers.ProxyHost = "", OpenLayers.Request || (OpenLayers.Request = {}), OpenLayers.Util.extend(OpenLayers.Request, {
                        DEFAULT_CONFIG: {
                            method: "GET",
                            url: window.location.href,
                            async: !0,
                            user: void 0,
                            password: void 0,
                            params: null,
                            proxy: OpenLayers.ProxyHost,
                            headers: {},
                            data: null,
                            callback: function () {},
                            success: null,
                            failure: null,
                            scope: null
                        },
                        URL_SPLIT_REGEX: /([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,
                        events: new OpenLayers.Events(this),
                        makeSameOrigin: function (e, t) {
                            if (r = !(s = 0 !== e.indexOf("http")) && e.match(this.URL_SPLIT_REGEX)) {
                                var i = window.location,
                                    s = r[1] == i.protocol && r[3] == i.hostname,
                                    r = r[4];
                                i = i.port;
                                (80 != r && "" != r || "80" != i && "" != i) && (s = s && r == i)
                            }
                            return s || t && (e = "function" == typeof t ? t(e) : t + encodeURIComponent(e)), e
                        },
                        issue: function (e) {
                            var t = OpenLayers.Util.extend(this.DEFAULT_CONFIG, {
                                proxy: OpenLayers.ProxyHost
                            });
                            (e = e || {}).headers = e.headers || {}, (e = OpenLayers.Util.applyDefaults(e, t)).headers = OpenLayers.Util.applyDefaults(e.headers, t.headers);
                            var i;
                            t = !1;
                            for (i in e.headers) e.headers.hasOwnProperty(i) && "x-requested-with" === i.toLowerCase() && (t = !0);
                            !1 === t && (e.headers["X-Requested-With"] = "XMLHttpRequest");
                            var s = new OpenLayers.Request.XMLHttpRequest,
                                r = OpenLayers.Util.urlAppend(e.url, OpenLayers.Util.getParameterString(e.params || {}));
                            r = OpenLayers.Request.makeSameOrigin(r, e.proxy);
                            for (var n in s.open(e.method, r, e.async, e.user, e.password), e.headers) s.setRequestHeader(n, e.headers[n]);
                            var a = this.events,
                                o = this;
                            return s.onreadystatechange = function () {
                                s.readyState == OpenLayers.Request.XMLHttpRequest.DONE && !1 !== a.triggerEvent("complete", {
                                    request: s,
                                    config: e,
                                    requestUrl: r
                                }) && o.runCallbacks({
                                    request: s,
                                    config: e,
                                    requestUrl: r
                                })
                            }, !1 === e.async ? s.send(e.data) : window.setTimeout((function () {
                                0 !== s.readyState && s.send(e.data)
                            }), 0), s
                        },
                        runCallbacks: function (e) {
                            var t, i, s = e.request,
                                r = e.config,
                                n = r.scope ? OpenLayers.Function.bind(r.callback, r.scope) : r.callback;
                            r.success && (t = r.scope ? OpenLayers.Function.bind(r.success, r.scope) : r.success), r.failure && (i = r.scope ? OpenLayers.Function.bind(r.failure, r.scope) : r.failure), "file:" == OpenLayers.Util.createUrlObject(r.url).protocol && s.responseText && (s.status = 200), n(s), (!s.status || 200 <= s.status && 300 > s.status) && (this.events.triggerEvent("success", e), t && t(s)), s.status && (200 > s.status || 300 <= s.status) && (this.events.triggerEvent("failure", e), i && i(s))
                        },
                        GET: function (e) {
                            return e = OpenLayers.Util.extend(e, {
                                method: "GET"
                            }), OpenLayers.Request.issue(e)
                        },
                        POST: function (e) {
                            return (e = OpenLayers.Util.extend(e, {
                                method: "POST"
                            })).headers = e.headers ? e.headers : {}, "CONTENT-TYPE" in OpenLayers.Util.upperCaseObject(e.headers) || (e.headers["Content-Type"] = "application/xml"), OpenLayers.Request.issue(e)
                        },
                        PUT: function (e) {
                            return (e = OpenLayers.Util.extend(e, {
                                method: "PUT"
                            })).headers = e.headers ? e.headers : {}, "CONTENT-TYPE" in OpenLayers.Util.upperCaseObject(e.headers) || (e.headers["Content-Type"] = "application/xml"), OpenLayers.Request.issue(e)
                        },
                        DELETE: function (e) {
                            return e = OpenLayers.Util.extend(e, {
                                method: "DELETE"
                            }), OpenLayers.Request.issue(e)
                        },
                        HEAD: function (e) {
                            return e = OpenLayers.Util.extend(e, {
                                method: "HEAD"
                            }), OpenLayers.Request.issue(e)
                        },
                        OPTIONS: function (e) {
                            return e = OpenLayers.Util.extend(e, {
                                method: "OPTIONS"
                            }), OpenLayers.Request.issue(e)
                        }
                    }), OpenLayers.Layer.ArcIMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        DEFAULT_PARAMS: {
                            ClientVersion: "9.2",
                            ServiceName: ""
                        },
                        featureCoordSys: "4326",
                        filterCoordSys: "4326",
                        layers: null,
                        async: !0,
                        name: "ArcIMS",
                        isBaseLayer: !0,
                        DEFAULT_OPTIONS: {
                            tileSize: new OpenLayers.Size(512, 512),
                            featureCoordSys: "4326",
                            filterCoordSys: "4326",
                            layers: null,
                            isBaseLayer: !0,
                            async: !0,
                            name: "ArcIMS"
                        },
                        initialize: function (e, t, i) {
                            this.tileSize = new OpenLayers.Size(512, 512), this.params = OpenLayers.Util.applyDefaults({
                                ServiceName: i.serviceName
                            }, this.DEFAULT_PARAMS), this.options = OpenLayers.Util.applyDefaults(i, this.DEFAULT_OPTIONS), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [e, t, this.params, i]), this.transparent && (this.isBaseLayer || (this.isBaseLayer = !1), "image/jpeg" == this.format && (this.format = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png")), null === this.options.layers && (this.options.layers = [])
                        },
                        getURL: function (e) {
                            var t = "";
                            return e = this.adjustBounds(e), e = new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options, {
                                requesttype: "image",
                                envelope: e.toArray(),
                                tileSize: this.tileSize
                            })), null != (e = new OpenLayers.Request.POST({
                                url: this.getFullRequestString(),
                                data: e.write(),
                                async: !1
                            })) && ((t = e.responseXML) && t.documentElement || (t = e.responseText), t = (new OpenLayers.Format.ArcXML).read(t), t = this.getUrlOrImage(t.image.output)), t
                        },
                        getURLasync: function (e, t, i) {
                            e = this.adjustBounds(e), e = new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options, {
                                requesttype: "image",
                                envelope: e.toArray(),
                                tileSize: this.tileSize
                            })), OpenLayers.Request.POST({
                                url: this.getFullRequestString(),
                                async: !0,
                                data: e.write(),
                                callback: function (e) {
                                    var s = e.responseXML;
                                    s && s.documentElement || (s = e.responseText), e = (new OpenLayers.Format.ArcXML).read(s), t.call(i, this.getUrlOrImage(e.image.output))
                                },
                                scope: this
                            })
                        },
                        getUrlOrImage: function (e) {
                            var t = "";
                            return e.url ? t = e.url : e.data && (t = "data:image/" + e.type + ";base64," + e.data), t
                        },
                        setLayerQuery: function (e, t) {
                            for (var i = 0; i < this.options.layers.length; i++)
                                if (e == this.options.layers[i].id) return void(this.options.layers[i].query = t);
                            this.options.layers.push({
                                id: e,
                                visible: !0,
                                query: t
                            })
                        },
                        getFeatureInfo: function (e, t, i) {
                            var s = i.buffer || 1,
                                r = i.callback || function () {},
                                n = i.scope || window,
                                a = {};
                            OpenLayers.Util.extend(a, this.options), a.requesttype = "feature", e instanceof OpenLayers.LonLat ? (a.polygon = null, a.envelope = [e.lon - s, e.lat - s, e.lon + s, e.lat + s]) : e instanceof OpenLayers.Geometry.Polygon && (a.envelope = null, a.polygon = e);
                            var o = new OpenLayers.Format.ArcXML(a);
                            OpenLayers.Util.extend(o.request.get_feature, i), o.request.get_feature.layer = t.id, "number" == typeof t.query.accuracy ? o.request.get_feature.query.accuracy = t.query.accuracy : (e = this.map.getCenter(), (i = this.map.getViewPortPxFromLonLat(e)).x++, i = this.map.getLonLatFromPixel(i), o.request.get_feature.query.accuracy = i.lon - e.lon), o.request.get_feature.query.where = t.query.where, o.request.get_feature.query.spatialfilter.relation = "area_intersection", OpenLayers.Request.POST({
                                url: this.getFullRequestString({
                                    CustomService: "Query"
                                }),
                                data: o.write(),
                                callback: function (e) {
                                    e = o.parseResponse(e.responseText), o.iserror() ? r.call(n, null) : r.call(n, e.features)
                                }
                            })
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.ArcIMS(this.name, this.url, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        CLASS_NAME: "OpenLayers.Layer.ArcIMS"
                    }), OpenLayers.Control.PanZoom = OpenLayers.Class(OpenLayers.Control, {
                        slideFactor: 50,
                        slideRatio: null,
                        buttons: null,
                        position: null,
                        initialize: function (e) {
                            this.position = new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X, OpenLayers.Control.PanZoom.Y), OpenLayers.Control.prototype.initialize.apply(this, arguments)
                        },
                        destroy: function () {
                            this.map && this.map.events.unregister("buttonclick", this, this.onButtonClick), this.removeButtons(), this.position = this.buttons = null, OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        setMap: function (e) {
                            OpenLayers.Control.prototype.setMap.apply(this, arguments), this.map.events.register("buttonclick", this, this.onButtonClick)
                        },
                        draw: function (e) {
                            OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position, this.buttons = [];
                            var t = {
                                    w: 18,
                                    h: 18
                                },
                                i = new OpenLayers.Pixel(e.x + t.w / 2, e.y);
                            return this._addButton("panup", "north-mini.png", i, t), e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), this._addButton("panright", "east-mini.png", e.add(t.w, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), this._addButton("zoomworld", "zoom-world-mini.png", i.add(0, 4 * t.h + 5), t), this._addButton("zoomout", "zoom-minus-mini.png", i.add(0, 5 * t.h + 5), t), this.div
                        },
                        _addButton: function (e, t, i, s) {
                            return t = OpenLayers.Util.getImageLocation(t), (i = OpenLayers.Util.createAlphaImageDiv(this.id + "_" + e, i, s, t, "absolute")).style.cursor = "pointer", this.div.appendChild(i), i.action = e, i.className = "olButton", this.buttons.push(i), i
                        },
                        _removeButton: function (e) {
                            this.div.removeChild(e), OpenLayers.Util.removeItem(this.buttons, e)
                        },
                        removeButtons: function () {
                            for (var e = this.buttons.length - 1; 0 <= e; --e) this._removeButton(this.buttons[e])
                        },
                        onButtonClick: function (e) {
                            switch (e.buttonElement.action) {
                                case "panup":
                                    this.map.pan(0, -this.getSlideFactor("h"));
                                    break;
                                case "pandown":
                                    this.map.pan(0, this.getSlideFactor("h"));
                                    break;
                                case "panleft":
                                    this.map.pan(-this.getSlideFactor("w"), 0);
                                    break;
                                case "panright":
                                    this.map.pan(this.getSlideFactor("w"), 0);
                                    break;
                                case "zoomin":
                                    this.map.zoomIn();
                                    break;
                                case "zoomout":
                                    this.map.zoomOut();
                                    break;
                                case "zoomworld":
                                    this.map.zoomToMaxExtent()
                            }
                        },
                        getSlideFactor: function (e) {
                            return this.slideRatio ? this.map.getSize()[e] * this.slideRatio : this.slideFactor
                        },
                        CLASS_NAME: "OpenLayers.Control.PanZoom"
                    }), OpenLayers.Control.PanZoom.X = 4, OpenLayers.Control.PanZoom.Y = 4, OpenLayers.Control.PanZoomBar = OpenLayers.Class(OpenLayers.Control.PanZoom, {
                        zoomStopWidth: 18,
                        zoomStopHeight: 11,
                        slider: null,
                        sliderEvents: null,
                        zoombarDiv: null,
                        zoomWorldIcon: !1,
                        panIcons: !0,
                        forceFixedZoomLevel: !1,
                        mouseDragStart: null,
                        deltaY: null,
                        zoomStart: null,
                        destroy: function () {
                            this._removeZoomBar(), this.map.events.un({
                                changebaselayer: this.redraw,
                                updatesize: this.redraw,
                                scope: this
                            }), OpenLayers.Control.PanZoom.prototype.destroy.apply(this, arguments), delete this.mouseDragStart, delete this.zoomStart
                        },
                        setMap: function (e) {
                            OpenLayers.Control.PanZoom.prototype.setMap.apply(this, arguments), this.map.events.on({
                                changebaselayer: this.redraw,
                                updatesize: this.redraw,
                                scope: this
                            })
                        },
                        redraw: function () {
                            null != this.div && (this.removeButtons(), this._removeZoomBar()), this.draw()
                        },
                        draw: function (e) {
                            OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position.clone(), this.buttons = [];
                            var t = {
                                w: 18,
                                h: 18
                            };
                            if (this.panIcons) {
                                var i = new OpenLayers.Pixel(e.x + t.w / 2, e.y),
                                    s = t.w;
                                this.zoomWorldIcon && (i = new OpenLayers.Pixel(e.x + t.w, e.y)), this._addButton("panup", "north-mini.png", i, t), e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), this.zoomWorldIcon && (this._addButton("zoomworld", "zoom-world-mini.png", e.add(t.w, 0), t), s *= 2), this._addButton("panright", "east-mini.png", e.add(s, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), i = this._addZoomBar(i.add(0, 4 * t.h + 5)), this._addButton("zoomout", "zoom-minus-mini.png", i, t)
                            } else this._addButton("zoomin", "zoom-plus-mini.png", e, t), i = this._addZoomBar(e.add(0, t.h)), this._addButton("zoomout", "zoom-minus-mini.png", i, t), this.zoomWorldIcon && (i = i.add(0, t.h + 3), this._addButton("zoomworld", "zoom-world-mini.png", i, t));
                            return this.div
                        },
                        _addZoomBar: function (e) {
                            var t = OpenLayers.Util.getImageLocation("slider.png"),
                                i = this.id + "_" + this.map.id,
                                s = this.map.getMinZoom(),
                                r = this.map.getNumZoomLevels() - 1 - this.map.getZoom();
                            (r = OpenLayers.Util.createAlphaImageDiv(i, e.add(-1, r * this.zoomStopHeight), {
                                w: 20,
                                h: 9
                            }, t, "absolute")).style.cursor = "move", this.slider = r, this.sliderEvents = new OpenLayers.Events(this, r, null, !0, {
                                includeXY: !0
                            }), this.sliderEvents.on({
                                touchstart: this.zoomBarDown,
                                touchmove: this.zoomBarDrag,
                                touchend: this.zoomBarUp,
                                mousedown: this.zoomBarDown,
                                mousemove: this.zoomBarDrag,
                                mouseup: this.zoomBarUp
                            });
                            var n = {
                                w: this.zoomStopWidth,
                                h: this.zoomStopHeight * (this.map.getNumZoomLevels() - s)
                            };
                            t = OpenLayers.Util.getImageLocation("zoombar.png"), i = null;
                            return OpenLayers.Util.alphaHack() ? (i = this.id + "_" + this.map.id, (i = OpenLayers.Util.createAlphaImageDiv(i, e, {
                                w: n.w,
                                h: this.zoomStopHeight
                            }, t, "absolute", null, "crop")).style.height = n.h + "px") : i = OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar" + this.map.id, e, n, t), i.style.cursor = "pointer", i.className = "olButton", this.zoombarDiv = i, this.div.appendChild(i), this.startTop = parseInt(i.style.top), this.div.appendChild(r), this.map.events.register("zoomend", this, this.moveZoomBar), e.add(0, this.zoomStopHeight * (this.map.getNumZoomLevels() - s))
                        },
                        _removeZoomBar: function () {
                            this.sliderEvents.un({
                                touchstart: this.zoomBarDown,
                                touchmove: this.zoomBarDrag,
                                touchend: this.zoomBarUp,
                                mousedown: this.zoomBarDown,
                                mousemove: this.zoomBarDrag,
                                mouseup: this.zoomBarUp
                            }), this.sliderEvents.destroy(), this.div.removeChild(this.zoombarDiv), this.zoombarDiv = null, this.div.removeChild(this.slider), this.slider = null, this.map.events.unregister("zoomend", this, this.moveZoomBar)
                        },
                        onButtonClick: function (e) {
                            if (OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this, arguments), e.buttonElement === this.zoombarDiv) {
                                var t = e.buttonXY.y / this.zoomStopHeight;
                                !this.forceFixedZoomLevel && this.map.fractionalZoom || (t = Math.floor(t)), t = this.map.getNumZoomLevels() - 1 - t, t = Math.min(Math.max(t, 0), this.map.getNumZoomLevels() - 1), this.map.zoomTo(t)
                            }
                        },
                        passEventToSlider: function (e) {
                            this.sliderEvents.handleBrowserEvent(e)
                        },
                        zoomBarDown: function (e) {
                            (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && (this.map.events.on({
                                touchmove: this.passEventToSlider,
                                mousemove: this.passEventToSlider,
                                mouseup: this.passEventToSlider,
                                scope: this
                            }), this.mouseDragStart = e.xy.clone(), this.zoomStart = e.xy.clone(), this.div.style.cursor = "move", this.zoombarDiv.offsets = null, OpenLayers.Event.stop(e))
                        },
                        zoomBarDrag: function (e) {
                            if (null != this.mouseDragStart) {
                                var t = this.mouseDragStart.y - e.xy.y,
                                    i = OpenLayers.Util.pagePosition(this.zoombarDiv);
                                0 < e.clientY - i[1] && e.clientY - i[1] < parseInt(this.zoombarDiv.style.height) - 2 && (t = parseInt(this.slider.style.top) - t, this.slider.style.top = t + "px", this.mouseDragStart = e.xy.clone()), this.deltaY = this.zoomStart.y - e.xy.y, OpenLayers.Event.stop(e)
                            }
                        },
                        zoomBarUp: function (e) {
                            if ((OpenLayers.Event.isLeftClick(e) || "touchend" === e.type) && this.mouseDragStart) {
                                this.div.style.cursor = "", this.map.events.un({
                                    touchmove: this.passEventToSlider,
                                    mouseup: this.passEventToSlider,
                                    mousemove: this.passEventToSlider,
                                    scope: this
                                });
                                var t = this.map.zoom;
                                !this.forceFixedZoomLevel && this.map.fractionalZoom ? (t += this.deltaY / this.zoomStopHeight, t = Math.min(Math.max(t, 0), this.map.getNumZoomLevels() - 1)) : (t += this.deltaY / this.zoomStopHeight, t = Math.max(Math.round(t), 0)), this.map.zoomTo(t), this.zoomStart = this.mouseDragStart = null, this.deltaY = 0, OpenLayers.Event.stop(e)
                            }
                        },
                        moveZoomBar: function () {
                            var e = (this.map.getNumZoomLevels() - 1 - this.map.getZoom()) * this.zoomStopHeight + this.startTop + 1;
                            this.slider.style.top = e + "px"
                        },
                        CLASS_NAME: "OpenLayers.Control.PanZoomBar"
                    }), OpenLayers.Format.WFSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.1.0",
                        CLASS_NAME: "OpenLayers.Format.WFSCapabilities"
                    }), OpenLayers.Format.WFSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            wfs: "http://www.opengis.net/wfs",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance",
                            ows: "http://www.opengis.net/ows"
                        },
                        errorProperty: "featureTypeList",
                        defaultPrefix: "wfs",
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        readers: {
                            wfs: {
                                WFS_Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                FeatureTypeList: function (e, t) {
                                    t.featureTypeList = {
                                        featureTypes: []
                                    }, this.readChildNodes(e, t.featureTypeList)
                                },
                                FeatureType: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.featureTypes.push(i)
                                },
                                Name: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (i = i.split(":"), t.name = i.pop(), 0 < i.length && (t.featureNS = this.lookupNamespaceURI(e, i[0])))
                                },
                                Title: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (t.title = i)
                                },
                                Abstract: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (t.abstract = i)
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.WFSCapabilities.v1"
                    }), OpenLayers.Format.WFSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1, {
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        readers: {
                            wfs: OpenLayers.Util.applyDefaults({
                                DefaultSRS: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (t.srs = i)
                                }
                            }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),
                            ows: OpenLayers.Format.OWSCommon.v1.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WFSCapabilities.v1_1_0"
                    }), OpenLayers.Layer.Image = OpenLayers.Class(OpenLayers.Layer, {
                        isBaseLayer: !0,
                        url: null,
                        extent: null,
                        size: null,
                        tile: null,
                        aspectRatio: null,
                        initialize: function (e, t, i, s, r) {
                            this.url = t, this.maxExtent = this.extent = i, this.size = s, OpenLayers.Layer.prototype.initialize.apply(this, [e, r]), this.aspectRatio = this.extent.getHeight() / this.size.h / (this.extent.getWidth() / this.size.w)
                        },
                        destroy: function () {
                            this.tile && (this.removeTileMonitoringHooks(this.tile), this.tile.destroy(), this.tile = null), OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.Image(this.name, this.url, this.extent, this.size, this.getOptions())), OpenLayers.Layer.prototype.clone.apply(this, [e])
                        },
                        setMap: function (e) {
                            null == this.options.maxResolution && (this.options.maxResolution = this.aspectRatio * this.extent.getWidth() / this.size.w), OpenLayers.Layer.prototype.setMap.apply(this, arguments)
                        },
                        moveTo: function (e, t, i) {
                            OpenLayers.Layer.prototype.moveTo.apply(this, arguments);
                            var s = null == this.tile;
                            if (t || s) {
                                this.setTileSize();
                                var r = this.map.getLayerPxFromLonLat({
                                    lon: this.extent.left,
                                    lat: this.extent.top
                                });
                                s ? (this.tile = new OpenLayers.Tile.Image(this, r, this.extent, null, this.tileSize), this.addTileMonitoringHooks(this.tile)) : (this.tile.size = this.tileSize.clone(), this.tile.position = r.clone()), this.tile.draw()
                            }
                        },
                        setTileSize: function () {
                            var e = this.extent.getWidth() / this.map.getResolution(),
                                t = this.extent.getHeight() / this.map.getResolution();
                            this.tileSize = new OpenLayers.Size(e, t)
                        },
                        addTileMonitoringHooks: function (e) {
                            e.onLoadStart = function () {
                                this.events.triggerEvent("loadstart")
                            }, e.events.register("loadstart", this, e.onLoadStart), e.onLoadEnd = function () {
                                this.events.triggerEvent("loadend")
                            }, e.events.register("loadend", this, e.onLoadEnd), e.events.register("unload", this, e.onLoadEnd)
                        },
                        removeTileMonitoringHooks: function (e) {
                            e.unload(), e.events.un({
                                loadstart: e.onLoadStart,
                                loadend: e.onLoadEnd,
                                unload: e.onLoadEnd,
                                scope: this
                            })
                        },
                        setUrl: function (e) {
                            this.url = e, this.tile.draw()
                        },
                        getURL: function (e) {
                            return this.url
                        },
                        CLASS_NAME: "OpenLayers.Layer.Image"
                    }), OpenLayers.Strategy = OpenLayers.Class({
                        layer: null,
                        options: null,
                        active: null,
                        autoActivate: !0,
                        autoDestroy: !0,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e), this.options = e, this.active = !1
                        },
                        destroy: function () {
                            this.deactivate(), this.options = this.layer = null
                        },
                        setLayer: function (e) {
                            this.layer = e
                        },
                        activate: function () {
                            return !this.active && (this.active = !0)
                        },
                        deactivate: function () {
                            return !!this.active && (this.active = !1, !0)
                        },
                        CLASS_NAME: "OpenLayers.Strategy"
                    }), OpenLayers.Strategy.Save = OpenLayers.Class(OpenLayers.Strategy, {
                        events: null,
                        auto: !1,
                        timer: null,
                        initialize: function (e) {
                            OpenLayers.Strategy.prototype.initialize.apply(this, [e]), this.events = new OpenLayers.Events(this)
                        },
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.call(this);
                            return e && this.auto && ("number" == typeof this.auto ? this.timer = window.setInterval(OpenLayers.Function.bind(this.save, this), 1e3 * this.auto) : this.layer.events.on({
                                featureadded: this.triggerSave,
                                afterfeaturemodified: this.triggerSave,
                                scope: this
                            })), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Strategy.prototype.deactivate.call(this);
                            return e && this.auto && ("number" == typeof this.auto ? window.clearInterval(this.timer) : this.layer.events.un({
                                featureadded: this.triggerSave,
                                afterfeaturemodified: this.triggerSave,
                                scope: this
                            })), e
                        },
                        triggerSave: function (e) {
                            var t = e.feature;
                            t.state !== OpenLayers.State.INSERT && t.state !== OpenLayers.State.UPDATE && t.state !== OpenLayers.State.DELETE || this.save([e.feature])
                        },
                        save: function (e) {
                            e || (e = this.layer.features), this.events.triggerEvent("start", {
                                features: e
                            });
                            var t = this.layer.projection,
                                i = this.layer.map.getProjectionObject();
                            if (!i.equals(t)) {
                                for (var s, r, n = e.length, a = Array(n), o = 0; o < n; ++o)(r = (s = e[o]).clone()).fid = s.fid, r.state = s.state, s.url && (r.url = s.url), r._original = s, r.geometry.transform(i, t), a[o] = r;
                                e = a
                            }
                            this.layer.protocol.commit(e, {
                                callback: this.onCommit,
                                scope: this
                            })
                        },
                        onCommit: function (e) {
                            var t = {
                                response: e
                            };
                            if (e.success()) {
                                for (var i, s = e.reqFeatures, r = [], n = e.insertIds || [], a = 0, o = 0, l = s.length; o < l; ++o)(e = (i = (i = s[o])._original || i).state) && (e == OpenLayers.State.DELETE ? r.push(i) : e == OpenLayers.State.INSERT && (i.fid = n[a], ++a), i.state = null);
                                0 < r.length && this.layer.destroyFeatures(r), this.events.triggerEvent("success", t)
                            } else this.events.triggerEvent("fail", t)
                        },
                        CLASS_NAME: "OpenLayers.Strategy.Save"
                    }), OpenLayers.Events.featureclick = OpenLayers.Class({
                        cache: null,
                        map: null,
                        provides: ["featureclick", "nofeatureclick", "featureover", "featureout"],
                        initialize: function (e) {
                            if (this.target = e, e.object instanceof OpenLayers.Map) this.setMap(e.object);
                            else {
                                if (!(e.object instanceof OpenLayers.Layer.Vector)) throw "Listeners for '" + this.provides.join("', '") + "' events can only be registered for OpenLayers.Layer.Vector or OpenLayers.Map instances";
                                e.object.map ? this.setMap(e.object.map) : e.object.events.register("added", this, (function (t) {
                                    this.setMap(e.object.map)
                                }))
                            }
                            for (var t = this.provides.length - 1; 0 <= t; --t) e.extensions[this.provides[t]] = !0
                        },
                        setMap: function (e) {
                            this.map = e, this.cache = {}, e.events.register("mousedown", this, this.start, {
                                extension: !0
                            }), e.events.register("mouseup", this, this.onClick, {
                                extension: !0
                            }), e.events.register("touchstart", this, this.start, {
                                extension: !0
                            }), e.events.register("touchmove", this, this.cancel, {
                                extension: !0
                            }), e.events.register("touchend", this, this.onClick, {
                                extension: !0
                            }), e.events.register("mousemove", this, this.onMousemove, {
                                extension: !0
                            })
                        },
                        start: function (e) {
                            this.startEvt = e
                        },
                        cancel: function (e) {
                            delete this.startEvt
                        },
                        onClick: function (e) {
                            if (this.startEvt && ("touchend" === e.type || OpenLayers.Event.isLeftClick(e))) {
                                e = this.getFeatures(this.startEvt), delete this.startEvt;
                                for (var t, i, s = {}, r = 0, n = e.length; r < n && (s[(i = (t = e[r]).layer).id] = !0, !1 !== (t = this.triggerEvent("featureclick", {
                                        feature: t
                                    }))); ++r);
                                for (r = 0, n = this.map.layers.length; r < n; ++r)(i = this.map.layers[r]) instanceof OpenLayers.Layer.Vector && !s[i.id] && this.triggerEvent("nofeatureclick", {
                                    layer: i
                                })
                            }
                        },
                        onMousemove: function (e) {
                            delete this.startEvt;
                            var t = this.getFeatures(e),
                                i = {};
                            e = [];
                            for (var s, r = 0, n = t.length; r < n; ++r) i[(s = t[r]).id] = s, this.cache[s.id] || e.push(s);
                            var a;
                            t = [];
                            for (a in this.cache)(s = this.cache[a]).layer && s.layer.map ? i[s.id] || t.push(s) : delete this.cache[a];
                            for (r = 0, n = e.length; r < n && (s = e[r], this.cache[s.id] = s, !1 !== (a = this.triggerEvent("featureover", {
                                    feature: s
                                }))); ++r);
                            for (r = 0, n = t.length; r < n && (s = t[r], delete this.cache[s.id], !1 !== (a = this.triggerEvent("featureout", {
                                    feature: s
                                }))); ++r);
                        },
                        triggerEvent: function (e, t) {
                            var i = t.feature ? t.feature.layer : t.layer,
                                s = this.target.object;
                            if (s instanceof OpenLayers.Map || s === i) return this.target.triggerEvent(e, t)
                        },
                        getFeatures: function (e) {
                            var t, i, s, r, n = e.clientX,
                                a = e.clientY,
                                o = [],
                                l = [],
                                h = [];
                            for (r = this.map.layers.length - 1; 0 <= r; --r)
                                if ("none" !== (t = this.map.layers[r]).div.style.display)
                                    if (t.renderer instanceof OpenLayers.Renderer.Elements) {
                                        if (t instanceof OpenLayers.Layer.Vector)
                                            for (i = document.elementFromPoint(n, a); i && i._featureId;)(s = t.getFeatureById(i._featureId)) ? (o.push(s), i.style.display = "none", l.push(i), i = document.elementFromPoint(n, a)) : i = !1;
                                        h.push(t), t.div.style.display = "none"
                                    } else t.renderer instanceof OpenLayers.Renderer.Canvas && (s = t.renderer.getFeatureIdFromEvent(e)) && (o.push(s), h.push(t));
                            for (r = 0, e = l.length; r < e; ++r) l[r].style.display = "";
                            for (r = h.length - 1; 0 <= r; --r) h[r].div.style.display = "block";
                            return o
                        },
                        destroy: function () {
                            for (var e = this.provides.length - 1; 0 <= e; --e) delete this.target.extensions[this.provides[e]];
                            this.map.events.un({
                                mousemove: this.onMousemove,
                                mousedown: this.start,
                                mouseup: this.onClick,
                                touchstart: this.start,
                                touchmove: this.cancel,
                                touchend: this.onClick,
                                scope: this
                            }), delete this.cache, delete this.map, delete this.target
                        }
                    }), OpenLayers.Events.nofeatureclick = OpenLayers.Events.featureclick, OpenLayers.Events.featureover = OpenLayers.Events.featureclick, OpenLayers.Events.featureout = OpenLayers.Events.featureclick, OpenLayers.Format.GPX = OpenLayers.Class(OpenLayers.Format.XML, {
                        defaultDesc: "No description available",
                        extractWaypoints: !0,
                        extractTracks: !0,
                        extractRoutes: !0,
                        extractAttributes: !0,
                        namespaces: {
                            gpx: "http://www.topografix.com/GPX/1/1",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        schemaLocation: "http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",
                        creator: "OpenLayers",
                        initialize: function (e) {
                            this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = [];
                            if (this.extractTracks)
                                for (var i = e.getElementsByTagName("trk"), s = 0, r = i.length; s < r; s++) {
                                    var n = {};
                                    this.extractAttributes && (n = this.parseAttributes(i[s]));
                                    for (var a = this.getElementsByTagNameNS(i[s], i[s].namespaceURI, "trkseg"), o = 0, l = a.length; o < l; o++) {
                                        var h = this.extractSegment(a[o], "trkpt");
                                        t.push(new OpenLayers.Feature.Vector(h, n))
                                    }
                                }
                            if (this.extractRoutes)
                                for (i = 0, s = (r = e.getElementsByTagName("rte")).length; i < s; i++) n = {}, this.extractAttributes && (n = this.parseAttributes(r[i])), a = this.extractSegment(r[i], "rtept"), t.push(new OpenLayers.Feature.Vector(a, n));
                            if (this.extractWaypoints)
                                for (i = 0, r = (e = e.getElementsByTagName("wpt")).length; i < r; i++) n = {}, this.extractAttributes && (n = this.parseAttributes(e[i])), s = new OpenLayers.Geometry.Point(e[i].getAttribute("lon"), e[i].getAttribute("lat")), t.push(new OpenLayers.Feature.Vector(s, n));
                            if (this.internalProjection && this.externalProjection)
                                for (n = 0, e = t.length; n < e; n++) t[n].geometry.transform(this.externalProjection, this.internalProjection);
                            return t
                        },
                        extractSegment: function (e, t) {
                            for (var i = this.getElementsByTagNameNS(e, e.namespaceURI, t), s = [], r = 0, n = i.length; r < n; r++) s.push(new OpenLayers.Geometry.Point(i[r].getAttribute("lon"), i[r].getAttribute("lat")));
                            return new OpenLayers.Geometry.LineString(s)
                        },
                        parseAttributes: function (e) {
                            var t, i, s = {};
                            for (e = e.firstChild; e;) 1 == e.nodeType && e.firstChild && (3 == (t = e.firstChild).nodeType || 4 == t.nodeType) && ("trkseg" != (i = e.prefix ? e.nodeName.split(":")[1] : e.nodeName) && "rtept" != i && (s[i] = t.nodeValue)), e = e.nextSibling;
                            return s
                        },
                        write: function (e, t) {
                            e = OpenLayers.Util.isArray(e) ? e : [e];
                            var i = this.createElementNS(this.namespaces.gpx, "gpx");
                            i.setAttribute("version", "1.1"), i.setAttribute("creator", this.creator), this.setAttributes(i, {
                                "xsi:schemaLocation": this.schemaLocation
                            }), t && "object" == typeof t && i.appendChild(this.buildMetadataNode(t));
                            for (var s = 0, r = e.length; s < r; s++) i.appendChild(this.buildFeatureNode(e[s]));
                            return OpenLayers.Format.XML.prototype.write.apply(this, [i])
                        },
                        buildMetadataNode: function (e) {
                            for (var t = ["name", "desc", "author"], i = this.createElementNS(this.namespaces.gpx, "metadata"), s = 0; s < t.length; s++) {
                                var r = t[s];
                                if (e[r]) {
                                    var n = this.createElementNS(this.namespaces.gpx, r);
                                    n.appendChild(this.createTextNode(e[r])), i.appendChild(n)
                                }
                            }
                            return i
                        },
                        buildFeatureNode: function (e) {
                            var t = (t = e.geometry).clone();
                            if (this.internalProjection && this.externalProjection && t.transform(this.internalProjection, this.externalProjection), "OpenLayers.Geometry.Point" == t.CLASS_NAME) {
                                var i = this.buildWptNode(t);
                                return this.appendAttributesNode(i, e), i
                            }
                            i = this.createElementNS(this.namespaces.gpx, "trk"), this.appendAttributesNode(i, e), e = this.buildTrkSegNode(t);
                            t = 0;
                            for (var s = (e = OpenLayers.Util.isArray(e) ? e : [e]).length; t < s; t++) i.appendChild(e[t]);
                            return i
                        },
                        buildTrkSegNode: function (e) {
                            var t, i, s, r;
                            if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME || "OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) {
                                for (t = this.createElementNS(this.namespaces.gpx, "trkseg"), i = 0, s = e.components.length; i < s; i++) r = e.components[i], t.appendChild(this.buildTrkPtNode(r));
                                return t
                            }
                            for (t = [], i = 0, s = e.components.length; i < s; i++) t.push(this.buildTrkSegNode(e.components[i]));
                            return t
                        },
                        buildTrkPtNode: function (e) {
                            var t = this.createElementNS(this.namespaces.gpx, "trkpt");
                            return t.setAttribute("lon", e.x), t.setAttribute("lat", e.y), t
                        },
                        buildWptNode: function (e) {
                            var t = this.createElementNS(this.namespaces.gpx, "wpt");
                            return t.setAttribute("lon", e.x), t.setAttribute("lat", e.y), t
                        },
                        appendAttributesNode: function (e, t) {
                            var i = this.createElementNS(this.namespaces.gpx, "name");
                            i.appendChild(this.createTextNode(t.attributes.name || t.id)), e.appendChild(i), (i = this.createElementNS(this.namespaces.gpx, "desc")).appendChild(this.createTextNode(t.attributes.description || this.defaultDesc)), e.appendChild(i)
                        },
                        CLASS_NAME: "OpenLayers.Format.GPX"
                    }), OpenLayers.Format.WMSDescribeLayer = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.1.1",
                        CLASS_NAME: "OpenLayers.Format.WMSDescribeLayer"
                    }), OpenLayers.Format.WMSDescribeLayer.v1_1_1 = OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer, {
                        initialize: function (e) {
                            OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            for (var t, i, s = e.documentElement.childNodes, r = {
                                    layerDescriptions: []
                                }, n = 0; n < s.length; ++n)
                                if ("LayerDescription" == (i = (t = s[n]).nodeName)) {
                                    i = t.getAttribute("name");
                                    var a = "",
                                        o = "",
                                        l = "";
                                    t.getAttribute("owsType") ? (a = t.getAttribute("owsType"), o = t.getAttribute("owsURL")) : "" != t.getAttribute("wfs") ? (a = "WFS", o = t.getAttribute("wfs")) : "" != t.getAttribute("wcs") && (a = "WCS", o = t.getAttribute("wcs")), 0 < (t = t.getElementsByTagName("Query")).length && ((l = t[0].getAttribute("typeName")) || (l = t[0].getAttribute("typename"))), t = {
                                        layerName: i,
                                        owsType: a,
                                        owsURL: o,
                                        typeName: l
                                    }, r.layerDescriptions.push(t), r.length = r.layerDescriptions.length, r[r.length - 1] = t
                                } else if ("ServiceException" == i) return {
                                error: (new OpenLayers.Format.OGCExceptionReport).read(e)
                            };
                            return r
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSDescribeLayer.v1_1_1"
                    }), OpenLayers.Format.WMSDescribeLayer.v1_1_0 = OpenLayers.Format.WMSDescribeLayer.v1_1_1, OpenLayers.Layer.XYZ = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        isBaseLayer: !0,
                        sphericalMercator: !1,
                        zoomOffset: 0,
                        serverResolutions: null,
                        initialize: function (e, t, i) {
                            (i && i.sphericalMercator || this.sphericalMercator) && (i = OpenLayers.Util.extend({
                                projection: "EPSG:900913",
                                numZoomLevels: 19
                            }, i)), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [e || this.name, t || this.url, {}, i])
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.XYZ(this.name, this.url, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            e = this.getXYZ(e);
                            var t = this.url;
                            return OpenLayers.Util.isArray(t) && (t = this.selectUrl("" + e.x + e.y + e.z, t)), OpenLayers.String.format(t, e)
                        },
                        getXYZ: function (e) {
                            var t = this.getServerResolution(),
                                i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w));
                            if (e = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)), t = this.getServerZoom(), this.wrapDateLine) {
                                var s = Math.pow(2, t);
                                i = (i % s + s) % s
                            }
                            return {
                                x: i,
                                y: e,
                                z: t
                            }
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left, this.maxExtent.bottom))
                        },
                        CLASS_NAME: "OpenLayers.Layer.XYZ"
                    }), OpenLayers.Layer.OSM = OpenLayers.Class(OpenLayers.Layer.XYZ, {
                        name: "OpenStreetMap",
                        url: ["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png", "http://b.tile.openstreetmap.org/${z}/${x}/${y}.png", "http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],
                        attribution: "&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",
                        sphericalMercator: !0,
                        wrapDateLine: !0,
                        tileOptions: null,
                        initialize: function (e, t, i) {
                            OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments), this.tileOptions = OpenLayers.Util.extend({
                                crossOriginKeyword: "anonymous"
                            }, this.options && this.options.tileOptions)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.OSM(this.name, this.url, this.getOptions())), OpenLayers.Layer.XYZ.prototype.clone.apply(this, [e])
                        },
                        CLASS_NAME: "OpenLayers.Layer.OSM"
                    }), OpenLayers.Renderer = OpenLayers.Class({
                        container: null,
                        root: null,
                        extent: null,
                        locked: !1,
                        size: null,
                        resolution: null,
                        map: null,
                        featureDx: 0,
                        initialize: function (e, t) {
                            this.container = OpenLayers.Util.getElement(e), OpenLayers.Util.extend(this, t)
                        },
                        destroy: function () {
                            this.map = this.resolution = this.size = this.extent = this.container = null
                        },
                        supported: function () {
                            return !1
                        },
                        setExtent: function (e, t) {
                            if (this.extent = e.clone(), this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
                                var i = e.getWidth() / this.map.getExtent().getWidth();
                                e = e.scale(1 / i), this.extent = e.wrapDateLine(this.map.getMaxExtent()).scale(i)
                            }
                            return t && (this.resolution = null), !0
                        },
                        setSize: function (e) {
                            this.size = e.clone(), this.resolution = null
                        },
                        getResolution: function () {
                            return this.resolution = this.resolution || this.map.getResolution()
                        },
                        drawFeature: function (e, t) {
                            if (null == t && (t = e.style), e.geometry) {
                                var i = e.geometry.getBounds();
                                if (i) {
                                    var s;
                                    if (this.map.baseLayer && this.map.baseLayer.wrapDateLine && (s = this.map.getMaxExtent()), i.intersectsBounds(this.extent, {
                                            worldBounds: s
                                        }) ? this.calculateFeatureDx(i, s) : t = {
                                            display: "none"
                                        }, i = this.drawGeometry(e.geometry, t, e.id), "none" != t.display && t.label && !1 !== i) {
                                        if (s = e.geometry.getCentroid(), t.labelXOffset || t.labelYOffset) {
                                            var r = isNaN(t.labelXOffset) ? 0 : t.labelXOffset,
                                                n = isNaN(t.labelYOffset) ? 0 : t.labelYOffset,
                                                a = this.getResolution();
                                            s.move(r * a, n * a)
                                        }
                                        this.drawText(e.id, t, s)
                                    } else this.removeText(e.id);
                                    return i
                                }
                            }
                        },
                        calculateFeatureDx: function (e, t) {
                            if (this.featureDx = 0, t) {
                                var i = t.getWidth();
                                this.featureDx = Math.round(((e.left + e.right) / 2 - (this.extent.left + this.extent.right) / 2) / i) * i
                            }
                        },
                        drawGeometry: function (e, t, i) {},
                        drawText: function (e, t, i) {},
                        removeText: function (e) {},
                        clear: function () {},
                        getFeatureIdFromEvent: function (e) {},
                        eraseFeatures: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            for (var t = 0, i = e.length; t < i; ++t) {
                                var s = e[t];
                                this.eraseGeometry(s.geometry, s.id), this.removeText(s.id)
                            }
                        },
                        eraseGeometry: function (e, t) {},
                        moveRoot: function (e) {},
                        getRenderLayerId: function () {
                            return this.container.id
                        },
                        applyDefaultSymbolizer: function (e) {
                            var t = OpenLayers.Util.extend({}, OpenLayers.Renderer.defaultSymbolizer);
                            return !1 === e.stroke && (delete t.strokeWidth, delete t.strokeColor), !1 === e.fill && delete t.fillColor, OpenLayers.Util.extend(t, e), t
                        },
                        CLASS_NAME: "OpenLayers.Renderer"
                    }), OpenLayers.Renderer.defaultSymbolizer = {
                        fillColor: "#000000",
                        strokeColor: "#000000",
                        strokeWidth: 2,
                        fillOpacity: 1,
                        strokeOpacity: 1,
                        pointRadius: 0,
                        labelAlign: "cm"
                    }, OpenLayers.Renderer.symbol = {
                        star: [350, 75, 379, 161, 469, 161, 397, 215, 423, 301, 350, 250, 277, 301, 303, 215, 231, 161, 321, 161, 350, 75],
                        cross: [4, 0, 6, 0, 6, 4, 10, 4, 10, 6, 6, 6, 6, 10, 4, 10, 4, 6, 0, 6, 0, 4, 4, 4, 4, 0],
                        x: [0, 0, 25, 0, 50, 35, 75, 0, 100, 0, 65, 50, 100, 100, 75, 100, 50, 65, 25, 100, 0, 100, 35, 50, 0, 0],
                        square: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0],
                        triangle: [0, 10, 10, 10, 5, 0, 0, 10]
                    }, OpenLayers.Renderer.Canvas = OpenLayers.Class(OpenLayers.Renderer, {
                        hitDetection: !0,
                        hitOverflow: 0,
                        canvas: null,
                        features: null,
                        pendingRedraw: !1,
                        cachedSymbolBounds: {},
                        initialize: function (e, t) {
                            OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.root = document.createElement("canvas"), this.container.appendChild(this.root), this.canvas = this.root.getContext("2d"), this.features = {}, this.hitDetection && (this.hitCanvas = document.createElement("canvas"), this.hitContext = this.hitCanvas.getContext("2d"))
                        },
                        setExtent: function () {
                            return OpenLayers.Renderer.prototype.setExtent.apply(this, arguments), !1
                        },
                        eraseGeometry: function (e, t) {
                            this.eraseFeatures(this.features[t][0])
                        },
                        supported: function () {
                            return OpenLayers.CANVAS_SUPPORTED
                        },
                        setSize: function (e) {
                            this.size = e.clone();
                            var t = this.root;
                            t.style.width = e.w + "px", t.style.height = e.h + "px", t.width = e.w, t.height = e.h, this.resolution = null, this.hitDetection && ((t = this.hitCanvas).style.width = e.w + "px", t.style.height = e.h + "px", t.width = e.w, t.height = e.h)
                        },
                        drawFeature: function (e, t) {
                            var i, s;
                            e.geometry && (t = this.applyDefaultSymbolizer(t || e.style), i = e.geometry.getBounds(), this.map.baseLayer && this.map.baseLayer.wrapDateLine && (s = this.map.getMaxExtent()), s = i && i.intersectsBounds(this.extent, {
                                worldBounds: s
                            }), (i = "none" !== t.display && !!i && s) ? this.features[e.id] = [e, t] : delete this.features[e.id], this.pendingRedraw = !0);
                            return this.pendingRedraw && !this.locked && (this.redraw(), this.pendingRedraw = !1), i
                        },
                        drawGeometry: function (e, t, i) {
                            var s = e.CLASS_NAME;
                            if ("OpenLayers.Geometry.Collection" == s || "OpenLayers.Geometry.MultiPoint" == s || "OpenLayers.Geometry.MultiLineString" == s || "OpenLayers.Geometry.MultiPolygon" == s)
                                for (s = 0; s < e.components.length; s++) this.drawGeometry(e.components[s], t, i);
                            else switch (e.CLASS_NAME) {
                                case "OpenLayers.Geometry.Point":
                                    this.drawPoint(e, t, i);
                                    break;
                                case "OpenLayers.Geometry.LineString":
                                    this.drawLineString(e, t, i);
                                    break;
                                case "OpenLayers.Geometry.LinearRing":
                                    this.drawLinearRing(e, t, i);
                                    break;
                                case "OpenLayers.Geometry.Polygon":
                                    this.drawPolygon(e, t, i)
                            }
                        },
                        drawExternalGraphic: function (e, t, i) {
                            var s = new Image,
                                r = t.title || t.graphicTitle;
                            r && (s.title = r);
                            var n = t.graphicWidth || t.graphicHeight,
                                a = t.graphicHeight || t.graphicWidth,
                                o = (n = n || 2 * t.pointRadius, a = a || 2 * t.pointRadius, null != t.graphicXOffset ? t.graphicXOffset : -.5 * n),
                                l = null != t.graphicYOffset ? t.graphicYOffset : -.5 * a,
                                h = t.graphicOpacity || t.fillOpacity;
                            s.onload = OpenLayers.Function.bind((function () {
                                if (this.features[i]) {
                                    var t = (r = this.getLocalXY(e))[0],
                                        r = r[1];
                                    if (!isNaN(t) && !isNaN(r)) {
                                        t = t + o | 0, r = r + l | 0;
                                        var p = this.canvas;
                                        p.globalAlpha = h;
                                        var u = OpenLayers.Renderer.Canvas.drawImageScaleFactor || (OpenLayers.Renderer.Canvas.drawImageScaleFactor = /android 2.1/.test(navigator.userAgent.toLowerCase()) ? 320 / window.screen.width : 1);
                                        p.drawImage(s, t * u, r * u, n * u, a * u), this.hitDetection && (this.setHitContextStyle("fill", i), this.hitContext.fillRect(t, r, n, a))
                                    }
                                }
                            }), this), s.src = t.externalGraphic
                        },
                        drawNamedSymbol: function (e, t, i) {
                            var s, r, n, a;
                            n = Math.PI / 180;
                            var o = OpenLayers.Renderer.symbol[t.graphicName];
                            if (!o) throw Error(t.graphicName + " is not a valid symbol name");
                            if (!(!o.length || 2 > o.length || (e = this.getLocalXY(e), r = e[0], a = e[1], isNaN(r) || isNaN(a)))) {
                                if (this.canvas.lineCap = "round", this.canvas.lineJoin = "round", this.hitDetection && (this.hitContext.lineCap = "round", this.hitContext.lineJoin = "round"), t.graphicName in this.cachedSymbolBounds) s = this.cachedSymbolBounds[t.graphicName];
                                else {
                                    for (s = new OpenLayers.Bounds, e = 0; e < o.length; e += 2) s.extend(new OpenLayers.LonLat(o[e], o[e + 1]));
                                    this.cachedSymbolBounds[t.graphicName] = s
                                }
                                if (this.canvas.save(), this.hitDetection && this.hitContext.save(), this.canvas.translate(r, a), this.hitDetection && this.hitContext.translate(r, a), e = n * t.rotation, isNaN(e) || (this.canvas.rotate(e), this.hitDetection && this.hitContext.rotate(e)), n = 2 * t.pointRadius / Math.max(s.getWidth(), s.getHeight()), this.canvas.scale(n, n), this.hitDetection && this.hitContext.scale(n, n), e = s.getCenterLonLat().lon, s = s.getCenterLonLat().lat, this.canvas.translate(-e, -s), this.hitDetection && this.hitContext.translate(-e, -s), a = t.strokeWidth, t.strokeWidth = a / n, !1 !== t.fill) {
                                    for (this.setCanvasStyle("fill", t), this.canvas.beginPath(), e = 0; e < o.length; e += 2) s = o[e], r = o[e + 1], 0 == e && this.canvas.moveTo(s, r), this.canvas.lineTo(s, r);
                                    if (this.canvas.closePath(), this.canvas.fill(), this.hitDetection) {
                                        for (this.setHitContextStyle("fill", i, t), this.hitContext.beginPath(), e = 0; e < o.length; e += 2) s = o[e], r = o[e + 1], 0 == e && this.canvas.moveTo(s, r), this.hitContext.lineTo(s, r);
                                        this.hitContext.closePath(), this.hitContext.fill()
                                    }
                                }
                                if (!1 !== t.stroke) {
                                    for (this.setCanvasStyle("stroke", t), this.canvas.beginPath(), e = 0; e < o.length; e += 2) s = o[e], r = o[e + 1], 0 == e && this.canvas.moveTo(s, r), this.canvas.lineTo(s, r);
                                    if (this.canvas.closePath(), this.canvas.stroke(), this.hitDetection) {
                                        for (this.setHitContextStyle("stroke", i, t, n), this.hitContext.beginPath(), e = 0; e < o.length; e += 2) s = o[e], r = o[e + 1], 0 == e && this.hitContext.moveTo(s, r), this.hitContext.lineTo(s, r);
                                        this.hitContext.closePath(), this.hitContext.stroke()
                                    }
                                }
                                t.strokeWidth = a, this.canvas.restore(), this.hitDetection && this.hitContext.restore(), this.setCanvasStyle("reset")
                            }
                        },
                        setCanvasStyle: function (e, t) {
                            "fill" === e ? (this.canvas.globalAlpha = t.fillOpacity, this.canvas.fillStyle = t.fillColor) : "stroke" === e ? (this.canvas.globalAlpha = t.strokeOpacity, this.canvas.strokeStyle = t.strokeColor, this.canvas.lineWidth = t.strokeWidth) : (this.canvas.globalAlpha = 0, this.canvas.lineWidth = 1)
                        },
                        featureIdToHex: function (e) {
                            16777216 <= (e = Number(e.split("_").pop()) + 1) && (this.hitOverflow = e - 16777215, e = e % 16777216 + 1);
                            var t = (e = "000000" + e.toString(16)).length;
                            return "#" + e.substring(t - 6, t)
                        },
                        setHitContextStyle: function (e, t, i, s) {
                            t = this.featureIdToHex(t), "fill" == e ? (this.hitContext.globalAlpha = 1, this.hitContext.fillStyle = t) : "stroke" == e ? (this.hitContext.globalAlpha = 1, this.hitContext.strokeStyle = t, void 0 === s ? this.hitContext.lineWidth = i.strokeWidth + 2 : isNaN(s) || (this.hitContext.lineWidth = i.strokeWidth + 2 / s)) : (this.hitContext.globalAlpha = 0, this.hitContext.lineWidth = 1)
                        },
                        drawPoint: function (e, t, i) {
                            if (!1 !== t.graphic)
                                if (t.externalGraphic) this.drawExternalGraphic(e, t, i);
                                else if (t.graphicName && "circle" != t.graphicName) this.drawNamedSymbol(e, t, i);
                            else {
                                var s = this.getLocalXY(e);
                                if (e = s[0], s = s[1], !isNaN(e) && !isNaN(s)) {
                                    var r = 2 * Math.PI,
                                        n = t.pointRadius;
                                    !1 !== t.fill && (this.setCanvasStyle("fill", t), this.canvas.beginPath(), this.canvas.arc(e, s, n, 0, r, !0), this.canvas.fill(), this.hitDetection && (this.setHitContextStyle("fill", i, t), this.hitContext.beginPath(), this.hitContext.arc(e, s, n, 0, r, !0), this.hitContext.fill())), !1 !== t.stroke && (this.setCanvasStyle("stroke", t), this.canvas.beginPath(), this.canvas.arc(e, s, n, 0, r, !0), this.canvas.stroke(), this.hitDetection && (this.setHitContextStyle("stroke", i, t), this.hitContext.beginPath(), this.hitContext.arc(e, s, n, 0, r, !0), this.hitContext.stroke()), this.setCanvasStyle("reset"))
                                }
                            }
                        },
                        drawLineString: function (e, t, i) {
                            t = OpenLayers.Util.applyDefaults({
                                fill: !1
                            }, t), this.drawLinearRing(e, t, i)
                        },
                        drawLinearRing: function (e, t, i) {
                            !1 !== t.fill && (this.setCanvasStyle("fill", t), this.renderPath(this.canvas, e, t, i, "fill"), this.hitDetection && (this.setHitContextStyle("fill", i, t), this.renderPath(this.hitContext, e, t, i, "fill"))), !1 !== t.stroke && (this.setCanvasStyle("stroke", t), this.renderPath(this.canvas, e, t, i, "stroke"), this.hitDetection && (this.setHitContextStyle("stroke", i, t), this.renderPath(this.hitContext, e, t, i, "stroke"))), this.setCanvasStyle("reset")
                        },
                        renderPath: function (e, t, i, s, r) {
                            i = (t = t.components).length, e.beginPath();
                            var n = (s = this.getLocalXY(t[0]))[1];
                            if (!isNaN(s[0]) && !isNaN(n)) {
                                for (e.moveTo(s[0], s[1]), s = 1; s < i; ++s) n = this.getLocalXY(t[s]), e.lineTo(n[0], n[1]);
                                "fill" === r ? e.fill() : e.stroke()
                            }
                        },
                        drawPolygon: function (e, t, i) {
                            var s = (e = e.components).length;
                            this.drawLinearRing(e[0], t, i);
                            for (var r = 1; r < s; ++r) this.canvas.globalCompositeOperation = "destination-out", this.hitDetection && (this.hitContext.globalCompositeOperation = "destination-out"), this.drawLinearRing(e[r], OpenLayers.Util.applyDefaults({
                                stroke: !1,
                                fillOpacity: 1
                            }, t), i), this.canvas.globalCompositeOperation = "source-over", this.hitDetection && (this.hitContext.globalCompositeOperation = "source-over"), this.drawLinearRing(e[r], OpenLayers.Util.applyDefaults({
                                fill: !1
                            }, t), i)
                        },
                        drawText: function (e, t) {
                            var i = this.getLocalXY(e);
                            this.setCanvasStyle("reset"), this.canvas.fillStyle = t.fontColor, this.canvas.globalAlpha = t.fontOpacity || 1;
                            var s = [t.fontStyle ? t.fontStyle : "normal", "normal", t.fontWeight ? t.fontWeight : "normal", t.fontSize ? t.fontSize : "1em", t.fontFamily ? t.fontFamily : "sans-serif"].join(" "),
                                r = t.label.split("\n"),
                                n = r.length;
                            if (this.canvas.fillText) {
                                this.canvas.font = s, this.canvas.textAlign = OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]] || "center", this.canvas.textBaseline = OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]] || "middle";
                                var a = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];
                                for (null == a && (a = -.5), s = this.canvas.measureText("Mg").height || this.canvas.measureText("xx").width, i[1] += s * a * (n - 1), a = 0; a < n; a++) t.labelOutlineWidth && (this.canvas.save(), this.canvas.globalAlpha = t.labelOutlineOpacity || t.fontOpacity || 1, this.canvas.strokeStyle = t.labelOutlineColor, this.canvas.lineWidth = t.labelOutlineWidth, this.canvas.strokeText(r[a], i[0], i[1] + s * a + 1), this.canvas.restore()), this.canvas.fillText(r[a], i[0], i[1] + s * a)
                            } else if (this.canvas.mozDrawText) {
                                this.canvas.mozTextStyle = s;
                                var o = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];
                                for (null == o && (o = -.5), null == (a = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]]) && (a = -.5), s = this.canvas.mozMeasureText("xx"), i[1] += s * (1 + a * n), a = 0; a < n; a++) {
                                    var l = i[0] + o * this.canvas.mozMeasureText(r[a]),
                                        h = i[1] + a * s;
                                    this.canvas.translate(l, h), this.canvas.mozDrawText(r[a]), this.canvas.translate(-l, -h)
                                }
                            }
                            this.setCanvasStyle("reset")
                        },
                        getLocalXY: function (e) {
                            var t = this.getResolution(),
                                i = this.extent;
                            return [(e.x - this.featureDx) / t + -i.left / t, i.top / t - e.y / t]
                        },
                        clear: function () {
                            var e = this.root.height,
                                t = this.root.width;
                            this.canvas.clearRect(0, 0, t, e), this.features = {}, this.hitDetection && this.hitContext.clearRect(0, 0, t, e)
                        },
                        getFeatureIdFromEvent: function (e) {
                            var t;
                            if (this.hitDetection && "none" !== this.root.style.display && !this.map.dragging && (e = e.xy, 255 === (e = this.hitContext.getImageData(0 | e.x, 0 | e.y, 1, 1).data)[3] && (e = e[2] + 256 * (e[1] + 256 * e[0])))) {
                                e = "OpenLayers_Feature_Vector_" + (e - 1 + this.hitOverflow);
                                try {
                                    t = this.features[e][0]
                                } catch (e) {}
                            }
                            return t
                        },
                        eraseFeatures: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            for (var t = 0; t < e.length; ++t) delete this.features[e[t].id];
                            this.redraw()
                        },
                        redraw: function () {
                            if (!this.locked) {
                                var e = this.root.height,
                                    t = this.root.width;
                                this.canvas.clearRect(0, 0, t, e), this.hitDetection && this.hitContext.clearRect(0, 0, t, e);
                                e = [];
                                var i, s, r, n = this.map.baseLayer && this.map.baseLayer.wrapDateLine && this.map.getMaxExtent();
                                for (r in this.features) this.features.hasOwnProperty(r) && (i = (t = this.features[r][0]).geometry, this.calculateFeatureDx(i.getBounds(), n), s = this.features[r][1], this.drawGeometry(i, s, t.id), s.label && e.push([t, s]));
                                for (t = 0, i = e.length; t < i; ++t) r = e[t], this.drawText(r[0].geometry.getCentroid(), r[1])
                            }
                        },
                        CLASS_NAME: "OpenLayers.Renderer.Canvas"
                    }), OpenLayers.Renderer.Canvas.LABEL_ALIGN = {
                        l: "left",
                        r: "right",
                        t: "top",
                        b: "bottom"
                    }, OpenLayers.Renderer.Canvas.LABEL_FACTOR = {
                        l: 0,
                        r: -1,
                        t: 0,
                        b: -1
                    }, OpenLayers.Renderer.Canvas.drawImageScaleFactor = null, OpenLayers.Format.OSM = OpenLayers.Class(OpenLayers.Format.XML, {
                        checkTags: !1,
                        interestingTagsExclude: null,
                        areaTags: null,
                        initialize: function (e) {
                            var t = {
                                    interestingTagsExclude: "source source_ref source:ref history attribution created_by".split(" "),
                                    areaTags: "area building leisure tourism ruins historic landuse military natural sport".split(" ")
                                },
                                i = (t = OpenLayers.Util.extend(t, e), {});
                            for (e = 0; e < t.interestingTagsExclude.length; e++) i[t.interestingTagsExclude[e]] = !0;
                            for (t.interestingTagsExclude = i, i = {}, e = 0; e < t.areaTags.length; e++) i[t.areaTags[e]] = !0;
                            t.areaTags = i, this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [t])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = this.getNodes(e),
                                i = this.getWays(e);
                            e = Array(i.length);
                            for (var s = 0; s < i.length; s++) {
                                for (var r = Array(i[s].nodes.length), n = this.isWayArea(i[s]) ? 1 : 0, a = 0; a < i[s].nodes.length; a++) {
                                    var o = t[i[s].nodes[a]],
                                        l = new OpenLayers.Geometry.Point(o.lon, o.lat);
                                    l.osm_id = parseInt(i[s].nodes[a]), r[a] = l, o.used = !0
                                }
                                o = null, o = n ? new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(r)) : new OpenLayers.Geometry.LineString(r), this.internalProjection && this.externalProjection && o.transform(this.externalProjection, this.internalProjection), (r = new OpenLayers.Feature.Vector(o, i[s].tags)).osm_id = parseInt(i[s].id), r.fid = "way." + r.osm_id, e[s] = r
                            }
                            for (var h in t) {
                                if (!(o = t[h]).used || this.checkTags) {
                                    if (i = null, this.checkTags) {
                                        if (i = this.getTags(o.node, !0), o.used && !i[1]) continue;
                                        i = i[0]
                                    } else i = this.getTags(o.node);
                                    r = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(o.lon, o.lat), i), this.internalProjection && this.externalProjection && r.geometry.transform(this.externalProjection, this.internalProjection), r.osm_id = parseInt(h), r.fid = "node." + r.osm_id, e.push(r)
                                }
                                o.node = null
                            }
                            return e
                        },
                        getNodes: function (e) {
                            e = e.getElementsByTagName("node");
                            for (var t = {}, i = 0; i < e.length; i++) {
                                var s = e[i];
                                t[s.getAttribute("id")] = {
                                    lat: s.getAttribute("lat"),
                                    lon: s.getAttribute("lon"),
                                    node: s
                                }
                            }
                            return t
                        },
                        getWays: function (e) {
                            e = e.getElementsByTagName("way");
                            for (var t = [], i = 0; i < e.length; i++) {
                                var s = e[i],
                                    r = {
                                        id: s.getAttribute("id")
                                    };
                                r.tags = this.getTags(s), s = s.getElementsByTagName("nd"), r.nodes = Array(s.length);
                                for (var n = 0; n < s.length; n++) r.nodes[n] = s[n].getAttribute("ref");
                                t.push(r)
                            }
                            return t
                        },
                        getTags: function (e, t) {
                            for (var i = e.getElementsByTagName("tag"), s = {}, r = !1, n = 0; n < i.length; n++) {
                                var a = i[n].getAttribute("k");
                                s[a] = i[n].getAttribute("v"), t && (this.interestingTagsExclude[a] || (r = !0))
                            }
                            return t ? [s, r] : s
                        },
                        isWayArea: function (e) {
                            var t = !1,
                                i = !1;
                            if (e.nodes[0] == e.nodes[e.nodes.length - 1] && (t = !0), this.checkTags)
                                for (var s in e.tags)
                                    if (this.areaTags[s]) {
                                        i = !0;
                                        break
                                    } return t && (!this.checkTags || i)
                        },
                        write: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]), this.osm_id = 1, this.created_nodes = {};
                            var t = this.createElementNS(null, "osm");
                            t.setAttribute("version", "0.5"), t.setAttribute("generator", "OpenLayers " + OpenLayers.VERSION_NUMBER);
                            for (var i = e.length - 1; 0 <= i; i--)
                                for (var s = this.createFeatureNodes(e[i]), r = 0; r < s.length; r++) t.appendChild(s[r]);
                            return OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        createFeatureNodes: function (e) {
                            var t = [],
                                i = (i = (i = e.geometry.CLASS_NAME).substring(i.lastIndexOf(".") + 1)).toLowerCase();
                            return (i = this.createXML[i]) && (t = i.apply(this, [e])), t
                        },
                        createXML: {
                            point: function (e) {
                                var t = null,
                                    i = e.geometry ? e.geometry : e;
                                this.internalProjection && this.externalProjection && (i = i.clone()).transform(this.internalProjection, this.externalProjection);
                                var s = !1;
                                e.osm_id ? (t = e.osm_id, this.created_nodes[t] && (s = !0)) : (t = -this.osm_id, this.osm_id++);
                                var r = s ? this.created_nodes[t] : this.createElementNS(null, "node");
                                return this.created_nodes[t] = r, r.setAttribute("id", t), r.setAttribute("lon", i.x), r.setAttribute("lat", i.y), e.attributes && this.serializeTags(e, r), this.setState(e, r), s ? [] : [r]
                            },
                            linestring: function (e) {
                                var t, i = [],
                                    s = e.geometry;
                                e.osm_id ? t = e.osm_id : (t = -this.osm_id, this.osm_id++);
                                var r = this.createElementNS(null, "way");
                                for (r.setAttribute("id", t), t = 0; t < s.components.length; t++) {
                                    if ((n = this.createXML.point.apply(this, [s.components[t]])).length) {
                                        var n, a = (n = n[0]).getAttribute("id");
                                        i.push(n)
                                    } else a = s.components[t].osm_id, n = this.created_nodes[a];
                                    this.setState(e, n), (n = this.createElementNS(null, "nd")).setAttribute("ref", a), r.appendChild(n)
                                }
                                return this.serializeTags(e, r), i.push(r), i
                            },
                            polygon: function (e) {
                                var t = OpenLayers.Util.extend({
                                    area: "yes"
                                }, e.attributes);
                                return (t = new OpenLayers.Feature.Vector(e.geometry.components[0], t)).osm_id = e.osm_id, this.createXML.linestring.apply(this, [t])
                            }
                        },
                        serializeTags: function (e, t) {
                            for (var i in e.attributes) {
                                var s = this.createElementNS(null, "tag");
                                s.setAttribute("k", i), s.setAttribute("v", e.attributes[i]), t.appendChild(s)
                            }
                        },
                        setState: function (e, t) {
                            if (e.state) {
                                var i = null;
                                switch (e.state) {
                                    case OpenLayers.State.UPDATE:
                                    case OpenLayers.State.DELETE:
                                        i = "delete"
                                }
                                i && t.setAttribute("action", i)
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.OSM"
                    }), OpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {
                        KEY_EVENTS: ["keydown", "keyup"],
                        eventListener: null,
                        observeElement: null,
                        initialize: function (e, t, i) {
                            OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.eventListener = OpenLayers.Function.bindAsEventListener(this.handleKeyEvent, this)
                        },
                        destroy: function () {
                            this.deactivate(), this.eventListener = null, OpenLayers.Handler.prototype.destroy.apply(this, arguments)
                        },
                        activate: function () {
                            if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
                                this.observeElement = this.observeElement || document;
                                for (var e = 0, t = this.KEY_EVENTS.length; e < t; e++) OpenLayers.Event.observe(this.observeElement, this.KEY_EVENTS[e], this.eventListener);
                                return !0
                            }
                            return !1
                        },
                        deactivate: function () {
                            var e = !1;
                            if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
                                e = 0;
                                for (var t = this.KEY_EVENTS.length; e < t; e++) OpenLayers.Event.stopObserving(this.observeElement, this.KEY_EVENTS[e], this.eventListener);
                                e = !0
                            }
                            return e
                        },
                        handleKeyEvent: function (e) {
                            this.checkModifiers(e) && this.callback(e.type, [e])
                        },
                        CLASS_NAME: "OpenLayers.Handler.Keyboard"
                    }), OpenLayers.Control.ModifyFeature = OpenLayers.Class(OpenLayers.Control, {
                        documentDrag: !1,
                        geometryTypes: null,
                        clickout: !0,
                        toggle: !0,
                        standalone: !1,
                        layer: null,
                        feature: null,
                        vertex: null,
                        vertices: null,
                        virtualVertices: null,
                        handlers: null,
                        deleteCodes: null,
                        virtualStyle: null,
                        vertexRenderIntent: null,
                        mode: null,
                        createVertices: !0,
                        modified: !1,
                        radiusHandle: null,
                        dragHandle: null,
                        onModificationStart: function () {},
                        onModification: function () {},
                        onModificationEnd: function () {},
                        initialize: function (e, t) {
                            t = t || {}, this.layer = e, this.vertices = [], this.virtualVertices = [], this.virtualStyle = OpenLayers.Util.extend({}, this.layer.style || this.layer.styleMap.createSymbolizer(null, t.vertexRenderIntent)), this.virtualStyle.fillOpacity = .3, this.virtualStyle.strokeOpacity = .3, this.deleteCodes = [46, 68], this.mode = OpenLayers.Control.ModifyFeature.RESHAPE, OpenLayers.Control.prototype.initialize.apply(this, [t]), OpenLayers.Util.isArray(this.deleteCodes) || (this.deleteCodes = [this.deleteCodes]);
                            var i = {
                                documentDrag: this.documentDrag,
                                stopDown: !1
                            };
                            this.handlers = {
                                keyboard: new OpenLayers.Handler.Keyboard(this, {
                                    keydown: this.handleKeypress
                                }),
                                drag: new OpenLayers.Handler.Drag(this, {
                                    down: function (e) {
                                        this.vertex = null, (e = this.layer.getFeatureFromEvent(this.handlers.drag.evt)) ? this.dragStart(e) : this.clickout && (this._unselect = this.feature)
                                    },
                                    move: function (e) {
                                        delete this._unselect, this.vertex && this.dragVertex(this.vertex, e)
                                    },
                                    up: function () {
                                        this.handlers.drag.stopDown = !1, this._unselect && (this.unselectFeature(this._unselect), delete this._unselect)
                                    },
                                    done: function (e) {
                                        this.vertex && this.dragComplete(this.vertex)
                                    }
                                }, i)
                            }
                        },
                        destroy: function () {
                            this.map && this.map.events.un({
                                removelayer: this.handleMapEvents,
                                changelayer: this.handleMapEvents,
                                scope: this
                            }), this.layer = null, OpenLayers.Control.prototype.destroy.apply(this, [])
                        },
                        activate: function () {
                            return this.moveLayerToTop(), this.map.events.on({
                                removelayer: this.handleMapEvents,
                                changelayer: this.handleMapEvents,
                                scope: this
                            }), this.handlers.keyboard.activate() && this.handlers.drag.activate() && OpenLayers.Control.prototype.activate.apply(this, arguments)
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.moveLayerBack(), this.map.events.un({
                                removelayer: this.handleMapEvents,
                                changelayer: this.handleMapEvents,
                                scope: this
                            }), this.layer.removeFeatures(this.vertices, {
                                silent: !0
                            }), this.layer.removeFeatures(this.virtualVertices, {
                                silent: !0
                            }), this.vertices = [], this.handlers.drag.deactivate(), this.handlers.keyboard.deactivate(), (e = this.feature) && e.geometry && e.layer && this.unselectFeature(e), e = !0), e
                        },
                        beforeSelectFeature: function (e) {
                            return this.layer.events.triggerEvent("beforefeaturemodified", {
                                feature: e
                            })
                        },
                        selectFeature: function (e) {
                            if (!(this.feature === e || this.geometryTypes && -1 == OpenLayers.Util.indexOf(this.geometryTypes, e.geometry.CLASS_NAME))) {
                                !1 !== this.beforeSelectFeature(e) && (this.feature && this.unselectFeature(this.feature), this.feature = e, this.layer.selectedFeatures.push(e), this.layer.drawFeature(e, "select"), this.modified = !1, this.resetVertices(), this.onModificationStart(this.feature));
                                var t = e.modified;
                                !e.geometry || t && t.geometry || (this._originalGeometry = e.geometry.clone())
                            }
                        },
                        unselectFeature: function (e) {
                            this.layer.removeFeatures(this.vertices, {
                                silent: !0
                            }), this.vertices = [], this.layer.destroyFeatures(this.virtualVertices, {
                                silent: !0
                            }), this.virtualVertices = [], this.dragHandle && (this.layer.destroyFeatures([this.dragHandle], {
                                silent: !0
                            }), delete this.dragHandle), this.radiusHandle && (this.layer.destroyFeatures([this.radiusHandle], {
                                silent: !0
                            }), delete this.radiusHandle), this.layer.drawFeature(this.feature, "default"), this.feature = null, OpenLayers.Util.removeItem(this.layer.selectedFeatures, e), this.onModificationEnd(e), this.layer.events.triggerEvent("afterfeaturemodified", {
                                feature: e,
                                modified: this.modified
                            }), this.modified = !1
                        },
                        dragStart: function (e) {
                            var t = "OpenLayers.Geometry.Point" == e.geometry.CLASS_NAME;
                            this.standalone || (e._sketch || !t) && e._sketch || (this.toggle && this.feature === e && (this._unselect = e), this.selectFeature(e)), (e._sketch || t) && (this.vertex = e, this.handlers.drag.stopDown = !0)
                        },
                        dragVertex: function (e, t) {
                            var i = this.map.getLonLatFromViewPortPx(t),
                                s = e.geometry;
                            s.move(i.lon - s.x, i.lat - s.y), this.modified = !0, "OpenLayers.Geometry.Point" == this.feature.geometry.CLASS_NAME ? this.layer.events.triggerEvent("vertexmodified", {
                                vertex: e.geometry,
                                feature: this.feature,
                                pixel: t
                            }) : (e._index ? (e.geometry.parent.addComponent(e.geometry, e._index), delete e._index, OpenLayers.Util.removeItem(this.virtualVertices, e), this.vertices.push(e)) : e == this.dragHandle ? (this.layer.removeFeatures(this.vertices, {
                                silent: !0
                            }), this.vertices = [], this.radiusHandle && (this.layer.destroyFeatures([this.radiusHandle], {
                                silent: !0
                            }), this.radiusHandle = null)) : e !== this.radiusHandle && this.layer.events.triggerEvent("vertexmodified", {
                                vertex: e.geometry,
                                feature: this.feature,
                                pixel: t
                            }), 0 < this.virtualVertices.length && (this.layer.destroyFeatures(this.virtualVertices, {
                                silent: !0
                            }), this.virtualVertices = []), this.layer.drawFeature(this.feature, this.standalone ? void 0 : "select")), this.layer.drawFeature(e)
                        },
                        dragComplete: function (e) {
                            this.resetVertices(), this.setFeatureState(), this.onModification(this.feature), this.layer.events.triggerEvent("featuremodified", {
                                feature: this.feature
                            })
                        },
                        setFeatureState: function () {
                            if (this.feature.state != OpenLayers.State.INSERT && this.feature.state != OpenLayers.State.DELETE && (this.feature.state = OpenLayers.State.UPDATE, this.modified && this._originalGeometry)) {
                                var e = this.feature;
                                e.modified = OpenLayers.Util.extend(e.modified, {
                                    geometry: this._originalGeometry
                                }), delete this._originalGeometry
                            }
                        },
                        resetVertices: function () {
                            0 < this.vertices.length && (this.layer.removeFeatures(this.vertices, {
                                silent: !0
                            }), this.vertices = []), 0 < this.virtualVertices.length && (this.layer.removeFeatures(this.virtualVertices, {
                                silent: !0
                            }), this.virtualVertices = []), this.dragHandle && (this.layer.destroyFeatures([this.dragHandle], {
                                silent: !0
                            }), this.dragHandle = null), this.radiusHandle && (this.layer.destroyFeatures([this.radiusHandle], {
                                silent: !0
                            }), this.radiusHandle = null), this.feature && "OpenLayers.Geometry.Point" != this.feature.geometry.CLASS_NAME && (this.mode & OpenLayers.Control.ModifyFeature.DRAG && this.collectDragHandle(), this.mode & (OpenLayers.Control.ModifyFeature.ROTATE | OpenLayers.Control.ModifyFeature.RESIZE) && this.collectRadiusHandle(), this.mode & OpenLayers.Control.ModifyFeature.RESHAPE && (this.mode & OpenLayers.Control.ModifyFeature.RESIZE || this.collectVertices()))
                        },
                        handleKeypress: function (e) {
                            var t = e.keyCode;
                            this.feature && -1 != OpenLayers.Util.indexOf(this.deleteCodes, t) && (t = this.layer.getFeatureFromEvent(this.handlers.drag.evt)) && -1 != OpenLayers.Util.indexOf(this.vertices, t) && !this.handlers.drag.dragging && t.geometry.parent && (t.geometry.parent.removeComponent(t.geometry), this.layer.events.triggerEvent("vertexremoved", {
                                vertex: t.geometry,
                                feature: this.feature,
                                pixel: e.xy
                            }), this.layer.drawFeature(this.feature, this.standalone ? void 0 : "select"), this.modified = !0, this.resetVertices(), this.setFeatureState(), this.onModification(this.feature), this.layer.events.triggerEvent("featuremodified", {
                                feature: this.feature
                            }))
                        },
                        collectVertices: function () {
                            this.vertices = [], this.virtualVertices = [];
                            var e = this;
                            (function t(i) {
                                var s, r, n;
                                if ("OpenLayers.Geometry.Point" == i.CLASS_NAME)(r = new OpenLayers.Feature.Vector(i))._sketch = !0, r.renderIntent = e.vertexRenderIntent, e.vertices.push(r);
                                else {
                                    for (n = i.components.length, "OpenLayers.Geometry.LinearRing" == i.CLASS_NAME && (n -= 1), s = 0; s < n; ++s) "OpenLayers.Geometry.Point" == (r = i.components[s]).CLASS_NAME ? ((r = new OpenLayers.Feature.Vector(r))._sketch = !0, r.renderIntent = e.vertexRenderIntent, e.vertices.push(r)) : t(r);
                                    if (e.createVertices && "OpenLayers.Geometry.MultiPoint" != i.CLASS_NAME)
                                        for (s = 0, n = i.components.length; s < n - 1; ++s) {
                                            r = i.components[s];
                                            var a = i.components[s + 1];
                                            "OpenLayers.Geometry.Point" == r.CLASS_NAME && "OpenLayers.Geometry.Point" == a.CLASS_NAME && ((r = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((r.x + a.x) / 2, (r.y + a.y) / 2), null, e.virtualStyle)).geometry.parent = i, r._index = s + 1, r._sketch = !0, e.virtualVertices.push(r))
                                        }
                                }
                            }).call(this, this.feature.geometry), this.layer.addFeatures(this.virtualVertices, {
                                silent: !0
                            }), this.layer.addFeatures(this.vertices, {
                                silent: !0
                            })
                        },
                        collectDragHandle: function () {
                            var e = this.feature.geometry,
                                t = e.getBounds().getCenterLonLat(),
                                i = (t = new OpenLayers.Geometry.Point(t.lon, t.lat), new OpenLayers.Feature.Vector(t));
                            t.move = function (t, i) {
                                OpenLayers.Geometry.Point.prototype.move.call(this, t, i), e.move(t, i)
                            }, i._sketch = !0, this.dragHandle = i, this.dragHandle.renderIntent = this.vertexRenderIntent, this.layer.addFeatures([this.dragHandle], {
                                silent: !0
                            })
                        },
                        collectRadiusHandle: function () {
                            var e = this.feature.geometry,
                                t = (s = e.getBounds()).getCenterLonLat(),
                                i = new OpenLayers.Geometry.Point(t.lon, t.lat),
                                s = new OpenLayers.Geometry.Point(s.right, s.bottom),
                                r = (t = new OpenLayers.Feature.Vector(s), this.mode & OpenLayers.Control.ModifyFeature.RESIZE),
                                n = this.mode & OpenLayers.Control.ModifyFeature.RESHAPE,
                                a = this.mode & OpenLayers.Control.ModifyFeature.ROTATE;
                            s.move = function (t, s) {
                                OpenLayers.Geometry.Point.prototype.move.call(this, t, s);
                                var o, l = this.x - i.x,
                                    h = this.y - i.y,
                                    p = l - t,
                                    u = h - s;
                                if (a) {
                                    var c = Math.atan2(u, p);
                                    c = (c = Math.atan2(h, l) - c) * (180 / Math.PI);
                                    e.rotate(c, i)
                                }
                                r && (n ? o = l / p / (h /= u) : (p = Math.sqrt(p * p + u * u), h = Math.sqrt(l * l + h * h) / p), e.resize(h, i, o))
                            }, t._sketch = !0, this.radiusHandle = t, this.radiusHandle.renderIntent = this.vertexRenderIntent, this.layer.addFeatures([this.radiusHandle], {
                                silent: !0
                            })
                        },
                        setMap: function (e) {
                            this.handlers.drag.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments)
                        },
                        handleMapEvents: function (e) {
                            "removelayer" != e.type && "order" != e.property || this.moveLayerToTop()
                        },
                        moveLayerToTop: function () {
                            var e = Math.max(this.map.Z_INDEX_BASE.Feature - 1, this.layer.getZIndex()) + 1;
                            this.layer.setZIndex(e)
                        },
                        moveLayerBack: function () {
                            var e = this.layer.getZIndex() - 1;
                            e >= this.map.Z_INDEX_BASE.Feature ? this.layer.setZIndex(e) : this.map.setLayerZIndex(this.layer, this.map.getLayerIndex(this.layer))
                        },
                        CLASS_NAME: "OpenLayers.Control.ModifyFeature"
                    }), OpenLayers.Control.ModifyFeature.RESHAPE = 1, OpenLayers.Control.ModifyFeature.RESIZE = 2, OpenLayers.Control.ModifyFeature.ROTATE = 4, OpenLayers.Control.ModifyFeature.DRAG = 8, OpenLayers.Layer.Bing = OpenLayers.Class(OpenLayers.Layer.XYZ, {
                        key: null,
                        serverResolutions: [156543.03390625, 78271.516953125, 39135.7584765625, 19567.87923828125, 9783.939619140625, 4891.9698095703125, 2445.9849047851562, 1222.9924523925781, 611.4962261962891, 305.74811309814453, 152.87405654907226, 76.43702827453613, 38.218514137268066, 19.109257068634033, 9.554628534317017, 4.777314267158508, 2.388657133579254, 1.194328566789627, .5971642833948135, .29858214169740677, .14929107084870338, .07464553542435169],
                        attributionTemplate: '<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',
                        metadata: null,
                        protocolRegex: /^http:/i,
                        type: "Road",
                        culture: "en-US",
                        metadataParams: null,
                        tileOptions: null,
                        protocol: ~window.location.href.indexOf("http") ? "" : "http:",
                        initialize: function (e) {
                            e = OpenLayers.Util.applyDefaults({
                                sphericalMercator: !0
                            }, e), OpenLayers.Layer.XYZ.prototype.initialize.apply(this, [e.name || "Bing " + (e.type || this.type), null, e]), this.tileOptions = OpenLayers.Util.extend({
                                crossOriginKeyword: "anonymous"
                            }, this.options.tileOptions), this.loadMetadata()
                        },
                        loadMetadata: function () {
                            this._callbackId = "_callback_" + this.id.replace(/\./g, "_"), window[this._callbackId] = OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata, this);
                            var e = OpenLayers.Util.applyDefaults({
                                    key: this.key,
                                    jsonp: this._callbackId,
                                    include: "ImageryProviders"
                                }, this.metadataParams),
                                t = (e = this.protocol + "//dev.virtualearth.net/REST/v1/Imagery/Metadata/" + this.type + "?" + OpenLayers.Util.getParameterString(e), document.createElement("script"));
                            t.type = "text/javascript", t.src = e, t.id = this._callbackId, document.getElementsByTagName("head")[0].appendChild(t)
                        },
                        initLayer: function () {
                            var e = this.metadata.resourceSets[0].resources[0],
                                t = (t = (t = e.imageUrl.replace("{quadkey}", "${quadkey}")).replace("{culture}", this.culture)).replace(this.protocolRegex, this.protocol);
                            this.url = [];
                            for (var i = 0; i < e.imageUrlSubdomains.length; ++i) this.url.push(t.replace("{subdomain}", e.imageUrlSubdomains[i]));
                            this.addOptions({
                                maxResolution: Math.min(this.serverResolutions[e.zoomMin], this.maxResolution || Number.POSITIVE_INFINITY),
                                numZoomLevels: Math.min(e.zoomMax + 1 - e.zoomMin, this.numZoomLevels)
                            }, !0), this.isBaseLayer || this.redraw(), this.updateAttribution()
                        },
                        getURL: function (e) {
                            if (this.url) {
                                e = (t = this.getXYZ(e)).x;
                                for (var t, i = t.y, s = [], r = t = t.z; 0 < r; --r) {
                                    var n = "0",
                                        a = 1 << r - 1;
                                    0 != (e & a) && n++, 0 != (i & a) && (n++, n++), s.push(n)
                                }
                                return s = s.join(""), e = this.selectUrl("" + e + i + t, this.url), OpenLayers.String.format(e, {
                                    quadkey: s
                                })
                            }
                        },
                        updateAttribution: function () {
                            var e = this.metadata;
                            if (e.resourceSets && this.map && this.map.center) {
                                var t, i, s, r, n, a, o, l = e.resourceSets[0].resources[0],
                                    h = this.map.getExtent().transform(this.map.getProjectionObject(), new OpenLayers.Projection("EPSG:4326")),
                                    p = l.imageryProviders || [],
                                    u = OpenLayers.Util.indexOf(this.serverResolutions, this.getServerResolution());
                                l = "";
                                for (i = 0, s = p.length; i < s; ++i)
                                    for (r = 0, n = (t = p[i]).coverageAreas.length; r < n; ++r) o = t.coverageAreas[r], a = OpenLayers.Bounds.fromArray(o.bbox, !0), h.intersectsBounds(a) && u <= o.zoomMax && u >= o.zoomMin && (l += t.attribution + " ");
                                e = e.brandLogoUri.replace(this.protocolRegex, this.protocol), this.attribution = OpenLayers.String.format(this.attributionTemplate, {
                                    type: this.type.toLowerCase(),
                                    logo: e,
                                    copyrights: l
                                }), this.map && this.map.events.triggerEvent("changelayer", {
                                    layer: this,
                                    property: "attribution"
                                })
                            }
                        },
                        setMap: function () {
                            OpenLayers.Layer.XYZ.prototype.setMap.apply(this, arguments), this.map.events.register("moveend", this, this.updateAttribution)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.Bing(this.options)), OpenLayers.Layer.XYZ.prototype.clone.apply(this, [e])
                        },
                        destroy: function () {
                            this.map && this.map.events.unregister("moveend", this, this.updateAttribution), OpenLayers.Layer.XYZ.prototype.destroy.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Layer.Bing"
                    }), OpenLayers.Layer.Bing.processMetadata = function (e) {
                        this.metadata = e, this.initLayer(), (e = document.getElementById(this._callbackId)).parentNode.removeChild(e), window[this._callbackId] = void 0, delete this._callbackId
                    }, OpenLayers.StyleMap = OpenLayers.Class({
                        styles: null,
                        extendDefault: !0,
                        initialize: function (e, t) {
                            if (this.styles = {
                                    default: new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),
                                    select: new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),
                                    temporary: new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),
                                    delete: new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)
                                }, e instanceof OpenLayers.Style) this.styles.default = e, this.styles.select = e, this.styles.temporary = e, this.styles.delete = e;
                            else if ("object" == typeof e)
                                for (var i in e)
                                    if (e[i] instanceof OpenLayers.Style) this.styles[i] = e[i];
                                    else {
                                        if ("object" != typeof e[i]) {
                                            this.styles.default = new OpenLayers.Style(e), this.styles.select = new OpenLayers.Style(e), this.styles.temporary = new OpenLayers.Style(e), this.styles.delete = new OpenLayers.Style(e);
                                            break
                                        }
                                        this.styles[i] = new OpenLayers.Style(e[i])
                                    } OpenLayers.Util.extend(this, t)
                        },
                        destroy: function () {
                            for (var e in this.styles) this.styles[e].destroy();
                            this.styles = null
                        },
                        createSymbolizer: function (e, t) {
                            e || (e = new OpenLayers.Feature.Vector), this.styles[t] || (t = "default"), e.renderIntent = t;
                            var i = {};
                            return this.extendDefault && "default" != t && (i = this.styles.default.createSymbolizer(e)), OpenLayers.Util.extend(i, this.styles[t].createSymbolizer(e))
                        },
                        addUniqueValueRules: function (e, t, i, s) {
                            var r, n = [];
                            for (r in i) n.push(new OpenLayers.Rule({
                                symbolizer: i[r],
                                context: s,
                                filter: new OpenLayers.Filter.Comparison({
                                    type: OpenLayers.Filter.Comparison.EQUAL_TO,
                                    property: t,
                                    value: r
                                })
                            }));
                            this.styles[e].addRules(n)
                        },
                        CLASS_NAME: "OpenLayers.StyleMap"
                    }), OpenLayers.Layer.Vector = OpenLayers.Class(OpenLayers.Layer, {
                        isBaseLayer: !1,
                        isFixed: !1,
                        features: null,
                        filter: null,
                        selectedFeatures: null,
                        unrenderedFeatures: null,
                        reportError: !0,
                        style: null,
                        styleMap: null,
                        strategies: null,
                        protocol: null,
                        renderers: ["SVG", "VML", "Canvas"],
                        renderer: null,
                        rendererOptions: null,
                        geometryType: null,
                        drawn: !1,
                        ratio: 1,
                        initialize: function (e, t) {
                            if (OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.renderer && this.renderer.supported() || this.assignRenderer(), this.renderer && this.renderer.supported() || (this.renderer = null, this.displayError()), this.styleMap || (this.styleMap = new OpenLayers.StyleMap), this.features = [], this.selectedFeatures = [], this.unrenderedFeatures = {}, this.strategies)
                                for (var i = 0, s = this.strategies.length; i < s; i++) this.strategies[i].setLayer(this)
                        },
                        destroy: function () {
                            if (this.strategies) {
                                var e, t, i;
                                for (t = 0, i = this.strategies.length; t < i; t++)(e = this.strategies[t]).autoDestroy && e.destroy();
                                this.strategies = null
                            }
                            this.protocol && (this.protocol.autoDestroy && this.protocol.destroy(), this.protocol = null), this.destroyFeatures(), this.unrenderedFeatures = this.selectedFeatures = this.features = null, this.renderer && this.renderer.destroy(), this.drawn = this.geometryType = this.renderer = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                        },
                        clone: function (e) {
                            null == e && (e = new OpenLayers.Layer.Vector(this.name, this.getOptions())), e = OpenLayers.Layer.prototype.clone.apply(this, [e]);
                            for (var t = this.features, i = t.length, s = Array(i), r = 0; r < i; ++r) s[r] = t[r].clone();
                            return e.features = s, e
                        },
                        refresh: function (e) {
                            this.calculateInRange() && this.visibility && this.events.triggerEvent("refresh", e)
                        },
                        assignRenderer: function () {
                            for (var e = 0, t = this.renderers.length; e < t; e++) {
                                var i = this.renderers[e];
                                if ((i = "function" == typeof i ? i : OpenLayers.Renderer[i]) && i.prototype.supported()) {
                                    this.renderer = new i(this.div, this.rendererOptions);
                                    break
                                }
                            }
                        },
                        displayError: function () {
                            this.reportError && OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported", {
                                renderers: this.renderers.join("\n")
                            }))
                        },
                        setMap: function (e) {
                            if (OpenLayers.Layer.prototype.setMap.apply(this, arguments), this.renderer) {
                                this.renderer.map = this.map;
                                var t = this.map.getSize();
                                t.w *= this.ratio, t.h *= this.ratio, this.renderer.setSize(t)
                            } else this.map.removeLayer(this)
                        },
                        afterAdd: function () {
                            var e, t, i;
                            if (this.strategies)
                                for (t = 0, i = this.strategies.length; t < i; t++)(e = this.strategies[t]).autoActivate && e.activate()
                        },
                        removeMap: function (e) {
                            var t, i;
                            if (this.drawn = !1, this.strategies)
                                for (t = 0, i = this.strategies.length; t < i; t++)(e = this.strategies[t]).autoActivate && e.deactivate()
                        },
                        onMapResize: function () {
                            OpenLayers.Layer.prototype.onMapResize.apply(this, arguments);
                            var e = this.map.getSize();
                            e.w *= this.ratio, e.h *= this.ratio, this.renderer.setSize(e)
                        },
                        moveTo: function (e, t, i) {
                            OpenLayers.Layer.prototype.moveTo.apply(this, arguments);
                            var s = !0;
                            if (!i) {
                                this.renderer.root.style.visibility = "hidden";
                                var r = (s = this.map.getSize()).w;
                                s = s.h, r = r / 2 * this.ratio - r / 2, s = s / 2 * this.ratio - s / 2, r = r + this.map.layerContainerOriginPx.x, r = -Math.round(r), s = s + this.map.layerContainerOriginPx.y, s = -Math.round(s);
                                if (this.div.style.left = r + "px", this.div.style.top = s + "px", r = this.map.getExtent().scale(this.ratio), s = this.renderer.setExtent(r, t), this.renderer.root.style.visibility = "visible", !0 === OpenLayers.IS_GECKO && (this.div.scrollLeft = this.div.scrollLeft), !t && s)
                                    for (var n in this.unrenderedFeatures) r = this.unrenderedFeatures[n], this.drawFeature(r)
                            }
                            if (!this.drawn || t || !s)
                                for (this.drawn = !0, n = 0, s = this.features.length; n < s; n++) this.renderer.locked = n !== s - 1, r = this.features[n], this.drawFeature(r)
                        },
                        display: function (e) {
                            OpenLayers.Layer.prototype.display.apply(this, arguments);
                            var t = this.div.style.display;
                            t != this.renderer.root.style.display && (this.renderer.root.style.display = t)
                        },
                        addFeatures: function (e, t) {
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            var i = !t || !t.silent;
                            if (i) {
                                var s = {
                                    features: e
                                };
                                if (!1 === this.events.triggerEvent("beforefeaturesadded", s)) return;
                                e = s.features
                            }
                            s = [];
                            for (var r = 0, n = e.length; r < n; r++) {
                                this.renderer.locked = r != e.length - 1;
                                var a = e[r];
                                if (this.geometryType && !(a.geometry instanceof this.geometryType)) throw new TypeError("addFeatures: component should be an " + this.geometryType.prototype.CLASS_NAME);
                                if (a.layer = this, !a.style && this.style && (a.style = OpenLayers.Util.extend({}, this.style)), i) {
                                    if (!1 === this.events.triggerEvent("beforefeatureadded", {
                                            feature: a
                                        })) continue;
                                    this.preFeatureInsert(a)
                                }
                                s.push(a), this.features.push(a), this.drawFeature(a), i && (this.events.triggerEvent("featureadded", {
                                    feature: a
                                }), this.onFeatureInsert(a))
                            }
                            i && this.events.triggerEvent("featuresadded", {
                                features: s
                            })
                        },
                        removeFeatures: function (e, t) {
                            if (e && 0 !== e.length) {
                                if (e === this.features) return this.removeAllFeatures(t);
                                OpenLayers.Util.isArray(e) || (e = [e]), e === this.selectedFeatures && (e = e.slice());
                                var i = !t || !t.silent;
                                i && this.events.triggerEvent("beforefeaturesremoved", {
                                    features: e
                                });
                                for (var s = e.length - 1; 0 <= s; s--) {
                                    this.renderer.locked = !(0 == s || !e[s - 1].geometry);
                                    var r = e[s];
                                    delete this.unrenderedFeatures[r.id], i && this.events.triggerEvent("beforefeatureremoved", {
                                        feature: r
                                    }), this.features = OpenLayers.Util.removeItem(this.features, r), r.layer = null, r.geometry && this.renderer.eraseFeatures(r), -1 != OpenLayers.Util.indexOf(this.selectedFeatures, r) && OpenLayers.Util.removeItem(this.selectedFeatures, r), i && this.events.triggerEvent("featureremoved", {
                                        feature: r
                                    })
                                }
                                i && this.events.triggerEvent("featuresremoved", {
                                    features: e
                                })
                            }
                        },
                        removeAllFeatures: function (e) {
                            e = !e || !e.silent;
                            var t = this.features;
                            e && this.events.triggerEvent("beforefeaturesremoved", {
                                features: t
                            });
                            for (var i, s = t.length - 1; 0 <= s; s--) i = t[s], e && this.events.triggerEvent("beforefeatureremoved", {
                                feature: i
                            }), i.layer = null, e && this.events.triggerEvent("featureremoved", {
                                feature: i
                            });
                            this.renderer.clear(), this.features = [], this.unrenderedFeatures = {}, this.selectedFeatures = [], e && this.events.triggerEvent("featuresremoved", {
                                features: t
                            })
                        },
                        destroyFeatures: function (e, t) {
                            if (null == e && (e = this.features), e) {
                                this.removeFeatures(e, t);
                                for (var i = e.length - 1; 0 <= i; i--) e[i].destroy()
                            }
                        },
                        drawFeature: function (e, t) {
                            if (this.drawn) {
                                if ("object" != typeof t) {
                                    t || e.state !== OpenLayers.State.DELETE || (t = "delete");
                                    var i = t || e.renderIntent;
                                    (t = e.style || this.style) || (t = this.styleMap.createSymbolizer(e, i))
                                }!1 === (i = this.renderer.drawFeature(e, t)) || null === i ? this.unrenderedFeatures[e.id] = e : delete this.unrenderedFeatures[e.id]
                            }
                        },
                        eraseFeatures: function (e) {
                            this.renderer.eraseFeatures(e)
                        },
                        getFeatureFromEvent: function (e) {
                            if (!this.renderer) throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");
                            var t = null;
                            return (e = this.renderer.getFeatureIdFromEvent(e)) && (t = "string" == typeof e ? this.getFeatureById(e) : e), t
                        },
                        getFeatureBy: function (e, t) {
                            for (var i = null, s = 0, r = this.features.length; s < r; ++s)
                                if (this.features[s][e] == t) {
                                    i = this.features[s];
                                    break
                                } return i
                        },
                        getFeatureById: function (e) {
                            return this.getFeatureBy("id", e)
                        },
                        getFeatureByFid: function (e) {
                            return this.getFeatureBy("fid", e)
                        },
                        getFeaturesByAttribute: function (e, t) {
                            var i, s, r = this.features.length,
                                n = [];
                            for (i = 0; i < r; i++)(s = this.features[i]) && s.attributes && s.attributes[e] === t && n.push(s);
                            return n
                        },
                        onFeatureInsert: function (e) {},
                        preFeatureInsert: function (e) {},
                        getDataExtent: function () {
                            var e = null,
                                t = this.features;
                            if (t && 0 < t.length)
                                for (var i = null, s = 0, r = t.length; s < r; s++)(i = t[s].geometry) && (null === e && (e = new OpenLayers.Bounds), e.extend(i.getBounds()));
                            return e
                        },
                        CLASS_NAME: "OpenLayers.Layer.Vector"
                    }), OpenLayers.Layer.PointGrid = OpenLayers.Class(OpenLayers.Layer.Vector, {
                        dx: null,
                        dy: null,
                        ratio: 1.5,
                        maxFeatures: 250,
                        rotation: 0,
                        origin: null,
                        gridBounds: null,
                        initialize: function (e) {
                            e = e || {}, OpenLayers.Layer.Vector.prototype.initialize.apply(this, [e.name, e])
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments), e.events.register("moveend", this, this.onMoveEnd)
                        },
                        removeMap: function (e) {
                            e.events.unregister("moveend", this, this.onMoveEnd), OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments)
                        },
                        setRatio: function (e) {
                            this.ratio = e, this.updateGrid(!0)
                        },
                        setMaxFeatures: function (e) {
                            this.maxFeatures = e, this.updateGrid(!0)
                        },
                        setSpacing: function (e, t) {
                            this.dx = e, this.dy = t || e, this.updateGrid(!0)
                        },
                        setOrigin: function (e) {
                            this.origin = e, this.updateGrid(!0)
                        },
                        getOrigin: function () {
                            return this.origin || (this.origin = this.map.getExtent().getCenterLonLat()), this.origin
                        },
                        setRotation: function (e) {
                            this.rotation = e, this.updateGrid(!0)
                        },
                        onMoveEnd: function () {
                            this.updateGrid()
                        },
                        getViewBounds: function () {
                            var e = this.map.getExtent();
                            if (this.rotation) {
                                var t = this.getOrigin();
                                t = new OpenLayers.Geometry.Point(t.lon, t.lat);
                                (e = e.toGeometry()).rotate(-this.rotation, t), e = e.getBounds()
                            }
                            return e
                        },
                        updateGrid: function (e) {
                            if (e || this.invalidBounds()) {
                                var t = this.getViewBounds(),
                                    i = this.getOrigin();
                                e = new OpenLayers.Geometry.Point(i.lon, i.lat);
                                var s = (n = t.getWidth()) / (a = t.getHeight()),
                                    r = Math.sqrt(this.dx * this.dy * this.maxFeatures / s),
                                    n = Math.min(n * this.ratio, r * s),
                                    a = Math.min(a * this.ratio, r);
                                t = t.getCenterLonLat();
                                this.gridBounds = new OpenLayers.Bounds(t.lon - n / 2, t.lat - a / 2, t.lon + n / 2, t.lat + a / 2);
                                t = Math.floor(a / this.dy), n = Math.floor(n / this.dx), a = i.lon + this.dx * Math.ceil((this.gridBounds.left - i.lon) / this.dx), i = i.lat + this.dy * Math.ceil((this.gridBounds.bottom - i.lat) / this.dy), r = Array(t * n);
                                for (var o, l = 0; l < n; ++l) {
                                    s = a + l * this.dx;
                                    for (var h = 0; h < t; ++h) o = i + h * this.dy, o = new OpenLayers.Geometry.Point(s, o), this.rotation && o.rotate(this.rotation, e), r[l * t + h] = new OpenLayers.Feature.Vector(o)
                                }
                                this.destroyFeatures(this.features, {
                                    silent: !0
                                }), this.addFeatures(r, {
                                    silent: !0
                                })
                            }
                        },
                        invalidBounds: function () {
                            return !this.gridBounds || !this.gridBounds.containsBounds(this.getViewBounds())
                        },
                        CLASS_NAME: "OpenLayers.Layer.PointGrid"
                    }), OpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {
                        wheelListener: null,
                        interval: 0,
                        maxDelta: Number.POSITIVE_INFINITY,
                        delta: 0,
                        cumulative: !0,
                        initialize: function (e, t, i) {
                            OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.wheelListener = OpenLayers.Function.bindAsEventListener(this.onWheelEvent, this)
                        },
                        destroy: function () {
                            OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.wheelListener = null
                        },
                        onWheelEvent: function (e) {
                            if (this.map && this.checkModifiers(e)) {
                                for (var t = !1, i = !1, s = !1, r = OpenLayers.Event.element(e); null != r && !s && !t;) {
                                    if (!t) try {
                                        var n;
                                        t = (n = r.currentStyle ? r.currentStyle.overflow : document.defaultView.getComputedStyle(r, null).getPropertyValue("overflow")) && "auto" == n || "scroll" == n
                                    } catch (e) {}
                                    if (!i && !(i = OpenLayers.Element.hasClass(r, "olScrollable"))) {
                                        s = 0;
                                        for (var a = this.map.layers.length; s < a; s++) {
                                            var o = this.map.layers[s];
                                            if (r == o.div || r == o.pane) {
                                                i = !0;
                                                break
                                            }
                                        }
                                    }
                                    s = r == this.map.div, r = r.parentNode
                                }
                                if (!t && s) {
                                    if (i)
                                        if (t = 0, e.wheelDelta ? (0 == (t = e.wheelDelta) % 160 && (t *= .75), t /= 120) : e.detail && (t = -e.detail / Math.abs(e.detail)), this.delta += t, window.clearTimeout(this._timeoutId), this.interval && Math.abs(this.delta) < this.maxDelta) {
                                            var l = OpenLayers.Util.extend({}, e);
                                            this._timeoutId = window.setTimeout(OpenLayers.Function.bind((function () {
                                                this.wheelZoom(l)
                                            }), this), this.interval)
                                        } else this.wheelZoom(e);
                                    OpenLayers.Event.stop(e)
                                }
                            }
                        },
                        wheelZoom: function (e) {
                            var t = this.delta;
                            this.delta = 0, t && (e.xy = this.map.events.getMousePosition(e), 0 > t ? this.callback("down", [e, this.cumulative ? Math.max(-this.maxDelta, t) : -1]) : this.callback("up", [e, this.cumulative ? Math.min(this.maxDelta, t) : 1]))
                        },
                        activate: function (e) {
                            if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
                                var t = this.wheelListener;
                                return OpenLayers.Event.observe(window, "DOMMouseScroll", t), OpenLayers.Event.observe(window, "mousewheel", t), OpenLayers.Event.observe(document, "mousewheel", t), !0
                            }
                            return !1
                        },
                        deactivate: function (e) {
                            if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
                                var t = this.wheelListener;
                                return OpenLayers.Event.stopObserving(window, "DOMMouseScroll", t), OpenLayers.Event.stopObserving(window, "mousewheel", t), OpenLayers.Event.stopObserving(document, "mousewheel", t), !0
                            }
                            return !1
                        },
                        CLASS_NAME: "OpenLayers.Handler.MouseWheel"
                    }), OpenLayers.Symbolizer = OpenLayers.Class({
                        zIndex: 0,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e)
                        },
                        clone: function () {
                            return new(eval(this.CLASS_NAME))(OpenLayers.Util.extend({}, this))
                        },
                        CLASS_NAME: "OpenLayers.Symbolizer"
                    }), OpenLayers.Symbolizer.Raster = OpenLayers.Class(OpenLayers.Symbolizer, {
                        initialize: function (e) {
                            OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Symbolizer.Raster"
                    }), OpenLayers.Rule = OpenLayers.Class({
                        id: null,
                        name: null,
                        title: null,
                        description: null,
                        context: null,
                        filter: null,
                        elseFilter: !1,
                        symbolizer: null,
                        symbolizers: null,
                        minScaleDenominator: null,
                        maxScaleDenominator: null,
                        initialize: function (e) {
                            this.symbolizer = {}, OpenLayers.Util.extend(this, e), this.symbolizers && delete this.symbolizer, this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")
                        },
                        destroy: function () {
                            for (var e in this.symbolizer) this.symbolizer[e] = null;
                            this.symbolizer = null, delete this.symbolizers
                        },
                        evaluate: function (e) {
                            var t = this.getContext(e),
                                i = !0;
                            if (this.minScaleDenominator || this.maxScaleDenominator) var s = e.layer.map.getScale();
                            return this.minScaleDenominator && (i = s >= OpenLayers.Style.createLiteral(this.minScaleDenominator, t)), i && this.maxScaleDenominator && (i = s < OpenLayers.Style.createLiteral(this.maxScaleDenominator, t)), i && this.filter && (i = "OpenLayers.Filter.FeatureId" == this.filter.CLASS_NAME ? this.filter.evaluate(e) : this.filter.evaluate(t)), i
                        },
                        getContext: function (e) {
                            var t = this.context;
                            return t || (t = e.attributes || e.data), "function" == typeof this.context && (t = this.context(e)), t
                        },
                        clone: function () {
                            var e = OpenLayers.Util.extend({}, this);
                            if (this.symbolizers) {
                                var t = this.symbolizers.length;
                                e.symbolizers = Array(t);
                                for (var i = 0; i < t; ++i) e.symbolizers[i] = this.symbolizers[i].clone()
                            } else
                                for (var s in e.symbolizer = {}, this.symbolizer) "object" === (i = typeof (t = this.symbolizer[s])) ? e.symbolizer[s] = OpenLayers.Util.extend({}, t) : "string" === i && (e.symbolizer[s] = t);
                            return e.filter = this.filter && this.filter.clone(), e.context = this.context && OpenLayers.Util.extend({}, this.context), new OpenLayers.Rule(e)
                        },
                        CLASS_NAME: "OpenLayers.Rule"
                    }), OpenLayers.Format.SLD = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        profile: null,
                        defaultVersion: "1.0.0",
                        stringifyOutput: !0,
                        namedLayersAsArray: !1,
                        CLASS_NAME: "OpenLayers.Format.SLD"
                    }), OpenLayers.Symbolizer.Polygon = OpenLayers.Class(OpenLayers.Symbolizer, {
                        initialize: function (e) {
                            OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Symbolizer.Polygon"
                    }), OpenLayers.Format.GML.v2 = OpenLayers.Class(OpenLayers.Format.GML.Base, {
                        schemaLocation: "http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",
                        initialize: function (e) {
                            OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [e])
                        },
                        readers: {
                            gml: OpenLayers.Util.applyDefaults({
                                outerBoundaryIs: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.outer = i.components[0]
                                },
                                innerBoundaryIs: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.inner.push(i.components[0])
                                },
                                Box: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.components || (t.components = []);
                                    var s = i.points[0];
                                    i = i.points[1];
                                    t.components.push(new OpenLayers.Bounds(s.x, s.y, i.x, i.y))
                                }
                            }, OpenLayers.Format.GML.Base.prototype.readers.gml),
                            feature: OpenLayers.Format.GML.Base.prototype.readers.feature,
                            wfs: OpenLayers.Format.GML.Base.prototype.readers.wfs
                        },
                        write: function (e) {
                            var t;
                            return t = OpenLayers.Util.isArray(e) ? "wfs:FeatureCollection" : "gml:featureMember", e = this.writeNode(t, e), this.setAttributeNS(e, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        writers: {
                            gml: OpenLayers.Util.applyDefaults({
                                Point: function (e) {
                                    var t = this.createElementNSPlus("gml:Point");
                                    return this.writeNode("coordinates", [e], t), t
                                },
                                coordinates: function (e) {
                                    for (var t, i = e.length, s = Array(i), r = 0; r < i; ++r) t = e[r], s[r] = this.xy ? t.x + "," + t.y : t.y + "," + t.x, null != t.z && (s[r] += "," + t.z);
                                    return this.createElementNSPlus("gml:coordinates", {
                                        attributes: {
                                            decimal: ".",
                                            cs: ",",
                                            ts: " "
                                        },
                                        value: 1 == i ? s[0] : s.join(" ")
                                    })
                                },
                                LineString: function (e) {
                                    var t = this.createElementNSPlus("gml:LineString");
                                    return this.writeNode("coordinates", e.components, t), t
                                },
                                Polygon: function (e) {
                                    var t = this.createElementNSPlus("gml:Polygon");
                                    this.writeNode("outerBoundaryIs", e.components[0], t);
                                    for (var i = 1; i < e.components.length; ++i) this.writeNode("innerBoundaryIs", e.components[i], t);
                                    return t
                                },
                                outerBoundaryIs: function (e) {
                                    var t = this.createElementNSPlus("gml:outerBoundaryIs");
                                    return this.writeNode("LinearRing", e, t), t
                                },
                                innerBoundaryIs: function (e) {
                                    var t = this.createElementNSPlus("gml:innerBoundaryIs");
                                    return this.writeNode("LinearRing", e, t), t
                                },
                                LinearRing: function (e) {
                                    var t = this.createElementNSPlus("gml:LinearRing");
                                    return this.writeNode("coordinates", e.components, t), t
                                },
                                Box: function (e) {
                                    var t = this.createElementNSPlus("gml:Box");
                                    return this.writeNode("coordinates", [{
                                        x: e.left,
                                        y: e.bottom
                                    }, {
                                        x: e.right,
                                        y: e.top
                                    }], t), this.srsName && t.setAttribute("srsName", this.srsName), t
                                }
                            }, OpenLayers.Format.GML.Base.prototype.writers.gml),
                            feature: OpenLayers.Format.GML.Base.prototype.writers.feature,
                            wfs: OpenLayers.Format.GML.Base.prototype.writers.wfs
                        },
                        CLASS_NAME: "OpenLayers.Format.GML.v2"
                    }), OpenLayers.Format.Filter.v1_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v2, OpenLayers.Format.Filter.v1, {
                        VERSION: "1.0.0",
                        schemaLocation: "http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",
                        initialize: function (e) {
                            OpenLayers.Format.GML.v2.prototype.initialize.apply(this, [e])
                        },
                        readers: {
                            ogc: OpenLayers.Util.applyDefaults({
                                PropertyIsEqualTo: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.EQUAL_TO
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsNotEqualTo: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO
                                    });
                                    this.readChildNodes(e, i), t.filters.push(i)
                                },
                                PropertyIsLike: function (e, t) {
                                    var i = new OpenLayers.Filter.Comparison({
                                        type: OpenLayers.Filter.Comparison.LIKE
                                    });
                                    this.readChildNodes(e, i);
                                    var s = e.getAttribute("wildCard"),
                                        r = e.getAttribute("singleChar"),
                                        n = e.getAttribute("escape");
                                    i.value2regex(s, r, n), t.filters.push(i)
                                }
                            }, OpenLayers.Format.Filter.v1.prototype.readers.ogc),
                            gml: OpenLayers.Format.GML.v2.prototype.readers.gml,
                            feature: OpenLayers.Format.GML.v2.prototype.readers.feature
                        },
                        writers: {
                            ogc: OpenLayers.Util.applyDefaults({
                                PropertyIsEqualTo: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsEqualTo");
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsNotEqualTo: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsNotEqualTo");
                                    return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), t
                                },
                                PropertyIsLike: function (e) {
                                    var t = this.createElementNSPlus("ogc:PropertyIsLike", {
                                        attributes: {
                                            wildCard: "*",
                                            singleChar: ".",
                                            escape: "!"
                                        }
                                    });
                                    return this.writeNode("PropertyName", e, t), this.writeNode("Literal", e.regex2value(), t), t
                                },
                                BBOX: function (e) {
                                    var t = this.createElementNSPlus("ogc:BBOX");
                                    e.property && this.writeNode("PropertyName", e, t);
                                    var i = this.writeNode("gml:Box", e.value, t);
                                    return e.projection && i.setAttribute("srsName", e.projection), t
                                }
                            }, OpenLayers.Format.Filter.v1.prototype.writers.ogc),
                            gml: OpenLayers.Format.GML.v2.prototype.writers.gml,
                            feature: OpenLayers.Format.GML.v2.prototype.writers.feature
                        },
                        writeSpatial: function (e, t) {
                            var i, s = this.createElementNSPlus("ogc:" + t);
                            (this.writeNode("PropertyName", e, s), e.value instanceof OpenLayers.Filter.Function) ? this.writeNode("Function", e.value, s): (i = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Box", e.value), e.projection && i.setAttribute("srsName", e.projection), s.appendChild(i));
                            return s
                        },
                        CLASS_NAME: "OpenLayers.Format.Filter.v1_0_0"
                    }), OpenLayers.Format.WFST.v1_0_0 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, OpenLayers.Format.WFST.v1, {
                        version: "1.0.0",
                        srsNameInQuery: !1,
                        schemaLocations: {
                            wfs: "http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"
                        },
                        initialize: function (e) {
                            OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this, [e]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [e])
                        },
                        readNode: function (e, t, i) {
                            return OpenLayers.Format.GML.v2.prototype.readNode.apply(this, arguments)
                        },
                        readers: {
                            wfs: OpenLayers.Util.applyDefaults({
                                WFS_TransactionResponse: function (e, t) {
                                    t.insertIds = [], t.success = !1, this.readChildNodes(e, t)
                                },
                                InsertResult: function (e, t) {
                                    var i = {
                                        fids: []
                                    };
                                    this.readChildNodes(e, i), t.insertIds = t.insertIds.concat(i.fids)
                                },
                                TransactionResult: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Status: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                SUCCESS: function (e, t) {
                                    t.success = !0
                                }
                            }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
                            gml: OpenLayers.Format.GML.v2.prototype.readers.gml,
                            feature: OpenLayers.Format.GML.v2.prototype.readers.feature,
                            ogc: OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc
                        },
                        writers: {
                            wfs: OpenLayers.Util.applyDefaults({
                                Query: function (e) {
                                    var t = (e = OpenLayers.Util.extend({
                                            featureNS: this.featureNS,
                                            featurePrefix: this.featurePrefix,
                                            featureType: this.featureType,
                                            srsName: this.srsName,
                                            srsNameInQuery: this.srsNameInQuery
                                        }, e)).featurePrefix,
                                        i = this.createElementNSPlus("wfs:Query", {
                                            attributes: {
                                                typeName: (t ? t + ":" : "") + e.featureType
                                            }
                                        });
                                    if (e.srsNameInQuery && e.srsName && i.setAttribute("srsName", e.srsName), e.featureNS && i.setAttribute("xmlns:" + t, e.featureNS), e.propertyNames) {
                                        t = 0;
                                        for (var s = e.propertyNames.length; t < s; t++) this.writeNode("ogc:PropertyName", {
                                            property: e.propertyNames[t]
                                        }, i)
                                    }
                                    return e.filter && (this.setFilterProperty(e.filter), this.writeNode("ogc:Filter", e.filter, i)), i
                                }
                            }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
                            gml: OpenLayers.Format.GML.v2.prototype.writers.gml,
                            feature: OpenLayers.Format.GML.v2.prototype.writers.feature,
                            ogc: OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc
                        },
                        CLASS_NAME: "OpenLayers.Format.WFST.v1_0_0"
                    }), OpenLayers.ElementsIndexer = OpenLayers.Class({
                        maxZIndex: null,
                        order: null,
                        indices: null,
                        compare: null,
                        initialize: function (e) {
                            this.compare = e ? OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER : OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER, this.clear()
                        },
                        insert: function (e) {
                            this.exists(e) && this.remove(e);
                            var t = e.id;
                            this.determineZIndex(e);
                            for (var i, s = -1, r = this.order.length; 1 < r - s;) i = parseInt((s + r) / 2), 0 < this.compare(this, e, OpenLayers.Util.getElement(this.order[i])) ? s = i : r = i;
                            return this.order.splice(r, 0, t), this.indices[t] = this.getZIndex(e), this.getNextElement(r)
                        },
                        remove: function (e) {
                            e = e.id;
                            var t = OpenLayers.Util.indexOf(this.order, e);
                            0 <= t && (this.order.splice(t, 1), delete this.indices[e], this.maxZIndex = 0 < this.order.length ? this.indices[this.order[this.order.length - 1]] : 0)
                        },
                        clear: function () {
                            this.order = [], this.indices = {}, this.maxZIndex = 0
                        },
                        exists: function (e) {
                            return null != this.indices[e.id]
                        },
                        getZIndex: function (e) {
                            return e._style.graphicZIndex
                        },
                        determineZIndex: function (e) {
                            var t = e._style.graphicZIndex;
                            null == t ? (t = this.maxZIndex, e._style.graphicZIndex = t) : t > this.maxZIndex && (this.maxZIndex = t)
                        },
                        getNextElement: function (e) {
                            if ((e += 1) < this.order.length) {
                                var t = OpenLayers.Util.getElement(this.order[e]);
                                return null == t && (t = this.getNextElement(e)), t
                            }
                            return null
                        },
                        CLASS_NAME: "OpenLayers.ElementsIndexer"
                    }), OpenLayers.ElementsIndexer.IndexingMethods = {
                        Z_ORDER: function (e, t, i) {
                            t = e.getZIndex(t);
                            var s = 0;
                            return i && (s = t - (e = e.getZIndex(i))), s
                        },
                        Z_ORDER_DRAWING_ORDER: function (e, t, i) {
                            return e = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e, t, i), i && 0 == e && (e = 1), e
                        },
                        Z_ORDER_Y_ORDER: function (e, t, i) {
                            return e = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e, t, i), i && 0 === e && (e = 0 === (t = i._boundsBottom - t._boundsBottom) ? 1 : t), e
                        }
                    }, OpenLayers.Renderer.Elements = OpenLayers.Class(OpenLayers.Renderer, {
                        rendererRoot: null,
                        root: null,
                        vectorRoot: null,
                        textRoot: null,
                        xmlns: null,
                        xOffset: 0,
                        indexer: null,
                        BACKGROUND_ID_SUFFIX: "_background",
                        LABEL_ID_SUFFIX: "_label",
                        LABEL_OUTLINE_SUFFIX: "_outline",
                        initialize: function (e, t) {
                            OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.rendererRoot = this.createRenderRoot(), this.root = this.createRoot("_root"), this.vectorRoot = this.createRoot("_vroot"), this.textRoot = this.createRoot("_troot"), this.root.appendChild(this.vectorRoot), this.root.appendChild(this.textRoot), this.rendererRoot.appendChild(this.root), this.container.appendChild(this.rendererRoot), t && (t.zIndexing || t.yOrdering) && (this.indexer = new OpenLayers.ElementsIndexer(t.yOrdering))
                        },
                        destroy: function () {
                            this.clear(), this.xmlns = this.root = this.rendererRoot = null, OpenLayers.Renderer.prototype.destroy.apply(this, arguments)
                        },
                        clear: function () {
                            var e, t = this.vectorRoot;
                            if (t)
                                for (; e = t.firstChild;) t.removeChild(e);
                            if (t = this.textRoot)
                                for (; e = t.firstChild;) t.removeChild(e);
                            this.indexer && this.indexer.clear()
                        },
                        setExtent: function (e, t) {
                            var i = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments),
                                s = this.getResolution();
                            if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
                                var r, n = e.getWidth() / this.map.getExtent().getWidth();
                                e = e.scale(1 / n), (n = this.map.getMaxExtent()).right > e.left && n.right < e.right ? r = !0 : n.left > e.left && n.left < e.right && (r = !1), (r !== this.rightOfDateLine || t) && (i = !1, this.xOffset = !0 === r ? n.getWidth() / s : 0), this.rightOfDateLine = r
                            }
                            return i
                        },
                        getNodeType: function (e, t) {},
                        drawGeometry: function (e, t, i) {
                            var s = !0;
                            if ("OpenLayers.Geometry.Collection" == (r = e.CLASS_NAME) || "OpenLayers.Geometry.MultiPoint" == r || "OpenLayers.Geometry.MultiLineString" == r || "OpenLayers.Geometry.MultiPolygon" == r) {
                                for (var r = 0, n = e.components.length; r < n; r++) s = this.drawGeometry(e.components[r], t, i) && s;
                                return s
                            }
                            return r = s = !1, "none" != t.display && (t.backgroundGraphic ? this.redrawBackgroundNode(e.id, e, t, i) : r = !0, s = this.redrawNode(e.id, e, t, i)), 0 == s && (t = document.getElementById(e.id)) && (t._style.backgroundGraphic && (r = !0), t.parentNode.removeChild(t)), r && (t = document.getElementById(e.id + this.BACKGROUND_ID_SUFFIX)) && t.parentNode.removeChild(t), s
                        },
                        redrawNode: function (e, t, i, s) {
                            return i = this.applyDefaultSymbolizer(i), (e = this.nodeFactory(e, this.getNodeType(t, i)))._featureId = s, e._boundsBottom = t.getBounds().bottom, e._geometryClass = t.CLASS_NAME, e._style = i, !1 !== (t = this.drawGeometryNode(e, t, i)) && (e = t.node, this.indexer ? (i = this.indexer.insert(e)) ? this.vectorRoot.insertBefore(e, i) : this.vectorRoot.appendChild(e) : e.parentNode !== this.vectorRoot && this.vectorRoot.appendChild(e), this.postDraw(e), t.complete)
                        },
                        redrawBackgroundNode: function (e, t, i, s) {
                            return (i = OpenLayers.Util.extend({}, i)).externalGraphic = i.backgroundGraphic, i.graphicXOffset = i.backgroundXOffset, i.graphicYOffset = i.backgroundYOffset, i.graphicZIndex = i.backgroundGraphicZIndex, i.graphicWidth = i.backgroundWidth || i.graphicWidth, i.graphicHeight = i.backgroundHeight || i.graphicHeight, i.backgroundGraphic = null, i.backgroundXOffset = null, i.backgroundYOffset = null, i.backgroundGraphicZIndex = null, this.redrawNode(e + this.BACKGROUND_ID_SUFFIX, t, i, null)
                        },
                        drawGeometryNode: function (e, t, i) {
                            var s, r = {
                                isFilled: void 0 === (i = i || e._style).fill || i.fill,
                                isStroked: void 0 === i.stroke ? !!i.strokeWidth : i.stroke
                            };
                            switch (t.CLASS_NAME) {
                                case "OpenLayers.Geometry.Point":
                                    !1 === i.graphic && (r.isFilled = !1, r.isStroked = !1), s = this.drawPoint(e, t);
                                    break;
                                case "OpenLayers.Geometry.LineString":
                                    r.isFilled = !1, s = this.drawLineString(e, t);
                                    break;
                                case "OpenLayers.Geometry.LinearRing":
                                    s = this.drawLinearRing(e, t);
                                    break;
                                case "OpenLayers.Geometry.Polygon":
                                    s = this.drawPolygon(e, t);
                                    break;
                                case "OpenLayers.Geometry.Rectangle":
                                    s = this.drawRectangle(e, t)
                            }
                            return e._options = r, 0 != s && {
                                node: this.setStyle(e, i, r, t),
                                complete: s
                            }
                        },
                        postDraw: function (e) {},
                        drawPoint: function (e, t) {},
                        drawLineString: function (e, t) {},
                        drawLinearRing: function (e, t) {},
                        drawPolygon: function (e, t) {},
                        drawRectangle: function (e, t) {},
                        drawCircle: function (e, t) {},
                        removeText: function (e) {
                            var t = document.getElementById(e + this.LABEL_ID_SUFFIX);
                            t && this.textRoot.removeChild(t), (e = document.getElementById(e + this.LABEL_OUTLINE_SUFFIX)) && this.textRoot.removeChild(e)
                        },
                        getFeatureIdFromEvent: function (e) {
                            var t = e.target,
                                i = t && t.correspondingUseElement;
                            return (i || (t || e.srcElement))._featureId
                        },
                        eraseGeometry: function (e, t) {
                            if ("OpenLayers.Geometry.MultiPoint" == e.CLASS_NAME || "OpenLayers.Geometry.MultiLineString" == e.CLASS_NAME || "OpenLayers.Geometry.MultiPolygon" == e.CLASS_NAME || "OpenLayers.Geometry.Collection" == e.CLASS_NAME)
                                for (var i = 0, s = e.components.length; i < s; i++) this.eraseGeometry(e.components[i], t);
                            else(i = OpenLayers.Util.getElement(e.id)) && i.parentNode && (i.geometry && (i.geometry.destroy(), i.geometry = null), i.parentNode.removeChild(i), this.indexer && this.indexer.remove(i), i._style.backgroundGraphic && (i = OpenLayers.Util.getElement(e.id + this.BACKGROUND_ID_SUFFIX)) && i.parentNode && i.parentNode.removeChild(i))
                        },
                        nodeFactory: function (e, t) {
                            var i = OpenLayers.Util.getElement(e);
                            return i ? this.nodeTypeCompare(i, t) || (i.parentNode.removeChild(i), i = this.nodeFactory(e, t)) : i = this.createNode(t, e), i
                        },
                        nodeTypeCompare: function (e, t) {},
                        createNode: function (e, t) {},
                        moveRoot: function (e) {
                            var t = this.root;
                            e.root.parentNode == this.rendererRoot && (t = e.root), t.parentNode.removeChild(t), e.rendererRoot.appendChild(t)
                        },
                        getRenderLayerId: function () {
                            return this.root.parentNode.parentNode.id
                        },
                        isComplexSymbol: function (e) {
                            return "circle" != e && !!e
                        },
                        CLASS_NAME: "OpenLayers.Renderer.Elements"
                    }), OpenLayers.Control.ArgParser = OpenLayers.Class(OpenLayers.Control, {
                        center: null,
                        zoom: null,
                        layers: null,
                        displayProjection: null,
                        getParameters: function (e) {
                            e = e || window.location.href;
                            var t = OpenLayers.Util.getParameters(e),
                                i = e.indexOf("#");
                            return 0 < i && (e = "?" + e.substring(i + 1, e.length), OpenLayers.Util.extend(t, OpenLayers.Util.getParameters(e))), t
                        },
                        setMap: function (e) {
                            OpenLayers.Control.prototype.setMap.apply(this, arguments);
                            for (var t = 0, i = this.map.controls.length; t < i; t++) {
                                var s = this.map.controls[t];
                                if (s != this && "OpenLayers.Control.ArgParser" == s.CLASS_NAME) {
                                    s.displayProjection != this.displayProjection && (this.displayProjection = s.displayProjection);
                                    break
                                }
                            }
                            t == this.map.controls.length && ((t = this.getParameters()).layers && (this.layers = t.layers, this.map.events.register("addlayer", this, this.configureLayers), this.configureLayers()), t.lat && t.lon && (this.center = new OpenLayers.LonLat(parseFloat(t.lon), parseFloat(t.lat)), t.zoom && (this.zoom = parseFloat(t.zoom)), this.map.events.register("changebaselayer", this, this.setCenter), this.setCenter()))
                        },
                        setCenter: function () {
                            this.map.baseLayer && (this.map.events.unregister("changebaselayer", this, this.setCenter), this.displayProjection && this.center.transform(this.displayProjection, this.map.getProjectionObject()), this.map.setCenter(this.center, this.zoom))
                        },
                        configureLayers: function () {
                            if (this.layers.length == this.map.layers.length) {
                                this.map.events.unregister("addlayer", this, this.configureLayers);
                                for (var e = 0, t = this.layers.length; e < t; e++) {
                                    var i = this.map.layers[e],
                                        s = this.layers.charAt(e);
                                    "B" == s ? this.map.setBaseLayer(i) : "T" != s && "F" != s || i.setVisibility("T" == s)
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.ArgParser"
                    }), OpenLayers.Control.Permalink = OpenLayers.Class(OpenLayers.Control, {
                        argParserClass: OpenLayers.Control.ArgParser,
                        element: null,
                        anchor: !1,
                        base: "",
                        displayProjection: null,
                        initialize: function (e, t, i) {
                            null === e || "object" != typeof e || OpenLayers.Util.isElement(e) ? (OpenLayers.Control.prototype.initialize.apply(this, [i]), this.element = OpenLayers.Util.getElement(e), this.base = t || document.location.href) : (this.base = document.location.href, OpenLayers.Control.prototype.initialize.apply(this, [e]), null != this.element && (this.element = OpenLayers.Util.getElement(this.element)))
                        },
                        destroy: function () {
                            this.element && this.element.parentNode == this.div && (this.div.removeChild(this.element), this.element = null), this.map && this.map.events.unregister("moveend", this, this.updateLink), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        setMap: function (e) {
                            OpenLayers.Control.prototype.setMap.apply(this, arguments);
                            for (var t = 0, i = this.map.controls.length; t < i; t++) {
                                var s = this.map.controls[t];
                                if (s.CLASS_NAME == this.argParserClass.CLASS_NAME) {
                                    s.displayProjection != this.displayProjection && (this.displayProjection = s.displayProjection);
                                    break
                                }
                            }
                            t == this.map.controls.length && this.map.addControl(new this.argParserClass({
                                displayProjection: this.displayProjection
                            }))
                        },
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || this.anchor || (this.element = document.createElement("a"), this.element.innerHTML = OpenLayers.i18n("Permalink"), this.element.href = "", this.div.appendChild(this.element)), this.map.events.on({
                                moveend: this.updateLink,
                                changelayer: this.updateLink,
                                changebaselayer: this.updateLink,
                                scope: this
                            }), this.updateLink(), this.div
                        },
                        updateLink: function () {
                            var e = this.anchor ? "#" : "?",
                                t = this.base,
                                i = null; - 1 != t.indexOf("#") && 0 == this.anchor && (i = t.substring(t.indexOf("#"), t.length)), -1 != t.indexOf(e) && (t = t.substring(0, t.indexOf(e))), t = t.split("#")[0] + e + OpenLayers.Util.getParameterString(this.createParams()), i && (t += i), this.anchor && !this.element ? window.location.href = t : this.element.href = t
                        },
                        createParams: function (e, t, i) {
                            e = e || this.map.getCenter();
                            var s = OpenLayers.Util.getParameters(this.base);
                            if (e)
                                for (s.zoom = t || this.map.getZoom(), t = e.lat, e = e.lon, this.displayProjection && (e = (t = OpenLayers.Projection.transform({
                                        x: e,
                                        y: t
                                    }, this.map.getProjectionObject(), this.displayProjection)).x, t = t.y), s.lat = Math.round(1e5 * t) / 1e5, s.lon = Math.round(1e5 * e) / 1e5, i = i || this.map.layers, s.layers = "", e = 0, t = i.length; e < t; e++) {
                                    var r = i[e];
                                    s.layers = r.isBaseLayer ? s.layers + (r == this.map.baseLayer ? "B" : "0") : s.layers + (r.getVisibility() ? "T" : "F")
                                }
                            return s
                        },
                        CLASS_NAME: "OpenLayers.Control.Permalink"
                    }), OpenLayers.Layer.TMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        serviceVersion: "1.0.0",
                        layername: null,
                        type: null,
                        isBaseLayer: !0,
                        tileOrigin: null,
                        serverResolutions: null,
                        zoomOffset: 0,
                        initialize: function (e, t, i) {
                            var s = [];
                            s.push(e, t, {}, i), OpenLayers.Layer.Grid.prototype.initialize.apply(this, s)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.TMS(this.name, this.url, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = this.getServerResolution(),
                                i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w));
                            return e = Math.round((e.bottom - this.tileOrigin.lat) / (t * this.tileSize.h)), t = this.getServerZoom(), i = this.serviceVersion + "/" + this.layername + "/" + t + "/" + i + "/" + e + "." + this.type, e = this.url, OpenLayers.Util.isArray(e) && (e = this.selectUrl(i, e)), e + i
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left, this.map.maxExtent.bottom))
                        },
                        CLASS_NAME: "OpenLayers.Layer.TMS"
                    }), OpenLayers.Format.WCSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.1.0",
                        CLASS_NAME: "OpenLayers.Format.WCSCapabilities"
                    }), OpenLayers.Format.WCSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            splitSpace: /\s+/
                        },
                        defaultPrefix: "wcs",
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        CLASS_NAME: "OpenLayers.Format.WCSCapabilities.v1"
                    }), OpenLayers.Format.WCSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1, {
                        namespaces: {
                            wcs: "http://www.opengis.net/wcs",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance",
                            ows: "http://www.opengis.net/ows"
                        },
                        errorProperty: "service",
                        readers: {
                            wcs: {
                                WCS_Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Service: function (e, t) {
                                    t.service = {}, this.readChildNodes(e, t.service)
                                },
                                name: function (e, t) {
                                    t.name = this.getChildValue(e)
                                },
                                label: function (e, t) {
                                    t.label = this.getChildValue(e)
                                },
                                keywords: function (e, t) {
                                    t.keywords = [], this.readChildNodes(e, t.keywords)
                                },
                                keyword: function (e, t) {
                                    t.push(this.getChildValue(e))
                                },
                                responsibleParty: function (e, t) {
                                    t.responsibleParty = {}, this.readChildNodes(e, t.responsibleParty)
                                },
                                individualName: function (e, t) {
                                    t.individualName = this.getChildValue(e)
                                },
                                organisationName: function (e, t) {
                                    t.organisationName = this.getChildValue(e)
                                },
                                positionName: function (e, t) {
                                    t.positionName = this.getChildValue(e)
                                },
                                contactInfo: function (e, t) {
                                    t.contactInfo = {}, this.readChildNodes(e, t.contactInfo)
                                },
                                phone: function (e, t) {
                                    t.phone = {}, this.readChildNodes(e, t.phone)
                                },
                                voice: function (e, t) {
                                    t.voice = this.getChildValue(e)
                                },
                                facsimile: function (e, t) {
                                    t.facsimile = this.getChildValue(e)
                                },
                                address: function (e, t) {
                                    t.address = {}, this.readChildNodes(e, t.address)
                                },
                                deliveryPoint: function (e, t) {
                                    t.deliveryPoint = this.getChildValue(e)
                                },
                                city: function (e, t) {
                                    t.city = this.getChildValue(e)
                                },
                                postalCode: function (e, t) {
                                    t.postalCode = this.getChildValue(e)
                                },
                                country: function (e, t) {
                                    t.country = this.getChildValue(e)
                                },
                                electronicMailAddress: function (e, t) {
                                    t.electronicMailAddress = this.getChildValue(e)
                                },
                                fees: function (e, t) {
                                    t.fees = this.getChildValue(e)
                                },
                                accessConstraints: function (e, t) {
                                    t.accessConstraints = this.getChildValue(e)
                                },
                                ContentMetadata: function (e, t) {
                                    t.contentMetadata = [], this.readChildNodes(e, t.contentMetadata)
                                },
                                CoverageOfferingBrief: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.push(i)
                                },
                                name: function (e, t) {
                                    t.name = this.getChildValue(e)
                                },
                                label: function (e, t) {
                                    t.label = this.getChildValue(e)
                                },
                                lonLatEnvelope: function (e, t) {
                                    var i = this.getElementsByTagNameNS(e, "http://www.opengis.net/gml", "pos");
                                    if (2 == i.length) {
                                        var s = {},
                                            r = {};
                                        OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this, [i[0], s]), OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this, [i[1], r]), t.lonLatEnvelope = {}, t.lonLatEnvelope.srsName = e.getAttribute("srsName"), t.lonLatEnvelope.min = s.points[0], t.lonLatEnvelope.max = r.points[0]
                                    }
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.WCSCapabilities.v1_0_0"
                    }), OpenLayers.Strategy.Fixed = OpenLayers.Class(OpenLayers.Strategy, {
                        preload: !1,
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.apply(this, arguments);
                            return e && (this.layer.events.on({
                                refresh: this.load,
                                scope: this
                            }), 1 == this.layer.visibility || this.preload ? this.load() : this.layer.events.on({
                                visibilitychanged: this.load,
                                scope: this
                            })), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Strategy.prototype.deactivate.call(this);
                            return e && this.layer.events.un({
                                refresh: this.load,
                                visibilitychanged: this.load,
                                scope: this
                            }), e
                        },
                        load: function (e) {
                            var t = this.layer;
                            t.events.triggerEvent("loadstart", {
                                filter: t.filter
                            }), t.protocol.read(OpenLayers.Util.applyDefaults({
                                callback: this.merge,
                                filter: t.filter,
                                scope: this
                            }, e)), t.events.un({
                                visibilitychanged: this.load,
                                scope: this
                            })
                        },
                        merge: function (e) {
                            var t = this.layer;
                            t.destroyFeatures();
                            var i = e.features;
                            if (i && 0 < i.length) {
                                var s = t.projection,
                                    r = t.map.getProjectionObject();
                                if (!r.equals(s))
                                    for (var n, a = 0, o = i.length; a < o; ++a)(n = i[a].geometry) && n.transform(s, r);
                                t.addFeatures(i)
                            }
                            t.events.triggerEvent("loadend", {
                                response: e
                            })
                        },
                        CLASS_NAME: "OpenLayers.Strategy.Fixed"
                    }), OpenLayers.Control.Zoom = OpenLayers.Class(OpenLayers.Control, {
                        zoomInText: "+",
                        zoomInId: "olZoomInLink",
                        zoomOutText: "−",
                        zoomOutId: "olZoomOutLink",
                        draw: function () {
                            var e = OpenLayers.Control.prototype.draw.apply(this),
                                t = (i = this.getOrCreateLinks(e)).zoomIn,
                                i = i.zoomOut,
                                s = this.map.events;
                            return i.parentNode !== e && (s = this.events).attachToElement(i.parentNode), s.register("buttonclick", this, this.onZoomClick), this.zoomInLink = t, this.zoomOutLink = i, e
                        },
                        getOrCreateLinks: function (e) {
                            var t = document.getElementById(this.zoomInId),
                                i = document.getElementById(this.zoomOutId);
                            return t || ((t = document.createElement("a")).href = "#zoomIn", t.appendChild(document.createTextNode(this.zoomInText)), t.className = "olControlZoomIn", e.appendChild(t)), OpenLayers.Element.addClass(t, "olButton"), i || ((i = document.createElement("a")).href = "#zoomOut", i.appendChild(document.createTextNode(this.zoomOutText)), i.className = "olControlZoomOut", e.appendChild(i)), OpenLayers.Element.addClass(i, "olButton"), {
                                zoomIn: t,
                                zoomOut: i
                            }
                        },
                        onZoomClick: function (e) {
                            (e = e.buttonElement) === this.zoomInLink ? this.map.zoomIn() : e === this.zoomOutLink && this.map.zoomOut()
                        },
                        destroy: function () {
                            this.map && this.map.events.unregister("buttonclick", this, this.onZoomClick), delete this.zoomInLink, delete this.zoomOutLink, OpenLayers.Control.prototype.destroy.apply(this)
                        },
                        CLASS_NAME: "OpenLayers.Control.Zoom"
                    }), OpenLayers.Layer.PointTrack = OpenLayers.Class(OpenLayers.Layer.Vector, {
                        dataFrom: null,
                        styleFrom: null,
                        addNodes: function (e, t) {
                            if (2 > e.length) throw Error("At least two point features have to be added to create a line from");
                            for (var i, s, r, n = Array(e.length - 1), a = 0, o = e.length; a < o; a++) {
                                if (r = (i = e[a]).geometry) {
                                    if ("OpenLayers.Geometry.Point" != r.CLASS_NAME) throw new TypeError("Only features with point geometries are supported.")
                                } else r = i.lonlat, r = new OpenLayers.Geometry.Point(r.lon, r.lat);
                                if (0 < a) {
                                    i = null != this.dataFrom ? e[a + this.dataFrom].data || e[a + this.dataFrom].attributes : null;
                                    var l = null != this.styleFrom ? e[a + this.styleFrom].style : null;
                                    s = new OpenLayers.Geometry.LineString([s, r]), n[a - 1] = new OpenLayers.Feature.Vector(s, i, l)
                                }
                                s = r
                            }
                            this.addFeatures(n, t)
                        },
                        CLASS_NAME: "OpenLayers.Layer.PointTrack"
                    }), OpenLayers.Layer.PointTrack.SOURCE_NODE = -1, OpenLayers.Layer.PointTrack.TARGET_NODE = 0, OpenLayers.Layer.PointTrack.dataFrom = {
                        SOURCE_NODE: -1,
                        TARGET_NODE: 0
                    }, OpenLayers.Protocol.WFS = function (e) {
                        e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.WFS.DEFAULTS);
                        var t = OpenLayers.Protocol.WFS["v" + e.version.replace(/\./g, "_")];
                        if (!t) throw "Unsupported WFS version: " + e.version;
                        return new t(e)
                    }, OpenLayers.Protocol.WFS.fromWMSLayer = function (e, t) {
                        var i, s;
                        return i = e.params.LAYERS, 1 < (i = (OpenLayers.Util.isArray(i) ? i[0] : i).split(":")).length && (s = i[0]), i = i.pop(), s = {
                            url: e.url,
                            featureType: i,
                            featurePrefix: s,
                            srsName: e.projection && e.projection.getCode() || e.map && e.map.getProjectionObject().getCode(),
                            version: "1.1.0"
                        }, new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t, s))
                    }, OpenLayers.Protocol.WFS.DEFAULTS = {
                        version: "1.0.0"
                    }, OpenLayers.Layer.Markers = OpenLayers.Class(OpenLayers.Layer, {
                        isBaseLayer: !1,
                        markers: null,
                        drawn: !1,
                        initialize: function (e, t) {
                            OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.markers = []
                        },
                        destroy: function () {
                            this.clearMarkers(), this.markers = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments)
                        },
                        setOpacity: function (e) {
                            if (e != this.opacity) {
                                this.opacity = e, e = 0;
                                for (var t = this.markers.length; e < t; e++) this.markers[e].setOpacity(this.opacity)
                            }
                        },
                        moveTo: function (e, t, i) {
                            if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), t || !this.drawn) {
                                for (var s = 0, r = this.markers.length; s < r; s++) this.drawMarker(this.markers[s]);
                                this.drawn = !0
                            }
                        },
                        addMarker: function (e) {
                            this.markers.push(e), 1 > this.opacity && e.setOpacity(this.opacity), this.map && this.map.getExtent() && (e.map = this.map, this.drawMarker(e))
                        },
                        removeMarker: function (e) {
                            this.markers && this.markers.length && (OpenLayers.Util.removeItem(this.markers, e), e.erase())
                        },
                        clearMarkers: function () {
                            if (null != this.markers)
                                for (; 0 < this.markers.length;) this.removeMarker(this.markers[0])
                        },
                        drawMarker: function (e) {
                            var t = this.map.getLayerPxFromLonLat(e.lonlat);
                            null == t ? e.display(!1) : e.isDrawn() ? e.icon && e.icon.moveTo(t) : (e = e.draw(t), this.div.appendChild(e))
                        },
                        getDataExtent: function () {
                            var e = null;
                            if (this.markers && 0 < this.markers.length) {
                                e = new OpenLayers.Bounds;
                                for (var t = 0, i = this.markers.length; t < i; t++) e.extend(this.markers[t].lonlat)
                            }
                            return e
                        },
                        CLASS_NAME: "OpenLayers.Layer.Markers"
                    }), OpenLayers.Control.Pan = OpenLayers.Class(OpenLayers.Control.Button, {
                        slideFactor: 50,
                        slideRatio: null,
                        direction: null,
                        initialize: function (e, t) {
                            this.direction = e, this.CLASS_NAME += this.direction, OpenLayers.Control.prototype.initialize.apply(this, [t])
                        },
                        trigger: function () {
                            if (this.map) {
                                var e = OpenLayers.Function.bind((function (e) {
                                    return this.slideRatio ? this.map.getSize()[e] * this.slideRatio : this.slideFactor
                                }), this);
                                switch (this.direction) {
                                    case OpenLayers.Control.Pan.NORTH:
                                        this.map.pan(0, -e("h"));
                                        break;
                                    case OpenLayers.Control.Pan.SOUTH:
                                        this.map.pan(0, e("h"));
                                        break;
                                    case OpenLayers.Control.Pan.WEST:
                                        this.map.pan(-e("w"), 0);
                                        break;
                                    case OpenLayers.Control.Pan.EAST:
                                        this.map.pan(e("w"), 0)
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.Pan"
                    }), OpenLayers.Control.Pan.NORTH = "North", OpenLayers.Control.Pan.SOUTH = "South", OpenLayers.Control.Pan.EAST = "East", OpenLayers.Control.Pan.WEST = "West", OpenLayers.Format.CSWGetDomain = function (e) {
                        e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.CSWGetDomain.DEFAULTS);
                        var t = OpenLayers.Format.CSWGetDomain["v" + e.version.replace(/\./g, "_")];
                        if (!t) throw "Unsupported CSWGetDomain version: " + e.version;
                        return new t(e)
                    }, OpenLayers.Format.CSWGetDomain.DEFAULTS = {
                        version: "2.0.2"
                    }, OpenLayers.Format.CSWGetDomain.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance",
                            csw: "http://www.opengis.net/cat/csw/2.0.2"
                        },
                        defaultPrefix: "csw",
                        version: "2.0.2",
                        schemaLocation: "http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
                        PropertyName: null,
                        ParameterName: null,
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        readers: {
                            csw: {
                                GetDomainResponse: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                DomainValues: function (e, t) {
                                    OpenLayers.Util.isArray(t.DomainValues) || (t.DomainValues = []);
                                    for (var i = e.attributes, s = {}, r = 0, n = i.length; r < n; ++r) s[i[r].name] = i[r].nodeValue;
                                    this.readChildNodes(e, s), t.DomainValues.push(s)
                                },
                                PropertyName: function (e, t) {
                                    t.PropertyName = this.getChildValue(e)
                                },
                                ParameterName: function (e, t) {
                                    t.ParameterName = this.getChildValue(e)
                                },
                                ListOfValues: function (e, t) {
                                    OpenLayers.Util.isArray(t.ListOfValues) || (t.ListOfValues = []), this.readChildNodes(e, t.ListOfValues)
                                },
                                Value: function (e, t) {
                                    for (var i = e.attributes, s = {}, r = 0, n = i.length; r < n; ++r) s[i[r].name] = i[r].nodeValue;
                                    s.value = this.getChildValue(e), t.push({
                                        Value: s
                                    })
                                },
                                ConceptualScheme: function (e, t) {
                                    t.ConceptualScheme = {}, this.readChildNodes(e, t.ConceptualScheme)
                                },
                                Name: function (e, t) {
                                    t.Name = this.getChildValue(e)
                                },
                                Document: function (e, t) {
                                    t.Document = this.getChildValue(e)
                                },
                                Authority: function (e, t) {
                                    t.Authority = this.getChildValue(e)
                                },
                                RangeOfValues: function (e, t) {
                                    t.RangeOfValues = {}, this.readChildNodes(e, t.RangeOfValues)
                                },
                                MinValue: function (e, t) {
                                    for (var i = e.attributes, s = {}, r = 0, n = i.length; r < n; ++r) s[i[r].name] = i[r].nodeValue;
                                    s.value = this.getChildValue(e), t.MinValue = s
                                },
                                MaxValue: function (e, t) {
                                    for (var i = e.attributes, s = {}, r = 0, n = i.length; r < n; ++r) s[i[r].name] = i[r].nodeValue;
                                    s.value = this.getChildValue(e), t.MaxValue = s
                                }
                            }
                        },
                        write: function (e) {
                            return e = this.writeNode("csw:GetDomain", e), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        writers: {
                            csw: {
                                GetDomain: function (e) {
                                    var t = this.createElementNSPlus("csw:GetDomain", {
                                        attributes: {
                                            service: "CSW",
                                            version: this.version
                                        }
                                    });
                                    return e.PropertyName || this.PropertyName ? this.writeNode("csw:PropertyName", e.PropertyName || this.PropertyName, t) : (e.ParameterName || this.ParameterName) && this.writeNode("csw:ParameterName", e.ParameterName || this.ParameterName, t), this.readChildNodes(t, e), t
                                },
                                PropertyName: function (e) {
                                    return this.createElementNSPlus("csw:PropertyName", {
                                        value: e
                                    })
                                },
                                ParameterName: function (e) {
                                    return this.createElementNSPlus("csw:ParameterName", {
                                        value: e
                                    })
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.CSWGetDomain.v2_0_2"
                    }), OpenLayers.Format.ArcXML.Features = OpenLayers.Class(OpenLayers.Format.XML, {
                        read: function (e) {
                            return (new OpenLayers.Format.ArcXML).read(e).features.feature
                        }
                    }), OpenLayers.Control.Snapping = OpenLayers.Class(OpenLayers.Control, {
                        DEFAULTS: {
                            tolerance: 10,
                            node: !0,
                            edge: !0,
                            vertex: !0
                        },
                        greedy: !0,
                        precedence: ["node", "vertex", "edge"],
                        resolution: null,
                        geoToleranceCache: null,
                        layer: null,
                        feature: null,
                        point: null,
                        initialize: function (e) {
                            OpenLayers.Control.prototype.initialize.apply(this, [e]), this.options = e || {}, this.options.layer && this.setLayer(this.options.layer), e = OpenLayers.Util.extend({}, this.options.defaults), this.defaults = OpenLayers.Util.applyDefaults(e, this.DEFAULTS), this.setTargets(this.options.targets), 0 === this.targets.length && this.layer && this.addTargetLayer(this.layer), this.geoToleranceCache = {}
                        },
                        setLayer: function (e) {
                            this.active ? (this.deactivate(), this.layer = e, this.activate()) : this.layer = e
                        },
                        setTargets: function (e) {
                            if (this.targets = [], e && e.length)
                                for (var t, i = 0, s = e.length; i < s; ++i)(t = e[i]) instanceof OpenLayers.Layer.Vector ? this.addTargetLayer(t) : this.addTarget(t)
                        },
                        addTargetLayer: function (e) {
                            this.addTarget({
                                layer: e
                            })
                        },
                        addTarget: function (e) {
                            (e = OpenLayers.Util.applyDefaults(e, this.defaults)).nodeTolerance = e.nodeTolerance || e.tolerance, e.vertexTolerance = e.vertexTolerance || e.tolerance, e.edgeTolerance = e.edgeTolerance || e.tolerance, this.targets.push(e)
                        },
                        removeTargetLayer: function (e) {
                            for (var t, i = this.targets.length - 1; 0 <= i; --i)(t = this.targets[i]).layer === e && this.removeTarget(t)
                        },
                        removeTarget: function (e) {
                            return OpenLayers.Util.removeItem(this.targets, e)
                        },
                        activate: function () {
                            var e = OpenLayers.Control.prototype.activate.call(this);
                            return e && this.layer && this.layer.events && this.layer.events.on({
                                sketchstarted: this.onSketchModified,
                                sketchmodified: this.onSketchModified,
                                vertexmodified: this.onVertexModified,
                                scope: this
                            }), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Control.prototype.deactivate.call(this);
                            return e && this.layer && this.layer.events && this.layer.events.un({
                                sketchstarted: this.onSketchModified,
                                sketchmodified: this.onSketchModified,
                                vertexmodified: this.onVertexModified,
                                scope: this
                            }), this.point = this.feature = null, e
                        },
                        onSketchModified: function (e) {
                            this.feature = e.feature, this.considerSnapping(e.vertex, e.vertex)
                        },
                        onVertexModified: function (e) {
                            this.feature = e.feature;
                            var t = this.layer.map.getLonLatFromViewPortPx(e.pixel);
                            this.considerSnapping(e.vertex, new OpenLayers.Geometry.Point(t.lon, t.lat))
                        },
                        considerSnapping: function (e, t) {
                            for (var i, s, r = {
                                    rank: Number.POSITIVE_INFINITY,
                                    dist: Number.POSITIVE_INFINITY,
                                    x: null,
                                    y: null
                                }, n = !1, a = 0, o = this.targets.length; a < o; ++a)
                                if (s = this.targets[a], i = this.testTarget(s, t)) {
                                    if (this.greedy) {
                                        (r = i).target = s, n = !0;
                                        break
                                    }(i.rank < r.rank || i.rank === r.rank && i.dist < r.dist) && ((r = i).target = s, n = !0)
                                } n && (!1 !== this.events.triggerEvent("beforesnap", {
                                point: e,
                                x: r.x,
                                y: r.y,
                                distance: r.dist,
                                layer: r.target.layer,
                                snapType: this.precedence[r.rank]
                            }) ? (e.x = r.x, e.y = r.y, this.point = e, this.events.triggerEvent("snap", {
                                point: e,
                                snapType: this.precedence[r.rank],
                                layer: r.target.layer,
                                distance: r.dist
                            })) : n = !1), this.point && !n && (e.x = t.x, e.y = t.y, this.point = null, this.events.triggerEvent("unsnap", {
                                point: e
                            }))
                        },
                        testTarget: function (e, t) {
                            var i = this.layer.map.getResolution();
                            if ("minResolution" in e && i < e.minResolution || "maxResolution" in e && i >= e.maxResolution) return null;
                            i = {
                                node: this.getGeoTolerance(e.nodeTolerance, i),
                                vertex: this.getGeoTolerance(e.vertexTolerance, i),
                                edge: this.getGeoTolerance(e.edgeTolerance, i)
                            };
                            for (var s, r, n, a, o, l, h = Math.max(i.node, i.vertex, i.edge), p = {
                                    rank: Number.POSITIVE_INFINITY,
                                    dist: Number.POSITIVE_INFINITY
                                }, u = !1, c = e.layer.features, y = this.precedence.length, d = new OpenLayers.LonLat(t.x, t.y), m = 0, f = c.length; m < f; ++m)
                                if ((s = c[m]) !== this.feature && !s._sketch && s.state !== OpenLayers.State.DELETE && (!e.filter || e.filter.evaluate(s)) && s.atPoint(d, h, h))
                                    for (var g = 0, L = Math.min(p.rank + 1, y); g < L; ++g)
                                        if (e[r = this.precedence[g]])
                                            if ("edge" === r) {
                                                if ((o = (n = s.geometry.distanceTo(t, {
                                                        details: !0
                                                    })).distance) <= i[r] && o < p.dist) {
                                                    p = {
                                                        rank: g,
                                                        dist: o,
                                                        x: n.x0,
                                                        y: n.y0
                                                    }, u = !0;
                                                    break
                                                }
                                            } else {
                                                l = !1;
                                                for (var v = 0, O = (n = s.geometry.getVertices("node" === r)).length; v < O; ++v)(o = (a = n[v]).distanceTo(t)) <= i[r] && (g < p.rank || g === p.rank && o < p.dist) && (p = {
                                                    rank: g,
                                                    dist: o,
                                                    x: a.x,
                                                    y: a.y
                                                }, l = u = !0);
                                                if (l) break
                                            } return u ? p : null
                        },
                        getGeoTolerance: function (e, t) {
                            t !== this.resolution && (this.resolution = t, this.geoToleranceCache = {});
                            var i = this.geoToleranceCache[e];
                            return void 0 === i && (i = e * t, this.geoToleranceCache[e] = i), i
                        },
                        destroy: function () {
                            this.active && this.deactivate(), delete this.layer, delete this.targets, OpenLayers.Control.prototype.destroy.call(this)
                        },
                        CLASS_NAME: "OpenLayers.Control.Snapping"
                    }), OpenLayers.Format.OWSCommon.v1_1_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows/1.1",
                            xlink: "http://www.w3.org/1999/xlink"
                        },
                        readers: {
                            ows: OpenLayers.Util.applyDefaults({
                                ExceptionReport: function (e, t) {
                                    t.exceptionReport = {
                                        version: e.getAttribute("version"),
                                        language: e.getAttribute("xml:lang"),
                                        exceptions: []
                                    }, this.readChildNodes(e, t.exceptionReport)
                                },
                                AllowedValues: function (e, t) {
                                    t.allowedValues = {}, this.readChildNodes(e, t.allowedValues)
                                },
                                AnyValue: function (e, t) {
                                    t.anyValue = !0
                                },
                                DataType: function (e, t) {
                                    t.dataType = this.getChildValue(e)
                                },
                                Range: function (e, t) {
                                    t.range = {}, this.readChildNodes(e, t.range)
                                },
                                MinimumValue: function (e, t) {
                                    t.minValue = this.getChildValue(e)
                                },
                                MaximumValue: function (e, t) {
                                    t.maxValue = this.getChildValue(e)
                                },
                                Identifier: function (e, t) {
                                    t.identifier = this.getChildValue(e)
                                },
                                SupportedCRS: function (e, t) {
                                    t.supportedCRS = this.getChildValue(e)
                                }
                            }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)
                        },
                        writers: {
                            ows: OpenLayers.Util.applyDefaults({
                                Range: function (e) {
                                    var t = this.createElementNSPlus("ows:Range", {
                                        attributes: {
                                            "ows:rangeClosure": e.closure
                                        }
                                    });
                                    return this.writeNode("ows:MinimumValue", e.minValue, t), this.writeNode("ows:MaximumValue", e.maxValue, t), t
                                },
                                MinimumValue: function (e) {
                                    return this.createElementNSPlus("ows:MinimumValue", {
                                        value: e
                                    })
                                },
                                MaximumValue: function (e) {
                                    return this.createElementNSPlus("ows:MaximumValue", {
                                        value: e
                                    })
                                },
                                Value: function (e) {
                                    return this.createElementNSPlus("ows:Value", {
                                        value: e
                                    })
                                }
                            }, OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)
                        },
                        CLASS_NAME: "OpenLayers.Format.OWSCommon.v1_1_0"
                    }), OpenLayers.Format.WCSGetCoverage = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows/1.1",
                            wcs: "http://www.opengis.net/wcs/1.1",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        VERSION: "1.1.2",
                        schemaLocation: "http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",
                        write: function (e) {
                            return e = this.writeNode("wcs:GetCoverage", e), this.setAttributeNS(e, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        writers: {
                            wcs: {
                                GetCoverage: function (e) {
                                    var t = this.createElementNSPlus("wcs:GetCoverage", {
                                        attributes: {
                                            version: e.version || this.VERSION,
                                            service: "WCS"
                                        }
                                    });
                                    return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("wcs:DomainSubset", e.domainSubset, t), this.writeNode("wcs:Output", e.output, t), t
                                },
                                DomainSubset: function (e) {
                                    var t = this.createElementNSPlus("wcs:DomainSubset", {});
                                    return this.writeNode("ows:BoundingBox", e.boundingBox, t), e.temporalSubset && this.writeNode("wcs:TemporalSubset", e.temporalSubset, t), t
                                },
                                TemporalSubset: function (e) {
                                    for (var t = this.createElementNSPlus("wcs:TemporalSubset", {}), i = 0, s = e.timePeriods.length; i < s; ++i) this.writeNode("wcs:TimePeriod", e.timePeriods[i], t);
                                    return t
                                },
                                TimePeriod: function (e) {
                                    var t = this.createElementNSPlus("wcs:TimePeriod", {});
                                    return this.writeNode("wcs:BeginPosition", e.begin, t), this.writeNode("wcs:EndPosition", e.end, t), e.resolution && this.writeNode("wcs:TimeResolution", e.resolution, t), t
                                },
                                BeginPosition: function (e) {
                                    return this.createElementNSPlus("wcs:BeginPosition", {
                                        value: e
                                    })
                                },
                                EndPosition: function (e) {
                                    return this.createElementNSPlus("wcs:EndPosition", {
                                        value: e
                                    })
                                },
                                TimeResolution: function (e) {
                                    return this.createElementNSPlus("wcs:TimeResolution", {
                                        value: e
                                    })
                                },
                                Output: function (e) {
                                    var t = this.createElementNSPlus("wcs:Output", {
                                        attributes: {
                                            format: e.format,
                                            store: e.store
                                        }
                                    });
                                    return e.gridCRS && this.writeNode("wcs:GridCRS", e.gridCRS, t), t
                                },
                                GridCRS: function (e) {
                                    var t = this.createElementNSPlus("wcs:GridCRS", {});
                                    return this.writeNode("wcs:GridBaseCRS", e.baseCRS, t), e.type && this.writeNode("wcs:GridType", e.type, t), e.origin && this.writeNode("wcs:GridOrigin", e.origin, t), this.writeNode("wcs:GridOffsets", e.offsets, t), e.CS && this.writeNode("wcs:GridCS", e.CS, t), t
                                },
                                GridBaseCRS: function (e) {
                                    return this.createElementNSPlus("wcs:GridBaseCRS", {
                                        value: e
                                    })
                                },
                                GridOrigin: function (e) {
                                    return this.createElementNSPlus("wcs:GridOrigin", {
                                        value: e
                                    })
                                },
                                GridType: function (e) {
                                    return this.createElementNSPlus("wcs:GridType", {
                                        value: e
                                    })
                                },
                                GridOffsets: function (e) {
                                    return this.createElementNSPlus("wcs:GridOffsets", {
                                        value: e
                                    })
                                },
                                GridCS: function (e) {
                                    return this.createElementNSPlus("wcs:GridCS", {
                                        value: e
                                    })
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WCSGetCoverage"
                    }), OpenLayers.Format.KML = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            kml: "http://www.opengis.net/kml/2.2",
                            gx: "http://www.google.com/kml/ext/2.2"
                        },
                        kmlns: "http://earth.google.com/kml/2.0",
                        placemarksDesc: "No description available",
                        foldersName: "OpenLayers export",
                        foldersDesc: "Exported on " + new Date,
                        extractAttributes: !0,
                        kvpAttributes: !1,
                        extractStyles: !1,
                        extractTracks: !1,
                        trackAttributes: null,
                        internalns: null,
                        features: null,
                        styles: null,
                        styleBaseUrl: "",
                        fetched: null,
                        maxDepth: 0,
                        initialize: function (e) {
                            this.regExes = {
                                trimSpace: /^\s*|\s*$/g,
                                removeSpace: /\s*/g,
                                splitSpace: /\s+/,
                                trimComma: /\s*,\s*/g,
                                kmlColor: /(\w{2})(\w{2})(\w{2})(\w{2})/,
                                kmlIconPalette: /root:\/\/icons\/palette-(\d+)(\.\w+)/,
                                straightBracket: /\$\[(.*?)\]/g
                            }, this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            return this.features = [], this.styles = {}, this.fetched = {}, this.parseData(e, {
                                depth: 0,
                                styleBaseUrl: this.styleBaseUrl
                            })
                        },
                        parseData: function (e, t) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            for (var i = ["Link", "NetworkLink", "Style", "StyleMap", "Placemark"], s = 0, r = i.length; s < r; ++s) {
                                var n = i[s],
                                    a = this.getElementsByTagNameNS(e, "*", n);
                                if (0 != a.length) switch (n.toLowerCase()) {
                                    case "link":
                                    case "networklink":
                                        this.parseLinks(a, t);
                                        break;
                                    case "style":
                                        this.extractStyles && this.parseStyles(a, t);
                                        break;
                                    case "stylemap":
                                        this.extractStyles && this.parseStyleMaps(a, t);
                                        break;
                                    case "placemark":
                                        this.parseFeatures(a, t)
                                }
                            }
                            return this.features
                        },
                        parseLinks: function (e, t) {
                            if (t.depth >= this.maxDepth) return !1;
                            var i = OpenLayers.Util.extend({}, t);
                            i.depth++;
                            for (var s = 0, r = e.length; s < r; s++) {
                                var n = this.parseProperty(e[s], "*", "href");
                                n && !this.fetched[n] && (this.fetched[n] = !0, (n = this.fetchLink(n)) && this.parseData(n, i))
                            }
                        },
                        fetchLink: function (e) {
                            if (e = OpenLayers.Request.GET({
                                    url: e,
                                    async: !1
                                })) return e.responseText
                        },
                        parseStyles: function (e, t) {
                            for (var i = 0, s = e.length; i < s; i++) {
                                var r = this.parseStyle(e[i]);
                                r && (this.styles[(t.styleBaseUrl || "") + "#" + r.id] = r)
                            }
                        },
                        parseKmlColor: function (e) {
                            var t = null;
                            return e && (e = e.match(this.regExes.kmlColor)) && (t = {
                                color: "#" + e[4] + e[3] + e[2],
                                opacity: parseInt(e[1], 16) / 255
                            }), t
                        },
                        parseStyle: function (e) {
                            for (var t, i, s = {}, r = ["LineStyle", "PolyStyle", "IconStyle", "BalloonStyle", "LabelStyle"], n = 0, a = r.length; n < a; ++n)
                                if (t = r[n], i = this.getElementsByTagNameNS(e, "*", t)[0]) switch (t.toLowerCase()) {
                                    case "linestyle":
                                        t = this.parseProperty(i, "*", "color"), (t = this.parseKmlColor(t)) && (s.strokeColor = t.color, s.strokeOpacity = t.opacity), (t = this.parseProperty(i, "*", "width")) && (s.strokeWidth = t);
                                        break;
                                    case "polystyle":
                                        t = this.parseProperty(i, "*", "color"), (t = this.parseKmlColor(t)) && (s.fillOpacity = t.opacity, s.fillColor = t.color), "0" == this.parseProperty(i, "*", "fill") && (s.fillColor = "none"), "0" == this.parseProperty(i, "*", "outline") && (s.strokeWidth = "0");
                                        break;
                                    case "iconstyle":
                                        var o = parseFloat(this.parseProperty(i, "*", "scale") || 1);
                                        t = 32 * o;
                                        var l = 32 * o,
                                            h = this.getElementsByTagNameNS(i, "*", "Icon")[0];
                                        if (h) {
                                            var p = this.parseProperty(h, "*", "href");
                                            if (p) {
                                                var u = this.parseProperty(h, "*", "w"),
                                                    c = this.parseProperty(h, "*", "h");
                                                !OpenLayers.String.startsWith(p, "http://maps.google.com/mapfiles/kml") || u || c || (c = u = 64, o /= 2), u = u || c, c = c || u, u && (t = parseInt(u) * o), c && (l = parseInt(c) * o), (c = p.match(this.regExes.kmlIconPalette)) && (u = c[1], c = c[2], p = this.parseProperty(h, "*", "x"), p = "http://maps.google.com/mapfiles/kml/pal" + u + "/icon" + (8 * ((h = this.parseProperty(h, "*", "y")) ? 7 - h / 32 : 7) + (p ? p / 32 : 0)) + c), s.graphicOpacity = 1, s.externalGraphic = p
                                            }
                                        }(i = this.getElementsByTagNameNS(i, "*", "hotSpot")[0]) && (p = parseFloat(i.getAttribute("x")), h = parseFloat(i.getAttribute("y")), "pixels" == (u = i.getAttribute("xunits")) ? s.graphicXOffset = -p * o : "insetPixels" == u ? s.graphicXOffset = p * o - t : "fraction" == u && (s.graphicXOffset = -t * p), "pixels" == (i = i.getAttribute("yunits")) ? s.graphicYOffset = h * o - l + 1 : "insetPixels" == i ? s.graphicYOffset = -h * o + 1 : "fraction" == i && (s.graphicYOffset = -l * (1 - h) + 1)), s.graphicWidth = t, s.graphicHeight = l;
                                        break;
                                    case "balloonstyle":
                                        (i = OpenLayers.Util.getXmlNodeValue(i)) && (s.balloonStyle = i.replace(this.regExes.straightBracket, "${$1}"));
                                        break;
                                    case "labelstyle":
                                        t = this.parseProperty(i, "*", "color"), (t = this.parseKmlColor(t)) && (s.fontColor = t.color, s.fontOpacity = t.opacity)
                                }
                            return !s.strokeColor && s.fillColor && (s.strokeColor = s.fillColor), (e = e.getAttribute("id")) && s && (s.id = e), s
                        },
                        parseStyleMaps: function (e, t) {
                            for (var i = 0, s = e.length; i < s; i++)
                                for (var r = e[i], n = this.getElementsByTagNameNS(r, "*", "Pair"), a = (r = r.getAttribute("id"), 0), o = n.length; a < o; a++) {
                                    var l = n[a],
                                        h = this.parseProperty(l, "*", "key");
                                    (l = this.parseProperty(l, "*", "styleUrl")) && "normal" == h && (this.styles[(t.styleBaseUrl || "") + "#" + r] = this.styles[(t.styleBaseUrl || "") + l])
                                }
                        },
                        parseFeatures: function (e, t) {
                            for (var i = [], s = 0, r = e.length; s < r; s++) {
                                var n = e[s],
                                    a = this.parseFeature.apply(this, [n]);
                                if (!a) throw "Bad Placemark: " + s;
                                if (this.extractStyles && a.attributes && a.attributes.styleUrl && (a.style = this.getStyle(a.attributes.styleUrl, t)), this.extractStyles) {
                                    var o = this.getElementsByTagNameNS(n, "*", "Style")[0];
                                    o && (o = this.parseStyle(o)) && (a.style = OpenLayers.Util.extend(a.style, o))
                                }
                                this.extractTracks ? (n = this.getElementsByTagNameNS(n, this.namespaces.gx, "Track")) && 0 < n.length && (a = {
                                    features: [],
                                    feature: a
                                }, this.readNode(n[0], a), 0 < a.features.length && i.push.apply(i, a.features)) : i.push(a)
                            }
                            this.features = this.features.concat(i)
                        },
                        readers: {
                            kml: {
                                when: function (e, t) {
                                    t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)))
                                },
                                _trackPointAttribute: function (e, t) {
                                    var i = e.nodeName.split(":").pop();
                                    t.attributes[i].push(this.getChildValue(e))
                                }
                            },
                            gx: {
                                Track: function (e, t) {
                                    var i = {
                                        whens: [],
                                        points: [],
                                        angles: []
                                    };
                                    if (this.trackAttributes) {
                                        var s;
                                        i.attributes = {};
                                        for (var r = 0, n = this.trackAttributes.length; r < n; ++r) s = this.trackAttributes[r], i.attributes[s] = [], s in this.readers.kml || (this.readers.kml[s] = this.readers.kml._trackPointAttribute)
                                    }
                                    if (this.readChildNodes(e, i), i.whens.length !== i.points.length) throw Error("gx:Track with unequal number of when (" + i.whens.length + ") and gx:coord (" + i.points.length + ") elements.");
                                    var a = 0 < i.angles.length;
                                    if (a && i.whens.length !== i.angles.length) throw Error("gx:Track with unequal number of when (" + i.whens.length + ") and gx:angles (" + i.angles.length + ") elements.");
                                    var o;
                                    for (r = 0, n = i.whens.length; r < n; ++r) {
                                        if ((o = t.feature.clone()).fid = t.feature.fid || t.feature.id, s = i.points[r], o.geometry = s, "z" in s && (o.attributes.altitude = s.z), this.internalProjection && this.externalProjection && o.geometry.transform(this.externalProjection, this.internalProjection), this.trackAttributes)
                                            for (var l = 0, h = this.trackAttributes.length; l < h; ++l) s = this.trackAttributes[l], o.attributes[s] = i.attributes[s][r];
                                        o.attributes.when = i.whens[r], o.attributes.trackId = t.feature.id, a && (s = i.angles[r], o.attributes.heading = parseFloat(s[0]), o.attributes.tilt = parseFloat(s[1]), o.attributes.roll = parseFloat(s[2])), t.features.push(o)
                                    }
                                },
                                coord: function (e, t) {
                                    var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(/\s+/),
                                        s = new OpenLayers.Geometry.Point(i[0], i[1]);
                                    2 < i.length && (s.z = parseFloat(i[2])), t.points.push(s)
                                },
                                angles: function (e, t) {
                                    var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(/\s+/);
                                    t.angles.push(i)
                                }
                            }
                        },
                        parseFeature: function (e) {
                            for (var t, i, s, r = ["MultiGeometry", "Polygon", "LineString", "Point"], n = 0, a = r.length; n < a; ++n)
                                if (t = r[n], this.internalns = e.namespaceURI ? e.namespaceURI : this.kmlns, 0 < (i = this.getElementsByTagNameNS(e, this.internalns, t)).length) {
                                    if (!(r = this.parseGeometry[t.toLowerCase()])) throw new TypeError("Unsupported geometry type: " + t);
                                    s = r.apply(this, [i[0]]), this.internalProjection && this.externalProjection && s.transform(this.externalProjection, this.internalProjection);
                                    break
                                } var o;
                            return this.extractAttributes && (o = this.parseAttributes(e)), t = new OpenLayers.Feature.Vector(s, o), null != (e = e.getAttribute("id") || e.getAttribute("name")) && (t.fid = e), t
                        },
                        getStyle: function (e, t) {
                            var i = OpenLayers.Util.removeTail(e),
                                s = OpenLayers.Util.extend({}, t);
                            return s.depth++, s.styleBaseUrl = i, !this.styles[e] && !OpenLayers.String.startsWith(e, "#") && s.depth <= this.maxDepth && !this.fetched[i] && (i = this.fetchLink(i)) && this.parseData(i, s), OpenLayers.Util.extend({}, this.styles[e])
                        },
                        parseGeometry: {
                            point: function (e) {
                                var t, i = this.getElementsByTagNameNS(e, this.internalns, "coordinates");
                                (e = [], 0 < i.length) && (e = (t = (t = i[0].firstChild.nodeValue).replace(this.regExes.removeSpace, "")).split(","));
                                if (i = null, !(1 < e.length)) throw "Bad coordinate string: " + t;
                                return 2 == e.length && (e[2] = null), i = new OpenLayers.Geometry.Point(e[0], e[1], e[2])
                            },
                            linestring: function (e, t) {
                                var i = null;
                                if (0 < (s = this.getElementsByTagNameNS(e, this.internalns, "coordinates")).length) {
                                    for (var s, r, n = (i = (s = (s = (s = this.getChildValue(s[0])).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace)).length, a = Array(n), o = 0; o < n; ++o) {
                                        if (!(1 < (r = i[o].split(",")).length)) throw "Bad LineString point coordinates: " + i[o];
                                        2 == r.length && (r[2] = null), a[o] = new OpenLayers.Geometry.Point(r[0], r[1], r[2])
                                    }
                                    if (!n) throw "Bad LineString coordinates: " + s;
                                    i = t ? new OpenLayers.Geometry.LinearRing(a) : new OpenLayers.Geometry.LineString(a)
                                }
                                return i
                            },
                            polygon: function (e) {
                                var t = (e = this.getElementsByTagNameNS(e, this.internalns, "LinearRing")).length,
                                    i = Array(t);
                                if (0 < t)
                                    for (var s = 0, r = e.length; s < r; ++s) {
                                        if (!(t = this.parseGeometry.linestring.apply(this, [e[s], !0]))) throw "Bad LinearRing geometry: " + s;
                                        i[s] = t
                                    }
                                return new OpenLayers.Geometry.Polygon(i)
                            },
                            multigeometry: function (e) {
                                for (var t, i = [], s = e.childNodes, r = 0, n = s.length; r < n; ++r) 1 == (e = s[r]).nodeType && (t = e.prefix ? e.nodeName.split(":")[1] : e.nodeName, (t = this.parseGeometry[t.toLowerCase()]) && i.push(t.apply(this, [e])));
                                return new OpenLayers.Geometry.Collection(i)
                            }
                        },
                        parseAttributes: function (e) {
                            var t, i, s, r = {};
                            (n = e.getElementsByTagName("ExtendedData")).length && (r = this.parseExtendedData(n[0]));
                            for (var n = 0, a = (e = e.childNodes).length; n < a; ++n)
                                if (1 == (t = e[n]).nodeType && (1 <= (i = t.childNodes).length && 3 >= i.length)) {
                                    switch (i.length) {
                                        case 1:
                                            s = i[0];
                                            break;
                                        case 2:
                                            s = i[0], i = i[1], s = 3 == s.nodeType || 4 == s.nodeType ? s : i;
                                            break;
                                        default:
                                            s = i[1]
                                    }
                                    3 != s.nodeType && 4 != s.nodeType || (t = t.prefix ? t.nodeName.split(":")[1] : t.nodeName, (s = OpenLayers.Util.getXmlNodeValue(s)) && (s = s.replace(this.regExes.trimSpace, ""), r[t] = s))
                                } return r
                        },
                        parseExtendedData: function (e) {
                            var t, i, s, r, n = {},
                                a = e.getElementsByTagName("Data");
                            for (t = 0, i = a.length; t < i; t++) {
                                r = (s = a[t]).getAttribute("name");
                                var o = {},
                                    l = s.getElementsByTagName("value");
                                l.length && (o.value = this.getChildValue(l[0])), this.kvpAttributes ? n[r] = o.value : ((s = s.getElementsByTagName("displayName")).length && (o.displayName = this.getChildValue(s[0])), n[r] = o)
                            }
                            for (t = 0, i = (e = e.getElementsByTagName("SimpleData")).length; t < i; t++) o = {}, r = (s = e[t]).getAttribute("name"), o.value = this.getChildValue(s), this.kvpAttributes ? n[r] = o.value : (o.displayName = r, n[r] = o);
                            return n
                        },
                        parseProperty: function (e, t, i) {
                            var s;
                            e = this.getElementsByTagNameNS(e, t, i);
                            try {
                                s = OpenLayers.Util.getXmlNodeValue(e[0])
                            } catch (e) {
                                s = null
                            }
                            return s
                        },
                        write: function (e) {
                            OpenLayers.Util.isArray(e) || (e = [e]);
                            for (var t = this.createElementNS(this.kmlns, "kml"), i = this.createFolderXML(), s = 0, r = e.length; s < r; ++s) i.appendChild(this.createPlacemarkXML(e[s]));
                            return t.appendChild(i), OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        createFolderXML: function () {
                            var e = this.createElementNS(this.kmlns, "Folder");
                            if (this.foldersName) {
                                var t = this.createElementNS(this.kmlns, "name"),
                                    i = this.createTextNode(this.foldersName);
                                t.appendChild(i), e.appendChild(t)
                            }
                            return this.foldersDesc && (t = this.createElementNS(this.kmlns, "description"), i = this.createTextNode(this.foldersDesc), t.appendChild(i), e.appendChild(t)), e
                        },
                        createPlacemarkXML: function (e) {
                            var t = this.createElementNS(this.kmlns, "name"),
                                i = e.style && e.style.label ? e.style.label : e.id;
                            t.appendChild(this.createTextNode(e.attributes.name || i));
                            var s = this.createElementNS(this.kmlns, "description");
                            return s.appendChild(this.createTextNode(e.attributes.description || this.placemarksDesc)), i = this.createElementNS(this.kmlns, "Placemark"), null != e.fid && i.setAttribute("id", e.fid), i.appendChild(t), i.appendChild(s), t = this.buildGeometryNode(e.geometry), i.appendChild(t), e.attributes && (e = this.buildExtendedData(e.attributes)) && i.appendChild(e), i
                        },
                        buildGeometryNode: function (e) {
                            var t = (t = e.CLASS_NAME).substring(t.lastIndexOf(".") + 1),
                                i = null;
                            return (t = this.buildGeometry[t.toLowerCase()]) && (i = t.apply(this, [e])), i
                        },
                        buildGeometry: {
                            point: function (e) {
                                var t = this.createElementNS(this.kmlns, "Point");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            },
                            multipoint: function (e) {
                                return this.buildGeometry.collection.apply(this, [e])
                            },
                            linestring: function (e) {
                                var t = this.createElementNS(this.kmlns, "LineString");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            },
                            multilinestring: function (e) {
                                return this.buildGeometry.collection.apply(this, [e])
                            },
                            linearring: function (e) {
                                var t = this.createElementNS(this.kmlns, "LinearRing");
                                return t.appendChild(this.buildCoordinatesNode(e)), t
                            },
                            polygon: function (e) {
                                for (var t, i, s = this.createElementNS(this.kmlns, "Polygon"), r = 0, n = (e = e.components).length; r < n; ++r) t = 0 == r ? "outerBoundaryIs" : "innerBoundaryIs", t = this.createElementNS(this.kmlns, t), i = this.buildGeometry.linearring.apply(this, [e[r]]), t.appendChild(i), s.appendChild(t);
                                return s
                            },
                            multipolygon: function (e) {
                                return this.buildGeometry.collection.apply(this, [e])
                            },
                            collection: function (e) {
                                for (var t, i = this.createElementNS(this.kmlns, "MultiGeometry"), s = 0, r = e.components.length; s < r; ++s)(t = this.buildGeometryNode.apply(this, [e.components[s]])) && i.appendChild(t);
                                return i
                            }
                        },
                        buildCoordinatesNode: function (e) {
                            var t, i = this.createElementNS(this.kmlns, "coordinates");
                            if (t = e.components) {
                                for (var s = t.length, r = Array(s), n = 0; n < s; ++n) e = t[n], r[n] = this.buildCoordinates(e);
                                t = r.join(" ")
                            } else t = this.buildCoordinates(e);
                            return t = this.createTextNode(t), i.appendChild(t), i
                        },
                        buildCoordinates: function (e) {
                            return this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), e.x + "," + e.y
                        },
                        buildExtendedData: function (e) {
                            var t, i = this.createElementNS(this.kmlns, "ExtendedData");
                            for (t in e)
                                if (e[t] && "name" != t && "description" != t && "styleUrl" != t) {
                                    var s = this.createElementNS(this.kmlns, "Data");
                                    s.setAttribute("name", t);
                                    var r = this.createElementNS(this.kmlns, "value");
                                    if ("object" == typeof e[t]) {
                                        if (e[t].value && r.appendChild(this.createTextNode(e[t].value)), e[t].displayName) {
                                            var n = this.createElementNS(this.kmlns, "displayName");
                                            n.appendChild(this.getXMLDoc().createCDATASection(e[t].displayName)), s.appendChild(n)
                                        }
                                    } else r.appendChild(this.createTextNode(e[t]));
                                    s.appendChild(r), i.appendChild(s)
                                } return this.isSimpleContent(i) ? null : i
                        },
                        CLASS_NAME: "OpenLayers.Format.KML"
                    }), OpenLayers.Format.WMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.1.1",
                        profile: null,
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities"
                    }), OpenLayers.Format.WMSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            wms: "http://www.opengis.net/wms",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        defaultPrefix: "wms",
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = e;
                            e && 9 == e.nodeType && (e = e.documentElement);
                            var i = {};
                            return this.readNode(e, i), void 0 === i.service && (e = new OpenLayers.Format.OGCExceptionReport, i.error = e.read(t)), i
                        },
                        readers: {
                            wms: {
                                Service: function (e, t) {
                                    t.service = {}, this.readChildNodes(e, t.service)
                                },
                                Name: function (e, t) {
                                    t.name = this.getChildValue(e)
                                },
                                Title: function (e, t) {
                                    t.title = this.getChildValue(e)
                                },
                                Abstract: function (e, t) {
                                    t.abstract = this.getChildValue(e)
                                },
                                BoundingBox: function (e, t) {
                                    var i = {};
                                    i.bbox = [parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy"))];
                                    var s = {
                                        x: parseFloat(e.getAttribute("resx")),
                                        y: parseFloat(e.getAttribute("resy"))
                                    };
                                    return isNaN(s.x) && isNaN(s.y) || (i.res = s), i
                                },
                                OnlineResource: function (e, t) {
                                    t.href = this.getAttributeNS(e, this.namespaces.xlink, "href")
                                },
                                ContactInformation: function (e, t) {
                                    t.contactInformation = {}, this.readChildNodes(e, t.contactInformation)
                                },
                                ContactPersonPrimary: function (e, t) {
                                    t.personPrimary = {}, this.readChildNodes(e, t.personPrimary)
                                },
                                ContactPerson: function (e, t) {
                                    t.person = this.getChildValue(e)
                                },
                                ContactOrganization: function (e, t) {
                                    t.organization = this.getChildValue(e)
                                },
                                ContactPosition: function (e, t) {
                                    t.position = this.getChildValue(e)
                                },
                                ContactAddress: function (e, t) {
                                    t.contactAddress = {}, this.readChildNodes(e, t.contactAddress)
                                },
                                AddressType: function (e, t) {
                                    t.type = this.getChildValue(e)
                                },
                                Address: function (e, t) {
                                    t.address = this.getChildValue(e)
                                },
                                City: function (e, t) {
                                    t.city = this.getChildValue(e)
                                },
                                StateOrProvince: function (e, t) {
                                    t.stateOrProvince = this.getChildValue(e)
                                },
                                PostCode: function (e, t) {
                                    t.postcode = this.getChildValue(e)
                                },
                                Country: function (e, t) {
                                    t.country = this.getChildValue(e)
                                },
                                ContactVoiceTelephone: function (e, t) {
                                    t.phone = this.getChildValue(e)
                                },
                                ContactFacsimileTelephone: function (e, t) {
                                    t.fax = this.getChildValue(e)
                                },
                                ContactElectronicMailAddress: function (e, t) {
                                    t.email = this.getChildValue(e)
                                },
                                Fees: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && "none" != i.toLowerCase() && (t.fees = i)
                                },
                                AccessConstraints: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && "none" != i.toLowerCase() && (t.accessConstraints = i)
                                },
                                Capability: function (e, t) {
                                    t.capability = {
                                        nestedLayers: [],
                                        layers: []
                                    }, this.readChildNodes(e, t.capability)
                                },
                                Request: function (e, t) {
                                    t.request = {}, this.readChildNodes(e, t.request)
                                },
                                GetCapabilities: function (e, t) {
                                    t.getcapabilities = {
                                        formats: []
                                    }, this.readChildNodes(e, t.getcapabilities)
                                },
                                Format: function (e, t) {
                                    OpenLayers.Util.isArray(t.formats) ? t.formats.push(this.getChildValue(e)) : t.format = this.getChildValue(e)
                                },
                                DCPType: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                HTTP: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Get: function (e, t) {
                                    t.get = {}, this.readChildNodes(e, t.get), t.href || (t.href = t.get.href)
                                },
                                Post: function (e, t) {
                                    t.post = {}, this.readChildNodes(e, t.post), t.href || (t.href = t.get.href)
                                },
                                GetMap: function (e, t) {
                                    t.getmap = {
                                        formats: []
                                    }, this.readChildNodes(e, t.getmap)
                                },
                                GetFeatureInfo: function (e, t) {
                                    t.getfeatureinfo = {
                                        formats: []
                                    }, this.readChildNodes(e, t.getfeatureinfo)
                                },
                                Exception: function (e, t) {
                                    t.exception = {
                                        formats: []
                                    }, this.readChildNodes(e, t.exception)
                                },
                                Layer: function (e, t) {
                                    var i, s;
                                    t.capability ? (s = t.capability, i = t) : s = t;
                                    var r = (a = e.getAttributeNode("queryable")) && a.specified ? e.getAttribute("queryable") : null,
                                        n = (a = e.getAttributeNode("cascaded")) && a.specified ? e.getAttribute("cascaded") : null,
                                        a = (a = e.getAttributeNode("opaque")) && a.specified ? e.getAttribute("opaque") : null,
                                        o = e.getAttribute("noSubsets"),
                                        l = e.getAttribute("fixedWidth"),
                                        h = e.getAttribute("fixedHeight"),
                                        p = i || {},
                                        u = OpenLayers.Util.extend;
                                    i = {
                                        nestedLayers: [],
                                        styles: i ? [].concat(i.styles) : [],
                                        srs: i ? u({}, p.srs) : {},
                                        metadataURLs: [],
                                        bbox: i ? u({}, p.bbox) : {},
                                        llbbox: p.llbbox,
                                        dimensions: i ? u({}, p.dimensions) : {},
                                        authorityURLs: i ? u({}, p.authorityURLs) : {},
                                        identifiers: {},
                                        keywords: [],
                                        queryable: r && "" !== r ? "1" === r || "true" === r : p.queryable || !1,
                                        cascaded: null !== n ? parseInt(n) : p.cascaded || 0,
                                        opaque: a ? "1" === a || "true" === a : p.opaque || !1,
                                        noSubsets: null !== o ? "1" === o || "true" === o : p.noSubsets || !1,
                                        fixedWidth: null != l ? parseInt(l) : p.fixedWidth || 0,
                                        fixedHeight: null != h ? parseInt(h) : p.fixedHeight || 0,
                                        minScale: p.minScale,
                                        maxScale: p.maxScale,
                                        attribution: p.attribution
                                    }, t.nestedLayers.push(i), i.capability = s, this.readChildNodes(e, i), delete i.capability, i.name && (r = i.name.split(":"), a = (n = s.request).getfeatureinfo, 0 < r.length && (i.prefix = r[0]), s.layers.push(i), void 0 === i.formats && (i.formats = n.getmap.formats), void 0 === i.infoFormats && a && (i.infoFormats = a.formats))
                                },
                                Attribution: function (e, t) {
                                    t.attribution = {}, this.readChildNodes(e, t.attribution)
                                },
                                LogoURL: function (e, t) {
                                    t.logo = {
                                        width: e.getAttribute("width"),
                                        height: e.getAttribute("height")
                                    }, this.readChildNodes(e, t.logo)
                                },
                                Style: function (e, t) {
                                    var i = {};
                                    t.styles.push(i), this.readChildNodes(e, i)
                                },
                                LegendURL: function (e, t) {
                                    var i = {
                                        width: e.getAttribute("width"),
                                        height: e.getAttribute("height")
                                    };
                                    t.legend = i, this.readChildNodes(e, i)
                                },
                                MetadataURL: function (e, t) {
                                    var i = {
                                        type: e.getAttribute("type")
                                    };
                                    t.metadataURLs.push(i), this.readChildNodes(e, i)
                                },
                                DataURL: function (e, t) {
                                    t.dataURL = {}, this.readChildNodes(e, t.dataURL)
                                },
                                FeatureListURL: function (e, t) {
                                    t.featureListURL = {}, this.readChildNodes(e, t.featureListURL)
                                },
                                AuthorityURL: function (e, t) {
                                    var i = e.getAttribute("name"),
                                        s = {};
                                    this.readChildNodes(e, s), t.authorityURLs[i] = s.href
                                },
                                Identifier: function (e, t) {
                                    var i = e.getAttribute("authority");
                                    t.identifiers[i] = this.getChildValue(e)
                                },
                                KeywordList: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                SRS: function (e, t) {
                                    t.srs[this.getChildValue(e)] = !0
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1"
                    }), OpenLayers.Format.WMSCapabilities.v1_1 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1, {
                        readers: {
                            wms: OpenLayers.Util.applyDefaults({
                                WMT_MS_Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Keyword: function (e, t) {
                                    t.keywords && t.keywords.push(this.getChildValue(e))
                                },
                                DescribeLayer: function (e, t) {
                                    t.describelayer = {
                                        formats: []
                                    }, this.readChildNodes(e, t.describelayer)
                                },
                                GetLegendGraphic: function (e, t) {
                                    t.getlegendgraphic = {
                                        formats: []
                                    }, this.readChildNodes(e, t.getlegendgraphic)
                                },
                                GetStyles: function (e, t) {
                                    t.getstyles = {
                                        formats: []
                                    }, this.readChildNodes(e, t.getstyles)
                                },
                                PutStyles: function (e, t) {
                                    t.putstyles = {
                                        formats: []
                                    }, this.readChildNodes(e, t.putstyles)
                                },
                                UserDefinedSymbolization: function (e, t) {
                                    var i = {
                                        supportSLD: 1 == parseInt(e.getAttribute("SupportSLD")),
                                        userLayer: 1 == parseInt(e.getAttribute("UserLayer")),
                                        userStyle: 1 == parseInt(e.getAttribute("UserStyle")),
                                        remoteWFS: 1 == parseInt(e.getAttribute("RemoteWFS"))
                                    };
                                    t.userSymbols = i
                                },
                                LatLonBoundingBox: function (e, t) {
                                    t.llbbox = [parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy"))]
                                },
                                BoundingBox: function (e, t) {
                                    var i = OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this, [e, t]);
                                    i.srs = e.getAttribute("SRS"), t.bbox[i.srs] = i
                                },
                                ScaleHint: function (e, t) {
                                    var i = e.getAttribute("min"),
                                        s = e.getAttribute("max"),
                                        r = Math.pow(2, .5),
                                        n = OpenLayers.INCHES_PER_UNIT.m;
                                    0 != i && (t.maxScale = parseFloat((i / r * n * OpenLayers.DOTS_PER_INCH).toPrecision(13))), s != Number.POSITIVE_INFINITY && (t.minScale = parseFloat((s / r * n * OpenLayers.DOTS_PER_INCH).toPrecision(13)))
                                },
                                Dimension: function (e, t) {
                                    var i = {
                                        name: e.getAttribute("name").toLowerCase(),
                                        units: e.getAttribute("units"),
                                        unitsymbol: e.getAttribute("unitSymbol")
                                    };
                                    t.dimensions[i.name] = i
                                },
                                Extent: function (e, t) {
                                    var i = e.getAttribute("name").toLowerCase();
                                    if (i in t.dimensions) {
                                        (i = t.dimensions[i]).nearestVal = "1" === e.getAttribute("nearestValue"), i.multipleVal = "1" === e.getAttribute("multipleValues"), i.current = "1" === e.getAttribute("current"), i.default = e.getAttribute("default") || "";
                                        var s = this.getChildValue(e);
                                        i.values = s.split(",")
                                    }
                                }
                            }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1_1"
                    }), OpenLayers.Format.WMSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1, {
                        version: "1.1.0",
                        readers: {
                            wms: OpenLayers.Util.applyDefaults({
                                SRS: function (e, t) {
                                    for (var i = this.getChildValue(e).split(/ +/), s = 0, r = i.length; s < r; s++) t.srs[i[s]] = !0
                                }
                            }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1_1_0"
                    }), OpenLayers.Protocol.WFS.v1 = OpenLayers.Class(OpenLayers.Protocol, {
                        version: null,
                        srsName: "EPSG:4326",
                        featureType: null,
                        featureNS: null,
                        geometryName: "the_geom",
                        schema: null,
                        featurePrefix: "feature",
                        formatOptions: null,
                        readFormat: null,
                        readOptions: null,
                        initialize: function (e) {
                            OpenLayers.Protocol.prototype.initialize.apply(this, [e]), e.format || (this.format = OpenLayers.Format.WFST(OpenLayers.Util.extend({
                                version: this.version,
                                featureType: this.featureType,
                                featureNS: this.featureNS,
                                featurePrefix: this.featurePrefix,
                                geometryName: this.geometryName,
                                srsName: this.srsName,
                                schema: this.schema
                            }, this.formatOptions))), !e.geometryName && 1 < parseFloat(this.format.version) && this.setGeometryName(null)
                        },
                        destroy: function () {
                            this.options && !this.options.format && this.format.destroy(), this.format = null, OpenLayers.Protocol.prototype.destroy.apply(this)
                        },
                        read: function (e) {
                            OpenLayers.Protocol.prototype.read.apply(this, arguments), e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
                            var t = new OpenLayers.Protocol.Response({
                                    requestType: "read"
                                }),
                                i = OpenLayers.Format.XML.prototype.write.apply(this.format, [this.format.writeNode("wfs:GetFeature", e)]);
                            return t.priv = OpenLayers.Request.POST({
                                url: e.url,
                                callback: this.createCallback(this.handleRead, t, e),
                                params: e.params,
                                headers: e.headers,
                                data: i
                            }), t
                        },
                        setFeatureType: function (e) {
                            this.featureType = e, this.format.featureType = e
                        },
                        setGeometryName: function (e) {
                            this.geometryName = e, this.format.geometryName = e
                        },
                        handleRead: function (e, t) {
                            if (t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options), t.callback) {
                                var i = e.priv;
                                200 <= i.status && 300 > i.status ? (i = this.parseResponse(i, t.readOptions)) && !1 !== i.success ? (t.readOptions && "object" == t.readOptions.output ? OpenLayers.Util.extend(e, i) : e.features = i, e.code = OpenLayers.Protocol.Response.SUCCESS) : (e.code = OpenLayers.Protocol.Response.FAILURE, e.error = i) : e.code = OpenLayers.Protocol.Response.FAILURE, t.callback.call(t.scope, e)
                            }
                        },
                        parseResponse: function (e, t) {
                            var i = e.responseXML;
                            if (i && i.documentElement || (i = e.responseText), !i || 0 >= i.length) return null;
                            if (i = null !== this.readFormat ? this.readFormat.read(i) : this.format.read(i, t), !this.featureNS) {
                                var s = this.readFormat || this.format;
                                this.featureNS = s.featureNS, s.autoConfig = !1, this.geometryName || this.setGeometryName(s.geometryName)
                            }
                            return i
                        },
                        commit: function (e, t) {
                            t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options);
                            var i = new OpenLayers.Protocol.Response({
                                requestType: "commit",
                                reqFeatures: e
                            });
                            return i.priv = OpenLayers.Request.POST({
                                url: t.url,
                                headers: t.headers,
                                data: this.format.write(e, t),
                                callback: this.createCallback(this.handleCommit, i, t)
                            }), i
                        },
                        handleCommit: function (e, t) {
                            if (t.callback) {
                                var i = e.priv,
                                    s = i.responseXML;
                                s && s.documentElement || (s = i.responseText), i = this.format.read(s) || {}, e.insertIds = i.insertIds || [], i.success ? e.code = OpenLayers.Protocol.Response.SUCCESS : (e.code = OpenLayers.Protocol.Response.FAILURE, e.error = i), t.callback.call(t.scope, e)
                            }
                        },
                        filterDelete: function (e, t) {
                            t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options), new OpenLayers.Protocol.Response({
                                requestType: "commit"
                            });
                            var i = this.format.createElementNSPlus("wfs:Transaction", {
                                    attributes: {
                                        service: "WFS",
                                        version: this.version
                                    }
                                }),
                                s = this.format.createElementNSPlus("wfs:Delete", {
                                    attributes: {
                                        typeName: (t.featureNS ? this.featurePrefix + ":" : "") + t.featureType
                                    }
                                });
                            t.featureNS && s.setAttribute("xmlns:" + this.featurePrefix, t.featureNS);
                            var r = this.format.writeNode("ogc:Filter", e);
                            return s.appendChild(r), i.appendChild(s), i = OpenLayers.Format.XML.prototype.write.apply(this.format, [i]), OpenLayers.Request.POST({
                                url: this.url,
                                callback: t.callback || function () {},
                                data: i
                            })
                        },
                        abort: function (e) {
                            e && e.priv.abort()
                        },
                        CLASS_NAME: "OpenLayers.Protocol.WFS.v1"
                    }), OpenLayers.Handler.Feature = OpenLayers.Class(OpenLayers.Handler, {
                        EVENTMAP: {
                            click: {
                                in: "click",
                                out: "clickout"
                            },
                            mousemove: {
                                in: "over",
                                out: "out"
                            },
                            dblclick: {
                                in: "dblclick",
                                out: null
                            },
                            mousedown: {
                                in: null,
                                out: null
                            },
                            mouseup: {
                                in: null,
                                out: null
                            },
                            touchstart: {
                                in: "click",
                                out: "clickout"
                            }
                        },
                        feature: null,
                        lastFeature: null,
                        down: null,
                        up: null,
                        clickTolerance: 4,
                        geometryTypes: null,
                        stopClick: !0,
                        stopDown: !0,
                        stopUp: !1,
                        initialize: function (e, t, i, s) {
                            OpenLayers.Handler.prototype.initialize.apply(this, [e, i, s]), this.layer = t
                        },
                        touchstart: function (e) {
                            return this.startTouch(), !!OpenLayers.Event.isMultiTouch(e) || this.mousedown(e)
                        },
                        touchmove: function (e) {
                            OpenLayers.Event.preventDefault(e)
                        },
                        mousedown: function (e) {
                            return (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && (this.down = e.xy), !this.handle(e) || !this.stopDown
                        },
                        mouseup: function (e) {
                            return this.up = e.xy, !this.handle(e) || !this.stopUp
                        },
                        click: function (e) {
                            return !this.handle(e) || !this.stopClick
                        },
                        mousemove: function (e) {
                            return !this.callbacks.over && !this.callbacks.out || (this.handle(e), !0)
                        },
                        dblclick: function (e) {
                            return !this.handle(e)
                        },
                        geometryTypeMatches: function (e) {
                            return null == this.geometryTypes || -1 < OpenLayers.Util.indexOf(this.geometryTypes, e.geometry.CLASS_NAME)
                        },
                        handle: function (e) {
                            this.feature && !this.feature.layer && (this.feature = null);
                            var t = e.type,
                                i = !1,
                                s = !!this.feature,
                                r = "click" == t || "dblclick" == t || "touchstart" == t;
                            return (this.feature = this.layer.getFeatureFromEvent(e)) && !this.feature.layer && (this.feature = null), this.lastFeature && !this.lastFeature.layer && (this.lastFeature = null), this.feature ? ("touchstart" === t && OpenLayers.Event.preventDefault(e), e = this.feature != this.lastFeature, this.geometryTypeMatches(this.feature) ? (s && e ? (this.lastFeature && this.triggerCallback(t, "out", [this.lastFeature]), this.triggerCallback(t, "in", [this.feature])) : s && !r || this.triggerCallback(t, "in", [this.feature]), this.lastFeature = this.feature, i = !0) : (this.lastFeature && (s && e || r) && this.triggerCallback(t, "out", [this.lastFeature]), this.feature = null)) : this.lastFeature && (s || r) && this.triggerCallback(t, "out", [this.lastFeature]), i
                        },
                        triggerCallback: function (e, t, i) {
                            (t = this.EVENTMAP[e][t]) && ("click" == e && this.up && this.down ? (Math.sqrt(Math.pow(this.up.x - this.down.x, 2) + Math.pow(this.up.y - this.down.y, 2)) <= this.clickTolerance && this.callback(t, i), this.up = this.down = null) : this.callback(t, i))
                        },
                        activate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.moveLayerToTop(), this.map.events.on({
                                removelayer: this.handleMapEvents,
                                changelayer: this.handleMapEvents,
                                scope: this
                            }), e = !0), e
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.moveLayerBack(), this.up = this.down = this.lastFeature = this.feature = null, this.map.events.un({
                                removelayer: this.handleMapEvents,
                                changelayer: this.handleMapEvents,
                                scope: this
                            }), e = !0), e
                        },
                        handleMapEvents: function (e) {
                            "removelayer" != e.type && "order" != e.property || this.moveLayerToTop()
                        },
                        moveLayerToTop: function () {
                            var e = Math.max(this.map.Z_INDEX_BASE.Feature - 1, this.layer.getZIndex()) + 1;
                            this.layer.setZIndex(e)
                        },
                        moveLayerBack: function () {
                            var e = this.layer.getZIndex() - 1;
                            e >= this.map.Z_INDEX_BASE.Feature ? this.layer.setZIndex(e) : this.map.setLayerZIndex(this.layer, this.map.getLayerIndex(this.layer))
                        },
                        CLASS_NAME: "OpenLayers.Handler.Feature"
                    }), OpenLayers.Layer.Vector.RootContainer = OpenLayers.Class(OpenLayers.Layer.Vector, {
                        displayInLayerSwitcher: !1,
                        layers: null,
                        display: function () {},
                        getFeatureFromEvent: function (e) {
                            for (var t, i = this.layers, s = 0; s < i.length; s++)
                                if (t = i[s].getFeatureFromEvent(e)) return t
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments), this.collectRoots(), e.events.register("changelayer", this, this.handleChangeLayer)
                        },
                        removeMap: function (e) {
                            e.events.unregister("changelayer", this, this.handleChangeLayer), this.resetRoots(), OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments)
                        },
                        collectRoots: function () {
                            for (var e, t = 0; t < this.map.layers.length; ++t) e = this.map.layers[t], -1 != OpenLayers.Util.indexOf(this.layers, e) && e.renderer.moveRoot(this.renderer)
                        },
                        resetRoots: function () {
                            for (var e, t = 0; t < this.layers.length; ++t) e = this.layers[t], this.renderer && e.renderer.getRenderLayerId() == this.id && this.renderer.moveRoot(e.renderer)
                        },
                        handleChangeLayer: function (e) {
                            var t = e.layer;
                            "order" == e.property && -1 != OpenLayers.Util.indexOf(this.layers, t) && (this.resetRoots(), this.collectRoots())
                        },
                        CLASS_NAME: "OpenLayers.Layer.Vector.RootContainer"
                    }), OpenLayers.Control.SelectFeature = OpenLayers.Class(OpenLayers.Control, {
                        multipleKey: null,
                        toggleKey: null,
                        multiple: !1,
                        clickout: !0,
                        toggle: !1,
                        hover: !1,
                        highlightOnly: !1,
                        box: !1,
                        onBeforeSelect: function () {},
                        onSelect: function () {},
                        onUnselect: function () {},
                        scope: null,
                        geometryTypes: null,
                        layer: null,
                        layers: null,
                        callbacks: null,
                        selectStyle: null,
                        renderIntent: "select",
                        handlers: null,
                        initialize: function (e, t) {
                            OpenLayers.Control.prototype.initialize.apply(this, [t]), null === this.scope && (this.scope = this), this.initLayer(e);
                            var i = {
                                click: this.clickFeature,
                                clickout: this.clickoutFeature
                            };
                            this.hover && (i.over = this.overFeature, i.out = this.outFeature), this.callbacks = OpenLayers.Util.extend(i, this.callbacks), this.handlers = {
                                feature: new OpenLayers.Handler.Feature(this, this.layer, this.callbacks, {
                                    geometryTypes: this.geometryTypes
                                })
                            }, this.box && (this.handlers.box = new OpenLayers.Handler.Box(this, {
                                done: this.selectBox
                            }, {
                                boxDivClassName: "olHandlerBoxSelectFeature"
                            }))
                        },
                        initLayer: function (e) {
                            OpenLayers.Util.isArray(e) ? (this.layers = e, this.layer = new OpenLayers.Layer.Vector.RootContainer(this.id + "_container", {
                                layers: e
                            })) : this.layer = e
                        },
                        destroy: function () {
                            this.active && this.layers && this.map.removeLayer(this.layer), OpenLayers.Control.prototype.destroy.apply(this, arguments), this.layers && this.layer.destroy()
                        },
                        activate: function () {
                            return this.active || (this.layers && this.map.addLayer(this.layer), this.handlers.feature.activate(), this.box && this.handlers.box && this.handlers.box.activate()), OpenLayers.Control.prototype.activate.apply(this, arguments)
                        },
                        deactivate: function () {
                            return this.active && (this.handlers.feature.deactivate(), this.handlers.box && this.handlers.box.deactivate(), this.layers && this.map.removeLayer(this.layer)), OpenLayers.Control.prototype.deactivate.apply(this, arguments)
                        },
                        unselectAll: function (e) {
                            var t, i, s, r, n = this.layers || [this.layer];
                            for (s = 0; s < n.length; ++s)
                                if (r = 0, null != (t = n[s]).selectedFeatures)
                                    for (; t.selectedFeatures.length > r;) i = t.selectedFeatures[r], e && e.except == i ? ++r : this.unselect(i)
                        },
                        clickFeature: function (e) {
                            this.hover || (-1 < OpenLayers.Util.indexOf(e.layer.selectedFeatures, e) ? this.toggleSelect() ? this.unselect(e) : this.multipleSelect() || this.unselectAll({
                                except: e
                            }) : (this.multipleSelect() || this.unselectAll({
                                except: e
                            }), this.select(e)))
                        },
                        multipleSelect: function () {
                            return this.multiple || this.handlers.feature.evt && this.handlers.feature.evt[this.multipleKey]
                        },
                        toggleSelect: function () {
                            return this.toggle || this.handlers.feature.evt && this.handlers.feature.evt[this.toggleKey]
                        },
                        clickoutFeature: function (e) {
                            !this.hover && this.clickout && this.unselectAll()
                        },
                        overFeature: function (e) {
                            var t = e.layer;
                            this.hover && (this.highlightOnly ? this.highlight(e) : -1 == OpenLayers.Util.indexOf(t.selectedFeatures, e) && this.select(e))
                        },
                        outFeature: function (e) {
                            if (this.hover)
                                if (this.highlightOnly) {
                                    if (e._lastHighlighter == this.id)
                                        if (e._prevHighlighter && e._prevHighlighter != this.id) {
                                            delete e._lastHighlighter;
                                            var t = this.map.getControl(e._prevHighlighter);
                                            t && t.highlight(e)
                                        } else this.unhighlight(e)
                                } else this.unselect(e)
                        },
                        highlight: function (e) {
                            var t = e.layer;
                            !1 !== this.events.triggerEvent("beforefeaturehighlighted", {
                                feature: e
                            }) && (e._prevHighlighter = e._lastHighlighter, e._lastHighlighter = this.id, t.drawFeature(e, this.selectStyle || this.renderIntent), this.events.triggerEvent("featurehighlighted", {
                                feature: e
                            }))
                        },
                        unhighlight: function (e) {
                            var t = e.layer;
                            null == e._prevHighlighter ? delete e._lastHighlighter : (e._prevHighlighter != this.id && (e._lastHighlighter = e._prevHighlighter), delete e._prevHighlighter), t.drawFeature(e, e.style || e.layer.style || "default"), this.events.triggerEvent("featureunhighlighted", {
                                feature: e
                            })
                        },
                        select: function (e) {
                            var t = this.onBeforeSelect.call(this.scope, e),
                                i = e.layer;
                            !1 !== t && (!1 !== (t = i.events.triggerEvent("beforefeatureselected", {
                                feature: e
                            })) && (i.selectedFeatures.push(e), this.highlight(e), this.handlers.feature.lastFeature || (this.handlers.feature.lastFeature = i.selectedFeatures[0]), i.events.triggerEvent("featureselected", {
                                feature: e
                            }), this.onSelect.call(this.scope, e)))
                        },
                        unselect: function (e) {
                            var t = e.layer;
                            this.unhighlight(e), OpenLayers.Util.removeItem(t.selectedFeatures, e), t.events.triggerEvent("featureunselected", {
                                feature: e
                            }), this.onUnselect.call(this.scope, e)
                        },
                        selectBox: function (e) {
                            if (e instanceof OpenLayers.Bounds) {
                                var t = this.map.getLonLatFromPixel({
                                    x: e.left,
                                    y: e.bottom
                                });
                                e = this.map.getLonLatFromPixel({
                                    x: e.right,
                                    y: e.top
                                }), t = new OpenLayers.Bounds(t.lon, t.lat, e.lon, e.lat), this.multipleSelect() || this.unselectAll(), e = this.multiple, this.multiple = !0;
                                var i = this.layers || [this.layer];
                                this.events.triggerEvent("boxselectionstart", {
                                    layers: i
                                });
                                for (var s, r = 0; r < i.length; ++r)
                                    for (var n = 0, a = (s = i[r]).features.length; n < a; ++n) {
                                        var o = s.features[n];
                                        o.getVisibility() && (null == this.geometryTypes || -1 < OpenLayers.Util.indexOf(this.geometryTypes, o.geometry.CLASS_NAME)) && t.toGeometry().intersects(o.geometry) && -1 == OpenLayers.Util.indexOf(s.selectedFeatures, o) && this.select(o)
                                    }
                                this.multiple = e, this.events.triggerEvent("boxselectionend", {
                                    layers: i
                                })
                            }
                        },
                        setMap: function (e) {
                            this.handlers.feature.setMap(e), this.box && this.handlers.box.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments)
                        },
                        setLayer: function (e) {
                            var t = this.active;
                            this.unselectAll(), this.deactivate(), this.layers && (this.layer.destroy(), this.layers = null), this.initLayer(e), this.handlers.feature.layer = this.layer, t && this.activate()
                        },
                        CLASS_NAME: "OpenLayers.Control.SelectFeature"
                    }), OpenLayers.Handler.Point = OpenLayers.Class(OpenLayers.Handler, {
                        point: null,
                        layer: null,
                        multi: !1,
                        citeCompliant: !1,
                        mouseDown: !1,
                        stoppedDown: null,
                        lastDown: null,
                        lastUp: null,
                        persist: !1,
                        stopDown: !1,
                        stopUp: !1,
                        layerOptions: null,
                        pixelTolerance: 5,
                        lastTouchPx: null,
                        initialize: function (e, t, i) {
                            i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), OpenLayers.Handler.prototype.initialize.apply(this, arguments)
                        },
                        activate: function () {
                            if (!OpenLayers.Handler.prototype.activate.apply(this, arguments)) return !1;
                            var e = OpenLayers.Util.extend({
                                displayInLayerSwitcher: !1,
                                calculateInRange: OpenLayers.Function.True,
                                wrapDateLine: this.citeCompliant
                            }, this.layerOptions);
                            return this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, e), this.map.addLayer(this.layer), !0
                        },
                        createFeature: function (e) {
                            e = this.layer.getLonLatFromViewPortPx(e), e = new OpenLayers.Geometry.Point(e.lon, e.lat), this.point = new OpenLayers.Feature.Vector(e), this.callback("create", [this.point.geometry, this.point]), this.point.geometry.clearBounds(), this.layer.addFeatures([this.point], {
                                silent: !0
                            })
                        },
                        deactivate: function () {
                            return !!OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.cancel(), null != this.layer.map && (this.destroyFeature(!0), this.layer.destroy(!1)), this.layer = null, !0)
                        },
                        destroyFeature: function (e) {
                            !this.layer || !e && this.persist || this.layer.destroyFeatures(), this.point = null
                        },
                        destroyPersistedFeature: function () {
                            var e = this.layer;
                            e && 1 < e.features.length && this.layer.features[0].destroy()
                        },
                        finalize: function (e) {
                            this.mouseDown = !1, this.lastTouchPx = this.lastUp = this.lastDown = null, this.callback(e ? "cancel" : "done", [this.geometryClone()]), this.destroyFeature(e)
                        },
                        cancel: function () {
                            this.finalize(!0)
                        },
                        click: function (e) {
                            return OpenLayers.Event.stop(e), !1
                        },
                        dblclick: function (e) {
                            return OpenLayers.Event.stop(e), !1
                        },
                        modifyFeature: function (e) {
                            this.point || this.createFeature(e), e = this.layer.getLonLatFromViewPortPx(e), this.point.geometry.x = e.lon, this.point.geometry.y = e.lat, this.callback("modify", [this.point.geometry, this.point, !1]), this.point.geometry.clearBounds(), this.drawFeature()
                        },
                        drawFeature: function () {
                            this.layer.drawFeature(this.point, this.style)
                        },
                        getGeometry: function () {
                            var e = this.point && this.point.geometry;
                            return e && this.multi && (e = new OpenLayers.Geometry.MultiPoint([e])), e
                        },
                        geometryClone: function () {
                            var e = this.getGeometry();
                            return e && e.clone()
                        },
                        mousedown: function (e) {
                            return this.down(e)
                        },
                        touchstart: function (e) {
                            return this.startTouch(), this.lastTouchPx = e.xy, this.down(e)
                        },
                        mousemove: function (e) {
                            return this.move(e)
                        },
                        touchmove: function (e) {
                            return this.lastTouchPx = e.xy, this.move(e)
                        },
                        mouseup: function (e) {
                            return this.up(e)
                        },
                        touchend: function (e) {
                            return e.xy = this.lastTouchPx, this.up(e)
                        },
                        down: function (e) {
                            return this.mouseDown = !0, this.lastDown = e.xy, this.touch || this.modifyFeature(e.xy), this.stoppedDown = this.stopDown, !this.stopDown
                        },
                        move: function (e) {
                            return this.touch || this.mouseDown && !this.stoppedDown || this.modifyFeature(e.xy), !0
                        },
                        up: function (e) {
                            return this.mouseDown = !1, this.stoppedDown = this.stopDown, !(!(!this.checkModifiers(e) || this.lastUp && this.lastUp.equals(e.xy)) && this.lastDown && this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance)) || (this.touch && this.modifyFeature(e.xy), this.persist && this.destroyPersistedFeature(), this.lastUp = e.xy, this.finalize(), !this.stopUp)
                        },
                        mouseout: function (e) {
                            OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv) && (this.stoppedDown = this.stopDown, this.mouseDown = !1)
                        },
                        passesTolerance: function (e, t, i) {
                            var s = !0;
                            return null != i && e && t && e.distanceTo(t) > i && (s = !1), s
                        },
                        CLASS_NAME: "OpenLayers.Handler.Point"
                    }), OpenLayers.Handler.Path = OpenLayers.Class(OpenLayers.Handler.Point, {
                        line: null,
                        maxVertices: null,
                        doubleTouchTolerance: 20,
                        freehand: !1,
                        freehandToggle: "shiftKey",
                        timerId: null,
                        redoStack: null,
                        createFeature: function (e) {
                            e = this.layer.getLonLatFromViewPortPx(e), e = new OpenLayers.Geometry.Point(e.lon, e.lat), this.point = new OpenLayers.Feature.Vector(e), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])), this.callback("create", [this.point.geometry, this.getSketch()]), this.point.geometry.clearBounds(), this.layer.addFeatures([this.line, this.point], {
                                silent: !0
                            })
                        },
                        destroyFeature: function (e) {
                            OpenLayers.Handler.Point.prototype.destroyFeature.call(this, e), this.line = null
                        },
                        destroyPersistedFeature: function () {
                            var e = this.layer;
                            e && 2 < e.features.length && this.layer.features[0].destroy()
                        },
                        removePoint: function () {
                            this.point && this.layer.removeFeatures([this.point])
                        },
                        addPoint: function (e) {
                            this.layer.removeFeatures([this.point]), e = this.layer.getLonLatFromViewPortPx(e), this.point = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e.lon, e.lat)), this.line.geometry.addComponent(this.point.geometry, this.line.geometry.components.length), this.layer.addFeatures([this.point]), this.callback("point", [this.point.geometry, this.getGeometry()]), this.callback("modify", [this.point.geometry, this.getSketch()]), this.drawFeature(), delete this.redoStack
                        },
                        insertXY: function (e, t) {
                            this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e, t), this.getCurrentPointIndex()), this.drawFeature(), delete this.redoStack
                        },
                        insertDeltaXY: function (e, t) {
                            var i = this.getCurrentPointIndex() - 1;
                            !(i = this.line.geometry.components[i]) || isNaN(i.x) || isNaN(i.y) || this.insertXY(i.x + e, i.y + t)
                        },
                        insertDirectionLength: function (e, t) {
                            e *= Math.PI / 180;
                            var i = t * Math.cos(e),
                                s = t * Math.sin(e);
                            this.insertDeltaXY(i, s)
                        },
                        insertDeflectionLength: function (e, t) {
                            if (0 < (s = this.getCurrentPointIndex() - 1)) {
                                var i = this.line.geometry.components[s],
                                    s = this.line.geometry.components[s - 1];
                                i = Math.atan2(i.y - s.y, i.x - s.x);
                                this.insertDirectionLength(180 * i / Math.PI + e, t)
                            }
                        },
                        getCurrentPointIndex: function () {
                            return this.line.geometry.components.length - 1
                        },
                        undo: function () {
                            var e = this.line.geometry,
                                t = e.components,
                                i = this.getCurrentPointIndex() - 1,
                                s = t[i],
                                r = e.removeComponent(s);
                            return r && (this.touch && 0 < i && (e = (t = e.components)[i - 1], (t = t[i = this.getCurrentPointIndex()]).x = e.x, t.y = e.y), this.redoStack || (this.redoStack = []), this.redoStack.push(s), this.drawFeature()), r
                        },
                        redo: function () {
                            var e = this.redoStack && this.redoStack.pop();
                            return e && (this.line.geometry.addComponent(e, this.getCurrentPointIndex()), this.drawFeature()), !!e
                        },
                        freehandMode: function (e) {
                            return this.freehandToggle && e[this.freehandToggle] ? !this.freehand : this.freehand
                        },
                        modifyFeature: function (e, t) {
                            this.line || this.createFeature(e);
                            var i = this.layer.getLonLatFromViewPortPx(e);
                            this.point.geometry.x = i.lon, this.point.geometry.y = i.lat, this.callback("modify", [this.point.geometry, this.getSketch(), t]), this.point.geometry.clearBounds(), this.drawFeature()
                        },
                        drawFeature: function () {
                            this.layer.drawFeature(this.line, this.style), this.layer.drawFeature(this.point, this.style)
                        },
                        getSketch: function () {
                            return this.line
                        },
                        getGeometry: function () {
                            var e = this.line && this.line.geometry;
                            return e && this.multi && (e = new OpenLayers.Geometry.MultiLineString([e])), e
                        },
                        touchstart: function (e) {
                            return this.timerId && this.passesTolerance(this.lastTouchPx, e.xy, this.doubleTouchTolerance) ? (this.finishGeometry(), window.clearTimeout(this.timerId), this.timerId = null, !1) : (this.timerId && (window.clearTimeout(this.timerId), this.timerId = null), this.timerId = window.setTimeout(OpenLayers.Function.bind((function () {
                                this.timerId = null
                            }), this), 300), OpenLayers.Handler.Point.prototype.touchstart.call(this, e))
                        },
                        down: function (e) {
                            var t = this.stopDown;
                            return this.freehandMode(e) && (t = !0, this.touch && (this.modifyFeature(e.xy, !!this.lastUp), OpenLayers.Event.stop(e))), this.touch || this.lastDown && this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) || this.modifyFeature(e.xy, !!this.lastUp), this.mouseDown = !0, this.lastDown = e.xy, this.stoppedDown = t, !t
                        },
                        move: function (e) {
                            return this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), this.maxVertices && this.line && this.line.geometry.components.length === this.maxVertices ? (this.removePoint(), this.finalize()) : this.addPoint(e.xy), !1) : (this.touch || this.mouseDown && !this.stoppedDown || this.modifyFeature(e.xy, !!this.lastUp), !0)
                        },
                        up: function (e) {
                            return !this.mouseDown || this.lastUp && this.lastUp.equals(e.xy) || (this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), this.removePoint(), this.finalize()) : this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) && (this.touch && this.modifyFeature(e.xy), null == this.lastUp && this.persist && this.destroyPersistedFeature(), this.addPoint(e.xy), this.lastUp = e.xy, this.line.geometry.components.length === this.maxVertices + 1 && this.finishGeometry())), this.stoppedDown = this.stopDown, this.mouseDown = !1, !this.stopUp
                        },
                        finishGeometry: function () {
                            this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length - 1]), this.removePoint(), this.finalize()
                        },
                        dblclick: function (e) {
                            return this.freehandMode(e) || this.finishGeometry(), !1
                        },
                        CLASS_NAME: "OpenLayers.Handler.Path"
                    }), OpenLayers.Spherical = OpenLayers.Spherical || {}, OpenLayers.Spherical.DEFAULT_RADIUS = 6378137, OpenLayers.Spherical.computeDistanceBetween = function (e, t, i) {
                        i = i || OpenLayers.Spherical.DEFAULT_RADIUS;
                        var s = Math.sin(Math.PI * (t.lon - e.lon) / 360),
                            r = Math.sin(Math.PI * (t.lat - e.lat) / 360);
                        return e = r * r + s * s * Math.cos(Math.PI * e.lat / 180) * Math.cos(Math.PI * t.lat / 180), 2 * i * Math.atan2(Math.sqrt(e), Math.sqrt(1 - e))
                    }, OpenLayers.Spherical.computeHeading = function (e, t) {
                        var i = Math.sin(Math.PI * (e.lon - t.lon) / 180) * Math.cos(Math.PI * t.lat / 180),
                            s = Math.cos(Math.PI * e.lat / 180) * Math.sin(Math.PI * t.lat / 180) - Math.sin(Math.PI * e.lat / 180) * Math.cos(Math.PI * t.lat / 180) * Math.cos(Math.PI * (e.lon - t.lon) / 180);
                        return 180 * Math.atan2(i, s) / Math.PI
                    }, OpenLayers.Control.CacheWrite = OpenLayers.Class(OpenLayers.Control, {
                        layers: null,
                        imageFormat: "image/png",
                        quotaRegEx: /quota/i,
                        setMap: function (e) {
                            OpenLayers.Control.prototype.setMap.apply(this, arguments);
                            var t, i = this.layers || e.layers;
                            for (t = i.length - 1; 0 <= t; --t) this.addLayer({
                                layer: i[t]
                            });
                            this.layers || e.events.on({
                                addlayer: this.addLayer,
                                removeLayer: this.removeLayer,
                                scope: this
                            })
                        },
                        addLayer: function (e) {
                            e.layer.events.on({
                                tileloadstart: this.makeSameOrigin,
                                tileloaded: this.onTileLoaded,
                                scope: this
                            })
                        },
                        removeLayer: function (e) {
                            e.layer.events.un({
                                tileloadstart: this.makeSameOrigin,
                                tileloaded: this.onTileLoaded,
                                scope: this
                            })
                        },
                        makeSameOrigin: function (e) {
                            if (this.active && ((e = e.tile) instanceof OpenLayers.Tile.Image && !e.crossOriginKeyword && "data:" !== e.url.substr(0, 5))) {
                                var t = OpenLayers.Request.makeSameOrigin(e.url, OpenLayers.ProxyHost);
                                OpenLayers.Control.CacheWrite.urlMap[t] = e.url, e.url = t
                            }
                        },
                        onTileLoaded: function (e) {
                            this.active && !e.aborted && e.tile instanceof OpenLayers.Tile.Image && "data:" !== e.tile.url.substr(0, 5) && (this.cache({
                                tile: e.tile
                            }), delete OpenLayers.Control.CacheWrite.urlMap[e.tile.url])
                        },
                        cache: function (e) {
                            if (window.localStorage) {
                                e = e.tile;
                                try {
                                    var t = e.getCanvasContext();
                                    t && window.localStorage.setItem("olCache_" + (OpenLayers.Control.CacheWrite.urlMap[e.url] || e.url), t.canvas.toDataURL(this.imageFormat))
                                } catch (i) {
                                    (t = i.name || i.message) && this.quotaRegEx.test(t) ? this.events.triggerEvent("cachefull", {
                                        tile: e
                                    }) : OpenLayers.Console.error(i.toString())
                                }
                            }
                        },
                        destroy: function () {
                            if (this.layers || this.map) {
                                var e, t = this.layers || this.map.layers;
                                for (e = t.length - 1; 0 <= e; --e) this.removeLayer({
                                    layer: t[e]
                                })
                            }
                            this.map && this.map.events.un({
                                addlayer: this.addLayer,
                                removeLayer: this.removeLayer,
                                scope: this
                            }), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Control.CacheWrite"
                    }), OpenLayers.Control.CacheWrite.clearCache = function () {
                        var e, t;
                        if (window.localStorage)
                            for (e = window.localStorage.length - 1; 0 <= e; --e) "olCache_" === (t = window.localStorage.key(e)).substr(0, 8) && window.localStorage.removeItem(t)
                    }, OpenLayers.Control.CacheWrite.urlMap = {}, OpenLayers.Format.Context = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        layerOptions: null,
                        layerParams: null,
                        read: function (e, t) {
                            var i = OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this, arguments);
                            if (t && t.map)
                                if (this.context = i, t.map instanceof OpenLayers.Map) i = this.mergeContextToMap(i, t.map);
                                else {
                                    var s = t.map;
                                    (OpenLayers.Util.isElement(s) || "string" == typeof s) && (s = {
                                        div: s
                                    }), i = this.contextToMap(i, s)
                                } return i
                        },
                        getLayerFromContext: function (e) {
                            var t, i, s = {
                                queryable: e.queryable,
                                visibility: e.visibility,
                                maxExtent: e.maxExtent,
                                metadata: OpenLayers.Util.applyDefaults(e.metadata, {
                                    styles: e.styles,
                                    formats: e.formats,
                                    abstract: e.abstract,
                                    dataURL: e.dataURL
                                }),
                                numZoomLevels: e.numZoomLevels,
                                units: e.units,
                                isBaseLayer: e.isBaseLayer,
                                opacity: e.opacity,
                                displayInLayerSwitcher: e.displayInLayerSwitcher,
                                singleTile: e.singleTile,
                                tileSize: e.tileSize ? new OpenLayers.Size(e.tileSize.width, e.tileSize.height) : void 0,
                                minScale: e.minScale || e.maxScaleDenominator,
                                maxScale: e.maxScale || e.minScaleDenominator,
                                srs: e.srs,
                                dimensions: e.dimensions,
                                metadataURL: e.metadataURL
                            };
                            this.layerOptions && OpenLayers.Util.applyDefaults(s, this.layerOptions);
                            var r = {
                                layers: e.name,
                                transparent: e.transparent,
                                version: e.version
                            };
                            if (e.formats && 0 < e.formats.length)
                                for (r.format = e.formats[0].value, t = 0, i = e.formats.length; t < i; t++) {
                                    var n = e.formats[t];
                                    if (1 == n.current) {
                                        r.format = n.value;
                                        break
                                    }
                                }
                            if (e.styles && 0 < e.styles.length)
                                for (t = 0, i = e.styles.length; t < i; t++)
                                    if (1 == (n = e.styles[t]).current) {
                                        n.href ? r.sld = n.href : n.body ? r.sld_body = n.body : r.styles = n.name;
                                        break
                                    } return this.layerParams && OpenLayers.Util.applyDefaults(r, this.layerParams), t = null, (i = e.service) == OpenLayers.Format.Context.serviceTypes.WFS ? (s.strategies = [new OpenLayers.Strategy.BBOX], s.protocol = new OpenLayers.Protocol.WFS({
                                url: e.url,
                                featurePrefix: e.name.split(":")[0],
                                featureType: e.name.split(":").pop()
                            }), t = new OpenLayers.Layer.Vector(e.title || e.name, s)) : i == OpenLayers.Format.Context.serviceTypes.KML ? (s.strategies = [new OpenLayers.Strategy.Fixed], s.protocol = new OpenLayers.Protocol.HTTP({
                                url: e.url,
                                format: new OpenLayers.Format.KML
                            }), t = new OpenLayers.Layer.Vector(e.title || e.name, s)) : i == OpenLayers.Format.Context.serviceTypes.GML ? (s.strategies = [new OpenLayers.Strategy.Fixed], s.protocol = new OpenLayers.Protocol.HTTP({
                                url: e.url,
                                format: new OpenLayers.Format.GML
                            }), t = new OpenLayers.Layer.Vector(e.title || e.name, s)) : e.features ? (t = new OpenLayers.Layer.Vector(e.title || e.name, s)).addFeatures(e.features) : !0 !== e.categoryLayer && (t = new OpenLayers.Layer.WMS(e.title || e.name, e.url, r, s)), t
                        },
                        getLayersFromContext: function (e) {
                            for (var t = [], i = 0, s = e.length; i < s; i++) {
                                var r = this.getLayerFromContext(e[i]);
                                null !== r && t.push(r)
                            }
                            return t
                        },
                        contextToMap: function (e, t) {
                            (t = OpenLayers.Util.applyDefaults({
                                maxExtent: e.maxExtent,
                                projection: e.projection,
                                units: e.units
                            }, t)).maxExtent && (t.maxResolution = t.maxExtent.getWidth() / OpenLayers.Map.TILE_WIDTH), t.metadata = {
                                contactInformation: e.contactInformation,
                                abstract: e.abstract,
                                keywords: e.keywords,
                                logo: e.logo,
                                descriptionURL: e.descriptionURL
                            };
                            var i = new OpenLayers.Map(t);
                            return i.addLayers(this.getLayersFromContext(e.layersContext)), i.setCenter(e.bounds.getCenterLonLat(), i.getZoomForExtent(e.bounds, !0)), i
                        },
                        mergeContextToMap: function (e, t) {
                            return t.addLayers(this.getLayersFromContext(e.layersContext)), t
                        },
                        write: function (e, t) {
                            return e = this.toContext(e), OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Format.Context"
                    }), OpenLayers.Format.Context.serviceTypes = {
                        WMS: "urn:ogc:serviceType:WMS",
                        WFS: "urn:ogc:serviceType:WFS",
                        WCS: "urn:ogc:serviceType:WCS",
                        GML: "urn:ogc:serviceType:GML",
                        SLD: "urn:ogc:serviceType:SLD",
                        FES: "urn:ogc:serviceType:FES",
                        KML: "urn:ogc:serviceType:KML"
                    }, OpenLayers.Format.WMC = OpenLayers.Class(OpenLayers.Format.Context, {
                        defaultVersion: "1.1.0",
                        layerToContext: function (e) {
                            var t = this.getParser(),
                                i = {
                                    queryable: e.queryable,
                                    visibility: e.visibility,
                                    name: e.params.LAYERS,
                                    title: e.name,
                                    abstract: e.metadata.abstract,
                                    dataURL: e.metadata.dataURL,
                                    metadataURL: e.metadataURL,
                                    server: {
                                        version: e.params.VERSION,
                                        url: e.url
                                    },
                                    maxExtent: e.maxExtent,
                                    transparent: e.params.TRANSPARENT,
                                    numZoomLevels: e.numZoomLevels,
                                    units: e.units,
                                    isBaseLayer: e.isBaseLayer,
                                    opacity: 1 == e.opacity ? void 0 : e.opacity,
                                    displayInLayerSwitcher: e.displayInLayerSwitcher,
                                    singleTile: e.singleTile,
                                    tileSize: e.singleTile || !e.tileSize ? void 0 : {
                                        width: e.tileSize.w,
                                        height: e.tileSize.h
                                    },
                                    minScale: e.options.resolutions || e.options.scales || e.options.maxResolution || e.options.minScale ? e.minScale : void 0,
                                    maxScale: e.options.resolutions || e.options.scales || e.options.minResolution || e.options.maxScale ? e.maxScale : void 0,
                                    formats: [],
                                    styles: [],
                                    srs: e.srs,
                                    dimensions: e.dimensions
                                };
                            if (e.metadata.servertitle && (i.server.title = e.metadata.servertitle), e.metadata.formats && 0 < e.metadata.formats.length)
                                for (var s = 0, r = e.metadata.formats.length; s < r; s++) {
                                    var n = e.metadata.formats[s];
                                    i.formats.push({
                                        value: n.value,
                                        current: n.value == e.params.FORMAT
                                    })
                                } else i.formats.push({
                                    value: e.params.FORMAT,
                                    current: !0
                                });
                            if (e.metadata.styles && 0 < e.metadata.styles.length)
                                for (s = 0, r = e.metadata.styles.length; s < r; s++)(t = e.metadata.styles[s]).current = t.href == e.params.SLD || t.body == e.params.SLD_BODY || t.name == e.params.STYLES, i.styles.push(t);
                            else i.styles.push({
                                href: e.params.SLD,
                                body: e.params.SLD_BODY,
                                name: e.params.STYLES || t.defaultStyleName,
                                title: t.defaultStyleTitle,
                                current: !0
                            });
                            return i
                        },
                        toContext: function (e) {
                            var t = {},
                                i = e.layers;
                            if ("OpenLayers.Map" == e.CLASS_NAME) {
                                var s = e.metadata || {};
                                t.size = e.getSize(), t.bounds = e.getExtent(), t.projection = e.projection, t.title = e.title, t.keywords = s.keywords, t.abstract = s.abstract, t.logo = s.logo, t.descriptionURL = s.descriptionURL, t.contactInformation = s.contactInformation, t.maxExtent = e.maxExtent
                            } else OpenLayers.Util.applyDefaults(t, e), null != t.layers && delete t.layers;
                            if (null == t.layersContext && (t.layersContext = []), null != i && OpenLayers.Util.isArray(i))
                                for (e = 0, s = i.length; e < s; e++) {
                                    var r = i[e];
                                    r instanceof OpenLayers.Layer.WMS && t.layersContext.push(this.layerToContext(r))
                                }
                            return t
                        },
                        CLASS_NAME: "OpenLayers.Format.WMC"
                    }), OpenLayers.Format.WMC.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            ol: "http://openlayers.org/context",
                            wmc: "http://www.opengis.net/context",
                            sld: "http://www.opengis.net/sld",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        schemaLocation: "",
                        getNamespacePrefix: function (e) {
                            var t = null;
                            if (null == e) t = this.namespaces[this.defaultPrefix];
                            else
                                for (t in this.namespaces)
                                    if (this.namespaces[t] == e) break;
                            return t
                        },
                        defaultPrefix: "wmc",
                        rootPrefix: null,
                        defaultStyleName: "",
                        defaultStyleTitle: "Default",
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e = e.documentElement, this.rootPrefix = e.prefix;
                            var t = {
                                version: e.getAttribute("version")
                            };
                            return this.runChildNodes(t, e), t
                        },
                        runChildNodes: function (e, t) {
                            for (var i, s, r = t.childNodes, n = 0, a = r.length; n < a; ++n) 1 == (i = r[n]).nodeType && ((s = this["read_" + (s = this.getNamespacePrefix(i.namespaceURI)) + "_" + i.nodeName.split(":").pop()]) && s.apply(this, [e, i]))
                        },
                        read_wmc_General: function (e, t) {
                            this.runChildNodes(e, t)
                        },
                        read_wmc_BoundingBox: function (e, t) {
                            e.projection = t.getAttribute("SRS"), e.bounds = new OpenLayers.Bounds(t.getAttribute("minx"), t.getAttribute("miny"), t.getAttribute("maxx"), t.getAttribute("maxy"))
                        },
                        read_wmc_LayerList: function (e, t) {
                            e.layersContext = [], this.runChildNodes(e, t)
                        },
                        read_wmc_Layer: function (e, t) {
                            var i = {
                                visibility: "1" != t.getAttribute("hidden"),
                                queryable: "1" == t.getAttribute("queryable"),
                                formats: [],
                                styles: [],
                                metadata: {}
                            };
                            this.runChildNodes(i, t), e.layersContext.push(i)
                        },
                        read_wmc_Extension: function (e, t) {
                            this.runChildNodes(e, t)
                        },
                        read_ol_units: function (e, t) {
                            e.units = this.getChildValue(t)
                        },
                        read_ol_maxExtent: function (e, t) {
                            var i = new OpenLayers.Bounds(t.getAttribute("minx"), t.getAttribute("miny"), t.getAttribute("maxx"), t.getAttribute("maxy"));
                            e.maxExtent = i
                        },
                        read_ol_transparent: function (e, t) {
                            e.transparent = this.getChildValue(t)
                        },
                        read_ol_numZoomLevels: function (e, t) {
                            e.numZoomLevels = parseInt(this.getChildValue(t))
                        },
                        read_ol_opacity: function (e, t) {
                            e.opacity = parseFloat(this.getChildValue(t))
                        },
                        read_ol_singleTile: function (e, t) {
                            e.singleTile = "true" == this.getChildValue(t)
                        },
                        read_ol_tileSize: function (e, t) {
                            var i = {
                                width: t.getAttribute("width"),
                                height: t.getAttribute("height")
                            };
                            e.tileSize = i
                        },
                        read_ol_isBaseLayer: function (e, t) {
                            e.isBaseLayer = "true" == this.getChildValue(t)
                        },
                        read_ol_displayInLayerSwitcher: function (e, t) {
                            e.displayInLayerSwitcher = "true" == this.getChildValue(t)
                        },
                        read_wmc_Server: function (e, t) {
                            e.version = t.getAttribute("version"), e.url = this.getOnlineResource_href(t), e.metadata.servertitle = t.getAttribute("title")
                        },
                        read_wmc_FormatList: function (e, t) {
                            this.runChildNodes(e, t)
                        },
                        read_wmc_Format: function (e, t) {
                            var i = {
                                value: this.getChildValue(t)
                            };
                            "1" == t.getAttribute("current") && (i.current = !0), e.formats.push(i)
                        },
                        read_wmc_StyleList: function (e, t) {
                            this.runChildNodes(e, t)
                        },
                        read_wmc_Style: function (e, t) {
                            var i = {};
                            this.runChildNodes(i, t), "1" == t.getAttribute("current") && (i.current = !0), e.styles.push(i)
                        },
                        read_wmc_SLD: function (e, t) {
                            this.runChildNodes(e, t)
                        },
                        read_sld_StyledLayerDescriptor: function (e, t) {
                            var i = OpenLayers.Format.XML.prototype.write.apply(this, [t]);
                            e.body = i
                        },
                        read_sld_FeatureTypeStyle: function (e, t) {
                            var i = OpenLayers.Format.XML.prototype.write.apply(this, [t]);
                            e.body = i
                        },
                        read_wmc_OnlineResource: function (e, t) {
                            e.href = this.getAttributeNS(t, this.namespaces.xlink, "href")
                        },
                        read_wmc_Name: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.name = i)
                        },
                        read_wmc_Title: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.title = i)
                        },
                        read_wmc_MetadataURL: function (e, t) {
                            e.metadataURL = this.getOnlineResource_href(t)
                        },
                        read_wmc_KeywordList: function (e, t) {
                            e.keywords = [], this.runChildNodes(e.keywords, t)
                        },
                        read_wmc_Keyword: function (e, t) {
                            e.push(this.getChildValue(t))
                        },
                        read_wmc_Abstract: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.abstract = i)
                        },
                        read_wmc_LogoURL: function (e, t) {
                            e.logo = {
                                width: t.getAttribute("width"),
                                height: t.getAttribute("height"),
                                format: t.getAttribute("format"),
                                href: this.getOnlineResource_href(t)
                            }
                        },
                        read_wmc_DescriptionURL: function (e, t) {
                            e.descriptionURL = this.getOnlineResource_href(t)
                        },
                        read_wmc_ContactInformation: function (e, t) {
                            var i = {};
                            this.runChildNodes(i, t), e.contactInformation = i
                        },
                        read_wmc_ContactPersonPrimary: function (e, t) {
                            var i = {};
                            this.runChildNodes(i, t), e.personPrimary = i
                        },
                        read_wmc_ContactPerson: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.person = i)
                        },
                        read_wmc_ContactOrganization: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.organization = i)
                        },
                        read_wmc_ContactPosition: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.position = i)
                        },
                        read_wmc_ContactAddress: function (e, t) {
                            var i = {};
                            this.runChildNodes(i, t), e.contactAddress = i
                        },
                        read_wmc_AddressType: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.type = i)
                        },
                        read_wmc_Address: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.address = i)
                        },
                        read_wmc_City: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.city = i)
                        },
                        read_wmc_StateOrProvince: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.stateOrProvince = i)
                        },
                        read_wmc_PostCode: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.postcode = i)
                        },
                        read_wmc_Country: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.country = i)
                        },
                        read_wmc_ContactVoiceTelephone: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.phone = i)
                        },
                        read_wmc_ContactFacsimileTelephone: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.fax = i)
                        },
                        read_wmc_ContactElectronicMailAddress: function (e, t) {
                            var i = this.getChildValue(t);
                            i && (e.email = i)
                        },
                        read_wmc_DataURL: function (e, t) {
                            e.dataURL = this.getOnlineResource_href(t)
                        },
                        read_wmc_LegendURL: function (e, t) {
                            var i = {
                                width: t.getAttribute("width"),
                                height: t.getAttribute("height"),
                                format: t.getAttribute("format"),
                                href: this.getOnlineResource_href(t)
                            };
                            e.legend = i
                        },
                        read_wmc_DimensionList: function (e, t) {
                            e.dimensions = {}, this.runChildNodes(e.dimensions, t)
                        },
                        read_wmc_Dimension: function (e, t) {
                            var i = {
                                    name: t.getAttribute("name").toLowerCase(),
                                    units: t.getAttribute("units") || "",
                                    unitSymbol: t.getAttribute("unitSymbol") || "",
                                    userValue: t.getAttribute("userValue") || "",
                                    nearestValue: "1" === t.getAttribute("nearestValue"),
                                    multipleValues: "1" === t.getAttribute("multipleValues"),
                                    current: "1" === t.getAttribute("current"),
                                    default: t.getAttribute("default") || ""
                                },
                                s = this.getChildValue(t);
                            i.values = s.split(","), e[i.name] = i
                        },
                        write: function (e, t) {
                            var i = this.createElementDefaultNS("ViewContext");
                            return this.setAttributes(i, {
                                version: this.VERSION,
                                id: t && "string" == typeof t.id ? t.id : OpenLayers.Util.createUniqueID("OpenLayers_Context_")
                            }), this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), i.appendChild(this.write_wmc_General(e)), i.appendChild(this.write_wmc_LayerList(e)), OpenLayers.Format.XML.prototype.write.apply(this, [i])
                        },
                        createElementDefaultNS: function (e, t, i) {
                            return e = this.createElementNS(this.namespaces[this.defaultPrefix], e), t && e.appendChild(this.createTextNode(t)), i && this.setAttributes(e, i), e
                        },
                        setAttributes: function (e, t) {
                            var i, s;
                            for (s in t)(i = t[s].toString()).match(/[A-Z]/) ? this.setAttributeNS(e, null, s, i) : e.setAttribute(s, i)
                        },
                        write_wmc_General: function (e) {
                            var t = this.createElementDefaultNS("General");
                            e.size && t.appendChild(this.createElementDefaultNS("Window", null, {
                                width: e.size.w,
                                height: e.size.h
                            }));
                            var i = e.bounds;
                            return t.appendChild(this.createElementDefaultNS("BoundingBox", null, {
                                minx: i.left.toPrecision(18),
                                miny: i.bottom.toPrecision(18),
                                maxx: i.right.toPrecision(18),
                                maxy: i.top.toPrecision(18),
                                SRS: e.projection
                            })), t.appendChild(this.createElementDefaultNS("Title", e.title)), e.keywords && t.appendChild(this.write_wmc_KeywordList(e.keywords)), e.abstract && t.appendChild(this.createElementDefaultNS("Abstract", e.abstract)), e.logo && t.appendChild(this.write_wmc_URLType("LogoURL", e.logo.href, e.logo)), e.descriptionURL && t.appendChild(this.write_wmc_URLType("DescriptionURL", e.descriptionURL)), e.contactInformation && t.appendChild(this.write_wmc_ContactInformation(e.contactInformation)), t.appendChild(this.write_ol_MapExtension(e)), t
                        },
                        write_wmc_KeywordList: function (e) {
                            for (var t = this.createElementDefaultNS("KeywordList"), i = 0, s = e.length; i < s; i++) t.appendChild(this.createElementDefaultNS("Keyword", e[i]));
                            return t
                        },
                        write_wmc_ContactInformation: function (e) {
                            var t = this.createElementDefaultNS("ContactInformation");
                            return e.personPrimary && t.appendChild(this.write_wmc_ContactPersonPrimary(e.personPrimary)), e.position && t.appendChild(this.createElementDefaultNS("ContactPosition", e.position)), e.contactAddress && t.appendChild(this.write_wmc_ContactAddress(e.contactAddress)), e.phone && t.appendChild(this.createElementDefaultNS("ContactVoiceTelephone", e.phone)), e.fax && t.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone", e.fax)), e.email && t.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress", e.email)), t
                        },
                        write_wmc_ContactPersonPrimary: function (e) {
                            var t = this.createElementDefaultNS("ContactPersonPrimary");
                            return e.person && t.appendChild(this.createElementDefaultNS("ContactPerson", e.person)), e.organization && t.appendChild(this.createElementDefaultNS("ContactOrganization", e.organization)), t
                        },
                        write_wmc_ContactAddress: function (e) {
                            var t = this.createElementDefaultNS("ContactAddress");
                            return e.type && t.appendChild(this.createElementDefaultNS("AddressType", e.type)), e.address && t.appendChild(this.createElementDefaultNS("Address", e.address)), e.city && t.appendChild(this.createElementDefaultNS("City", e.city)), e.stateOrProvince && t.appendChild(this.createElementDefaultNS("StateOrProvince", e.stateOrProvince)), e.postcode && t.appendChild(this.createElementDefaultNS("PostCode", e.postcode)), e.country && t.appendChild(this.createElementDefaultNS("Country", e.country)), t
                        },
                        write_ol_MapExtension: function (e) {
                            var t = this.createElementDefaultNS("Extension");
                            if (e = e.maxExtent) {
                                var i = this.createElementNS(this.namespaces.ol, "ol:maxExtent");
                                this.setAttributes(i, {
                                    minx: e.left.toPrecision(18),
                                    miny: e.bottom.toPrecision(18),
                                    maxx: e.right.toPrecision(18),
                                    maxy: e.top.toPrecision(18)
                                }), t.appendChild(i)
                            }
                            return t
                        },
                        write_wmc_LayerList: function (e) {
                            for (var t = this.createElementDefaultNS("LayerList"), i = 0, s = e.layersContext.length; i < s; ++i) t.appendChild(this.write_wmc_Layer(e.layersContext[i]));
                            return t
                        },
                        write_wmc_Layer: function (e) {
                            var t = this.createElementDefaultNS("Layer", null, {
                                queryable: e.queryable ? "1" : "0",
                                hidden: e.visibility ? "0" : "1"
                            });
                            return t.appendChild(this.write_wmc_Server(e)), t.appendChild(this.createElementDefaultNS("Name", e.name)), t.appendChild(this.createElementDefaultNS("Title", e.title)), e.abstract && t.appendChild(this.createElementDefaultNS("Abstract", e.abstract)), e.dataURL && t.appendChild(this.write_wmc_URLType("DataURL", e.dataURL)), e.metadataURL && t.appendChild(this.write_wmc_URLType("MetadataURL", e.metadataURL)), t
                        },
                        write_wmc_LayerExtension: function (e) {
                            var t = this.createElementDefaultNS("Extension"),
                                i = e.maxExtent,
                                s = this.createElementNS(this.namespaces.ol, "ol:maxExtent");
                            this.setAttributes(s, {
                                minx: i.left.toPrecision(18),
                                miny: i.bottom.toPrecision(18),
                                maxx: i.right.toPrecision(18),
                                maxy: i.top.toPrecision(18)
                            }), t.appendChild(s), e.tileSize && !e.singleTile && (i = this.createElementNS(this.namespaces.ol, "ol:tileSize"), this.setAttributes(i, e.tileSize), t.appendChild(i));
                            for (var r = 0, n = (i = "transparent numZoomLevels units isBaseLayer opacity displayInLayerSwitcher singleTile".split(" ")).length; r < n; ++r)(s = this.createOLPropertyNode(e, i[r])) && t.appendChild(s);
                            return t
                        },
                        createOLPropertyNode: function (e, t) {
                            var i = null;
                            return null != e[t] && (i = this.createElementNS(this.namespaces.ol, "ol:" + t)).appendChild(this.createTextNode(e[t].toString())), i
                        },
                        write_wmc_Server: function (e) {
                            e = e.server;
                            var t = this.createElementDefaultNS("Server"),
                                i = {
                                    service: "OGC:WMS",
                                    version: e.version
                                };
                            return e.title && (i.title = e.title), this.setAttributes(t, i), t.appendChild(this.write_wmc_OnlineResource(e.url)), t
                        },
                        write_wmc_URLType: function (e, t, i) {
                            if ((e = this.createElementDefaultNS(e)).appendChild(this.write_wmc_OnlineResource(t)), i) {
                                t = ["width", "height", "format"];
                                for (var s = 0; s < t.length; s++) t[s] in i && e.setAttribute(t[s], i[t[s]])
                            }
                            return e
                        },
                        write_wmc_DimensionList: function (e) {
                            var t, i = this.createElementDefaultNS("DimensionList");
                            for (t in e.dimensions) {
                                var s, r = {},
                                    n = e.dimensions[t];
                                for (s in n) r[s] = "boolean" == typeof n[s] ? Number(n[s]) : n[s];
                                n = "", r.values && (n = r.values.join(","), delete r.values), i.appendChild(this.createElementDefaultNS("Dimension", n, r))
                            }
                            return i
                        },
                        write_wmc_FormatList: function (e) {
                            for (var t = this.createElementDefaultNS("FormatList"), i = 0, s = e.formats.length; i < s; i++) {
                                var r = e.formats[i];
                                t.appendChild(this.createElementDefaultNS("Format", r.value, r.current && 1 == r.current ? {
                                    current: "1"
                                } : null))
                            }
                            return t
                        },
                        write_wmc_StyleList: function (e) {
                            var t = this.createElementDefaultNS("StyleList");
                            if ((e = e.styles) && OpenLayers.Util.isArray(e))
                                for (var i, s = 0, r = e.length; s < r; s++) {
                                    var n = e[s],
                                        a = this.createElementDefaultNS("Style", null, n.current && 1 == n.current ? {
                                            current: "1"
                                        } : null);
                                    n.href ? (i = this.createElementDefaultNS("SLD"), n.name && i.appendChild(this.createElementDefaultNS("Name", n.name)), n.title && i.appendChild(this.createElementDefaultNS("Title", n.title)), n.legend && i.appendChild(this.write_wmc_URLType("LegendURL", n.legend.href, n.legend)), n = this.write_wmc_OnlineResource(n.href), i.appendChild(n), a.appendChild(i)) : n.body ? (i = this.createElementDefaultNS("SLD"), n.name && i.appendChild(this.createElementDefaultNS("Name", n.name)), n.title && i.appendChild(this.createElementDefaultNS("Title", n.title)), n.legend && i.appendChild(this.write_wmc_URLType("LegendURL", n.legend.href, n.legend)), n = OpenLayers.Format.XML.prototype.read.apply(this, [n.body]).documentElement, i.ownerDocument && i.ownerDocument.importNode && (n = i.ownerDocument.importNode(n, !0)), i.appendChild(n), a.appendChild(i)) : (a.appendChild(this.createElementDefaultNS("Name", n.name)), a.appendChild(this.createElementDefaultNS("Title", n.title)), n.abstract && a.appendChild(this.createElementDefaultNS("Abstract", n.abstract)), n.legend && a.appendChild(this.write_wmc_URLType("LegendURL", n.legend.href, n.legend))), t.appendChild(a)
                                }
                            return t
                        },
                        write_wmc_OnlineResource: function (e) {
                            var t = this.createElementDefaultNS("OnlineResource");
                            return this.setAttributeNS(t, this.namespaces.xlink, "xlink:type", "simple"), this.setAttributeNS(t, this.namespaces.xlink, "xlink:href", e), t
                        },
                        getOnlineResource_href: function (e) {
                            var t = {};
                            return 0 < (e = e.getElementsByTagName("OnlineResource")).length && this.read_wmc_OnlineResource(t, e[0]), t.href
                        },
                        CLASS_NAME: "OpenLayers.Format.WMC.v1"
                    }), OpenLayers.Control.PanPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
                        slideFactor: 50,
                        slideRatio: null,
                        initialize: function (e) {
                            OpenLayers.Control.Panel.prototype.initialize.apply(this, [e]), e = {
                                slideFactor: this.slideFactor,
                                slideRatio: this.slideRatio
                            }, this.addControls([new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST, e)])
                        },
                        CLASS_NAME: "OpenLayers.Control.PanPanel"
                    }), OpenLayers.Control.Attribution = OpenLayers.Class(OpenLayers.Control, {
                        separator: ", ",
                        template: "${layers}",
                        destroy: function () {
                            this.map.events.un({
                                removelayer: this.updateAttribution,
                                addlayer: this.updateAttribution,
                                changelayer: this.updateAttribution,
                                changebaselayer: this.updateAttribution,
                                scope: this
                            }), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this, arguments), this.map.events.on({
                                changebaselayer: this.updateAttribution,
                                changelayer: this.updateAttribution,
                                addlayer: this.updateAttribution,
                                removelayer: this.updateAttribution,
                                scope: this
                            }), this.updateAttribution(), this.div
                        },
                        updateAttribution: function () {
                            var e = [];
                            if (this.map && this.map.layers) {
                                for (var t = 0, i = this.map.layers.length; t < i; t++) {
                                    var s = this.map.layers[t];
                                    s.attribution && s.getVisibility() && -1 === OpenLayers.Util.indexOf(e, s.attribution) && e.push(s.attribution)
                                }
                                this.div.innerHTML = OpenLayers.String.format(this.template, {
                                    layers: e.join(this.separator)
                                })
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.Attribution"
                    }), OpenLayers.Kinetic = OpenLayers.Class({
                        threshold: 0,
                        deceleration: .0035,
                        nbPoints: 100,
                        delay: 200,
                        points: void 0,
                        timerId: void 0,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e)
                        },
                        begin: function () {
                            OpenLayers.Animation.stop(this.timerId), this.timerId = void 0, this.points = []
                        },
                        update: function (e) {
                            this.points.unshift({
                                xy: e,
                                tick: (new Date).getTime()
                            }), this.points.length > this.nbPoints && this.points.pop()
                        },
                        end: function (e) {
                            for (var t, i, s = (new Date).getTime(), r = 0, n = this.points.length; r < n && !(s - (i = this.points[r]).tick > this.delay); r++) t = i;
                            if (t && (r = (new Date).getTime() - t.tick, !(0 == (r = (s = Math.sqrt(Math.pow(e.x - t.xy.x, 2) + Math.pow(e.y - t.xy.y, 2))) / r) || r < this.threshold))) return s = Math.asin((e.y - t.xy.y) / s), t.xy.x <= e.x && (s = Math.PI - s), {
                                speed: r,
                                theta: s
                            }
                        },
                        move: function (e, t) {
                            var i = e.speed,
                                s = Math.cos(e.theta),
                                r = -Math.sin(e.theta),
                                n = (new Date).getTime(),
                                a = 0,
                                o = 0;
                            this.timerId = OpenLayers.Animation.start(OpenLayers.Function.bind((function () {
                                if (null != this.timerId) {
                                    var e, l, h = (new Date).getTime() - n,
                                        p = (u = -this.deceleration * Math.pow(h, 2) / 2 + i * h) * s,
                                        u = u * r;
                                    e = !1, 0 >= -this.deceleration * h + i && (OpenLayers.Animation.stop(this.timerId), this.timerId = null, e = !0), h = p - a, l = u - o, a = p, o = u, t(h, l, e)
                                }
                            }), this))
                        },
                        CLASS_NAME: "OpenLayers.Kinetic"
                    }), OpenLayers.Format.WPSExecute = OpenLayers.Class(OpenLayers.Format.XML, OpenLayers.Format.Filter.v1_1_0, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows/1.1",
                            gml: "http://www.opengis.net/gml",
                            wps: "http://www.opengis.net/wps/1.0.0",
                            wfs: "http://www.opengis.net/wfs",
                            ogc: "http://www.opengis.net/ogc",
                            wcs: "http://www.opengis.net/wcs",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        VERSION: "1.0.0",
                        schemaLocation: "http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
                        schemaLocationAttr: function (e) {},
                        write: function (e) {
                            var t;
                            return window.ActiveXObject ? this.xmldom = t = new ActiveXObject("Microsoft.XMLDOM") : t = document.implementation.createDocument("", "", null), e = this.writeNode("wps:Execute", e, t), this.setAttributeNS(e, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        writers: {
                            wps: {
                                Execute: function (e) {
                                    var t = this.createElementNSPlus("wps:Execute", {
                                        attributes: {
                                            version: this.VERSION,
                                            service: "WPS"
                                        }
                                    });
                                    return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("wps:DataInputs", e.dataInputs, t), this.writeNode("wps:ResponseForm", e.responseForm, t), t
                                },
                                ResponseForm: function (e) {
                                    var t = this.createElementNSPlus("wps:ResponseForm", {});
                                    return e.rawDataOutput && this.writeNode("wps:RawDataOutput", e.rawDataOutput, t), e.responseDocument && this.writeNode("wps:ResponseDocument", e.responseDocument, t), t
                                },
                                ResponseDocument: function (e) {
                                    var t = this.createElementNSPlus("wps:ResponseDocument", {
                                        attributes: {
                                            storeExecuteResponse: e.storeExecuteResponse,
                                            lineage: e.lineage,
                                            status: e.status
                                        }
                                    });
                                    if (e.outputs)
                                        for (var i = 0, s = e.outputs.length; i < s; i++) this.writeNode("wps:Output", e.outputs[i], t);
                                    return t
                                },
                                Output: function (e) {
                                    var t = this.createElementNSPlus("wps:Output", {
                                        attributes: {
                                            asReference: e.asReference,
                                            mimeType: e.mimeType,
                                            encoding: e.encoding,
                                            schema: e.schema
                                        }
                                    });
                                    return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("ows:Title", e.title, t), this.writeNode("ows:Abstract", e.abstract, t), t
                                },
                                RawDataOutput: function (e) {
                                    var t = this.createElementNSPlus("wps:RawDataOutput", {
                                        attributes: {
                                            mimeType: e.mimeType,
                                            encoding: e.encoding,
                                            schema: e.schema
                                        }
                                    });
                                    return this.writeNode("ows:Identifier", e.identifier, t), t
                                },
                                DataInputs: function (e) {
                                    for (var t = this.createElementNSPlus("wps:DataInputs", {}), i = 0, s = e.length; i < s; ++i) this.writeNode("wps:Input", e[i], t);
                                    return t
                                },
                                Input: function (e) {
                                    var t = this.createElementNSPlus("wps:Input", {});
                                    return this.writeNode("ows:Identifier", e.identifier, t), e.title && this.writeNode("ows:Title", e.title, t), e.data && this.writeNode("wps:Data", e.data, t), e.reference && this.writeNode("wps:Reference", e.reference, t), e.boundingBoxData && this.writeNode("wps:BoundingBoxData", e.boundingBoxData, t), t
                                },
                                Data: function (e) {
                                    var t = this.createElementNSPlus("wps:Data", {});
                                    return e.literalData ? this.writeNode("wps:LiteralData", e.literalData, t) : e.complexData ? this.writeNode("wps:ComplexData", e.complexData, t) : e.boundingBoxData && this.writeNode("ows:BoundingBox", e.boundingBoxData, t), t
                                },
                                LiteralData: function (e) {
                                    return this.createElementNSPlus("wps:LiteralData", {
                                        attributes: {
                                            uom: e.uom
                                        },
                                        value: e.value
                                    })
                                },
                                ComplexData: function (e) {
                                    var t = this.createElementNSPlus("wps:ComplexData", {
                                            attributes: {
                                                mimeType: e.mimeType,
                                                encoding: e.encoding,
                                                schema: e.schema
                                            }
                                        }),
                                        i = e.value;
                                    return "string" == typeof i ? t.appendChild(this.getXMLDoc().createCDATASection(e.value)) : t.appendChild(i), t
                                },
                                Reference: function (e) {
                                    var t = this.createElementNSPlus("wps:Reference", {
                                        attributes: {
                                            mimeType: e.mimeType,
                                            "xlink:href": e.href,
                                            method: e.method,
                                            encoding: e.encoding,
                                            schema: e.schema
                                        }
                                    });
                                    return e.body && this.writeNode("wps:Body", e.body, t), t
                                },
                                BoundingBoxData: function (e, t) {
                                    this.writers.ows.BoundingBox.apply(this, [e, t, "wps:BoundingBoxData"])
                                },
                                Body: function (e) {
                                    var t = this.createElementNSPlus("wps:Body", {});
                                    return e.wcs ? this.writeNode("wcs:GetCoverage", e.wcs, t) : e.wfs ? (this.featureType = e.wfs.featureType, this.version = e.wfs.version, this.writeNode("wfs:GetFeature", e.wfs, t)) : this.writeNode("wps:Execute", e, t), t
                                }
                            },
                            wcs: OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,
                            wfs: OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,
                            ogc: OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows
                        },
                        readers: {
                            wps: {
                                ExecuteResponse: function (e, t) {
                                    t.executeResponse = {
                                        lang: e.getAttribute("lang"),
                                        statusLocation: e.getAttribute("statusLocation"),
                                        serviceInstance: e.getAttribute("serviceInstance"),
                                        service: e.getAttribute("service")
                                    }, this.readChildNodes(e, t.executeResponse)
                                },
                                Process: function (e, t) {
                                    t.process = {}, this.readChildNodes(e, t.process)
                                },
                                Status: function (e, t) {
                                    t.status = {
                                        creationTime: e.getAttribute("creationTime")
                                    }, this.readChildNodes(e, t.status)
                                },
                                ProcessSucceeded: function (e, t) {
                                    t.processSucceeded = !0
                                },
                                ProcessOutputs: function (e, t) {
                                    t.processOutputs = [], this.readChildNodes(e, t.processOutputs)
                                },
                                Output: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.push(i)
                                },
                                Reference: function (e, t) {
                                    t.reference = {
                                        href: e.getAttribute("href"),
                                        mimeType: e.getAttribute("mimeType"),
                                        encoding: e.getAttribute("encoding"),
                                        schema: e.getAttribute("schema")
                                    }
                                },
                                Data: function (e, t) {
                                    t.data = {}, this.readChildNodes(e, t)
                                },
                                LiteralData: function (e, t) {
                                    t.literalData = {
                                        dataType: e.getAttribute("dataType"),
                                        uom: e.getAttribute("uom"),
                                        value: this.getChildValue(e)
                                    }
                                },
                                ComplexData: function (e, t) {
                                    var i;
                                    if (t.complexData = {
                                            mimeType: e.getAttribute("mimeType"),
                                            schema: e.getAttribute("schema"),
                                            encoding: e.getAttribute("encoding"),
                                            value: ""
                                        }, this.isSimpleContent(e))
                                        for (i = e.firstChild; i; i = i.nextSibling) switch (i.nodeType) {
                                            case 3:
                                            case 4:
                                                t.complexData.value += i.nodeValue
                                        } else
                                            for (i = e.firstChild; i; i = i.nextSibling) 1 == i.nodeType && (t.complexData.value = i)
                                },
                                BoundingBox: function (e, t) {
                                    t.boundingBoxData = {
                                        dimensions: e.getAttribute("dimensions"),
                                        crs: e.getAttribute("crs")
                                    }, this.readChildNodes(e, t.boundingBoxData)
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WPSExecute"
                    }), OpenLayers.Layer.GeoRSS = OpenLayers.Class(OpenLayers.Layer.Markers, {
                        location: null,
                        features: null,
                        formatOptions: null,
                        selectedFeature: null,
                        icon: null,
                        popupSize: null,
                        useFeedTitle: !0,
                        initialize: function (e, t, i) {
                            OpenLayers.Layer.Markers.prototype.initialize.apply(this, [e, i]), this.location = t, this.features = []
                        },
                        destroy: function () {
                            OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments), this.clearFeatures(), this.features = null
                        },
                        loadRSS: function () {
                            this.loaded || (this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
                                url: this.location,
                                success: this.parseData,
                                scope: this
                            }), this.loaded = !0)
                        },
                        moveTo: function (e, t, i) {
                            OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadRSS()
                        },
                        parseData: function (e) {
                            var t = e.responseXML;
                            if (t && t.documentElement || (t = OpenLayers.Format.XML.prototype.read(e.responseText)), this.useFeedTitle) {
                                e = null;
                                try {
                                    e = t.getElementsByTagNameNS("*", "title")[0].firstChild.nodeValue
                                } catch (i) {
                                    e = t.getElementsByTagName("title")[0].firstChild.nodeValue
                                }
                                e && this.setName(e)
                            }
                            e = {}, OpenLayers.Util.extend(e, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (e.externalProjection = this.projection, e.internalProjection = this.map.getProjectionObject()), t = new OpenLayers.Format.GeoRSS(e).read(t), e = 0;
                            for (var i = t.length; e < i; e++) {
                                var s = {};
                                if ((o = t[e]).geometry) {
                                    var r = o.attributes.title ? o.attributes.title : "Untitled",
                                        n = o.attributes.description ? o.attributes.description : "No description.",
                                        a = o.attributes.link ? o.attributes.link : "",
                                        o = o.geometry.getBounds().getCenterLonLat();
                                    if (s.icon = null == this.icon ? OpenLayers.Marker.defaultIcon() : this.icon.clone(), s.popupSize = this.popupSize ? this.popupSize.clone() : new OpenLayers.Size(250, 120), r || n) {
                                        s.title = r, s.description = n;
                                        var l = (l = '<div class="olLayerGeoRSSClose">[x]</div>') + '<div class="olLayerGeoRSSTitle">';
                                        a && (l += '<a class="link" href="' + a + '" target="_blank">'), l += r, a && (l += "</a>"), l += "</div>", l += '<div style="" class="olLayerGeoRSSDescription">', l += n, l += "</div>", s.popupContentHTML = l
                                    }
                                    o = new OpenLayers.Feature(this, o, s), this.features.push(o), (s = o.createMarker()).events.register("click", o, this.markerClick), this.addMarker(s)
                                }
                            }
                            this.events.triggerEvent("loadend")
                        },
                        markerClick: function (e) {
                            var t = this == this.layer.selectedFeature;
                            this.layer.selectedFeature = t ? null : this;
                            for (var i = 0, s = this.layer.map.popups.length; i < s; i++) this.layer.map.removePopup(this.layer.map.popups[i]);
                            t || (t = this.createPopup(), OpenLayers.Event.observe(t.div, "click", OpenLayers.Function.bind((function () {
                                for (var e = 0, t = this.layer.map.popups.length; e < t; e++) this.layer.map.removePopup(this.layer.map.popups[e])
                            }), this)), this.layer.map.addPopup(t)), OpenLayers.Event.stop(e)
                        },
                        clearFeatures: function () {
                            if (null != this.features)
                                for (; 0 < this.features.length;) {
                                    var e = this.features[0];
                                    OpenLayers.Util.removeItem(this.features, e), e.destroy()
                                }
                        },
                        CLASS_NAME: "OpenLayers.Layer.GeoRSS"
                    }), OpenLayers.Symbolizer.Point = OpenLayers.Class(OpenLayers.Symbolizer, {
                        initialize: function (e) {
                            OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Symbolizer.Point"
                    }), OpenLayers.Symbolizer.Line = OpenLayers.Class(OpenLayers.Symbolizer, {
                        initialize: function (e) {
                            OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Symbolizer.Line"
                    }), OpenLayers.Symbolizer.Text = OpenLayers.Class(OpenLayers.Symbolizer, {
                        initialize: function (e) {
                            OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Symbolizer.Text"
                    }), OpenLayers.Format.SLD.v1 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, {
                        namespaces: {
                            sld: "http://www.opengis.net/sld",
                            ogc: "http://www.opengis.net/ogc",
                            gml: "http://www.opengis.net/gml",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        defaultPrefix: "sld",
                        schemaLocation: null,
                        multipleSymbolizers: !1,
                        featureTypeCounter: null,
                        defaultSymbolizer: {
                            fillColor: "#808080",
                            fillOpacity: 1,
                            strokeColor: "#000000",
                            strokeOpacity: 1,
                            strokeWidth: 1,
                            strokeDashstyle: "solid",
                            pointRadius: 3,
                            graphicName: "square"
                        },
                        read: function (e, t) {
                            var i = {
                                namedLayers: !0 === (t = OpenLayers.Util.applyDefaults(t, this.options)).namedLayersAsArray ? [] : {}
                            };
                            return this.readChildNodes(e, i), i
                        },
                        readers: OpenLayers.Util.applyDefaults({
                            sld: {
                                StyledLayerDescriptor: function (e, t) {
                                    t.version = e.getAttribute("version"), this.readChildNodes(e, t)
                                },
                                Name: function (e, t) {
                                    t.name = this.getChildValue(e)
                                },
                                Title: function (e, t) {
                                    t.title = this.getChildValue(e)
                                },
                                Abstract: function (e, t) {
                                    t.description = this.getChildValue(e)
                                },
                                NamedLayer: function (e, t) {
                                    var i = {
                                        userStyles: [],
                                        namedStyles: []
                                    };
                                    this.readChildNodes(e, i);
                                    for (var s = 0, r = i.userStyles.length; s < r; ++s) i.userStyles[s].layerName = i.name;
                                    OpenLayers.Util.isArray(t.namedLayers) ? t.namedLayers.push(i) : t.namedLayers[i.name] = i
                                },
                                NamedStyle: function (e, t) {
                                    t.namedStyles.push(this.getChildName(e.firstChild))
                                },
                                UserStyle: function (e, t) {
                                    var i = {
                                        defaultsPerSymbolizer: !0,
                                        rules: []
                                    };
                                    this.featureTypeCounter = -1, this.readChildNodes(e, i), this.multipleSymbolizers ? (delete i.defaultsPerSymbolizer, i = new OpenLayers.Style2(i)) : i = new OpenLayers.Style(this.defaultSymbolizer, i), t.userStyles.push(i)
                                },
                                IsDefault: function (e, t) {
                                    "1" == this.getChildValue(e) && (t.isDefault = !0)
                                },
                                FeatureTypeStyle: function (e, t) {
                                    ++this.featureTypeCounter;
                                    var i = {
                                        rules: this.multipleSymbolizers ? t.rules : []
                                    };
                                    this.readChildNodes(e, i), this.multipleSymbolizers || (t.rules = i.rules)
                                },
                                Rule: function (e, t) {
                                    var i;
                                    this.multipleSymbolizers && (i = {
                                        symbolizers: []
                                    }), i = new OpenLayers.Rule(i), this.readChildNodes(e, i), t.rules.push(i)
                                },
                                ElseFilter: function (e, t) {
                                    t.elseFilter = !0
                                },
                                MinScaleDenominator: function (e, t) {
                                    t.minScaleDenominator = parseFloat(this.getChildValue(e))
                                },
                                MaxScaleDenominator: function (e, t) {
                                    t.maxScaleDenominator = parseFloat(this.getChildValue(e))
                                },
                                TextSymbolizer: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Text(i))) : t.symbolizer.Text = OpenLayers.Util.applyDefaults(i, t.symbolizer.Text)
                                },
                                LabelPlacement: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                PointPlacement: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), i.labelRotation = i.rotation, delete i.rotation;
                                    var s, r = t.labelAnchorPointX,
                                        n = t.labelAnchorPointY;
                                    r <= 1 / 3 ? s = "l" : r > 1 / 3 && r < 2 / 3 ? s = "c" : r >= 2 / 3 && (s = "r"), n <= 1 / 3 ? s += "b" : n > 1 / 3 && n < 2 / 3 ? s += "m" : n >= 2 / 3 && (s += "t"), i.labelAlign = s, OpenLayers.Util.applyDefaults(t, i)
                                },
                                AnchorPoint: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                AnchorPointX: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.labelAnchorPointX = i)
                                },
                                AnchorPointY: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.labelAnchorPointY = i)
                                },
                                Displacement: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                DisplacementX: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.labelXOffset = i)
                                },
                                DisplacementY: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.labelYOffset = i)
                                },
                                LinePlacement: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                PerpendicularOffset: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.labelPerpendicularOffset = i)
                                },
                                Label: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.label = i)
                                },
                                Font: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Halo: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.haloRadius = i.haloRadius, t.haloColor = i.fillColor, t.haloOpacity = i.fillOpacity
                                },
                                Radius: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    null != i && (t.haloRadius = i)
                                },
                                RasterSymbolizer: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Raster(i))) : t.symbolizer.Raster = OpenLayers.Util.applyDefaults(i, t.symbolizer.Raster)
                                },
                                Geometry: function (e, t) {
                                    t.geometry = {}, this.readChildNodes(e, t.geometry)
                                },
                                ColorMap: function (e, t) {
                                    t.colorMap = [], this.readChildNodes(e, t.colorMap)
                                },
                                ColorMapEntry: function (e, t) {
                                    var i = e.getAttribute("quantity"),
                                        s = e.getAttribute("opacity");
                                    t.push({
                                        color: e.getAttribute("color"),
                                        quantity: null !== i ? parseFloat(i) : void 0,
                                        label: e.getAttribute("label") || void 0,
                                        opacity: null !== s ? parseFloat(s) : void 0
                                    })
                                },
                                LineSymbolizer: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Line(i))) : t.symbolizer.Line = OpenLayers.Util.applyDefaults(i, t.symbolizer.Line)
                                },
                                PolygonSymbolizer: function (e, t) {
                                    var i = {
                                        fill: !1,
                                        stroke: !1
                                    };
                                    this.multipleSymbolizers || (i = t.symbolizer.Polygon || i), this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Polygon(i))) : t.symbolizer.Polygon = i
                                },
                                PointSymbolizer: function (e, t) {
                                    var i = {
                                        fill: !1,
                                        stroke: !1,
                                        graphic: !1
                                    };
                                    this.multipleSymbolizers || (i = t.symbolizer.Point || i), this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Point(i))) : t.symbolizer.Point = i
                                },
                                Stroke: function (e, t) {
                                    t.stroke = !0, this.readChildNodes(e, t)
                                },
                                Fill: function (e, t) {
                                    t.fill = !0, this.readChildNodes(e, t)
                                },
                                CssParameter: function (e, t) {
                                    var i = e.getAttribute("name"),
                                        s = this.cssMap[i];
                                    t.label && ("fill" === i ? s = "fontColor" : "fill-opacity" === i && (s = "fontOpacity")), s && (i = this.readers.ogc._expression.call(this, e)) && (t[s] = i)
                                },
                                Graphic: function (e, t) {
                                    t.graphic = !0;
                                    var i = {};
                                    this.readChildNodes(e, i);
                                    for (var s, r, n = "stroke strokeColor strokeWidth strokeOpacity strokeLinecap fill fillColor fillOpacity graphicName rotation graphicFormat".split(" "), a = 0, o = n.length; a < o; ++a) null != (r = i[s = n[a]]) && (t[s] = r);
                                    null != i.opacity && (t.graphicOpacity = i.opacity), null != i.size && (isNaN(i.size / 2) ? t.graphicWidth = i.size : t.pointRadius = i.size / 2), null != i.href && (t.externalGraphic = i.href), null != i.rotation && (t.rotation = i.rotation)
                                },
                                ExternalGraphic: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Mark: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                WellKnownName: function (e, t) {
                                    t.graphicName = this.getChildValue(e)
                                },
                                Opacity: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.opacity = i)
                                },
                                Size: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.size = i)
                                },
                                Rotation: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.rotation = i)
                                },
                                OnlineResource: function (e, t) {
                                    t.href = this.getAttributeNS(e, this.namespaces.xlink, "href")
                                },
                                Format: function (e, t) {
                                    t.graphicFormat = this.getChildValue(e)
                                }
                            }
                        }, OpenLayers.Format.Filter.v1_0_0.prototype.readers),
                        cssMap: {
                            stroke: "strokeColor",
                            "stroke-opacity": "strokeOpacity",
                            "stroke-width": "strokeWidth",
                            "stroke-linecap": "strokeLinecap",
                            "stroke-dasharray": "strokeDashstyle",
                            fill: "fillColor",
                            "fill-opacity": "fillOpacity",
                            "font-family": "fontFamily",
                            "font-size": "fontSize",
                            "font-weight": "fontWeight",
                            "font-style": "fontStyle"
                        },
                        getCssProperty: function (e) {
                            var t, i = null;
                            for (t in this.cssMap)
                                if (this.cssMap[t] == e) {
                                    i = t;
                                    break
                                } return i
                        },
                        getGraphicFormat: function (e) {
                            var t, i;
                            for (i in this.graphicFormats)
                                if (this.graphicFormats[i].test(e)) {
                                    t = i;
                                    break
                                } return t || this.defaultGraphicFormat
                        },
                        defaultGraphicFormat: "image/png",
                        graphicFormats: {
                            "image/jpeg": /\.jpe?g$/i,
                            "image/gif": /\.gif$/i,
                            "image/png": /\.png$/i
                        },
                        write: function (e) {
                            return this.writers.sld.StyledLayerDescriptor.apply(this, [e])
                        },
                        writers: OpenLayers.Util.applyDefaults({
                            sld: {
                                _OGCExpression: function (e, t) {
                                    var i = this.createElementNSPlus(e),
                                        s = "string" == typeof t ? t.split("${") : [t];
                                    i.appendChild(this.createTextNode(s[0]));
                                    for (var r, n, a = 1, o = s.length; a < o; a++) 0 < (n = (r = s[a]).indexOf("}")) ? (this.writeNode("ogc:PropertyName", {
                                        property: r.substring(0, n)
                                    }, i), i.appendChild(this.createTextNode(r.substring(++n)))) : i.appendChild(this.createTextNode("${" + r));
                                    return i
                                },
                                StyledLayerDescriptor: function (e) {
                                    var t = this.createElementNSPlus("sld:StyledLayerDescriptor", {
                                        attributes: {
                                            version: this.VERSION,
                                            "xsi:schemaLocation": this.schemaLocation
                                        }
                                    });
                                    if (t.setAttribute("xmlns:ogc", this.namespaces.ogc), t.setAttribute("xmlns:gml", this.namespaces.gml), e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), e.description && this.writeNode("Abstract", e.description, t), OpenLayers.Util.isArray(e.namedLayers))
                                        for (var i = 0, s = e.namedLayers.length; i < s; ++i) this.writeNode("NamedLayer", e.namedLayers[i], t);
                                    else
                                        for (i in e.namedLayers) this.writeNode("NamedLayer", e.namedLayers[i], t);
                                    return t
                                },
                                Name: function (e) {
                                    return this.createElementNSPlus("sld:Name", {
                                        value: e
                                    })
                                },
                                Title: function (e) {
                                    return this.createElementNSPlus("sld:Title", {
                                        value: e
                                    })
                                },
                                Abstract: function (e) {
                                    return this.createElementNSPlus("sld:Abstract", {
                                        value: e
                                    })
                                },
                                NamedLayer: function (e) {
                                    var t = this.createElementNSPlus("sld:NamedLayer");
                                    if (this.writeNode("Name", e.name, t), e.namedStyles)
                                        for (var i = 0, s = e.namedStyles.length; i < s; ++i) this.writeNode("NamedStyle", e.namedStyles[i], t);
                                    if (e.userStyles)
                                        for (i = 0, s = e.userStyles.length; i < s; ++i) this.writeNode("UserStyle", e.userStyles[i], t);
                                    return t
                                },
                                NamedStyle: function (e) {
                                    var t = this.createElementNSPlus("sld:NamedStyle");
                                    return this.writeNode("Name", e, t), t
                                },
                                UserStyle: function (e) {
                                    var t = this.createElementNSPlus("sld:UserStyle");
                                    if (e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), e.description && this.writeNode("Abstract", e.description, t), e.isDefault && this.writeNode("IsDefault", e.isDefault, t), this.multipleSymbolizers && e.rules) {
                                        for (var i, s, r, n, a, o = {
                                                0: []
                                            }, l = [0], h = 0, p = e.rules.length; h < p; ++h)
                                            if ((i = e.rules[h]).symbolizers) {
                                                s = {};
                                                for (var u = 0, c = i.symbolizers.length; u < c; ++u)(n = (r = i.symbolizers[u]).zIndex) in s || ((a = i.clone()).symbolizers = [], s[n] = a), s[n].symbolizers.push(r.clone());
                                                for (n in s) n in o || (l.push(n), o[n] = []), o[n].push(s[n])
                                            } else o[0].push(i.clone());
                                        for (l.sort(), h = 0, p = l.length; h < p; ++h) 0 < (i = o[l[h]]).length && ((a = e.clone()).rules = o[l[h]], this.writeNode("FeatureTypeStyle", a, t))
                                    } else this.writeNode("FeatureTypeStyle", e, t);
                                    return t
                                },
                                IsDefault: function (e) {
                                    return this.createElementNSPlus("sld:IsDefault", {
                                        value: e ? "1" : "0"
                                    })
                                },
                                FeatureTypeStyle: function (e) {
                                    for (var t = this.createElementNSPlus("sld:FeatureTypeStyle"), i = 0, s = e.rules.length; i < s; ++i) this.writeNode("Rule", e.rules[i], t);
                                    return t
                                },
                                Rule: function (e) {
                                    var t, i, s = this.createElementNSPlus("sld:Rule");
                                    if (e.name && this.writeNode("Name", e.name, s), e.title && this.writeNode("Title", e.title, s), e.description && this.writeNode("Abstract", e.description, s), e.elseFilter ? this.writeNode("ElseFilter", null, s) : e.filter && this.writeNode("ogc:Filter", e.filter, s), null != e.minScaleDenominator && this.writeNode("MinScaleDenominator", e.minScaleDenominator, s), null != e.maxScaleDenominator && this.writeNode("MaxScaleDenominator", e.maxScaleDenominator, s), this.multipleSymbolizers && e.symbolizers)
                                        for (var r = 0, n = e.symbolizers.length; r < n; ++r) t = (i = e.symbolizers[r]).CLASS_NAME.split(".").pop(), this.writeNode(t + "Symbolizer", i, s);
                                    else {
                                        r = 0;
                                        for (var a = (n = OpenLayers.Style.SYMBOLIZER_PREFIXES).length; r < a; ++r) t = n[r], (i = e.symbolizer[t]) && this.writeNode(t + "Symbolizer", i, s)
                                    }
                                    return s
                                },
                                ElseFilter: function () {
                                    return this.createElementNSPlus("sld:ElseFilter")
                                },
                                MinScaleDenominator: function (e) {
                                    return this.createElementNSPlus("sld:MinScaleDenominator", {
                                        value: e
                                    })
                                },
                                MaxScaleDenominator: function (e) {
                                    return this.createElementNSPlus("sld:MaxScaleDenominator", {
                                        value: e
                                    })
                                },
                                LineSymbolizer: function (e) {
                                    var t = this.createElementNSPlus("sld:LineSymbolizer");
                                    return this.writeNode("Stroke", e, t), t
                                },
                                Stroke: function (e) {
                                    var t = this.createElementNSPlus("sld:Stroke");
                                    return null != e.strokeColor && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "strokeColor"
                                    }, t), null != e.strokeOpacity && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "strokeOpacity"
                                    }, t), null != e.strokeWidth && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "strokeWidth"
                                    }, t), null != e.strokeDashstyle && "solid" !== e.strokeDashstyle && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "strokeDashstyle"
                                    }, t), null != e.strokeLinecap && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "strokeLinecap"
                                    }, t), t
                                },
                                CssParameter: function (e) {
                                    return this.createElementNSPlus("sld:CssParameter", {
                                        attributes: {
                                            name: this.getCssProperty(e.key)
                                        },
                                        value: e.symbolizer[e.key]
                                    })
                                },
                                TextSymbolizer: function (e) {
                                    var t = this.createElementNSPlus("sld:TextSymbolizer");
                                    return null != e.label && this.writeNode("Label", e.label, t), null == e.fontFamily && null == e.fontSize && null == e.fontWeight && null == e.fontStyle || this.writeNode("Font", e, t), null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign && null == e.labelXOffset && null == e.labelYOffset && null == e.labelRotation && null == e.labelPerpendicularOffset || this.writeNode("LabelPlacement", e, t), null == e.haloRadius && null == e.haloColor && null == e.haloOpacity || this.writeNode("Halo", e, t), null == e.fontColor && null == e.fontOpacity || this.writeNode("Fill", {
                                        fillColor: e.fontColor,
                                        fillOpacity: e.fontOpacity
                                    }, t), t
                                },
                                LabelPlacement: function (e) {
                                    var t = this.createElementNSPlus("sld:LabelPlacement");
                                    return null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign && null == e.labelXOffset && null == e.labelYOffset && null == e.labelRotation || null != e.labelPerpendicularOffset || this.writeNode("PointPlacement", e, t), null != e.labelPerpendicularOffset && this.writeNode("LinePlacement", e, t), t
                                },
                                LinePlacement: function (e) {
                                    var t = this.createElementNSPlus("sld:LinePlacement");
                                    return this.writeNode("PerpendicularOffset", e.labelPerpendicularOffset, t), t
                                },
                                PerpendicularOffset: function (e) {
                                    return this.createElementNSPlus("sld:PerpendicularOffset", {
                                        value: e
                                    })
                                },
                                PointPlacement: function (e) {
                                    var t = this.createElementNSPlus("sld:PointPlacement");
                                    return null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign || this.writeNode("AnchorPoint", e, t), null == e.labelXOffset && null == e.labelYOffset || this.writeNode("Displacement", e, t), null != e.labelRotation && this.writeNode("Rotation", e.labelRotation, t), t
                                },
                                AnchorPoint: function (e) {
                                    var t = this.createElementNSPlus("sld:AnchorPoint"),
                                        i = e.labelAnchorPointX,
                                        s = e.labelAnchorPointY;
                                    if (null != i && this.writeNode("AnchorPointX", i, t), null != s && this.writeNode("AnchorPointY", s, t), null == i && null == s) {
                                        var r = e.labelAlign.substr(0, 1);
                                        "l" === r ? i = 0 : "c" === r ? i = .5 : "r" === r && (i = 1), "b" === (e = e.labelAlign.substr(1, 1)) ? s = 0 : "m" === e ? s = .5 : "t" === e && (s = 1), this.writeNode("AnchorPointX", i, t), this.writeNode("AnchorPointY", s, t)
                                    }
                                    return t
                                },
                                AnchorPointX: function (e) {
                                    return this.createElementNSPlus("sld:AnchorPointX", {
                                        value: e
                                    })
                                },
                                AnchorPointY: function (e) {
                                    return this.createElementNSPlus("sld:AnchorPointY", {
                                        value: e
                                    })
                                },
                                Displacement: function (e) {
                                    var t = this.createElementNSPlus("sld:Displacement");
                                    return null != e.labelXOffset && this.writeNode("DisplacementX", e.labelXOffset, t), null != e.labelYOffset && this.writeNode("DisplacementY", e.labelYOffset, t), t
                                },
                                DisplacementX: function (e) {
                                    return this.createElementNSPlus("sld:DisplacementX", {
                                        value: e
                                    })
                                },
                                DisplacementY: function (e) {
                                    return this.createElementNSPlus("sld:DisplacementY", {
                                        value: e
                                    })
                                },
                                Font: function (e) {
                                    var t = this.createElementNSPlus("sld:Font");
                                    return e.fontFamily && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "fontFamily"
                                    }, t), e.fontSize && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "fontSize"
                                    }, t), e.fontWeight && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "fontWeight"
                                    }, t), e.fontStyle && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "fontStyle"
                                    }, t), t
                                },
                                Label: function (e) {
                                    return this.writers.sld._OGCExpression.call(this, "sld:Label", e)
                                },
                                Halo: function (e) {
                                    var t = this.createElementNSPlus("sld:Halo");
                                    return e.haloRadius && this.writeNode("Radius", e.haloRadius, t), (e.haloColor || e.haloOpacity) && this.writeNode("Fill", {
                                        fillColor: e.haloColor,
                                        fillOpacity: e.haloOpacity
                                    }, t), t
                                },
                                Radius: function (e) {
                                    return this.createElementNSPlus("sld:Radius", {
                                        value: e
                                    })
                                },
                                RasterSymbolizer: function (e) {
                                    var t = this.createElementNSPlus("sld:RasterSymbolizer");
                                    return e.geometry && this.writeNode("Geometry", e.geometry, t), e.opacity && this.writeNode("Opacity", e.opacity, t), e.colorMap && this.writeNode("ColorMap", e.colorMap, t), t
                                },
                                Geometry: function (e) {
                                    var t = this.createElementNSPlus("sld:Geometry");
                                    return e.property && this.writeNode("ogc:PropertyName", e, t), t
                                },
                                ColorMap: function (e) {
                                    for (var t = this.createElementNSPlus("sld:ColorMap"), i = 0, s = e.length; i < s; ++i) this.writeNode("ColorMapEntry", e[i], t);
                                    return t
                                },
                                ColorMapEntry: function (e) {
                                    var t = this.createElementNSPlus("sld:ColorMapEntry");
                                    return t.setAttribute("color", e.color), void 0 !== e.opacity && t.setAttribute("opacity", parseFloat(e.opacity)), void 0 !== e.quantity && t.setAttribute("quantity", parseFloat(e.quantity)), void 0 !== e.label && t.setAttribute("label", e.label), t
                                },
                                PolygonSymbolizer: function (e) {
                                    var t = this.createElementNSPlus("sld:PolygonSymbolizer");
                                    return !1 !== e.fill && this.writeNode("Fill", e, t), !1 !== e.stroke && this.writeNode("Stroke", e, t), t
                                },
                                Fill: function (e) {
                                    var t = this.createElementNSPlus("sld:Fill");
                                    return e.fillColor && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "fillColor"
                                    }, t), null != e.fillOpacity && this.writeNode("CssParameter", {
                                        symbolizer: e,
                                        key: "fillOpacity"
                                    }, t), t
                                },
                                PointSymbolizer: function (e) {
                                    var t = this.createElementNSPlus("sld:PointSymbolizer");
                                    return this.writeNode("Graphic", e, t), t
                                },
                                Graphic: function (e) {
                                    var t = this.createElementNSPlus("sld:Graphic");
                                    return null != e.externalGraphic ? this.writeNode("ExternalGraphic", e, t) : this.writeNode("Mark", e, t), null != e.graphicOpacity && this.writeNode("Opacity", e.graphicOpacity, t), null != e.pointRadius ? this.writeNode("Size", 2 * e.pointRadius, t) : null != e.graphicWidth && this.writeNode("Size", e.graphicWidth, t), null != e.rotation && this.writeNode("Rotation", e.rotation, t), t
                                },
                                ExternalGraphic: function (e) {
                                    var t = this.createElementNSPlus("sld:ExternalGraphic");
                                    return this.writeNode("OnlineResource", e.externalGraphic, t), e = e.graphicFormat || this.getGraphicFormat(e.externalGraphic), this.writeNode("Format", e, t), t
                                },
                                Mark: function (e) {
                                    var t = this.createElementNSPlus("sld:Mark");
                                    return e.graphicName && this.writeNode("WellKnownName", e.graphicName, t), !1 !== e.fill && this.writeNode("Fill", e, t), !1 !== e.stroke && this.writeNode("Stroke", e, t), t
                                },
                                WellKnownName: function (e) {
                                    return this.createElementNSPlus("sld:WellKnownName", {
                                        value: e
                                    })
                                },
                                Opacity: function (e) {
                                    return this.createElementNSPlus("sld:Opacity", {
                                        value: e
                                    })
                                },
                                Size: function (e) {
                                    return this.writers.sld._OGCExpression.call(this, "sld:Size", e)
                                },
                                Rotation: function (e) {
                                    return this.createElementNSPlus("sld:Rotation", {
                                        value: e
                                    })
                                },
                                OnlineResource: function (e) {
                                    return this.createElementNSPlus("sld:OnlineResource", {
                                        attributes: {
                                            "xlink:type": "simple",
                                            "xlink:href": e
                                        }
                                    })
                                },
                                Format: function (e) {
                                    return this.createElementNSPlus("sld:Format", {
                                        value: e
                                    })
                                }
                            }
                        }, OpenLayers.Format.Filter.v1_0_0.prototype.writers),
                        CLASS_NAME: "OpenLayers.Format.SLD.v1"
                    }), OpenLayers.Layer.WMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        DEFAULT_PARAMS: {
                            service: "WMS",
                            version: "1.1.1",
                            request: "GetMap",
                            styles: "",
                            format: "image/jpeg"
                        },
                        isBaseLayer: !0,
                        encodeBBOX: !1,
                        noMagic: !1,
                        yx: {},
                        initialize: function (e, t, i, s) {
                            var r = [];
                            i = OpenLayers.Util.upperCaseObject(i), 1.3 <= parseFloat(i.VERSION) && !i.EXCEPTIONS && (i.EXCEPTIONS = "INIMAGE"), r.push(e, t, i, s), OpenLayers.Layer.Grid.prototype.initialize.apply(this, r), OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), !this.noMagic && this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != s && s.isBaseLayer || (this.isBaseLayer = !1), "image/jpeg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png"))
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.WMS(this.name, this.url, this.params, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        reverseAxisOrder: function () {
                            var e = this.projection.getCode();
                            return 1.3 <= parseFloat(this.params.VERSION) && !!(this.yx[e] || OpenLayers.Projection.defaults[e] && OpenLayers.Projection.defaults[e].yx)
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = this.getImageSize(),
                                i = {},
                                s = this.reverseAxisOrder();
                            return i.BBOX = this.encodeBBOX ? e.toBBOX(null, s) : e.toArray(s), i.WIDTH = t.w, i.HEIGHT = t.h, this.getFullRequestString(i)
                        },
                        mergeNewParams: function (e) {
                            return e = [OpenLayers.Util.upperCaseObject(e)], OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, e)
                        },
                        getFullRequestString: function (e, t) {
                            var i = this.map.getProjectionObject();
                            i = "none" == (i = this.projection && this.projection.equals(i) ? this.projection.getCode() : i.getCode()) ? null : i;
                            return 1.3 <= parseFloat(this.params.VERSION) ? this.params.CRS = i : this.params.SRS = i, "boolean" == typeof this.params.TRANSPARENT && (e.TRANSPARENT = this.params.TRANSPARENT ? "TRUE" : "FALSE"), OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Layer.WMS"
                    }), OpenLayers.Layer.KaMap = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        isBaseLayer: !0,
                        DEFAULT_PARAMS: {
                            i: "jpeg",
                            map: ""
                        },
                        initialize: function (e, t, i, s) {
                            OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS)
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = this.map.getResolution(),
                                i = Math.round(1e4 * this.map.getScale()) / 1e4,
                                s = Math.round(e.left / t);
                            return e = -Math.round(e.top / t), this.getFullRequestString({
                                t: e,
                                l: s,
                                s: i
                            })
                        },
                        calculateGridLayout: function (e, t, i) {
                            return {
                                tilelon: t = i * this.tileSize.w,
                                tilelat: i *= this.tileSize.h,
                                startcol: Math.floor(e.left / t) - this.buffer,
                                startrow: Math.floor(e.top / i) + this.buffer
                            }
                        },
                        getTileBoundsForGridIndex: function (e, t) {
                            this.getTileOrigin();
                            var i = (n = this.gridLayout).tilelon,
                                s = n.tilelat,
                                r = (n.startcol + t) * i,
                                n = (n.startrow - e) * s;
                            return new OpenLayers.Bounds(r, n, r + i, n + s)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.KaMap(this.name, this.url, this.params, this.getOptions())), e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [e]), null != this.tileSize && (e.tileSize = this.tileSize.clone()), e.grid = [], e
                        },
                        getTileBounds: function (e) {
                            var t = (i = this.getResolution()) * this.tileSize.w,
                                i = i * this.tileSize.h,
                                s = this.getLonLatFromViewPortPx(e);
                            return e = t * Math.floor(s.lon / t), s = i * Math.floor(s.lat / i), new OpenLayers.Bounds(e, s, e + t, s + i)
                        },
                        CLASS_NAME: "OpenLayers.Layer.KaMap"
                    }), OpenLayers.Format.WMC.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WMC.v1, {
                        VERSION: "1.1.0",
                        schemaLocation: "http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",
                        initialize: function (e) {
                            OpenLayers.Format.WMC.v1.prototype.initialize.apply(this, [e])
                        },
                        read_sld_MinScaleDenominator: function (e, t) {
                            var i = parseFloat(this.getChildValue(t));
                            0 < i && (e.maxScale = i)
                        },
                        read_sld_MaxScaleDenominator: function (e, t) {
                            e.minScale = parseFloat(this.getChildValue(t))
                        },
                        read_wmc_SRS: function (e, t) {
                            "srs" in e || (e.srs = {}), e.srs[this.getChildValue(t)] = !0
                        },
                        write_wmc_Layer: function (e) {
                            var t = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this, [e]);
                            if (e.maxScale) {
                                var i = this.createElementNS(this.namespaces.sld, "sld:MinScaleDenominator");
                                i.appendChild(this.createTextNode(e.maxScale.toPrecision(16))), t.appendChild(i)
                            }
                            if (e.minScale && ((i = this.createElementNS(this.namespaces.sld, "sld:MaxScaleDenominator")).appendChild(this.createTextNode(e.minScale.toPrecision(16))), t.appendChild(i)), e.srs)
                                for (var s in e.srs) t.appendChild(this.createElementDefaultNS("SRS", s));
                            return t.appendChild(this.write_wmc_FormatList(e)), t.appendChild(this.write_wmc_StyleList(e)), e.dimensions && t.appendChild(this.write_wmc_DimensionList(e)), t.appendChild(this.write_wmc_LayerExtension(e)), t
                        },
                        CLASS_NAME: "OpenLayers.Format.WMC.v1_1_0"
                    }), OpenLayers.Format.XLS = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.1.0",
                        stringifyOutput: !0,
                        CLASS_NAME: "OpenLayers.Format.XLS"
                    }), OpenLayers.Format.XLS.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            xls: "http://www.opengis.net/xls",
                            gml: "http://www.opengis.net/gml",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        xy: !0,
                        defaultPrefix: "xls",
                        schemaLocation: null,
                        read: function (e, t) {
                            OpenLayers.Util.applyDefaults(t, this.options);
                            var i = {};
                            return this.readChildNodes(e, i), i
                        },
                        readers: {
                            xls: {
                                XLS: function (e, t) {
                                    t.version = e.getAttribute("version"), this.readChildNodes(e, t)
                                },
                                Response: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                GeocodeResponse: function (e, t) {
                                    t.responseLists = [], this.readChildNodes(e, t)
                                },
                                GeocodeResponseList: function (e, t) {
                                    var i = {
                                        features: [],
                                        numberOfGeocodedAddresses: parseInt(e.getAttribute("numberOfGeocodedAddresses"))
                                    };
                                    t.responseLists.push(i), this.readChildNodes(e, i)
                                },
                                GeocodedAddress: function (e, t) {
                                    var i = new OpenLayers.Feature.Vector;
                                    t.features.push(i), this.readChildNodes(e, i), i.geometry = i.components[0]
                                },
                                GeocodeMatchCode: function (e, t) {
                                    t.attributes.matchCode = {
                                        accuracy: parseFloat(e.getAttribute("accuracy")),
                                        matchType: e.getAttribute("matchType")
                                    }
                                },
                                Address: function (e, t) {
                                    var i = {
                                        countryCode: e.getAttribute("countryCode"),
                                        addressee: e.getAttribute("addressee"),
                                        street: [],
                                        place: []
                                    };
                                    t.attributes.address = i, this.readChildNodes(e, i)
                                },
                                freeFormAddress: function (e, t) {
                                    t.freeFormAddress = this.getChildValue(e)
                                },
                                StreetAddress: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Building: function (e, t) {
                                    t.building = {
                                        number: e.getAttribute("number"),
                                        subdivision: e.getAttribute("subdivision"),
                                        buildingName: e.getAttribute("buildingName")
                                    }
                                },
                                Street: function (e, t) {
                                    t.street.push(this.getChildValue(e))
                                },
                                Place: function (e, t) {
                                    t.place[e.getAttribute("type")] = this.getChildValue(e)
                                },
                                PostalCode: function (e, t) {
                                    t.postalCode = this.getChildValue(e)
                                }
                            },
                            gml: OpenLayers.Format.GML.v3.prototype.readers.gml
                        },
                        write: function (e) {
                            return this.writers.xls.XLS.apply(this, [e])
                        },
                        writers: {
                            xls: {
                                XLS: function (e) {
                                    var t = this.createElementNSPlus("xls:XLS", {
                                        attributes: {
                                            version: this.VERSION,
                                            "xsi:schemaLocation": this.schemaLocation
                                        }
                                    });
                                    return this.writeNode("RequestHeader", e.header, t), this.writeNode("Request", e, t), t
                                },
                                RequestHeader: function (e) {
                                    return this.createElementNSPlus("xls:RequestHeader")
                                },
                                Request: function (e) {
                                    var t = this.createElementNSPlus("xls:Request", {
                                        attributes: {
                                            methodName: "GeocodeRequest",
                                            requestID: e.requestID || "",
                                            version: this.VERSION
                                        }
                                    });
                                    return this.writeNode("GeocodeRequest", e.addresses, t), t
                                },
                                GeocodeRequest: function (e) {
                                    for (var t = this.createElementNSPlus("xls:GeocodeRequest"), i = 0, s = e.length; i < s; i++) this.writeNode("Address", e[i], t);
                                    return t
                                },
                                Address: function (e) {
                                    var t = this.createElementNSPlus("xls:Address", {
                                        attributes: {
                                            countryCode: e.countryCode
                                        }
                                    });
                                    return e.freeFormAddress ? this.writeNode("freeFormAddress", e.freeFormAddress, t) : (e.street && this.writeNode("StreetAddress", e, t), e.municipality && this.writeNode("Municipality", e.municipality, t), e.countrySubdivision && this.writeNode("CountrySubdivision", e.countrySubdivision, t), e.postalCode && this.writeNode("PostalCode", e.postalCode, t)), t
                                },
                                freeFormAddress: function (e) {
                                    return this.createElementNSPlus("freeFormAddress", {
                                        value: e
                                    })
                                },
                                StreetAddress: function (e) {
                                    var t = this.createElementNSPlus("xls:StreetAddress");
                                    e.building && this.writeNode(t, "Building", e.building), e = e.street, OpenLayers.Util.isArray(e) || (e = [e]);
                                    for (var i = 0, s = e.length; i < s; i++) this.writeNode("Street", e[i], t);
                                    return t
                                },
                                Building: function (e) {
                                    return this.createElementNSPlus("xls:Building", {
                                        attributes: {
                                            number: e.number,
                                            subdivision: e.subdivision,
                                            buildingName: e.buildingName
                                        }
                                    })
                                },
                                Street: function (e) {
                                    return this.createElementNSPlus("xls:Street", {
                                        value: e
                                    })
                                },
                                Municipality: function (e) {
                                    return this.createElementNSPlus("xls:Place", {
                                        attributes: {
                                            type: "Municipality"
                                        },
                                        value: e
                                    })
                                },
                                CountrySubdivision: function (e) {
                                    return this.createElementNSPlus("xls:Place", {
                                        attributes: {
                                            type: "CountrySubdivision"
                                        },
                                        value: e
                                    })
                                },
                                PostalCode: function (e) {
                                    return this.createElementNSPlus("xls:PostalCode", {
                                        value: e
                                    })
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.XLS.v1"
                    }), OpenLayers.Format.XLS.v1_1_0 = OpenLayers.Class(OpenLayers.Format.XLS.v1, {
                        VERSION: "1.1",
                        schemaLocation: "http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",
                        CLASS_NAME: "OpenLayers.Format.XLS.v1_1_0"
                    }), OpenLayers.Format.XLS.v1_1 = OpenLayers.Format.XLS.v1_1_0, OpenLayers.Renderer.SVG = OpenLayers.Class(OpenLayers.Renderer.Elements, {
                        xmlns: "http://www.w3.org/2000/svg",
                        xlinkns: "http://www.w3.org/1999/xlink",
                        MAX_PIXEL: 15e3,
                        translationParameters: null,
                        symbolMetrics: null,
                        initialize: function (e) {
                            this.supported() && (OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments), this.translationParameters = {
                                x: 0,
                                y: 0
                            }, this.symbolMetrics = {})
                        },
                        supported: function () {
                            return document.implementation && (document.implementation.hasFeature("org.w3c.svg", "1.0") || document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG", "1.1") || document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1"))
                        },
                        inValidRange: function (e, t, i) {
                            return e += i ? 0 : this.translationParameters.x, t += i ? 0 : this.translationParameters.y, e >= -this.MAX_PIXEL && e <= this.MAX_PIXEL && t >= -this.MAX_PIXEL && t <= this.MAX_PIXEL
                        },
                        setExtent: function (e, t) {
                            var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments),
                                s = this.getResolution(),
                                r = -e.left / s;
                            s = e.top / s;
                            return t ? (this.left = r, this.top = s, this.rendererRoot.setAttributeNS(null, "viewBox", "0 0 " + this.size.w + " " + this.size.h), this.translate(this.xOffset, 0), !0) : ((r = this.translate(r - this.left + this.xOffset, s - this.top)) || this.setExtent(e, !0), i && r)
                        },
                        translate: function (e, t) {
                            if (this.inValidRange(e, t, !0)) {
                                var i = "";
                                return (e || t) && (i = "translate(" + e + "," + t + ")"), this.root.setAttributeNS(null, "transform", i), this.translationParameters = {
                                    x: e,
                                    y: t
                                }, !0
                            }
                            return !1
                        },
                        setSize: function (e) {
                            OpenLayers.Renderer.prototype.setSize.apply(this, arguments), this.rendererRoot.setAttributeNS(null, "width", this.size.w), this.rendererRoot.setAttributeNS(null, "height", this.size.h)
                        },
                        getNodeType: function (e, t) {
                            var i = null;
                            switch (e.CLASS_NAME) {
                                case "OpenLayers.Geometry.Point":
                                    i = t.externalGraphic ? "image" : this.isComplexSymbol(t.graphicName) ? "svg" : "circle";
                                    break;
                                case "OpenLayers.Geometry.Rectangle":
                                    i = "rect";
                                    break;
                                case "OpenLayers.Geometry.LineString":
                                    i = "polyline";
                                    break;
                                case "OpenLayers.Geometry.LinearRing":
                                    i = "polygon";
                                    break;
                                case "OpenLayers.Geometry.Polygon":
                                case "OpenLayers.Geometry.Curve":
                                    i = "path"
                            }
                            return i
                        },
                        setStyle: function (e, t, i) {
                            (t = t || e._style, i = i || e._options, n = t.title || t.graphicTitle) && (e.setAttributeNS(null, "title", n), 0 < (r = e.getElementsByTagName("title")).length ? r[0].firstChild.textContent = n : ((r = this.nodeFactory(null, "title")).textContent = n, e.appendChild(r)));
                            var s, r = parseFloat(e.getAttributeNS(null, "r")),
                                n = 1;
                            if ("OpenLayers.Geometry.Point" == e._geometryClass && r) {
                                if (e.style.visibility = "", !1 === t.graphic) e.style.visibility = "hidden";
                                else if (t.externalGraphic) {
                                    s = this.getPosition(e), t.graphicWidth && t.graphicHeight && e.setAttributeNS(null, "preserveAspectRatio", "none");
                                    r = t.graphicWidth || t.graphicHeight;
                                    var a = t.graphicHeight || t.graphicWidth,
                                        o = (r = r || 2 * t.pointRadius, a = a || 2 * t.pointRadius, null != t.graphicYOffset ? t.graphicYOffset : -.5 * a),
                                        l = t.graphicOpacity || t.fillOpacity;
                                    e.setAttributeNS(null, "x", (s.x + (null != t.graphicXOffset ? t.graphicXOffset : -.5 * r)).toFixed()), e.setAttributeNS(null, "y", (s.y + o).toFixed()), e.setAttributeNS(null, "width", r), e.setAttributeNS(null, "height", a), e.setAttributeNS(this.xlinkns, "xlink:href", t.externalGraphic), e.setAttributeNS(null, "style", "opacity: " + l), e.onclick = OpenLayers.Event.preventDefault
                                } else if (this.isComplexSymbol(t.graphicName)) {
                                    a = 2 * (r = 3 * t.pointRadius);
                                    var h = this.importSymbol(t.graphicName);
                                    s = this.getPosition(e), n = 3 * this.symbolMetrics[h.id][0] / a, o = e.parentNode, l = e.nextSibling, o && o.removeChild(e), e.firstChild && e.removeChild(e.firstChild), e.appendChild(h.firstChild.cloneNode(!0)), e.setAttributeNS(null, "viewBox", h.getAttributeNS(null, "viewBox")), e.setAttributeNS(null, "width", a), e.setAttributeNS(null, "height", a), e.setAttributeNS(null, "x", s.x - r), e.setAttributeNS(null, "y", s.y - r), l ? o.insertBefore(e, l) : o && o.appendChild(e)
                                } else e.setAttributeNS(null, "r", t.pointRadius);
                                void 0 === (r = t.rotation) && void 0 === e._rotation || !s || (e._rotation = r, r |= 0, "svg" !== e.nodeName ? e.setAttributeNS(null, "transform", "rotate(" + r + " " + s.x + " " + s.y + ")") : (s = this.symbolMetrics[h.id], e.firstChild.setAttributeNS(null, "transform", "rotate(" + r + " " + s[1] + " " + s[2] + ")")))
                            }
                            return i.isFilled ? (e.setAttributeNS(null, "fill", t.fillColor), e.setAttributeNS(null, "fill-opacity", t.fillOpacity)) : e.setAttributeNS(null, "fill", "none"), i.isStroked ? (e.setAttributeNS(null, "stroke", t.strokeColor), e.setAttributeNS(null, "stroke-opacity", t.strokeOpacity), e.setAttributeNS(null, "stroke-width", t.strokeWidth * n), e.setAttributeNS(null, "stroke-linecap", t.strokeLinecap || "round"), e.setAttributeNS(null, "stroke-linejoin", "round"), t.strokeDashstyle && e.setAttributeNS(null, "stroke-dasharray", this.dashStyle(t, n))) : e.setAttributeNS(null, "stroke", "none"), t.pointerEvents && e.setAttributeNS(null, "pointer-events", t.pointerEvents), null != t.cursor && e.setAttributeNS(null, "cursor", t.cursor), e
                        },
                        dashStyle: function (e, t) {
                            var i = e.strokeWidth * t,
                                s = e.strokeDashstyle;
                            switch (s) {
                                case "solid":
                                    return "none";
                                case "dot":
                                    return [1, 4 * i].join();
                                case "dash":
                                    return [4 * i, 4 * i].join();
                                case "dashdot":
                                    return [4 * i, 4 * i, 1, 4 * i].join();
                                case "longdash":
                                    return [8 * i, 4 * i].join();
                                case "longdashdot":
                                    return [8 * i, 4 * i, 1, 4 * i].join();
                                default:
                                    return OpenLayers.String.trim(s).replace(/\s+/g, ",")
                            }
                        },
                        createNode: function (e, t) {
                            var i = document.createElementNS(this.xmlns, e);
                            return t && i.setAttributeNS(null, "id", t), i
                        },
                        nodeTypeCompare: function (e, t) {
                            return t == e.nodeName
                        },
                        createRenderRoot: function () {
                            var e = this.nodeFactory(this.container.id + "_svgRoot", "svg");
                            return e.style.display = "block", e
                        },
                        createRoot: function (e) {
                            return this.nodeFactory(this.container.id + e, "g")
                        },
                        createDefs: function () {
                            var e = this.nodeFactory(this.container.id + "_defs", "defs");
                            return this.rendererRoot.appendChild(e), e
                        },
                        drawPoint: function (e, t) {
                            return this.drawCircle(e, t, 1)
                        },
                        drawCircle: function (e, t, i) {
                            var s = this.getResolution(),
                                r = (t.x - this.featureDx) / s + this.left;
                            return t = this.top - t.y / s, !!this.inValidRange(r, t) && (e.setAttributeNS(null, "cx", r), e.setAttributeNS(null, "cy", t), e.setAttributeNS(null, "r", i), e)
                        },
                        drawLineString: function (e, t) {
                            var i = this.getComponentsString(t.components);
                            return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null)
                        },
                        drawLinearRing: function (e, t) {
                            var i = this.getComponentsString(t.components);
                            return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null)
                        },
                        drawPolygon: function (e, t) {
                            for (var i, s, r = "", n = !0, a = !0, o = 0, l = t.components.length; o < l; o++) r += " M", (s = (i = this.getComponentsString(t.components[o].components, " ")).path) ? (r += " " + s, a = i.complete && a) : n = !1;
                            return !!n && (e.setAttributeNS(null, "d", r + " z"), e.setAttributeNS(null, "fill-rule", "evenodd"), a ? e : null)
                        },
                        drawRectangle: function (e, t) {
                            var i = this.getResolution(),
                                s = (t.x - this.featureDx) / i + this.left,
                                r = this.top - t.y / i;
                            return !!this.inValidRange(s, r) && (e.setAttributeNS(null, "x", s), e.setAttributeNS(null, "y", r), e.setAttributeNS(null, "width", t.width / i), e.setAttributeNS(null, "height", t.height / i), e)
                        },
                        drawText: function (e, t, i) {
                            (a = !!t.labelOutlineWidth) && ((r = OpenLayers.Util.extend({}, t)).fontColor = r.labelOutlineColor, r.fontStrokeColor = r.labelOutlineColor, r.fontStrokeWidth = t.labelOutlineWidth, t.labelOutlineOpacity && (r.fontOpacity = t.labelOutlineOpacity), delete r.labelOutlineWidth, this.drawText(e, r, i));
                            var s = this.getResolution(),
                                r = (i.x - this.featureDx) / s + this.left,
                                n = i.y / s - this.top,
                                a = a ? this.LABEL_OUTLINE_SUFFIX : this.LABEL_ID_SUFFIX;
                            (s = this.nodeFactory(e + a, "text")).setAttributeNS(null, "x", r), s.setAttributeNS(null, "y", -n), t.fontColor && s.setAttributeNS(null, "fill", t.fontColor), t.fontStrokeColor && s.setAttributeNS(null, "stroke", t.fontStrokeColor), t.fontStrokeWidth && s.setAttributeNS(null, "stroke-width", t.fontStrokeWidth), t.fontOpacity && s.setAttributeNS(null, "opacity", t.fontOpacity), t.fontFamily && s.setAttributeNS(null, "font-family", t.fontFamily), t.fontSize && s.setAttributeNS(null, "font-size", t.fontSize), t.fontWeight && s.setAttributeNS(null, "font-weight", t.fontWeight), t.fontStyle && s.setAttributeNS(null, "font-style", t.fontStyle), !0 === t.labelSelect ? (s.setAttributeNS(null, "pointer-events", "visible"), s._featureId = e) : s.setAttributeNS(null, "pointer-events", "none"), n = t.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign, s.setAttributeNS(null, "text-anchor", OpenLayers.Renderer.SVG.LABEL_ALIGN[n[0]] || "middle"), !0 === OpenLayers.IS_GECKO && s.setAttributeNS(null, "dominant-baseline", OpenLayers.Renderer.SVG.LABEL_ALIGN[n[1]] || "central");
                            for (var o = t.label.split("\n"), l = o.length; s.childNodes.length > l;) s.removeChild(s.lastChild);
                            for (var h = 0; h < l; h++) {
                                var p = this.nodeFactory(e + a + "_tspan_" + h, "tspan");
                                if (!0 === t.labelSelect && (p._featureId = e, p._geometry = i, p._geometryClass = i.CLASS_NAME), !1 === OpenLayers.IS_GECKO && p.setAttributeNS(null, "baseline-shift", OpenLayers.Renderer.SVG.LABEL_VSHIFT[n[1]] || "-35%"), p.setAttribute("x", r), 0 == h) {
                                    var u = OpenLayers.Renderer.SVG.LABEL_VFACTOR[n[1]];
                                    null == u && (u = -.5), p.setAttribute("dy", u * (l - 1) + "em")
                                } else p.setAttribute("dy", "1em");
                                p.textContent = "" === o[h] ? " " : o[h], p.parentNode || s.appendChild(p)
                            }
                            s.parentNode || this.textRoot.appendChild(s)
                        },
                        getComponentsString: function (e, t) {
                            for (var i, s = [], r = !0, n = e.length, a = [], o = 0; o < n; o++) i = e[o], s.push(i), (i = this.getShortString(i)) ? a.push(i) : (0 < o && this.getShortString(e[o - 1]) && a.push(this.clipLine(e[o], e[o - 1])), o < n - 1 && this.getShortString(e[o + 1]) && a.push(this.clipLine(e[o], e[o + 1])), r = !1);
                            return {
                                path: a.join(t || ","),
                                complete: r
                            }
                        },
                        clipLine: function (e, t) {
                            if (t.equals(e)) return "";
                            var i, s = this.getResolution(),
                                r = this.MAX_PIXEL - this.translationParameters.x,
                                n = this.MAX_PIXEL - this.translationParameters.y,
                                a = (t.x - this.featureDx) / s + this.left,
                                o = this.top - t.y / s,
                                l = (e.x - this.featureDx) / s + this.left;
                            s = this.top - e.y / s;
                            return (l < -r || l > r) && (i = (s - o) / (l - a), s = o + ((l = 0 > l ? -r : r) - a) * i), (s < -n || s > n) && (i = (l - a) / (s - o), l = a + ((s = 0 > s ? -n : n) - o) * i), l + "," + s
                        },
                        getShortString: function (e) {
                            var t = this.getResolution(),
                                i = (e.x - this.featureDx) / t + this.left;
                            return e = this.top - e.y / t, !!this.inValidRange(i, e) && i + "," + e
                        },
                        getPosition: function (e) {
                            return {
                                x: parseFloat(e.getAttributeNS(null, "cx")),
                                y: parseFloat(e.getAttributeNS(null, "cy"))
                            }
                        },
                        importSymbol: function (e) {
                            this.defs || (this.defs = this.createDefs());
                            var t = this.container.id + "-" + e;
                            if (null != (a = document.getElementById(t))) return a;
                            var i = OpenLayers.Renderer.symbol[e];
                            if (!i) throw Error(e + " is not a valid symbol name");
                            e = this.nodeFactory(t, "symbol");
                            var s = this.nodeFactory(null, "polygon");
                            e.appendChild(s);
                            for (var r, n, a = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0), o = [], l = 0; l < i.length; l += 2) r = i[l], n = i[l + 1], a.left = Math.min(a.left, r), a.bottom = Math.min(a.bottom, n), a.right = Math.max(a.right, r), a.top = Math.max(a.top, n), o.push(r, ",", n);
                            return s.setAttributeNS(null, "points", o.join(" ")), i = a.getWidth(), s = a.getHeight(), e.setAttributeNS(null, "viewBox", [a.left - i, a.bottom - s, 3 * i, 3 * s].join(" ")), this.symbolMetrics[t] = [Math.max(i, s), a.getCenterLonLat().lon, a.getCenterLonLat().lat], this.defs.appendChild(e), e
                        },
                        getFeatureIdFromEvent: function (e) {
                            var t = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);
                            return t || (t = (t = e.target).parentNode && t != this.rendererRoot ? t.parentNode._featureId : void 0), t
                        },
                        CLASS_NAME: "OpenLayers.Renderer.SVG"
                    }), OpenLayers.Renderer.SVG.LABEL_ALIGN = {
                        l: "start",
                        r: "end",
                        b: "bottom",
                        t: "hanging"
                    }, OpenLayers.Renderer.SVG.LABEL_VSHIFT = {
                        t: "-70%",
                        b: "0"
                    }, OpenLayers.Renderer.SVG.LABEL_VFACTOR = {
                        t: 0,
                        b: -1
                    }, OpenLayers.Renderer.SVG.preventDefault = function (e) {
                        OpenLayers.Event.preventDefault(e)
                    }, OpenLayers.Format.SLD.v1_0_0 = OpenLayers.Class(OpenLayers.Format.SLD.v1, {
                        VERSION: "1.0.0",
                        schemaLocation: "http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",
                        CLASS_NAME: "OpenLayers.Format.SLD.v1_0_0"
                    }), OpenLayers.Format.OWSContext = OpenLayers.Class(OpenLayers.Format.Context, {
                        defaultVersion: "0.3.1",
                        getVersion: function (e, t) {
                            var i = OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this, arguments);
                            return "0.3.0" === i && (i = this.defaultVersion), i
                        },
                        toContext: function (e) {
                            var t = {};
                            return "OpenLayers.Map" == e.CLASS_NAME && (t.bounds = e.getExtent(), t.maxExtent = e.maxExtent, t.projection = e.projection, t.size = e.getSize(), t.layers = e.layers), t
                        },
                        CLASS_NAME: "OpenLayers.Format.OWSContext"
                    }), OpenLayers.Format.OWSContext.v0_3_1 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            owc: "http://www.opengis.net/ows-context",
                            gml: "http://www.opengis.net/gml",
                            kml: "http://www.opengis.net/kml/2.2",
                            ogc: "http://www.opengis.net/ogc",
                            ows: "http://www.opengis.net/ows",
                            sld: "http://www.opengis.net/sld",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        VERSION: "0.3.1",
                        schemaLocation: "http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",
                        defaultPrefix: "owc",
                        extractAttributes: !0,
                        xy: !0,
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        featureNS: "http://mapserver.gis.umn.edu/mapserver",
                        featureType: "vector",
                        geometryName: "geometry",
                        nestingLayerLookup: null,
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e]), OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this)
                        },
                        setNestingPath: function (e) {
                            if (e.layersContext)
                                for (var t = 0, i = e.layersContext.length; t < i; t++) {
                                    var s = e.layersContext[t],
                                        r = [],
                                        n = e.title || "";
                                    e.metadata && e.metadata.nestingPath && (r = e.metadata.nestingPath.slice()), "" != n && r.push(n), s.metadata.nestingPath = r, s.layersContext && this.setNestingPath(s)
                                }
                        },
                        decomposeNestingPath: function (e) {
                            var t = [];
                            if (OpenLayers.Util.isArray(e)) {
                                for (e = e.slice(); 0 < e.length;) t.push(e.slice()), e.pop();
                                t.reverse()
                            }
                            return t
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), this.setNestingPath({
                                layersContext: t.layersContext
                            }), e = [], this.processLayer(e, t), delete t.layersContext, t.layersContext = e, t
                        },
                        processLayer: function (e, t) {
                            if (t.layersContext)
                                for (var i = 0, s = t.layersContext.length; i < s; i++) {
                                    var r = t.layersContext[i];
                                    e.push(r), r.layersContext && this.processLayer(e, r)
                                }
                        },
                        write: function (e, t) {
                            this.nestingLayerLookup = {}, t = t || {}, OpenLayers.Util.applyDefaults(t, e);
                            var i = this.writeNode("OWSContext", t);
                            return this.nestingLayerLookup = null, this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [i])
                        },
                        readers: {
                            kml: {
                                Document: function (e, t) {
                                    t.features = new OpenLayers.Format.KML({
                                        kmlns: this.namespaces.kml,
                                        extractStyles: !0
                                    }).read(e)
                                }
                            },
                            owc: {
                                OWSContext: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                General: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                ResourceList: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Layer: function (e, t) {
                                    var i = {
                                        metadata: {},
                                        visibility: "1" != e.getAttribute("hidden"),
                                        queryable: "1" == e.getAttribute("queryable"),
                                        opacity: null != e.getAttribute("opacity") ? parseFloat(e.getAttribute("opacity")) : null,
                                        name: e.getAttribute("name"),
                                        categoryLayer: null == e.getAttribute("name"),
                                        formats: [],
                                        styles: []
                                    };
                                    t.layersContext || (t.layersContext = []), t.layersContext.push(i), this.readChildNodes(e, i)
                                },
                                InlineGeometry: function (e, t) {
                                    t.features = [];
                                    var i, s = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMember");
                                    1 <= s.length && (i = s[0]), i && i.firstChild && (s = i.firstChild.nextSibling ? i.firstChild.nextSibling : i.firstChild, this.setNamespace("feature", s.namespaceURI), this.featureType = s.localName || s.nodeName.split(":").pop(), this.readChildNodes(e, t))
                                },
                                Server: function (e, t) {
                                    (t.service || t.version) && t.service == OpenLayers.Format.Context.serviceTypes.WMS || (t.service = e.getAttribute("service"), t.version = e.getAttribute("version"), this.readChildNodes(e, t))
                                },
                                Name: function (e, t) {
                                    t.name = this.getChildValue(e), this.readChildNodes(e, t)
                                },
                                Title: function (e, t) {
                                    t.title = this.getChildValue(e), this.readChildNodes(e, t)
                                },
                                StyleList: function (e, t) {
                                    this.readChildNodes(e, t.styles)
                                },
                                Style: function (e, t) {
                                    var i = {};
                                    t.push(i), this.readChildNodes(e, i)
                                },
                                LegendURL: function (e, t) {
                                    var i = {};
                                    t.legend = i, this.readChildNodes(e, i)
                                },
                                OnlineResource: function (e, t) {
                                    t.url = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t)
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
                            gml: OpenLayers.Format.GML.v2.prototype.readers.gml,
                            sld: OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,
                            feature: OpenLayers.Format.GML.v2.prototype.readers.feature
                        },
                        writers: {
                            owc: {
                                OWSContext: function (e) {
                                    var t = this.createElementNSPlus("OWSContext", {
                                        attributes: {
                                            version: this.VERSION,
                                            id: e.id || OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")
                                        }
                                    });
                                    return this.writeNode("General", e, t), this.writeNode("ResourceList", e, t), t
                                },
                                General: function (e) {
                                    var t = this.createElementNSPlus("General");
                                    return this.writeNode("ows:BoundingBox", e, t), this.writeNode("ows:Title", e.title || "OpenLayers OWSContext", t), t
                                },
                                ResourceList: function (e) {
                                    for (var t = this.createElementNSPlus("ResourceList"), i = 0, s = e.layers.length; i < s; i++) {
                                        var r = e.layers[i],
                                            n = this.decomposeNestingPath(r.metadata.nestingPath);
                                        this.writeNode("_Layer", {
                                            layer: r,
                                            subPaths: n
                                        }, t)
                                    }
                                    return t
                                },
                                Server: function (e) {
                                    var t = this.createElementNSPlus("Server", {
                                        attributes: {
                                            version: e.version,
                                            service: e.service
                                        }
                                    });
                                    return this.writeNode("OnlineResource", e, t), t
                                },
                                OnlineResource: function (e) {
                                    return this.createElementNSPlus("OnlineResource", {
                                        attributes: {
                                            "xlink:href": e.url
                                        }
                                    })
                                },
                                InlineGeometry: function (e) {
                                    var t = this.createElementNSPlus("InlineGeometry");
                                    null !== (i = e.getDataExtent()) && this.writeNode("gml:boundedBy", i, t);
                                    for (var i = 0, s = e.features.length; i < s; i++) this.writeNode("gml:featureMember", e.features[i], t);
                                    return t
                                },
                                StyleList: function (e) {
                                    for (var t = this.createElementNSPlus("StyleList"), i = 0, s = e.length; i < s; i++) this.writeNode("Style", e[i], t);
                                    return t
                                },
                                Style: function (e) {
                                    var t = this.createElementNSPlus("Style");
                                    return this.writeNode("Name", e, t), this.writeNode("Title", e, t), e.legend && this.writeNode("LegendURL", e, t), t
                                },
                                Name: function (e) {
                                    return this.createElementNSPlus("Name", {
                                        value: e.name
                                    })
                                },
                                Title: function (e) {
                                    return this.createElementNSPlus("Title", {
                                        value: e.title
                                    })
                                },
                                LegendURL: function (e) {
                                    var t = this.createElementNSPlus("LegendURL");
                                    return this.writeNode("OnlineResource", e.legend, t), t
                                },
                                _WMS: function (e) {
                                    var t = this.createElementNSPlus("Layer", {
                                        attributes: {
                                            name: e.params.LAYERS,
                                            queryable: e.queryable ? "1" : "0",
                                            hidden: e.visibility ? "0" : "1",
                                            opacity: e.hasOwnProperty("opacity") ? e.opacity : null
                                        }
                                    });
                                    return this.writeNode("ows:Title", e.name, t), this.writeNode("ows:OutputFormat", e.params.FORMAT, t), this.writeNode("Server", {
                                        service: OpenLayers.Format.Context.serviceTypes.WMS,
                                        version: e.params.VERSION,
                                        url: e.url
                                    }, t), e.metadata.styles && 0 < e.metadata.styles.length && this.writeNode("StyleList", e.metadata.styles, t), t
                                },
                                _Layer: function (e) {
                                    var t, i, s;
                                    return t = e.layer, s = null, 0 < (i = e.subPaths).length ? (t = i[0].join("/"), i = t.lastIndexOf("/"), s = this.nestingLayerLookup[t], i = 0 < i ? t.substring(i + 1, t.length) : t, s || (s = this.createElementNSPlus("Layer"), this.writeNode("ows:Title", i, s), this.nestingLayerLookup[t] = s), e.subPaths.shift(), this.writeNode("_Layer", e, s)) : (t instanceof OpenLayers.Layer.WMS ? s = this.writeNode("_WMS", t) : t instanceof OpenLayers.Layer.Vector && (t.protocol instanceof OpenLayers.Protocol.WFS.v1 ? s = this.writeNode("_WFS", t) : t.protocol instanceof OpenLayers.Protocol.HTTP ? t.protocol.format instanceof OpenLayers.Format.GML ? (t.protocol.format.version = "2.1.2", s = this.writeNode("_GML", t)) : t.protocol.format instanceof OpenLayers.Format.KML && (t.protocol.format.version = "2.2", s = this.writeNode("_KML", t)) : (this.setNamespace("feature", this.featureNS), s = this.writeNode("_InlineGeometry", t))), t.options.maxScale && this.writeNode("sld:MinScaleDenominator", t.options.maxScale, s), t.options.minScale && this.writeNode("sld:MaxScaleDenominator", t.options.minScale, s), this.nestingLayerLookup[t.name] = s), s
                                },
                                _WFS: function (e) {
                                    var t = this.createElementNSPlus("Layer", {
                                        attributes: {
                                            name: e.protocol.featurePrefix + ":" + e.protocol.featureType,
                                            hidden: e.visibility ? "0" : "1"
                                        }
                                    });
                                    return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                                        service: OpenLayers.Format.Context.serviceTypes.WFS,
                                        version: e.protocol.version,
                                        url: e.protocol.url
                                    }, t), t
                                },
                                _InlineGeometry: function (e) {
                                    var t = this.createElementNSPlus("Layer", {
                                        attributes: {
                                            name: this.featureType,
                                            hidden: e.visibility ? "0" : "1"
                                        }
                                    });
                                    return this.writeNode("ows:Title", e.name, t), this.writeNode("InlineGeometry", e, t), t
                                },
                                _GML: function (e) {
                                    var t = this.createElementNSPlus("Layer");
                                    return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                                        service: OpenLayers.Format.Context.serviceTypes.GML,
                                        url: e.protocol.url,
                                        version: e.protocol.format.version
                                    }, t), t
                                },
                                _KML: function (e) {
                                    var t = this.createElementNSPlus("Layer");
                                    return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                                        service: OpenLayers.Format.Context.serviceTypes.KML,
                                        version: e.protocol.format.version,
                                        url: e.protocol.url
                                    }, t), t
                                }
                            },
                            gml: OpenLayers.Util.applyDefaults({
                                boundedBy: function (e) {
                                    var t = this.createElementNSPlus("gml:boundedBy");
                                    return this.writeNode("gml:Box", e, t), t
                                }
                            }, OpenLayers.Format.GML.v2.prototype.writers.gml),
                            ows: OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,
                            sld: OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,
                            feature: OpenLayers.Format.GML.v2.prototype.writers.feature
                        },
                        CLASS_NAME: "OpenLayers.Format.OWSContext.v0_3_1"
                    }), OpenLayers.Popup = OpenLayers.Class({
                        events: null,
                        id: "",
                        lonlat: null,
                        div: null,
                        contentSize: null,
                        size: null,
                        contentHTML: null,
                        backgroundColor: "",
                        opacity: "",
                        border: "",
                        contentDiv: null,
                        groupDiv: null,
                        closeDiv: null,
                        autoSize: !1,
                        minSize: null,
                        maxSize: null,
                        displayClass: "olPopup",
                        contentDisplayClass: "olPopupContent",
                        padding: 0,
                        disableFirefoxOverflowHack: !1,
                        fixPadding: function () {
                            "number" == typeof this.padding && (this.padding = new OpenLayers.Bounds(this.padding, this.padding, this.padding, this.padding))
                        },
                        panMapIfOutOfView: !1,
                        keepInMap: !1,
                        closeOnMove: !1,
                        map: null,
                        initialize: function (e, t, i, s, r, n) {
                            null == e && (e = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")), this.id = e, this.lonlat = t, this.contentSize = null != i ? i : new OpenLayers.Size(OpenLayers.Popup.WIDTH, OpenLayers.Popup.HEIGHT), null != s && (this.contentHTML = s), this.backgroundColor = OpenLayers.Popup.COLOR, this.opacity = OpenLayers.Popup.OPACITY, this.border = OpenLayers.Popup.BORDER, this.div = OpenLayers.Util.createDiv(this.id, null, null, null, null, null, "hidden"), this.div.className = this.displayClass, this.groupDiv = OpenLayers.Util.createDiv(this.id + "_GroupDiv", null, null, null, "relative", null, "hidden"), e = this.div.id + "_contentDiv", this.contentDiv = OpenLayers.Util.createDiv(e, null, this.contentSize.clone(), null, "relative"), this.contentDiv.className = this.contentDisplayClass, this.groupDiv.appendChild(this.contentDiv), this.div.appendChild(this.groupDiv), r && this.addCloseBox(n), this.registerEvents()
                        },
                        destroy: function () {
                            this.border = this.opacity = this.backgroundColor = this.contentHTML = this.size = this.lonlat = this.id = null, this.closeOnMove && this.map && this.map.events.unregister("movestart", this, this.hide), this.events.destroy(), this.events = null, this.closeDiv && (OpenLayers.Event.stopObservingElement(this.closeDiv), this.groupDiv.removeChild(this.closeDiv)), this.closeDiv = null, this.div.removeChild(this.groupDiv), this.groupDiv = null, null != this.map && this.map.removePopup(this), this.panMapIfOutOfView = this.padding = this.maxSize = this.minSize = this.autoSize = this.div = this.map = null
                        },
                        draw: function (e) {
                            return null == e && null != this.lonlat && null != this.map && (e = this.map.getLayerPxFromLonLat(this.lonlat)), this.closeOnMove && this.map.events.register("movestart", this, this.hide), this.disableFirefoxOverflowHack || "firefox" != OpenLayers.BROWSER_NAME || (this.map.events.register("movestart", this, (function () {
                                var e = document.defaultView.getComputedStyle(this.contentDiv, null).getPropertyValue("overflow");
                                "hidden" != e && (this.contentDiv._oldOverflow = e, this.contentDiv.style.overflow = "hidden")
                            })), this.map.events.register("moveend", this, (function () {
                                var e = this.contentDiv._oldOverflow;
                                e && (this.contentDiv.style.overflow = e, this.contentDiv._oldOverflow = null)
                            }))), this.moveTo(e), this.autoSize || this.size || this.setSize(this.contentSize), this.setBackgroundColor(), this.setOpacity(), this.setBorder(), this.setContentHTML(), this.panMapIfOutOfView && this.panIntoView(), this.div
                        },
                        updatePosition: function () {
                            if (this.lonlat && this.map) {
                                var e = this.map.getLayerPxFromLonLat(this.lonlat);
                                e && this.moveTo(e)
                            }
                        },
                        moveTo: function (e) {
                            null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px")
                        },
                        visible: function () {
                            return OpenLayers.Element.visible(this.div)
                        },
                        toggle: function () {
                            this.visible() ? this.hide() : this.show()
                        },
                        show: function () {
                            this.div.style.display = "", this.panMapIfOutOfView && this.panIntoView()
                        },
                        hide: function () {
                            this.div.style.display = "none"
                        },
                        setSize: function (e) {
                            this.size = e.clone();
                            var t = this.getContentDivPadding(),
                                i = t.left + t.right,
                                s = t.top + t.bottom;
                            if (this.fixPadding(), i += this.padding.left + this.padding.right, s += this.padding.top + this.padding.bottom, this.closeDiv) i = i + (parseInt(this.closeDiv.style.width) + t.right);
                            this.size.w += i, this.size.h += s, "msie" == OpenLayers.BROWSER_NAME && (this.contentSize.w += t.left + t.right, this.contentSize.h += t.bottom + t.top), null != this.div && (this.div.style.width = this.size.w + "px", this.div.style.height = this.size.h + "px"), null != this.contentDiv && (this.contentDiv.style.width = e.w + "px", this.contentDiv.style.height = e.h + "px")
                        },
                        updateSize: function () {
                            var e = "<div class='" + this.contentDisplayClass + "'>" + this.contentDiv.innerHTML + "</div>",
                                t = this.map ? this.map.div : document.body,
                                i = OpenLayers.Util.getRenderedDimensions(e, null, {
                                    displayClass: this.displayClass,
                                    containerElement: t
                                }),
                                s = this.getSafeContentSize(i),
                                r = null;
                            s.equals(i) ? r = i : (i = {
                                w: s.w < i.w ? s.w : null,
                                h: s.h < i.h ? s.h : null
                            }).w && i.h ? r = s : (e = OpenLayers.Util.getRenderedDimensions(e, i, {
                                displayClass: this.contentDisplayClass,
                                containerElement: t
                            }), "hidden" != OpenLayers.Element.getStyle(this.contentDiv, "overflow") && e.equals(s) && (s = OpenLayers.Util.getScrollbarWidth(), i.w ? e.h += s : e.w += s), r = this.getSafeContentSize(e)), this.setSize(r)
                        },
                        setBackgroundColor: function (e) {
                            null != e && (this.backgroundColor = e), null != this.div && (this.div.style.backgroundColor = this.backgroundColor)
                        },
                        setOpacity: function (e) {
                            null != e && (this.opacity = e), null != this.div && (this.div.style.opacity = this.opacity, this.div.style.filter = "alpha(opacity=" + 100 * this.opacity + ")")
                        },
                        setBorder: function (e) {
                            null != e && (this.border = e), null != this.div && (this.div.style.border = this.border)
                        },
                        setContentHTML: function (e) {
                            null != e && (this.contentHTML = e), null != this.contentDiv && null != this.contentHTML && this.contentHTML != this.contentDiv.innerHTML && (this.contentDiv.innerHTML = this.contentHTML, this.autoSize && (this.registerImageListeners(), this.updateSize()))
                        },
                        registerImageListeners: function () {
                            for (var e = function () {
                                    null !== this.popup.id && (this.popup.updateSize(), this.popup.visible() && this.popup.panMapIfOutOfView && this.popup.panIntoView(), OpenLayers.Event.stopObserving(this.img, "load", this.img._onImgLoad))
                                }, t = this.contentDiv.getElementsByTagName("img"), i = 0, s = t.length; i < s; i++) {
                                var r = t[i];
                                0 != r.width && 0 != r.height || (r._onImgLoad = OpenLayers.Function.bind(e, {
                                    popup: this,
                                    img: r
                                }), OpenLayers.Event.observe(r, "load", r._onImgLoad))
                            }
                        },
                        getSafeContentSize: function (e) {
                            e = e.clone();
                            var t = this.getContentDivPadding(),
                                i = t.left + t.right,
                                s = t.top + t.bottom;
                            if (this.fixPadding(), i += this.padding.left + this.padding.right, s += this.padding.top + this.padding.bottom, this.closeDiv) {
                                var r = parseInt(this.closeDiv.style.width);
                                i = i + (r + t.right)
                            }
                            if (this.minSize && (e.w = Math.max(e.w, this.minSize.w - i), e.h = Math.max(e.h, this.minSize.h - s)), this.maxSize && (e.w = Math.min(e.w, this.maxSize.w - i), e.h = Math.min(e.h, this.maxSize.h - s)), this.map && this.map.size) {
                                if (r = t = 0, this.keepInMap && !this.panMapIfOutOfView) switch (r = this.map.getPixelFromLonLat(this.lonlat), this.relativePosition) {
                                    case "tr":
                                        t = r.x, r = this.map.size.h - r.y;
                                        break;
                                    case "tl":
                                        t = this.map.size.w - r.x, r = this.map.size.h - r.y;
                                        break;
                                    case "bl":
                                        t = this.map.size.w - r.x, r = r.y;
                                        break;
                                    case "br":
                                        t = r.x, r = r.y;
                                        break;
                                    default:
                                        t = r.x, r = this.map.size.h - r.y
                                }
                                s = this.map.size.h - this.map.paddingForPopups.top - this.map.paddingForPopups.bottom - s - r, e.w = Math.min(e.w, this.map.size.w - this.map.paddingForPopups.left - this.map.paddingForPopups.right - i - t), e.h = Math.min(e.h, s)
                            }
                            return e
                        },
                        getContentDivPadding: function () {
                            var e = this._contentDivPadding;
                            return e || (null == this.div.parentNode && (this.div.style.display = "none", document.body.appendChild(this.div)), this._contentDivPadding = e = new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv, "padding-left"), OpenLayers.Element.getStyle(this.contentDiv, "padding-bottom"), OpenLayers.Element.getStyle(this.contentDiv, "padding-right"), OpenLayers.Element.getStyle(this.contentDiv, "padding-top")), this.div.parentNode == document.body && (document.body.removeChild(this.div), this.div.style.display = "")), e
                        },
                        addCloseBox: function (e) {
                            this.closeDiv = OpenLayers.Util.createDiv(this.id + "_close", null, {
                                w: 17,
                                h: 17
                            }), this.closeDiv.className = "olPopupCloseBox";
                            var t = this.getContentDivPadding();
                            this.closeDiv.style.right = t.right + "px", this.closeDiv.style.top = t.top + "px", this.groupDiv.appendChild(this.closeDiv), e = e || function (e) {
                                this.hide(), OpenLayers.Event.stop(e)
                            }, OpenLayers.Event.observe(this.closeDiv, "touchend", OpenLayers.Function.bindAsEventListener(e, this)), OpenLayers.Event.observe(this.closeDiv, "click", OpenLayers.Function.bindAsEventListener(e, this))
                        },
                        panIntoView: function () {
                            var e = this.map.getSize(),
                                t = this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left), parseInt(this.div.style.top))),
                                i = t.clone();
                            t.x < this.map.paddingForPopups.left ? i.x = this.map.paddingForPopups.left : t.x + this.size.w > e.w - this.map.paddingForPopups.right && (i.x = e.w - this.map.paddingForPopups.right - this.size.w), t.y < this.map.paddingForPopups.top ? i.y = this.map.paddingForPopups.top : t.y + this.size.h > e.h - this.map.paddingForPopups.bottom && (i.y = e.h - this.map.paddingForPopups.bottom - this.size.h), this.map.pan(t.x - i.x, t.y - i.y)
                        },
                        registerEvents: function () {
                            this.events = new OpenLayers.Events(this, this.div, null, !0), this.events.on({
                                mousedown: this.onmousedown,
                                mousemove: this.onmousemove,
                                mouseup: this.onmouseup,
                                click: this.onclick,
                                mouseout: this.onmouseout,
                                dblclick: this.ondblclick,
                                touchstart: function (e) {
                                    OpenLayers.Event.stop(e, !0)
                                },
                                scope: this
                            })
                        },
                        onmousedown: function (e) {
                            this.mousedown = !0, OpenLayers.Event.stop(e, !0)
                        },
                        onmousemove: function (e) {
                            this.mousedown && OpenLayers.Event.stop(e, !0)
                        },
                        onmouseup: function (e) {
                            this.mousedown && (this.mousedown = !1, OpenLayers.Event.stop(e, !0))
                        },
                        onclick: function (e) {
                            OpenLayers.Event.stop(e, !0)
                        },
                        onmouseout: function (e) {
                            this.mousedown = !1
                        },
                        ondblclick: function (e) {
                            OpenLayers.Event.stop(e, !0)
                        },
                        CLASS_NAME: "OpenLayers.Popup"
                    }), OpenLayers.Popup.WIDTH = 200, OpenLayers.Popup.HEIGHT = 200, OpenLayers.Popup.COLOR = "white", OpenLayers.Popup.OPACITY = 1, OpenLayers.Popup.BORDER = "0px", OpenLayers.Control.ScaleLine = OpenLayers.Class(OpenLayers.Control, {
                        maxWidth: 100,
                        topOutUnits: "km",
                        topInUnits: "m",
                        bottomOutUnits: "mi",
                        bottomInUnits: "ft",
                        eTop: null,
                        eBottom: null,
                        geodesic: !1,
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this, arguments), this.eTop || (this.eTop = document.createElement("div"), this.eTop.className = this.displayClass + "Top", this.div.appendChild(this.eTop), this.eTop.style.visibility = "" == this.topOutUnits || "" == this.topInUnits ? "hidden" : "visible", this.eBottom = document.createElement("div"), this.eBottom.className = this.displayClass + "Bottom", this.div.appendChild(this.eBottom), this.eBottom.style.visibility = "" == this.bottomOutUnits || "" == this.bottomInUnits ? "hidden" : "visible"), this.map.events.register("moveend", this, this.update), this.update(), this.div
                        },
                        getBarLen: function (e) {
                            var t = parseInt(Math.log(e) / Math.log(10));
                            t = Math.pow(10, t);
                            return (5 < (e = parseInt(e / t)) ? 5 : 2 < e ? 2 : 1) * t
                        },
                        update: function () {
                            if (h = this.map.getResolution()) {
                                var e, t, i = this.map.getUnits(),
                                    s = OpenLayers.INCHES_PER_UNIT,
                                    r = this.maxWidth * h * s[i],
                                    n = 1;
                                !0 === this.geodesic && (r *= n = (this.map.getGeodesicPixelSize().w || 1e-6) * this.maxWidth / (r / s.km)), 1e5 < r ? (e = this.topOutUnits, t = this.bottomOutUnits) : (e = this.topInUnits, t = this.bottomInUnits);
                                var a = r / s[e],
                                    o = r / s[t],
                                    l = (r = this.getBarLen(a), this.getBarLen(o)),
                                    h = (a = r / s[i] * s[e], o = l / s[i] * s[t], i = a / h / n, o / h / n);
                                "visible" == this.eBottom.style.visibility && (this.eBottom.style.width = Math.round(h) + "px", this.eBottom.innerHTML = l + " " + t), "visible" == this.eTop.style.visibility && (this.eTop.style.width = Math.round(i) + "px", this.eTop.innerHTML = r + " " + e)
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.ScaleLine"
                    }), OpenLayers.Icon = OpenLayers.Class({
                        url: null,
                        size: null,
                        offset: null,
                        calculateOffset: null,
                        imageDiv: null,
                        px: null,
                        initialize: function (e, t, i, s) {
                            this.url = e, this.size = t || {
                                w: 20,
                                h: 20
                            }, this.offset = i || {
                                x: -this.size.w / 2,
                                y: -this.size.h / 2
                            }, this.calculateOffset = s, e = OpenLayers.Util.createUniqueID("OL_Icon_"), this.imageDiv = OpenLayers.Util.createAlphaImageDiv(e)
                        },
                        destroy: function () {
                            this.erase(), OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild), this.imageDiv.innerHTML = "", this.imageDiv = null
                        },
                        clone: function () {
                            return new OpenLayers.Icon(this.url, this.size, this.offset, this.calculateOffset)
                        },
                        setSize: function (e) {
                            null != e && (this.size = e), this.draw()
                        },
                        setUrl: function (e) {
                            null != e && (this.url = e), this.draw()
                        },
                        draw: function (e) {
                            return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, this.size, this.url, "absolute"), this.moveTo(e), this.imageDiv
                        },
                        erase: function () {
                            null != this.imageDiv && null != this.imageDiv.parentNode && OpenLayers.Element.remove(this.imageDiv)
                        },
                        setOpacity: function (e) {
                            OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, null, null, null, null, null, e)
                        },
                        moveTo: function (e) {
                            null != e && (this.px = e), null != this.imageDiv && (null == this.px ? this.display(!1) : (this.calculateOffset && (this.offset = this.calculateOffset(this.size)), OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, {
                                x: this.px.x + this.offset.x,
                                y: this.px.y + this.offset.y
                            })))
                        },
                        display: function (e) {
                            this.imageDiv.style.display = e ? "" : "none"
                        },
                        isDrawn: function () {
                            return this.imageDiv && this.imageDiv.parentNode && 11 != this.imageDiv.parentNode.nodeType
                        },
                        CLASS_NAME: "OpenLayers.Icon"
                    }), OpenLayers.Marker = OpenLayers.Class({
                        icon: null,
                        lonlat: null,
                        events: null,
                        map: null,
                        initialize: function (e, t) {
                            this.lonlat = e;
                            var i = t || OpenLayers.Marker.defaultIcon();
                            null == this.icon ? this.icon = i : (this.icon.url = i.url, this.icon.size = i.size, this.icon.offset = i.offset, this.icon.calculateOffset = i.calculateOffset), this.events = new OpenLayers.Events(this, this.icon.imageDiv)
                        },
                        destroy: function () {
                            this.erase(), this.map = null, this.events.destroy(), this.events = null, null != this.icon && (this.icon.destroy(), this.icon = null)
                        },
                        draw: function (e) {
                            return this.icon.draw(e)
                        },
                        erase: function () {
                            null != this.icon && this.icon.erase()
                        },
                        moveTo: function (e) {
                            null != e && null != this.icon && this.icon.moveTo(e), this.lonlat = this.map.getLonLatFromLayerPx(e)
                        },
                        isDrawn: function () {
                            return this.icon && this.icon.isDrawn()
                        },
                        onScreen: function () {
                            var e = !1;
                            return this.map && (e = this.map.getExtent().containsLonLat(this.lonlat)), e
                        },
                        inflate: function (e) {
                            this.icon && this.icon.setSize({
                                w: this.icon.size.w * e,
                                h: this.icon.size.h * e
                            })
                        },
                        setOpacity: function (e) {
                            this.icon.setOpacity(e)
                        },
                        setUrl: function (e) {
                            this.icon.setUrl(e)
                        },
                        display: function (e) {
                            this.icon.display(e)
                        },
                        CLASS_NAME: "OpenLayers.Marker"
                    }), OpenLayers.Marker.defaultIcon = function () {
                        return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"), {
                            w: 21,
                            h: 25
                        }, {
                            x: -10.5,
                            y: -25
                        })
                    }, OpenLayers.Layer.TileCache = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        isBaseLayer: !0,
                        format: "image/png",
                        serverResolutions: null,
                        initialize: function (e, t, i, s) {
                            this.layername = i, OpenLayers.Layer.Grid.prototype.initialize.apply(this, [e, t, {}, s]), this.extension = this.format.split("/")[1].toLowerCase(), this.extension = "jpg" == this.extension ? "jpeg" : this.extension
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.TileCache(this.name, this.url, this.layername, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            var t = this.getServerResolution(),
                                i = this.maxExtent,
                                s = this.tileSize,
                                r = Math.round((e.left - i.left) / (t * s.w));
                            return e = Math.round((e.bottom - i.bottom) / (t * s.h)), t = null != this.serverResolutions ? OpenLayers.Util.indexOf(this.serverResolutions, t) : this.map.getZoom(), r = [this.layername, OpenLayers.Number.zeroPad(t, 2), OpenLayers.Number.zeroPad(parseInt(r / 1e6), 3), OpenLayers.Number.zeroPad(parseInt(r / 1e3) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(r) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(e / 1e6), 3), OpenLayers.Number.zeroPad(parseInt(e / 1e3) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(e) % 1e3, 3) + "." + this.extension].join("/"), t = this.url, OpenLayers.Util.isArray(t) && (t = this.selectUrl(r, t)), (t = "/" == t.charAt(t.length - 1) ? t : t + "/") + r
                        },
                        CLASS_NAME: "OpenLayers.Layer.TileCache"
                    }), OpenLayers.Strategy.Paging = OpenLayers.Class(OpenLayers.Strategy, {
                        features: null,
                        length: 10,
                        num: null,
                        paging: !1,
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.call(this);
                            return e && this.layer.events.on({
                                beforefeaturesadded: this.cacheFeatures,
                                scope: this
                            }), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Strategy.prototype.deactivate.call(this);
                            return e && (this.clearCache(), this.layer.events.un({
                                beforefeaturesadded: this.cacheFeatures,
                                scope: this
                            })), e
                        },
                        cacheFeatures: function (e) {
                            this.paging || (this.clearCache(), this.features = e.features, this.pageNext(e))
                        },
                        clearCache: function () {
                            if (this.features)
                                for (var e = 0; e < this.features.length; ++e) this.features[e].destroy();
                            this.num = this.features = null
                        },
                        pageCount: function () {
                            return Math.ceil((this.features ? this.features.length : 0) / this.length)
                        },
                        pageNum: function () {
                            return this.num
                        },
                        pageLength: function (e) {
                            return e && 0 < e && (this.length = e), this.length
                        },
                        pageNext: function (e) {
                            var t = !1;
                            return this.features && (null === this.num && (this.num = -1), t = this.page((this.num + 1) * this.length, e)), t
                        },
                        pagePrevious: function () {
                            var e = !1;
                            return this.features && (null === this.num && (this.num = this.pageCount()), e = this.page((this.num - 1) * this.length)), e
                        },
                        page: function (e, t) {
                            var i = !1;
                            if (this.features && 0 <= e && e < this.features.length) {
                                var s = Math.floor(e / this.length);
                                s != this.num && (this.paging = !0, i = this.features.slice(e, e + this.length), this.layer.removeFeatures(this.layer.features), this.num = s, t && t.features ? t.features = i : this.layer.addFeatures(i), this.paging = !1, i = !0)
                            }
                            return i
                        },
                        CLASS_NAME: "OpenLayers.Strategy.Paging"
                    }), OpenLayers.Control.DragFeature = OpenLayers.Class(OpenLayers.Control, {
                        geometryTypes: null,
                        onStart: function (e, t) {},
                        onDrag: function (e, t) {},
                        onComplete: function (e, t) {},
                        onEnter: function (e) {},
                        onLeave: function (e) {},
                        documentDrag: !1,
                        layer: null,
                        feature: null,
                        dragCallbacks: {},
                        featureCallbacks: {},
                        lastPixel: null,
                        initialize: function (e, t) {
                            OpenLayers.Control.prototype.initialize.apply(this, [t]), this.layer = e, this.handlers = {
                                drag: new OpenLayers.Handler.Drag(this, OpenLayers.Util.extend({
                                    down: this.downFeature,
                                    move: this.moveFeature,
                                    up: this.upFeature,
                                    out: this.cancel,
                                    done: this.doneDragging
                                }, this.dragCallbacks), {
                                    documentDrag: this.documentDrag
                                }),
                                feature: new OpenLayers.Handler.Feature(this, this.layer, OpenLayers.Util.extend({
                                    click: this.clickFeature,
                                    clickout: this.clickoutFeature,
                                    over: this.overFeature,
                                    out: this.outFeature
                                }, this.featureCallbacks), {
                                    geometryTypes: this.geometryTypes
                                })
                            }
                        },
                        clickFeature: function (e) {
                            this.handlers.feature.touch && !this.over && this.overFeature(e) && (this.handlers.drag.dragstart(this.handlers.feature.evt), this.handlers.drag.stopDown = !1)
                        },
                        clickoutFeature: function (e) {
                            this.handlers.feature.touch && this.over && (this.outFeature(e), this.handlers.drag.stopDown = !0)
                        },
                        destroy: function () {
                            this.layer = null, OpenLayers.Control.prototype.destroy.apply(this, [])
                        },
                        activate: function () {
                            return this.handlers.feature.activate() && OpenLayers.Control.prototype.activate.apply(this, arguments)
                        },
                        deactivate: function () {
                            return this.handlers.drag.deactivate(), this.handlers.feature.deactivate(), this.feature = null, this.dragging = !1, this.lastPixel = null, OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass + "Over"), OpenLayers.Control.prototype.deactivate.apply(this, arguments)
                        },
                        overFeature: function (e) {
                            var t = !1;
                            return this.handlers.drag.dragging ? this.over = this.feature.id == e.id : (this.feature = e, this.handlers.drag.activate(), this.over = t = !0, OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass + "Over"), this.onEnter(e)), t
                        },
                        downFeature: function (e) {
                            this.lastPixel = e, this.onStart(this.feature, e)
                        },
                        moveFeature: function (e) {
                            var t = this.map.getResolution();
                            this.feature.geometry.move(t * (e.x - this.lastPixel.x), t * (this.lastPixel.y - e.y)), this.layer.drawFeature(this.feature), this.lastPixel = e, this.onDrag(this.feature, e)
                        },
                        upFeature: function (e) {
                            this.over || this.handlers.drag.deactivate()
                        },
                        doneDragging: function (e) {
                            this.onComplete(this.feature, e)
                        },
                        outFeature: function (e) {
                            this.handlers.drag.dragging ? this.feature.id == e.id && (this.over = !1) : (this.over = !1, this.handlers.drag.deactivate(), OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass + "Over"), this.onLeave(e), this.feature = null)
                        },
                        cancel: function () {
                            this.handlers.drag.deactivate(), this.over = !1
                        },
                        setMap: function (e) {
                            this.handlers.drag.setMap(e), this.handlers.feature.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Control.DragFeature"
                    }), OpenLayers.Control.TransformFeature = OpenLayers.Class(OpenLayers.Control, {
                        geometryTypes: null,
                        layer: null,
                        preserveAspectRatio: !1,
                        rotate: !0,
                        feature: null,
                        renderIntent: "temporary",
                        rotationHandleSymbolizer: null,
                        box: null,
                        center: null,
                        scale: 1,
                        ratio: 1,
                        rotation: 0,
                        handles: null,
                        rotationHandles: null,
                        dragControl: null,
                        irregular: !1,
                        initialize: function (e, t) {
                            OpenLayers.Control.prototype.initialize.apply(this, [t]), this.layer = e, this.rotationHandleSymbolizer || (this.rotationHandleSymbolizer = {
                                stroke: !1,
                                pointRadius: 10,
                                fillOpacity: 0,
                                cursor: "pointer"
                            }), this.createBox(), this.createControl()
                        },
                        activate: function () {
                            var e = !1;
                            return OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.dragControl.activate(), this.layer.addFeatures([this.box]), this.rotate && this.layer.addFeatures(this.rotationHandles), this.layer.addFeatures(this.handles), e = !0), e
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.layer.removeFeatures(this.handles), this.rotate && this.layer.removeFeatures(this.rotationHandles), this.layer.removeFeatures([this.box]), this.dragControl.deactivate(), e = !0), e
                        },
                        setMap: function (e) {
                            this.dragControl.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments)
                        },
                        setFeature: function (e, t) {
                            t = OpenLayers.Util.applyDefaults(t, {
                                rotation: 0,
                                scale: 1,
                                ratio: 1
                            });
                            var i = this.rotation,
                                s = this.center;
                            if (OpenLayers.Util.extend(this, t), !1 !== this.events.triggerEvent("beforesetfeature", {
                                    feature: e
                                })) {
                                this.feature = e, this.activate(), this._setfeature = !0;
                                var r = this.feature.geometry.getBounds();
                                this.box.move(r.getCenterLonLat()), this.box.geometry.rotate(-i, s), this._angle = 0, this.rotation ? ((i = e.geometry.clone()).rotate(-this.rotation, this.center), (i = new OpenLayers.Feature.Vector(i.getBounds().toGeometry())).geometry.rotate(this.rotation, this.center), this.box.geometry.rotate(this.rotation, this.center), this.box.move(i.geometry.getBounds().getCenterLonLat()), i = i.geometry.components[0].components[0].getBounds().getCenterLonLat()) : i = new OpenLayers.LonLat(r.left, r.bottom), this.handles[0].move(i), delete this._setfeature, this.events.triggerEvent("setfeature", {
                                    feature: e
                                })
                            }
                        },
                        unsetFeature: function () {
                            this.active ? this.deactivate() : (this.feature = null, this.rotation = 0, this.ratio = this.scale = 1)
                        },
                        createBox: function () {
                            var e = this;
                            this.center = new OpenLayers.Geometry.Point(0, 0), this.box = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([new OpenLayers.Geometry.Point(-1, -1), new OpenLayers.Geometry.Point(0, -1), new OpenLayers.Geometry.Point(1, -1), new OpenLayers.Geometry.Point(1, 0), new OpenLayers.Geometry.Point(1, 1), new OpenLayers.Geometry.Point(0, 1), new OpenLayers.Geometry.Point(-1, 1), new OpenLayers.Geometry.Point(-1, 0), new OpenLayers.Geometry.Point(-1, -1)]), null, "string" == typeof this.renderIntent ? null : this.renderIntent), this.box.geometry.move = function (t, i) {
                                e._moving = !0, OpenLayers.Geometry.LineString.prototype.move.apply(this, arguments), e.center.move(t, i), delete e._moving
                            };
                            for (var t, i, s, r = function (e, t) {
                                    OpenLayers.Geometry.Point.prototype.move.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.move(e, t), this._handle.geometry.move(e, t)
                                }, n = function (e, t, i) {
                                    OpenLayers.Geometry.Point.prototype.resize.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.resize(e, t, i), this._handle.geometry.resize(e, t, i)
                                }, a = function (e, t) {
                                    OpenLayers.Geometry.Point.prototype.rotate.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.rotate(e, t), this._handle.geometry.rotate(e, t)
                                }, o = function (t, i) {
                                    var s = this.x,
                                        r = this.y;
                                    if (OpenLayers.Geometry.Point.prototype.move.call(this, t, i), !e._moving) {
                                        var n = e.dragControl.handlers.drag.evt,
                                            a = !(!e._setfeature && e.preserveAspectRatio || n && n.shiftKey),
                                            o = new OpenLayers.Geometry.Point(s, r);
                                        n = e.center;
                                        this.rotate(-e.rotation, n), o.rotate(-e.rotation, n);
                                        var l = this.x - n.x,
                                            h = this.y - n.y,
                                            p = l - (this.x - o.x),
                                            u = h - (this.y - o.y);
                                        e.irregular && !e._setfeature && (l -= (this.x - o.x) / 2, h -= (this.y - o.y) / 2), this.x = s, this.y = r, o = 1, a ? (h = 1e-5 > Math.abs(u) ? 1 : h / u, o = (1e-5 > Math.abs(p) ? 1 : l / p) / h) : (p = Math.sqrt(p * p + u * u), h = Math.sqrt(l * l + h * h) / p), e._moving = !0, e.box.geometry.rotate(-e.rotation, n), delete e._moving, e.box.geometry.resize(h, n, o), e.box.geometry.rotate(e.rotation, n), e.transformFeature({
                                            scale: h,
                                            ratio: o
                                        }), e.irregular && !e._setfeature && ((l = n.clone()).x += 1e-5 > Math.abs(s - n.x) ? 0 : this.x - s, l.y += 1e-5 > Math.abs(r - n.y) ? 0 : this.y - r, e.box.geometry.move(this.x - s, this.y - r), e.transformFeature({
                                            center: l
                                        }))
                                    }
                                }, l = function (t, i) {
                                    var s = this.x,
                                        r = this.y;
                                    if (OpenLayers.Geometry.Point.prototype.move.call(this, t, i), !e._moving) {
                                        var n = (n = e.dragControl.handlers.drag.evt) && n.shiftKey ? 45 : 1,
                                            a = e.center,
                                            o = this.x - a.x,
                                            l = this.y - a.y;
                                        this.x = s, this.y = r, s = Math.atan2(l - i, o - t), s = Math.atan2(l, o) - s, s *= 180 / Math.PI, e._angle = (e._angle + s) % 360, s = e.rotation % n, (Math.abs(e._angle) >= n || 0 !== s) && (s = Math.round(e._angle / n) * n - s, e._angle = 0, e.box.geometry.rotate(s, a), e.transformFeature({
                                            rotation: s
                                        }))
                                    }
                                }, h = Array(8), p = Array(4), u = "sw s se e ne n nw w".split(" "), c = 0; 8 > c; ++c) t = this.box.geometry.components[c], i = new OpenLayers.Feature.Vector(t.clone(), {
                                role: u[c] + "-resize"
                            }, "string" == typeof this.renderIntent ? null : this.renderIntent), 0 == c % 2 && ((s = new OpenLayers.Feature.Vector(t.clone(), {
                                role: u[c] + "-rotate"
                            }, "string" == typeof this.rotationHandleSymbolizer ? null : this.rotationHandleSymbolizer)).geometry.move = l, t._rotationHandle = s, p[c / 2] = s), t.move = r, t.resize = n, t.rotate = a, i.geometry.move = o, t._handle = i, h[c] = i;
                            this.rotationHandles = p, this.handles = h
                        },
                        createControl: function () {
                            var e = this;
                            this.dragControl = new OpenLayers.Control.DragFeature(this.layer, {
                                documentDrag: !0,
                                moveFeature: function (t) {
                                    this.feature === e.feature && (this.feature = e.box), OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this, arguments)
                                },
                                onDrag: function (t, i) {
                                    t === e.box && e.transformFeature({
                                        center: e.center
                                    })
                                },
                                onStart: function (t, i) {
                                    var s = !e.geometryTypes || -1 !== OpenLayers.Util.indexOf(e.geometryTypes, t.geometry.CLASS_NAME),
                                        r = (r = OpenLayers.Util.indexOf(e.handles, t)) + OpenLayers.Util.indexOf(e.rotationHandles, t);
                                    t !== e.feature && t !== e.box && -2 == r && s && e.setFeature(t)
                                },
                                onComplete: function (t, i) {
                                    e.events.triggerEvent("transformcomplete", {
                                        feature: e.feature
                                    })
                                }
                            })
                        },
                        drawHandles: function () {
                            for (var e = this.layer, t = 0; 8 > t; ++t) this.rotate && 0 == t % 2 && e.drawFeature(this.rotationHandles[t / 2], this.rotationHandleSymbolizer), e.drawFeature(this.handles[t], this.renderIntent)
                        },
                        transformFeature: function (e) {
                            if (!this._setfeature) {
                                this.scale *= e.scale || 1, this.ratio *= e.ratio || 1;
                                var t = this.rotation;
                                if (this.rotation = (this.rotation + (e.rotation || 0)) % 360, !1 !== this.events.triggerEvent("beforetransform", e)) {
                                    var i = this.feature,
                                        s = i.geometry,
                                        r = this.center;
                                    s.rotate(-t, r), e.scale || e.ratio ? s.resize(e.scale, r, e.ratio) : e.center && i.move(e.center.getBounds().getCenterLonLat()), s.rotate(this.rotation, r), this.layer.drawFeature(i), i.toState(OpenLayers.State.UPDATE), this.events.triggerEvent("transform", e)
                                }
                            }
                            this.layer.drawFeature(this.box, this.renderIntent), this.drawHandles()
                        },
                        destroy: function () {
                            for (var e, t = 0; 8 > t; ++t)(e = this.box.geometry.components[t])._handle.destroy(), e._handle = null, e._rotationHandle && e._rotationHandle.destroy(), e._rotationHandle = null;
                            this.rotationHandles = this.rotationHandleSymbolizer = this.handles = this.feature = this.center = null, this.box.destroy(), this.layer = this.box = null, this.dragControl.destroy(), this.dragControl = null, OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Control.TransformFeature"
                    }), OpenLayers.Handler.Box = OpenLayers.Class(OpenLayers.Handler, {
                        dragHandler: null,
                        boxDivClassName: "olHandlerBoxZoomBox",
                        boxOffsets: null,
                        initialize: function (e, t, i) {
                            OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.dragHandler = new OpenLayers.Handler.Drag(this, {
                                down: this.startBox,
                                move: this.moveBox,
                                out: this.removeBox,
                                up: this.endBox
                            }, {
                                keyMask: this.keyMask
                            })
                        },
                        destroy: function () {
                            OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.dragHandler && (this.dragHandler.destroy(), this.dragHandler = null)
                        },
                        setMap: function (e) {
                            OpenLayers.Handler.prototype.setMap.apply(this, arguments), this.dragHandler && this.dragHandler.setMap(e)
                        },
                        startBox: function (e) {
                            this.callback("start", []), this.zoomBox = OpenLayers.Util.createDiv("zoomBox", {
                                x: -9999,
                                y: -9999
                            }), this.zoomBox.className = this.boxDivClassName, this.zoomBox.style.zIndex = this.map.Z_INDEX_BASE.Popup - 1, this.map.viewPortDiv.appendChild(this.zoomBox), OpenLayers.Element.addClass(this.map.viewPortDiv, "olDrawBox")
                        },
                        moveBox: function (e) {
                            var t = this.dragHandler.start.x,
                                i = this.dragHandler.start.y,
                                s = Math.abs(t - e.x),
                                r = Math.abs(i - e.y),
                                n = this.getBoxOffsets();
                            this.zoomBox.style.width = s + n.width + 1 + "px", this.zoomBox.style.height = r + n.height + 1 + "px", this.zoomBox.style.left = (e.x < t ? t - s - n.left : t - n.left) + "px", this.zoomBox.style.top = (e.y < i ? i - r - n.top : i - n.top) + "px"
                        },
                        endBox: function (e) {
                            var t;
                            if (5 < Math.abs(this.dragHandler.start.x - e.x) || 5 < Math.abs(this.dragHandler.start.y - e.y)) {
                                var i = this.dragHandler.start;
                                t = Math.min(i.y, e.y);
                                var s = Math.max(i.y, e.y),
                                    r = Math.min(i.x, e.x);
                                e = Math.max(i.x, e.x), t = new OpenLayers.Bounds(r, s, e, t)
                            } else t = this.dragHandler.start.clone();
                            this.removeBox(), this.callback("done", [t])
                        },
                        removeBox: function () {
                            this.map.viewPortDiv.removeChild(this.zoomBox), this.boxOffsets = this.zoomBox = null, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDrawBox")
                        },
                        activate: function () {
                            return !!OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.dragHandler.activate(), !0)
                        },
                        deactivate: function () {
                            return !!OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.dragHandler.deactivate() && this.zoomBox && this.removeBox(), !0)
                        },
                        getBoxOffsets: function () {
                            if (!this.boxOffsets) {
                                (t = document.createElement("div")).style.position = "absolute", t.style.border = "1px solid black", t.style.width = "3px", document.body.appendChild(t);
                                var e = 3 == t.clientWidth;
                                document.body.removeChild(t);
                                var t = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-left-width")),
                                    i = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-right-width")),
                                    s = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-top-width")),
                                    r = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-bottom-width"));
                                this.boxOffsets = {
                                    left: t,
                                    right: i,
                                    top: s,
                                    bottom: r,
                                    width: !1 === e ? t + i : 0,
                                    height: !1 === e ? s + r : 0
                                }
                            }
                            return this.boxOffsets
                        },
                        CLASS_NAME: "OpenLayers.Handler.Box"
                    }), OpenLayers.Control.ZoomBox = OpenLayers.Class(OpenLayers.Control, {
                        type: OpenLayers.Control.TYPE_TOOL,
                        out: !1,
                        keyMask: null,
                        alwaysZoom: !1,
                        zoomOnClick: !0,
                        draw: function () {
                            this.handler = new OpenLayers.Handler.Box(this, {
                                done: this.zoomBox
                            }, {
                                keyMask: this.keyMask
                            })
                        },
                        zoomBox: function (e) {
                            if (e instanceof OpenLayers.Bounds) {
                                var t, i = e.getCenterPixel();
                                if (this.out) {
                                    t = Math.min(this.map.size.h / (e.bottom - e.top), this.map.size.w / (e.right - e.left));
                                    var s = this.map.getExtent(),
                                        r = this.map.getLonLatFromPixel(i),
                                        n = r.lon - s.getWidth() / 2 * t;
                                    e = r.lon + s.getWidth() / 2 * t;
                                    var a = r.lat - s.getHeight() / 2 * t;
                                    t = r.lat + s.getHeight() / 2 * t, t = new OpenLayers.Bounds(n, a, e, t)
                                } else n = this.map.getLonLatFromPixel({
                                    x: e.left,
                                    y: e.bottom
                                }), e = this.map.getLonLatFromPixel({
                                    x: e.right,
                                    y: e.top
                                }), t = new OpenLayers.Bounds(n.lon, n.lat, e.lon, e.lat);
                                n = this.map.getZoom(), e = (a = this.map.getSize()).w / 2, a = a.h / 2, t = this.map.getZoomForExtent(t), (s = this.map.getResolution()) == (r = this.map.getResolutionForZoom(t)) ? this.map.setCenter(this.map.getLonLatFromPixel(i)) : this.map.zoomTo(t, {
                                    x: (s * i.x - r * e) / (s - r),
                                    y: (s * i.y - r * a) / (s - r)
                                }), n == this.map.getZoom() && 1 == this.alwaysZoom && this.map.zoomTo(n + (this.out ? -1 : 1))
                            } else this.zoomOnClick && (this.out ? this.map.zoomTo(this.map.getZoom() - 1, e) : this.map.zoomTo(this.map.getZoom() + 1, e))
                        },
                        CLASS_NAME: "OpenLayers.Control.ZoomBox"
                    }), OpenLayers.Control.DragPan = OpenLayers.Class(OpenLayers.Control, {
                        type: OpenLayers.Control.TYPE_TOOL,
                        panned: !1,
                        interval: 0,
                        documentDrag: !1,
                        kinetic: null,
                        enableKinetic: !0,
                        kineticInterval: 10,
                        draw: function () {
                            if (this.enableKinetic && OpenLayers.Kinetic) {
                                var e = {
                                    interval: this.kineticInterval
                                };
                                "object" == typeof this.enableKinetic && (e = OpenLayers.Util.extend(e, this.enableKinetic)), this.kinetic = new OpenLayers.Kinetic(e)
                            }
                            this.handler = new OpenLayers.Handler.Drag(this, {
                                move: this.panMap,
                                done: this.panMapDone,
                                down: this.panMapStart
                            }, {
                                interval: this.interval,
                                documentDrag: this.documentDrag
                            })
                        },
                        panMapStart: function () {
                            this.kinetic && this.kinetic.begin()
                        },
                        panMap: function (e) {
                            this.kinetic && this.kinetic.update(e), this.panned = !0, this.map.pan(this.handler.last.x - e.x, this.handler.last.y - e.y, {
                                dragging: !0,
                                animate: !1
                            })
                        },
                        panMapDone: function (e) {
                            if (this.panned) {
                                var t = null;
                                if (this.kinetic && (t = this.kinetic.end(e)), this.map.pan(this.handler.last.x - e.x, this.handler.last.y - e.y, {
                                        dragging: !!t,
                                        animate: !1
                                    }), t) {
                                    var i = this;
                                    this.kinetic.move(t, (function (e, t, s) {
                                        i.map.pan(e, t, {
                                            dragging: !s,
                                            animate: !1
                                        })
                                    }))
                                }
                                this.panned = !1
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.DragPan"
                    }), OpenLayers.Control.Navigation = OpenLayers.Class(OpenLayers.Control, {
                        dragPan: null,
                        dragPanOptions: null,
                        pinchZoom: null,
                        pinchZoomOptions: null,
                        documentDrag: !1,
                        zoomBox: null,
                        zoomBoxEnabled: !0,
                        zoomWheelEnabled: !0,
                        mouseWheelOptions: null,
                        handleRightClicks: !1,
                        zoomBoxKeyMask: OpenLayers.Handler.MOD_SHIFT,
                        autoActivate: !0,
                        initialize: function (e) {
                            this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, arguments)
                        },
                        destroy: function () {
                            this.deactivate(), this.dragPan && this.dragPan.destroy(), this.dragPan = null, this.zoomBox && this.zoomBox.destroy(), this.zoomBox = null, this.pinchZoom && this.pinchZoom.destroy(), this.pinchZoom = null, OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        activate: function () {
                            return this.dragPan.activate(), this.zoomWheelEnabled && this.handlers.wheel.activate(), this.handlers.click.activate(), this.zoomBoxEnabled && this.zoomBox.activate(), this.pinchZoom && this.pinchZoom.activate(), OpenLayers.Control.prototype.activate.apply(this, arguments)
                        },
                        deactivate: function () {
                            return this.pinchZoom && this.pinchZoom.deactivate(), this.zoomBox.deactivate(), this.dragPan.deactivate(), this.handlers.click.deactivate(), this.handlers.wheel.deactivate(), OpenLayers.Control.prototype.deactivate.apply(this, arguments)
                        },
                        draw: function () {
                            this.handleRightClicks && (this.map.viewPortDiv.oncontextmenu = OpenLayers.Function.False), this.handlers.click = new OpenLayers.Handler.Click(this, {
                                click: this.defaultClick,
                                dblclick: this.defaultDblClick,
                                dblrightclick: this.defaultDblRightClick
                            }, {
                                double: !0,
                                stopDouble: !0
                            }), this.dragPan = new OpenLayers.Control.DragPan(OpenLayers.Util.extend({
                                map: this.map,
                                documentDrag: this.documentDrag
                            }, this.dragPanOptions)), this.zoomBox = new OpenLayers.Control.ZoomBox({
                                map: this.map,
                                keyMask: this.zoomBoxKeyMask
                            }), this.dragPan.draw(), this.zoomBox.draw(), this.handlers.wheel = new OpenLayers.Handler.MouseWheel(this, {
                                up: this.wheelUp,
                                down: this.wheelDown
                            }, OpenLayers.Util.extend(this.map.fractionalZoom ? {} : {
                                cumulative: !1,
                                interval: 50,
                                maxDelta: 6
                            }, this.mouseWheelOptions)), OpenLayers.Control.PinchZoom && (this.pinchZoom = new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({
                                map: this.map
                            }, this.pinchZoomOptions)))
                        },
                        defaultClick: function (e) {
                            e.lastTouches && 2 == e.lastTouches.length && this.map.zoomOut()
                        },
                        defaultDblClick: function (e) {
                            this.map.zoomTo(this.map.zoom + 1, e.xy)
                        },
                        defaultDblRightClick: function (e) {
                            this.map.zoomTo(this.map.zoom - 1, e.xy)
                        },
                        wheelChange: function (e, t) {
                            this.map.fractionalZoom || (t = Math.round(t));
                            var i, s = this.map.getZoom();
                            i = Math.max(s + t, 0), (i = Math.min(i, this.map.getNumZoomLevels())) !== s && this.map.zoomTo(i, e.xy)
                        },
                        wheelUp: function (e, t) {
                            this.wheelChange(e, t || 1)
                        },
                        wheelDown: function (e, t) {
                            this.wheelChange(e, t || -1)
                        },
                        disableZoomBox: function () {
                            this.zoomBoxEnabled = !1, this.zoomBox.deactivate()
                        },
                        enableZoomBox: function () {
                            this.zoomBoxEnabled = !0, this.active && this.zoomBox.activate()
                        },
                        disableZoomWheel: function () {
                            this.zoomWheelEnabled = !1, this.handlers.wheel.deactivate()
                        },
                        enableZoomWheel: function () {
                            this.zoomWheelEnabled = !0, this.active && this.handlers.wheel.activate()
                        },
                        CLASS_NAME: "OpenLayers.Control.Navigation"
                    }), OpenLayers.Control.DrawFeature = OpenLayers.Class(OpenLayers.Control, {
                        layer: null,
                        callbacks: null,
                        multi: !1,
                        featureAdded: function () {},
                        initialize: function (e, t, i) {
                            OpenLayers.Control.prototype.initialize.apply(this, [i]), this.callbacks = OpenLayers.Util.extend({
                                done: this.drawFeature,
                                modify: function (e, t) {
                                    this.layer.events.triggerEvent("sketchmodified", {
                                        vertex: e,
                                        feature: t
                                    })
                                },
                                create: function (e, t) {
                                    this.layer.events.triggerEvent("sketchstarted", {
                                        vertex: e,
                                        feature: t
                                    })
                                }
                            }, this.callbacks), this.layer = e, this.handlerOptions = this.handlerOptions || {}, this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
                                renderers: e.renderers,
                                rendererOptions: e.rendererOptions
                            }), "multi" in this.handlerOptions || (this.handlerOptions.multi = this.multi), (e = this.layer.styleMap && this.layer.styleMap.styles.temporary) && (this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
                                styleMap: new OpenLayers.StyleMap({
                                    default: e
                                })
                            })), this.handler = new t(this, this.callbacks, this.handlerOptions)
                        },
                        drawFeature: function (e) {
                            e = new OpenLayers.Feature.Vector(e), !1 !== this.layer.events.triggerEvent("sketchcomplete", {
                                feature: e
                            }) && (e.state = OpenLayers.State.INSERT, this.layer.addFeatures([e]), this.featureAdded(e), this.events.triggerEvent("featureadded", {
                                feature: e
                            }))
                        },
                        insertXY: function (e, t) {
                            this.handler && this.handler.line && this.handler.insertXY(e, t)
                        },
                        insertDeltaXY: function (e, t) {
                            this.handler && this.handler.line && this.handler.insertDeltaXY(e, t)
                        },
                        insertDirectionLength: function (e, t) {
                            this.handler && this.handler.line && this.handler.insertDirectionLength(e, t)
                        },
                        insertDeflectionLength: function (e, t) {
                            this.handler && this.handler.line && this.handler.insertDeflectionLength(e, t)
                        },
                        undo: function () {
                            return this.handler.undo && this.handler.undo()
                        },
                        redo: function () {
                            return this.handler.redo && this.handler.redo()
                        },
                        finishSketch: function () {
                            this.handler.finishGeometry()
                        },
                        cancel: function () {
                            this.handler.cancel()
                        },
                        CLASS_NAME: "OpenLayers.Control.DrawFeature"
                    }), OpenLayers.Handler.Polygon = OpenLayers.Class(OpenLayers.Handler.Path, {
                        holeModifier: null,
                        drawingHole: !1,
                        polygon: null,
                        createFeature: function (e) {
                            e = this.layer.getLonLatFromViewPortPx(e), e = new OpenLayers.Geometry.Point(e.lon, e.lat), this.point = new OpenLayers.Feature.Vector(e), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])), this.polygon = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])), this.callback("create", [this.point.geometry, this.getSketch()]), this.point.geometry.clearBounds(), this.layer.addFeatures([this.polygon, this.point], {
                                silent: !0
                            })
                        },
                        addPoint: function (e) {
                            if (!this.drawingHole && this.holeModifier && this.evt && this.evt[this.holeModifier])
                                for (var t, i = this.point.geometry, s = this.control.layer.features, r = s.length - 1; 0 <= r; --r)
                                    if (((t = s[r].geometry) instanceof OpenLayers.Geometry.Polygon || t instanceof OpenLayers.Geometry.MultiPolygon) && t.intersects(i)) {
                                        i = s[r], this.control.layer.removeFeatures([i], {
                                            silent: !0
                                        }), this.control.layer.events.registerPriority("sketchcomplete", this, this.finalizeInteriorRing), this.control.layer.events.registerPriority("sketchmodified", this, this.enforceTopology), i.geometry.addComponent(this.line.geometry), this.polygon = i, this.drawingHole = !0;
                                        break
                                    } OpenLayers.Handler.Path.prototype.addPoint.apply(this, arguments)
                        },
                        getCurrentPointIndex: function () {
                            return this.line.geometry.components.length - 2
                        },
                        enforceTopology: function (e) {
                            e = e.vertex;
                            var t = this.line.geometry.components;
                            this.polygon.geometry.intersects(e) || (t = t[t.length - 3], e.x = t.x, e.y = t.y)
                        },
                        finishGeometry: function () {
                            this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length - 2]), this.removePoint(), this.finalize()
                        },
                        finalizeInteriorRing: function () {
                            var e = this.line.geometry,
                                t = 0 !== e.getArea();
                            if (t) {
                                for (var i = this.polygon.geometry.components, s = i.length - 2; 0 <= s; --s)
                                    if (e.intersects(i[s])) {
                                        t = !1;
                                        break
                                    } if (t) e: for (s = i.length - 2; 0 < s; --s)
                                    for (var r = i[s].components, n = 0, a = r.length; n < a; ++n)
                                        if (e.containsPoint(r[n])) {
                                            t = !1;
                                            break e
                                        }
                            }
                            return t ? this.polygon.state !== OpenLayers.State.INSERT && (this.polygon.state = OpenLayers.State.UPDATE) : this.polygon.geometry.removeComponent(e), this.restoreFeature(), !1
                        },
                        cancel: function () {
                            return this.drawingHole && (this.polygon.geometry.removeComponent(this.line.geometry), this.restoreFeature(!0)), OpenLayers.Handler.Path.prototype.cancel.apply(this, arguments)
                        },
                        restoreFeature: function (e) {
                            this.control.layer.events.unregister("sketchcomplete", this, this.finalizeInteriorRing), this.control.layer.events.unregister("sketchmodified", this, this.enforceTopology), this.layer.removeFeatures([this.polygon], {
                                silent: !0
                            }), this.control.layer.addFeatures([this.polygon], {
                                silent: !0
                            }), this.drawingHole = !1, e || this.control.layer.events.triggerEvent("sketchcomplete", {
                                feature: this.polygon
                            })
                        },
                        destroyFeature: function (e) {
                            OpenLayers.Handler.Path.prototype.destroyFeature.call(this, e), this.polygon = null
                        },
                        drawFeature: function () {
                            this.layer.drawFeature(this.polygon, this.style), this.layer.drawFeature(this.point, this.style)
                        },
                        getSketch: function () {
                            return this.polygon
                        },
                        getGeometry: function () {
                            var e = this.polygon && this.polygon.geometry;
                            return e && this.multi && (e = new OpenLayers.Geometry.MultiPolygon([e])), e
                        },
                        CLASS_NAME: "OpenLayers.Handler.Polygon"
                    }), OpenLayers.Control.EditingToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {
                        citeCompliant: !1,
                        initialize: function (e, t) {
                            OpenLayers.Control.Panel.prototype.initialize.apply(this, [t]), this.addControls([new OpenLayers.Control.Navigation]);
                            var i = [new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Point, {
                                displayClass: "olControlDrawFeaturePoint",
                                handlerOptions: {
                                    citeCompliant: this.citeCompliant
                                }
                            }), new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Path, {
                                displayClass: "olControlDrawFeaturePath",
                                handlerOptions: {
                                    citeCompliant: this.citeCompliant
                                }
                            }), new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Polygon, {
                                displayClass: "olControlDrawFeaturePolygon",
                                handlerOptions: {
                                    citeCompliant: this.citeCompliant
                                }
                            })];
                            this.addControls(i)
                        },
                        draw: function () {
                            var e = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);
                            return null === this.defaultControl && (this.defaultControl = this.controls[0]), e
                        },
                        CLASS_NAME: "OpenLayers.Control.EditingToolbar"
                    }), OpenLayers.Strategy.BBOX = OpenLayers.Class(OpenLayers.Strategy, {
                        bounds: null,
                        resolution: null,
                        ratio: 2,
                        resFactor: null,
                        response: null,
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.call(this);
                            return e && (this.layer.events.on({
                                moveend: this.update,
                                refresh: this.update,
                                visibilitychanged: this.update,
                                scope: this
                            }), this.update()), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Strategy.prototype.deactivate.call(this);
                            return e && this.layer.events.un({
                                moveend: this.update,
                                refresh: this.update,
                                visibilitychanged: this.update,
                                scope: this
                            }), e
                        },
                        update: function (e) {
                            var t = this.getMapBounds();
                            null !== t && (e && e.force || this.layer.visibility && this.layer.calculateInRange() && this.invalidBounds(t)) && (this.calculateBounds(t), this.resolution = this.layer.map.getResolution(), this.triggerRead(e))
                        },
                        getMapBounds: function () {
                            if (null === this.layer.map) return null;
                            var e = this.layer.map.getExtent();
                            return e && !this.layer.projection.equals(this.layer.map.getProjectionObject()) && (e = e.clone().transform(this.layer.map.getProjectionObject(), this.layer.projection)), e
                        },
                        invalidBounds: function (e) {
                            return e || (e = this.getMapBounds()), !(e = !this.bounds || !this.bounds.containsBounds(e)) && this.resFactor && (e = (e = this.resolution / this.layer.map.getResolution()) >= this.resFactor || e <= 1 / this.resFactor), e
                        },
                        calculateBounds: function (e) {
                            e || (e = this.getMapBounds());
                            var t = e.getCenterLonLat(),
                                i = e.getWidth() * this.ratio;
                            e = e.getHeight() * this.ratio, this.bounds = new OpenLayers.Bounds(t.lon - i / 2, t.lat - e / 2, t.lon + i / 2, t.lat + e / 2)
                        },
                        triggerRead: function (e) {
                            !this.response || e && !0 === e.noAbort || (this.layer.protocol.abort(this.response), this.layer.events.triggerEvent("loadend"));
                            var t = {
                                filter: this.createFilter()
                            };
                            this.layer.events.triggerEvent("loadstart", t), this.response = this.layer.protocol.read(OpenLayers.Util.applyDefaults({
                                filter: t.filter,
                                callback: this.merge,
                                scope: this
                            }, e))
                        },
                        createFilter: function () {
                            var e = new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.BBOX,
                                value: this.bounds,
                                projection: this.layer.projection
                            });
                            return this.layer.filter && (e = new OpenLayers.Filter.Logical({
                                type: OpenLayers.Filter.Logical.AND,
                                filters: [this.layer.filter, e]
                            })), e
                        },
                        merge: function (e) {
                            if (this.layer.destroyFeatures(), e.success()) {
                                var t = e.features;
                                if (t && 0 < t.length) {
                                    var i = this.layer.projection,
                                        s = this.layer.map.getProjectionObject();
                                    if (!s.equals(i))
                                        for (var r, n = 0, a = t.length; n < a; ++n)(r = t[n].geometry) && r.transform(i, s);
                                    this.layer.addFeatures(t)
                                }
                            } else this.bounds = null;
                            this.response = null, this.layer.events.triggerEvent("loadend", {
                                response: e
                            })
                        },
                        CLASS_NAME: "OpenLayers.Strategy.BBOX"
                    }), OpenLayers.Layer.WorldWind = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        DEFAULT_PARAMS: {},
                        isBaseLayer: !0,
                        lzd: null,
                        zoomLevels: null,
                        initialize: function (e, t, i, s, r, n) {
                            this.lzd = i, this.zoomLevels = s, (i = []).push(e, t, r, n), OpenLayers.Layer.Grid.prototype.initialize.apply(this, i), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS)
                        },
                        getZoom: function () {
                            var e = this.map.getZoom();
                            return this.map.getMaxExtent(), e - Math.log(this.maxResolution / (this.lzd / 512)) / Math.log(2)
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = this.getZoom(),
                                i = this.map.getMaxExtent(),
                                s = this.lzd / Math.pow(2, this.getZoom()),
                                r = Math.floor((e.left - i.left) / s);
                            return e = Math.floor((e.bottom - i.bottom) / s), this.map.getResolution() <= this.lzd / 512 && this.getZoom() <= this.zoomLevels ? this.getFullRequestString({
                                L: t,
                                X: r,
                                Y: e
                            }) : OpenLayers.Util.getImageLocation("blank.gif")
                        },
                        CLASS_NAME: "OpenLayers.Layer.WorldWind"
                    }), OpenLayers.Protocol.CSW = function (e) {
                        e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.CSW.DEFAULTS);
                        var t = OpenLayers.Protocol.CSW["v" + e.version.replace(/\./g, "_")];
                        if (!t) throw "Unsupported CSW version: " + e.version;
                        return new t(e)
                    }, OpenLayers.Protocol.CSW.DEFAULTS = {
                        version: "2.0.2"
                    }, OpenLayers.Format.WMTSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.0.0",
                        yx: {
                            "urn:ogc:def:crs:EPSG::4326": !0
                        },
                        createLayer: function (e, t) {
                            if (!("layer" in t)) throw Error("Missing property 'layer' in configuration.");
                            for (var i, s = e.contents, r = 0, n = s.layers.length; r < n; ++r)
                                if (s.layers[r].identifier === t.layer) {
                                    i = s.layers[r];
                                    break
                                } if (!i) throw Error("Layer not found");
                            var a, o = t.format;
                            if (!o && i.formats && i.formats.length && (o = i.formats[0]), t.matrixSet ? a = s.tileMatrixSets[t.matrixSet] : 1 <= i.tileMatrixSetLinks.length && (a = s.tileMatrixSets[i.tileMatrixSetLinks[0].tileMatrixSet]), !a) throw Error("matrixSet not found");
                            var l;
                            for (r = 0, n = i.styles.length; r < n && !(l = i.styles[r]).isDefault; ++r);
                            !(s = t.requestEncoding) && (s = "KVP", e.operationsMetadata.GetTile.dcp.http) && ((h = e.operationsMetadata.GetTile.dcp.http).get[0].constraints && ((h = h.get[0].constraints.GetEncoding.allowedValues).KVP || !h.REST && !h.RESTful || (s = "REST")));
                            var h = [],
                                p = t.params || {};
                            delete t.params;
                            for (var u = 0, c = i.dimensions.length; u < c; u++) {
                                var y = i.dimensions[u];
                                h.push(y.identifier), p.hasOwnProperty(y.identifier) || (p[y.identifier] = y.default)
                            }
                            var d;
                            u = t.projection || a.supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/, "$1:$3"), c = t.units || ("EPSG:4326" === u ? "degrees" : "m"), y = [];
                            for (d in a.matrixIds) a.matrixIds.hasOwnProperty(d) && y.push(28e-5 * a.matrixIds[d].scaleDenominator / OpenLayers.METERS_PER_INCH / OpenLayers.INCHES_PER_UNIT[c]);
                            if ("REST" === s && i.resourceUrls) {
                                d = [];
                                n = 0;
                                for (var m = i.resourceUrls.length; n < m; ++n)(r = i.resourceUrls[n]).format === o && "tile" === r.resourceType && d.push(r.template)
                            } else {
                                d = [];
                                var f;
                                for (r = 0, n = (m = e.operationsMetadata.GetTile.dcp.http.get).length; r < n; r++)(!(f = m[r].constraints) || f && f.GetEncoding.allowedValues[s]) && d.push(m[r].url)
                            }
                            return new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(t, {
                                url: d,
                                requestEncoding: s,
                                name: i.title,
                                style: l.identifier,
                                format: o,
                                matrixIds: a.matrixIds,
                                matrixSet: a.identifier,
                                projection: u,
                                units: c,
                                resolutions: !1 === t.isBaseLayer ? void 0 : y,
                                serverResolutions: y,
                                tileFullExtent: a.bounds,
                                dimensions: h,
                                params: p
                            }))
                        },
                        CLASS_NAME: "OpenLayers.Format.WMTSCapabilities"
                    }), OpenLayers.Layer.Google.v3 = {
                        DEFAULTS: {
                            sphericalMercator: !0,
                            projection: "EPSG:900913"
                        },
                        animationEnabled: !0,
                        loadMapObject: function () {
                            this.type || (this.type = google.maps.MapTypeId.ROADMAP);
                            var e, t = OpenLayers.Layer.Google.cache[this.map.id];
                            t ? (e = t.mapObject, ++t.count) : (e = this.map.getCenter(), (t = document.createElement("div")).className = "olForeignContainer", t.style.width = "100%", t.style.height = "100%", e = new google.maps.Map(t, {
                                center: e ? new google.maps.LatLng(e.lat, e.lon) : new google.maps.LatLng(0, 0),
                                zoom: this.map.getZoom() || 0,
                                mapTypeId: this.type,
                                disableDefaultUI: !0,
                                keyboardShortcuts: !1,
                                draggable: !1,
                                disableDoubleClickZoom: !0,
                                scrollwheel: !1,
                                streetViewControl: !1
                            }), (t = document.createElement("div")).style.width = "100%", t.style.height = "100%", e.controls[google.maps.ControlPosition.TOP_LEFT].push(t), t = {
                                googleControl: t,
                                mapObject: e,
                                count: 1
                            }, OpenLayers.Layer.Google.cache[this.map.id] = t), this.mapObject = e, this.setGMapVisibility(this.visibility)
                        },
                        onMapResize: function () {
                            this.visibility && google.maps.event.trigger(this.mapObject, "resize")
                        },
                        setGMapVisibility: function (e) {
                            var t = OpenLayers.Layer.Google.cache[this.map.id],
                                i = this.map;
                            if (t) {
                                for (var s, r = this.type, n = i.layers, a = n.length - 1; 0 <= a; --a)
                                    if ((s = n[a]) instanceof OpenLayers.Layer.Google && !0 === s.visibility && !0 === s.inRange) {
                                        r = s.type, e = !0;
                                        break
                                    } if (n = this.mapObject.getDiv(), !0 === e) {
                                    if (n.parentNode !== i.div)
                                        if (t.rendered) i.div.appendChild(n), t.googleControl.appendChild(i.viewPortDiv), google.maps.event.trigger(this.mapObject, "resize");
                                        else {
                                            var o = this;
                                            google.maps.event.addListenerOnce(this.mapObject, "tilesloaded", (function () {
                                                t.rendered = !0, o.setGMapVisibility(o.getVisibility()), o.moveTo(o.map.getCenter())
                                            }))
                                        } this.mapObject.setMapTypeId(r)
                                } else t.googleControl.hasChildNodes() && (i.div.appendChild(i.viewPortDiv), i.div.removeChild(n))
                            }
                        },
                        getMapContainer: function () {
                            return this.mapObject.getDiv()
                        },
                        getMapObjectBoundsFromOLBounds: function (e) {
                            var t = null;
                            return null != e && (t = this.sphericalMercator ? this.inverseMercator(e.bottom, e.left) : new OpenLayers.LonLat(e.bottom, e.left), e = this.sphericalMercator ? this.inverseMercator(e.top, e.right) : new OpenLayers.LonLat(e.top, e.right), t = new google.maps.LatLngBounds(new google.maps.LatLng(t.lat, t.lon), new google.maps.LatLng(e.lat, e.lon))), t
                        },
                        getMapObjectLonLatFromMapObjectPixel: function (e) {
                            var t = this.map.getSize(),
                                i = this.getLongitudeFromMapObjectLonLat(this.mapObject.center),
                                s = this.getLatitudeFromMapObjectLonLat(this.mapObject.center),
                                r = this.map.getResolution();
                            return e = new OpenLayers.LonLat(i + (e.x - t.w / 2) * r, s - (e.y - t.h / 2) * r), this.wrapDateLine && (e = e.wrapDateLine(this.maxExtent)), this.getMapObjectLonLatFromLonLat(e.lon, e.lat)
                        },
                        getMapObjectPixelFromMapObjectLonLat: function (e) {
                            var t = this.getLongitudeFromMapObjectLonLat(e);
                            e = this.getLatitudeFromMapObjectLonLat(e);
                            var i = this.map.getResolution(),
                                s = this.map.getExtent();
                            return this.getMapObjectPixelFromXY(1 / i * (t - s.left), 1 / i * (s.top - e))
                        },
                        setMapObjectCenter: function (e, t) {
                            if (!1 === this.animationEnabled && t != this.mapObject.zoom) {
                                var i = this.getMapContainer();
                                google.maps.event.addListenerOnce(this.mapObject, "idle", (function () {
                                    i.style.visibility = ""
                                })), i.style.visibility = "hidden"
                            }
                            this.mapObject.setOptions({
                                center: e,
                                zoom: t
                            })
                        },
                        getMapObjectZoomFromMapObjectBounds: function (e) {
                            return this.mapObject.getBoundsZoomLevel(e)
                        },
                        getMapObjectLonLatFromLonLat: function (e, t) {
                            var i;
                            return this.sphericalMercator ? (i = this.inverseMercator(e, t), i = new google.maps.LatLng(i.lat, i.lon)) : i = new google.maps.LatLng(t, e), i
                        },
                        getMapObjectPixelFromXY: function (e, t) {
                            return new google.maps.Point(e, t)
                        }
                    }, OpenLayers.Format.WPSDescribeProcess = OpenLayers.Class(OpenLayers.Format.XML, {
                        VERSION: "1.0.0",
                        namespaces: {
                            wps: "http://www.opengis.net/wps/1.0.0",
                            ows: "http://www.opengis.net/ows/1.1",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        schemaLocation: "http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
                        defaultPrefix: "wps",
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        readers: {
                            wps: {
                                ProcessDescriptions: function (e, t) {
                                    t.processDescriptions = {}, this.readChildNodes(e, t.processDescriptions)
                                },
                                ProcessDescription: function (e, t) {
                                    var i = {
                                        processVersion: this.getAttributeNS(e, this.namespaces.wps, "processVersion"),
                                        statusSupported: "true" === e.getAttribute("statusSupported"),
                                        storeSupported: "true" === e.getAttribute("storeSupported")
                                    };
                                    this.readChildNodes(e, i), t[i.identifier] = i
                                },
                                DataInputs: function (e, t) {
                                    t.dataInputs = [], this.readChildNodes(e, t.dataInputs)
                                },
                                ProcessOutputs: function (e, t) {
                                    t.processOutputs = [], this.readChildNodes(e, t.processOutputs)
                                },
                                Output: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.push(i)
                                },
                                ComplexOutput: function (e, t) {
                                    t.complexOutput = {}, this.readChildNodes(e, t.complexOutput)
                                },
                                LiteralOutput: function (e, t) {
                                    t.literalOutput = {}, this.readChildNodes(e, t.literalOutput)
                                },
                                Input: function (e, t) {
                                    var i = {
                                        maxOccurs: parseInt(e.getAttribute("maxOccurs")),
                                        minOccurs: parseInt(e.getAttribute("minOccurs"))
                                    };
                                    this.readChildNodes(e, i), t.push(i)
                                },
                                BoundingBoxData: function (e, t) {
                                    t.boundingBoxData = {}, this.readChildNodes(e, t.boundingBoxData)
                                },
                                CRS: function (e, t) {
                                    t.CRSs || (t.CRSs = {}), t.CRSs[this.getChildValue(e)] = !0
                                },
                                LiteralData: function (e, t) {
                                    t.literalData = {}, this.readChildNodes(e, t.literalData)
                                },
                                ComplexData: function (e, t) {
                                    t.complexData = {}, this.readChildNodes(e, t.complexData)
                                },
                                Default: function (e, t) {
                                    t.default = {}, this.readChildNodes(e, t.default)
                                },
                                Supported: function (e, t) {
                                    t.supported = {}, this.readChildNodes(e, t.supported)
                                },
                                Format: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.formats || (t.formats = {}), t.formats[i.mimeType] = !0
                                },
                                MimeType: function (e, t) {
                                    t.mimeType = this.getChildValue(e)
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WPSDescribeProcess"
                    }), OpenLayers.Format.WKT = OpenLayers.Class(OpenLayers.Format, {
                        initialize: function (e) {
                            this.regExes = {
                                typeStr: /^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,
                                spaces: /\s+/,
                                parenComma: /\)\s*,\s*\(/,
                                doubleParenComma: /\)\s*\)\s*,\s*\(\s*\(/,
                                trimParens: /^\s*\(?(.*?)\)?\s*$/
                            }, OpenLayers.Format.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            var t, i;
                            if (e = e.replace(/[\n\r]/g, " "), (i = this.regExes.typeStr.exec(e)) && (e = i[1].toLowerCase(), i = i[2], this.parse[e] && (t = this.parse[e].apply(this, [i])), this.internalProjection && this.externalProjection))
                                if (t && "OpenLayers.Feature.Vector" == t.CLASS_NAME) t.geometry.transform(this.externalProjection, this.internalProjection);
                                else if (t && "geometrycollection" != e && "object" == typeof t)
                                for (e = 0, i = t.length; e < i; e++) t[e].geometry.transform(this.externalProjection, this.internalProjection);
                            return t
                        },
                        write: function (e) {
                            var t, i;
                            e.constructor == Array ? i = !0 : (e = [e], i = !1);
                            var s = [];
                            i && s.push("GEOMETRYCOLLECTION(");
                            for (var r = 0, n = e.length; r < n; ++r) i && 0 < r && s.push(","), t = e[r].geometry, s.push(this.extractGeometry(t));
                            return i && s.push(")"), s.join("")
                        },
                        extractGeometry: function (e) {
                            var t = e.CLASS_NAME.split(".")[2].toLowerCase();
                            return this.extract[t] ? (this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), ("collection" == t ? "GEOMETRYCOLLECTION" : t.toUpperCase()) + "(" + this.extract[t].apply(this, [e]) + ")") : null
                        },
                        extract: {
                            point: function (e) {
                                return e.x + " " + e.y
                            },
                            multipoint: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push("(" + this.extract.point.apply(this, [e.components[i]]) + ")");
                                return t.join(",")
                            },
                            linestring: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extract.point.apply(this, [e.components[i]]));
                                return t.join(",")
                            },
                            multilinestring: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push("(" + this.extract.linestring.apply(this, [e.components[i]]) + ")");
                                return t.join(",")
                            },
                            polygon: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push("(" + this.extract.linestring.apply(this, [e.components[i]]) + ")");
                                return t.join(",")
                            },
                            multipolygon: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push("(" + this.extract.polygon.apply(this, [e.components[i]]) + ")");
                                return t.join(",")
                            },
                            collection: function (e) {
                                for (var t = [], i = 0, s = e.components.length; i < s; ++i) t.push(this.extractGeometry.apply(this, [e.components[i]]));
                                return t.join(",")
                            }
                        },
                        parse: {
                            point: function (e) {
                                return e = OpenLayers.String.trim(e).split(this.regExes.spaces), new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e[0], e[1]))
                            },
                            multipoint: function (e) {
                                for (var t = OpenLayers.String.trim(e).split(","), i = [], s = 0, r = t.length; s < r; ++s) e = t[s].replace(this.regExes.trimParens, "$1"), i.push(this.parse.point.apply(this, [e]).geometry);
                                return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(i))
                            },
                            linestring: function (e) {
                                for (var t = [], i = 0, s = (e = OpenLayers.String.trim(e).split(",")).length; i < s; ++i) t.push(this.parse.point.apply(this, [e[i]]).geometry);
                                return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(t))
                            },
                            multilinestring: function (e) {
                                for (var t = OpenLayers.String.trim(e).split(this.regExes.parenComma), i = [], s = 0, r = t.length; s < r; ++s) e = t[s].replace(this.regExes.trimParens, "$1"), i.push(this.parse.linestring.apply(this, [e]).geometry);
                                return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(i))
                            },
                            polygon: function (e) {
                                for (var t, i = [], s = 0, r = (e = OpenLayers.String.trim(e).split(this.regExes.parenComma)).length; s < r; ++s) t = e[s].replace(this.regExes.trimParens, "$1"), t = this.parse.linestring.apply(this, [t]).geometry, t = new OpenLayers.Geometry.LinearRing(t.components), i.push(t);
                                return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(i))
                            },
                            multipolygon: function (e) {
                                for (var t = OpenLayers.String.trim(e).split(this.regExes.doubleParenComma), i = [], s = 0, r = t.length; s < r; ++s) e = t[s].replace(this.regExes.trimParens, "$1"), i.push(this.parse.polygon.apply(this, [e]).geometry);
                                return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(i))
                            },
                            geometrycollection: function (e) {
                                e = e.replace(/,\s*([A-Za-z])/g, "|$1");
                                for (var t = [], i = 0, s = (e = OpenLayers.String.trim(e).split("|")).length; i < s; ++i) t.push(OpenLayers.Format.WKT.prototype.read.apply(this, [e[i]]));
                                return t
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.WKT"
                    }), OpenLayers.WPSProcess = OpenLayers.Class({
                        client: null,
                        server: null,
                        identifier: null,
                        description: null,
                        localWPS: "http://geoserver/wps",
                        formats: null,
                        chained: 0,
                        executeCallbacks: null,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e), this.executeCallbacks = [], this.formats = {
                                "application/wkt": new OpenLayers.Format.WKT,
                                "application/json": new OpenLayers.Format.GeoJSON
                            }
                        },
                        describe: function (e) {
                            if (e = e || {}, this.description) {
                                if (e.callback) {
                                    var t = this.description;
                                    window.setTimeout((function () {
                                        e.callback.call(e.scope, t)
                                    }), 0)
                                }
                            } else this.client.describeProcess(this.server, this.identifier, (function (t) {
                                this.description || this.parseDescription(t), e.callback && e.callback.call(e.scope, this.description)
                            }), this)
                        },
                        configure: function (e) {
                            return this.describe({
                                callback: function () {
                                    var t, i, s, r = this.description,
                                        n = e.inputs;
                                    for (i = 0, s = r.dataInputs.length; i < s; ++i) t = r.dataInputs[i], this.setInputData(t, n[t.identifier]);
                                    e.callback && e.callback.call(e.scope)
                                },
                                scope: this
                            }), this
                        },
                        execute: function (e) {
                            this.configure({
                                inputs: e.inputs,
                                callback: function () {
                                    var t = this,
                                        i = this.getOutputIndex(t.description.processOutputs, e.output);
                                    t.setResponseForm({
                                            outputIndex: i
                                        }),
                                        function s() {
                                            OpenLayers.Util.removeItem(t.executeCallbacks, s), 0 !== t.chained ? t.executeCallbacks.push(s) : OpenLayers.Request.POST({
                                                url: t.client.servers[t.server].url,
                                                data: (new OpenLayers.Format.WPSExecute).write(t.description),
                                                success: function (s) {
                                                    var r = t.findMimeType(t.description.processOutputs[i].complexOutput.supported.formats);
                                                    (s = t.formats[r].read(s.responseText)) instanceof OpenLayers.Feature.Vector && (s = [s]), e.success && ((r = {})[e.output || "result"] = s, e.success.call(e.scope, r))
                                                },
                                                scope: t
                                            })
                                        }()
                                },
                                scope: this
                            })
                        },
                        output: function (e) {
                            return new OpenLayers.WPSProcess.ChainLink({
                                process: this,
                                output: e
                            })
                        },
                        parseDescription: function (e) {
                            e = this.client.servers[this.server], this.description = (new OpenLayers.Format.WPSDescribeProcess).read(e.processDescription[this.identifier]).processDescriptions[this.identifier]
                        },
                        setInputData: function (e, t) {
                            if (delete e.data, delete e.reference, t instanceof OpenLayers.WPSProcess.ChainLink) ++this.chained, e.reference = {
                                method: "POST",
                                href: t.process.server === this.server ? this.localWPS : this.client.servers[t.process.server].url
                            }, t.process.describe({
                                callback: function () {
                                    --this.chained, this.chainProcess(e, t)
                                },
                                scope: this
                            });
                            else {
                                e.data = {};
                                var i = e.complexData;
                                i ? (i = this.findMimeType(i.supported.formats), e.data.complexData = {
                                    mimeType: i,
                                    value: this.formats[i].write(this.toFeatures(t))
                                }) : e.data.literalData = {
                                    value: t
                                }
                            }
                        },
                        setResponseForm: function (e) {
                            e = e || {};
                            var t = this.description.processOutputs[e.outputIndex || 0];
                            this.description.responseForm = {
                                rawDataOutput: {
                                    identifier: t.identifier,
                                    mimeType: this.findMimeType(t.complexOutput.supported.formats, e.supportedFormats)
                                }
                            }
                        },
                        getOutputIndex: function (e, t) {
                            var i;
                            if (t) {
                                for (var s = e.length - 1; 0 <= s; --s)
                                    if (e[s].identifier === t) {
                                        i = s;
                                        break
                                    }
                            } else i = 0;
                            return i
                        },
                        chainProcess: function (e, t) {
                            var i = this.getOutputIndex(t.process.description.processOutputs, t.output);
                            e.reference.mimeType = this.findMimeType(e.complexData.supported.formats, t.process.description.processOutputs[i].complexOutput.supported.formats);
                            var s = {};
                            for (s[e.reference.mimeType] = !0, t.process.setResponseForm({
                                    outputIndex: i,
                                    supportedFormats: s
                                }), e.reference.body = t.process.description; 0 < this.executeCallbacks.length;) this.executeCallbacks[0]()
                        },
                        toFeatures: function (e) {
                            var t = OpenLayers.Util.isArray(e);
                            t || (e = [e]);
                            for (var i, s = Array(e.length), r = 0, n = e.length; r < n; ++r) i = e[r], s[r] = i instanceof OpenLayers.Feature.Vector ? i : new OpenLayers.Feature.Vector(i);
                            return t ? s : s[0]
                        },
                        findMimeType: function (e, t) {
                            for (var i in t = t || this.formats, e)
                                if (i in t) return i
                        },
                        CLASS_NAME: "OpenLayers.WPSProcess"
                    }), OpenLayers.WPSProcess.ChainLink = OpenLayers.Class({
                        process: null,
                        output: null,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e)
                        },
                        CLASS_NAME: "OpenLayers.WPSProcess.ChainLink"
                    }), OpenLayers.WPSClient = OpenLayers.Class({
                        servers: null,
                        version: "1.0.0",
                        lazy: !1,
                        events: null,
                        initialize: function (e) {
                            for (var t in OpenLayers.Util.extend(this, e), this.events = new OpenLayers.Events(this), this.servers = {}, e.servers) this.servers[t] = "string" == typeof e.servers[t] ? {
                                url: e.servers[t],
                                version: this.version,
                                processDescription: {}
                            } : e.servers[t]
                        },
                        execute: function (e) {
                            this.getProcess(e.server, e.process).execute({
                                inputs: e.inputs,
                                success: e.success,
                                scope: e.scope
                            })
                        },
                        getProcess: function (e, t) {
                            var i = new OpenLayers.WPSProcess({
                                client: this,
                                server: e,
                                identifier: t
                            });
                            return this.lazy || i.describe(), i
                        },
                        describeProcess: function (e, t, i, s) {
                            var r = this.servers[e];
                            r.processDescription[t] ? window.setTimeout((function () {
                                i.call(s, r.processDescription[t])
                            }), 0) : t in r.processDescription ? this.events.register("describeprocess", this, (function e(r) {
                                r.identifier === t && (this.events.unregister("describeprocess", this, e), i.call(s, r.raw))
                            })) : (r.processDescription[t] = null, OpenLayers.Request.GET({
                                url: r.url,
                                params: {
                                    SERVICE: "WPS",
                                    VERSION: r.version,
                                    REQUEST: "DescribeProcess",
                                    IDENTIFIER: t
                                },
                                success: function (e) {
                                    r.processDescription[t] = e.responseText, this.events.triggerEvent("describeprocess", {
                                        identifier: t,
                                        raw: e.responseText
                                    })
                                },
                                scope: this
                            }))
                        },
                        destroy: function () {
                            this.events.destroy(), this.servers = this.events = null
                        },
                        CLASS_NAME: "OpenLayers.WPSClient"
                    }), OpenLayers.Format.CSWGetRecords.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            csw: "http://www.opengis.net/cat/csw/2.0.2",
                            dc: "http://purl.org/dc/elements/1.1/",
                            dct: "http://purl.org/dc/terms/",
                            gmd: "http://www.isotc211.org/2005/gmd",
                            geonet: "http://www.fao.org/geonetwork",
                            ogc: "http://www.opengis.net/ogc",
                            ows: "http://www.opengis.net/ows",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        defaultPrefix: "csw",
                        version: "2.0.2",
                        schemaLocation: "http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
                        requestId: null,
                        resultType: null,
                        outputFormat: null,
                        outputSchema: null,
                        startPosition: null,
                        maxRecords: null,
                        DistributedSearch: null,
                        ResponseHandler: null,
                        Query: null,
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        readers: {
                            csw: {
                                GetRecordsResponse: function (e, t) {
                                    t.records = [], this.readChildNodes(e, t);
                                    var i = this.getAttributeNS(e, "", "version");
                                    "" != i && (t.version = i)
                                },
                                RequestId: function (e, t) {
                                    t.RequestId = this.getChildValue(e)
                                },
                                SearchStatus: function (e, t) {
                                    t.SearchStatus = {};
                                    var i = this.getAttributeNS(e, "", "timestamp");
                                    "" != i && (t.SearchStatus.timestamp = i)
                                },
                                SearchResults: function (e, t) {
                                    this.readChildNodes(e, t);
                                    for (var i = e.attributes, s = {}, r = 0, n = i.length; r < n; ++r) s[i[r].name] = "numberOfRecordsMatched" == i[r].name || "numberOfRecordsReturned" == i[r].name || "nextRecord" == i[r].name ? parseInt(i[r].nodeValue) : i[r].nodeValue;
                                    t.SearchResults = s
                                },
                                SummaryRecord: function (e, t) {
                                    var i = {
                                        type: "SummaryRecord"
                                    };
                                    this.readChildNodes(e, i), t.records.push(i)
                                },
                                BriefRecord: function (e, t) {
                                    var i = {
                                        type: "BriefRecord"
                                    };
                                    this.readChildNodes(e, i), t.records.push(i)
                                },
                                DCMIRecord: function (e, t) {
                                    var i = {
                                        type: "DCMIRecord"
                                    };
                                    this.readChildNodes(e, i), t.records.push(i)
                                },
                                Record: function (e, t) {
                                    var i = {
                                        type: "Record"
                                    };
                                    this.readChildNodes(e, i), t.records.push(i)
                                },
                                "*": function (e, t) {
                                    t[e.localName || e.nodeName.split(":").pop()] = this.getChildValue(e)
                                }
                            },
                            geonet: {
                                info: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.gninfo = i
                                }
                            },
                            dc: {
                                "*": function (e, t) {
                                    var i = e.localName || e.nodeName.split(":").pop();
                                    OpenLayers.Util.isArray(t[i]) || (t[i] = []);
                                    for (var s = {}, r = e.attributes, n = 0, a = r.length; n < a; ++n) s[r[n].name] = r[n].nodeValue;
                                    s.value = this.getChildValue(e), "" != s.value && t[i].push(s)
                                }
                            },
                            dct: {
                                "*": function (e, t) {
                                    var i = e.localName || e.nodeName.split(":").pop();
                                    OpenLayers.Util.isArray(t[i]) || (t[i] = []), t[i].push(this.getChildValue(e))
                                }
                            },
                            ows: OpenLayers.Util.applyDefaults({
                                BoundingBox: function (e, t) {
                                    t.bounds && (t.BoundingBox = [{
                                        crs: t.projection,
                                        value: [t.bounds.left, t.bounds.bottom, t.bounds.right, t.bounds.top]
                                    }], delete t.projection, delete t.bounds), OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this, arguments)
                                }
                            }, OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)
                        },
                        write: function (e) {
                            return (e = this.writeNode("csw:GetRecords", e)).setAttribute("xmlns:gmd", this.namespaces.gmd), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        writers: {
                            csw: {
                                GetRecords: function (e) {
                                    e || (e = {});
                                    var t = this.createElementNSPlus("csw:GetRecords", {
                                        attributes: {
                                            service: "CSW",
                                            version: this.version,
                                            requestId: e.requestId || this.requestId,
                                            resultType: e.resultType || this.resultType,
                                            outputFormat: e.outputFormat || this.outputFormat,
                                            outputSchema: e.outputSchema || this.outputSchema,
                                            startPosition: e.startPosition || this.startPosition,
                                            maxRecords: e.maxRecords || this.maxRecords
                                        }
                                    });
                                    (e.DistributedSearch || this.DistributedSearch) && this.writeNode("csw:DistributedSearch", e.DistributedSearch || this.DistributedSearch, t);
                                    var i = e.ResponseHandler || this.ResponseHandler;
                                    if (OpenLayers.Util.isArray(i) && 0 < i.length)
                                        for (var s = 0, r = i.length; s < r; s++) this.writeNode("csw:ResponseHandler", i[s], t);
                                    return this.writeNode("Query", e.Query || this.Query, t), t
                                },
                                DistributedSearch: function (e) {
                                    return this.createElementNSPlus("csw:DistributedSearch", {
                                        attributes: {
                                            hopCount: e.hopCount
                                        }
                                    })
                                },
                                ResponseHandler: function (e) {
                                    return this.createElementNSPlus("csw:ResponseHandler", {
                                        value: e.value
                                    })
                                },
                                Query: function (e) {
                                    e || (e = {});
                                    var t = this.createElementNSPlus("csw:Query", {
                                            attributes: {
                                                typeNames: e.typeNames || "csw:Record"
                                            }
                                        }),
                                        i = e.ElementName;
                                    if (OpenLayers.Util.isArray(i) && 0 < i.length)
                                        for (var s = 0, r = i.length; s < r; s++) this.writeNode("csw:ElementName", i[s], t);
                                    else this.writeNode("csw:ElementSetName", e.ElementSetName || {
                                        value: "summary"
                                    }, t);
                                    return e.Constraint && this.writeNode("csw:Constraint", e.Constraint, t), e.SortBy && this.writeNode("ogc:SortBy", e.SortBy, t), t
                                },
                                ElementName: function (e) {
                                    return this.createElementNSPlus("csw:ElementName", {
                                        value: e.value
                                    })
                                },
                                ElementSetName: function (e) {
                                    return this.createElementNSPlus("csw:ElementSetName", {
                                        attributes: {
                                            typeNames: e.typeNames
                                        },
                                        value: e.value
                                    })
                                },
                                Constraint: function (e) {
                                    var t = this.createElementNSPlus("csw:Constraint", {
                                        attributes: {
                                            version: e.version
                                        }
                                    });
                                    if (e.Filter) {
                                        var i = new OpenLayers.Format.Filter({
                                            version: e.version
                                        });
                                        t.appendChild(i.write(e.Filter))
                                    } else e.CqlText && (e = this.createElementNSPlus("CqlText", {
                                        value: e.CqlText.value
                                    }), t.appendChild(e));
                                    return t
                                }
                            },
                            ogc: OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc
                        },
                        CLASS_NAME: "OpenLayers.Format.CSWGetRecords.v2_0_2"
                    }), OpenLayers.Marker.Box = OpenLayers.Class(OpenLayers.Marker, {
                        bounds: null,
                        div: null,
                        initialize: function (e, t, i) {
                            this.bounds = e, this.div = OpenLayers.Util.createDiv(), this.div.style.overflow = "hidden", this.events = new OpenLayers.Events(this, this.div), this.setBorder(t, i)
                        },
                        destroy: function () {
                            this.div = this.bounds = null, OpenLayers.Marker.prototype.destroy.apply(this, arguments)
                        },
                        setBorder: function (e, t) {
                            e || (e = "red"), t || (t = 2), this.div.style.border = t + "px solid " + e
                        },
                        draw: function (e, t) {
                            return OpenLayers.Util.modifyDOMElement(this.div, null, e, t), this.div
                        },
                        onScreen: function () {
                            var e = !1;
                            return this.map && (e = this.map.getExtent().containsBounds(this.bounds, !0, !0)), e
                        },
                        display: function (e) {
                            this.div.style.display = e ? "" : "none"
                        },
                        CLASS_NAME: "OpenLayers.Marker.Box"
                    }), OpenLayers.Format.Text = OpenLayers.Class(OpenLayers.Format, {
                        defaultStyle: null,
                        extractStyles: !0,
                        initialize: function (e) {
                            !1 !== (e = e || {}).extractStyles && (e.defaultStyle = {
                                externalGraphic: OpenLayers.Util.getImageLocation("marker.png"),
                                graphicWidth: 21,
                                graphicHeight: 25,
                                graphicXOffset: -10.5,
                                graphicYOffset: -12.5
                            }), OpenLayers.Format.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            e = e.split("\n");
                            for (var t, i = [], s = 0; s < e.length - 1; s++) {
                                if ("#" != (r = e[s].replace(/^\s*/, "").replace(/\s*$/, "")).charAt(0))
                                    if (t) {
                                        for (var r = r.split("\t"), n = new OpenLayers.Geometry.Point(0, 0), a = {}, o = this.defaultStyle ? OpenLayers.Util.applyDefaults({}, this.defaultStyle) : null, l = !1, h = 0; h < r.length; h++)
                                            if (r[h])
                                                if ("point" == t[h]) l = r[h].split(","), n.y = parseFloat(l[0]), n.x = parseFloat(l[1]), l = !0;
                                                else if ("lat" == t[h]) n.y = parseFloat(r[h]), l = !0;
                                        else if ("lon" == t[h]) n.x = parseFloat(r[h]), l = !0;
                                        else if ("title" == t[h]) a.title = r[h];
                                        else if ("image" == t[h] || "icon" == t[h] && o) o.externalGraphic = r[h];
                                        else if ("iconSize" == t[h] && o) {
                                            var p = r[h].split(",");
                                            o.graphicWidth = parseFloat(p[0]), o.graphicHeight = parseFloat(p[1])
                                        } else "iconOffset" == t[h] && o ? (p = r[h].split(","), o.graphicXOffset = parseFloat(p[0]), o.graphicYOffset = parseFloat(p[1])) : "description" == t[h] ? a.description = r[h] : "overflow" == t[h] ? a.overflow = r[h] : a[t[h]] = r[h];
                                        l && (this.internalProjection && this.externalProjection && n.transform(this.externalProjection, this.internalProjection), r = new OpenLayers.Feature.Vector(n, a, o), i.push(r))
                                    } else t = r.split("\t")
                            }
                            return i
                        },
                        CLASS_NAME: "OpenLayers.Format.Text"
                    }), OpenLayers.Layer.Text = OpenLayers.Class(OpenLayers.Layer.Markers, {
                        location: null,
                        features: null,
                        formatOptions: null,
                        selectedFeature: null,
                        initialize: function (e, t) {
                            OpenLayers.Layer.Markers.prototype.initialize.apply(this, arguments), this.features = []
                        },
                        destroy: function () {
                            OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments), this.clearFeatures(), this.features = null
                        },
                        loadText: function () {
                            this.loaded || null == this.location || (this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
                                url: this.location,
                                success: this.parseData,
                                failure: function (e) {
                                    this.events.triggerEvent("loadend")
                                },
                                scope: this
                            }), this.loaded = !0)
                        },
                        moveTo: function (e, t, i) {
                            OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadText()
                        },
                        parseData: function (e) {
                            e = e.responseText;
                            var t = {};
                            OpenLayers.Util.extend(t, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (t.externalProjection = this.projection, t.internalProjection = this.map.getProjectionObject()), e = new OpenLayers.Format.Text(t).read(e);
                            t = 0;
                            for (var i = e.length; t < i; t++) {
                                var s, r, n, a = {},
                                    o = e[t];
                                s = new OpenLayers.LonLat(o.geometry.x, o.geometry.y), o.style.graphicWidth && o.style.graphicHeight && (r = new OpenLayers.Size(o.style.graphicWidth, o.style.graphicHeight)), void 0 !== o.style.graphicXOffset && void 0 !== o.style.graphicYOffset && (n = new OpenLayers.Pixel(o.style.graphicXOffset, o.style.graphicYOffset)), null != o.style.externalGraphic ? a.icon = new OpenLayers.Icon(o.style.externalGraphic, r, n) : (a.icon = OpenLayers.Marker.defaultIcon(), null != r && a.icon.setSize(r)), null != o.attributes.title && null != o.attributes.description && (a.popupContentHTML = "<h2>" + o.attributes.title + "</h2><p>" + o.attributes.description + "</p>"), a.overflow = o.attributes.overflow || "auto", a = new OpenLayers.Feature(this, s, a), this.features.push(a), s = a.createMarker(), null != o.attributes.title && null != o.attributes.description && s.events.register("click", a, this.markerClick), this.addMarker(s)
                            }
                            this.events.triggerEvent("loadend")
                        },
                        markerClick: function (e) {
                            var t = this == this.layer.selectedFeature;
                            this.layer.selectedFeature = t ? null : this;
                            for (var i = 0, s = this.layer.map.popups.length; i < s; i++) this.layer.map.removePopup(this.layer.map.popups[i]);
                            t || this.layer.map.addPopup(this.createPopup()), OpenLayers.Event.stop(e)
                        },
                        clearFeatures: function () {
                            if (null != this.features)
                                for (; 0 < this.features.length;) {
                                    var e = this.features[0];
                                    OpenLayers.Util.removeItem(this.features, e), e.destroy()
                                }
                        },
                        CLASS_NAME: "OpenLayers.Layer.Text"
                    }), OpenLayers.Handler.RegularPolygon = OpenLayers.Class(OpenLayers.Handler.Drag, {
                        sides: 4,
                        radius: null,
                        snapAngle: null,
                        snapToggle: "shiftKey",
                        layerOptions: null,
                        persist: !1,
                        irregular: !1,
                        citeCompliant: !1,
                        angle: null,
                        fixedRadius: !1,
                        feature: null,
                        layer: null,
                        origin: null,
                        initialize: function (e, t, i) {
                            i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), OpenLayers.Handler.Drag.prototype.initialize.apply(this, [e, t, i]), this.options = i || {}
                        },
                        setOptions: function (e) {
                            OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e)
                        },
                        activate: function () {
                            var e = !1;
                            return OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments) && (e = OpenLayers.Util.extend({
                                displayInLayerSwitcher: !1,
                                calculateInRange: OpenLayers.Function.True,
                                wrapDateLine: this.citeCompliant
                            }, this.layerOptions), this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, e), this.map.addLayer(this.layer), e = !0), e
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments) && (this.dragging && this.cancel(), null != this.layer.map && (this.layer.destroy(!1), this.feature && this.feature.destroy()), this.feature = this.layer = null, e = !0), e
                        },
                        down: function (e) {
                            this.fixedRadius = !!this.radius, e = this.layer.getLonLatFromViewPortPx(e.xy), this.origin = new OpenLayers.Geometry.Point(e.lon, e.lat), this.fixedRadius && !this.irregular || (this.radius = this.map.getResolution()), this.persist && this.clear(), this.feature = new OpenLayers.Feature.Vector, this.createGeometry(), this.callback("create", [this.origin, this.feature]), this.layer.addFeatures([this.feature], {
                                silent: !0
                            }), this.layer.drawFeature(this.feature, this.style)
                        },
                        move: function (e) {
                            var t, i = this.layer.getLonLatFromViewPortPx(e.xy);
                            i = new OpenLayers.Geometry.Point(i.lon, i.lat);
                            (this.irregular ? (e = Math.sqrt(2) * Math.abs(i.y - this.origin.y) / 2, this.radius = Math.max(this.map.getResolution() / 2, e)) : this.fixedRadius ? this.origin = i : (this.calculateAngle(i, e), this.radius = Math.max(this.map.getResolution() / 2, i.distanceTo(this.origin))), this.modifyGeometry(), this.irregular) && (e = i.x - this.origin.x, t = 0 == (i = i.y - this.origin.y) ? e / (this.radius * Math.sqrt(2)) : e / i, this.feature.geometry.resize(1, this.origin, t), this.feature.geometry.move(e / 2, i / 2));
                            this.layer.drawFeature(this.feature, this.style)
                        },
                        up: function (e) {
                            this.finalize(), this.start == this.last && this.callback("done", [e.xy])
                        },
                        out: function (e) {
                            this.finalize()
                        },
                        createGeometry: function () {
                            this.angle = Math.PI * (1 / this.sides - .5), this.snapAngle && (this.angle += this.snapAngle * (Math.PI / 180)), this.feature.geometry = OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin, this.radius, this.sides, this.snapAngle)
                        },
                        modifyGeometry: function () {
                            var e, t, i = this.feature.geometry.components[0];
                            i.components.length != this.sides + 1 && (this.createGeometry(), i = this.feature.geometry.components[0]);
                            for (var s = 0; s < this.sides; ++s) t = i.components[s], e = this.angle + 2 * s * Math.PI / this.sides, t.x = this.origin.x + this.radius * Math.cos(e), t.y = this.origin.y + this.radius * Math.sin(e), t.clearBounds()
                        },
                        calculateAngle: function (e, t) {
                            var i = Math.atan2(e.y - this.origin.y, e.x - this.origin.x);
                            if (this.snapAngle && this.snapToggle && !t[this.snapToggle]) {
                                var s = Math.PI / 180 * this.snapAngle;
                                this.angle = Math.round(i / s) * s
                            } else this.angle = i
                        },
                        cancel: function () {
                            this.callback("cancel", null), this.finalize()
                        },
                        finalize: function () {
                            this.origin = null, this.radius = this.options.radius
                        },
                        clear: function () {
                            this.layer && (this.layer.renderer.clear(), this.layer.destroyFeatures())
                        },
                        callback: function (e, t) {
                            this.callbacks[e] && this.callbacks[e].apply(this.control, [this.feature.geometry.clone()]), this.persist || "done" != e && "cancel" != e || this.clear()
                        },
                        CLASS_NAME: "OpenLayers.Handler.RegularPolygon"
                    }), OpenLayers.Control.SLDSelect = OpenLayers.Class(OpenLayers.Control, {
                        clearOnDeactivate: !1,
                        layers: null,
                        callbacks: null,
                        selectionSymbolizer: {
                            Polygon: {
                                fillColor: "#FF0000",
                                stroke: !1
                            },
                            Line: {
                                strokeColor: "#FF0000",
                                strokeWidth: 2
                            },
                            Point: {
                                graphicName: "square",
                                fillColor: "#FF0000",
                                pointRadius: 5
                            }
                        },
                        layerOptions: null,
                        sketchStyle: null,
                        wfsCache: {},
                        layerCache: {},
                        initialize: function (e, t) {
                            OpenLayers.Control.prototype.initialize.apply(this, [t]), this.callbacks = OpenLayers.Util.extend({
                                done: this.select,
                                click: this.select
                            }, this.callbacks), this.handlerOptions = this.handlerOptions || {}, this.layerOptions = OpenLayers.Util.applyDefaults(this.layerOptions, {
                                displayInLayerSwitcher: !1,
                                tileOptions: {
                                    maxGetUrlLength: 2048
                                }
                            }), this.sketchStyle && (this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
                                styleMap: new OpenLayers.StyleMap({
                                    default: this.sketchStyle
                                })
                            })), this.handler = new e(this, this.callbacks, this.handlerOptions)
                        },
                        destroy: function () {
                            for (var e in this.layerCache) delete this.layerCache[e];
                            for (e in this.wfsCache) delete this.wfsCache[e];
                            OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        coupleLayerVisiblity: function (e) {
                            this.setVisibility(e.object.getVisibility())
                        },
                        createSelectionLayer: function (e) {
                            var t;
                            return this.layerCache[e.id] ? t = this.layerCache[e.id] : (t = new OpenLayers.Layer.WMS(e.name, e.url, e.params, OpenLayers.Util.applyDefaults(this.layerOptions, e.getOptions())), this.layerCache[e.id] = t, !1 === this.layerOptions.displayInLayerSwitcher && e.events.on({
                                visibilitychanged: this.coupleLayerVisiblity,
                                scope: t
                            }), this.map.addLayer(t)), t
                        },
                        createSLD: function (e, t, i) {
                            for (var s = {
                                    version: "1.0.0",
                                    namedLayers: {}
                                }, r = ("" + e.params.LAYERS).split(","), n = 0, a = r.length; n < a; n++) {
                                var o = r[n];
                                s.namedLayers[o] = {
                                    name: o,
                                    userStyles: []
                                };
                                var l = this.selectionSymbolizer,
                                    h = i[n];
                                0 <= h.type.indexOf("Polygon") ? l = {
                                    Polygon: this.selectionSymbolizer.Polygon
                                } : 0 <= h.type.indexOf("LineString") ? l = {
                                    Line: this.selectionSymbolizer.Line
                                } : 0 <= h.type.indexOf("Point") && (l = {
                                    Point: this.selectionSymbolizer.Point
                                }), s.namedLayers[o].userStyles.push({
                                    name: "default",
                                    rules: [new OpenLayers.Rule({
                                        symbolizer: l,
                                        filter: t[n],
                                        maxScaleDenominator: e.options.minScale
                                    })]
                                })
                            }
                            return new OpenLayers.Format.SLD({
                                srsName: this.map.getProjection()
                            }).write(s)
                        },
                        parseDescribeLayer: function (e) {
                            var t = new OpenLayers.Format.WMSDescribeLayer;
                            (i = e.responseXML) && i.documentElement || (i = e.responseText), e = t.read(i);
                            t = [];
                            for (var i = null, s = 0, r = e.length; s < r; s++) "WFS" == e[s].owsType && (t.push(e[s].typeName), i = e[s].owsURL);
                            OpenLayers.Request.GET({
                                url: i,
                                params: {
                                    SERVICE: "WFS",
                                    TYPENAME: t.toString(),
                                    REQUEST: "DescribeFeatureType",
                                    VERSION: "1.0.0"
                                },
                                callback: function (e) {
                                    var t = new OpenLayers.Format.WFSDescribeFeatureType,
                                        i = e.responseXML;
                                    i && i.documentElement || (i = e.responseText), e = t.read(i), this.control.wfsCache[this.layer.id] = e, this.control._queue && this.control.applySelection()
                                },
                                scope: this
                            })
                        },
                        getGeometryAttributes: function (e) {
                            for (var t = [], i = 0, s = (e = this.wfsCache[e.id]).featureTypes.length; i < s; i++)
                                for (var r = e.featureTypes[i].properties, n = 0, a = r.length; n < a; n++) {
                                    var o = r[n],
                                        l = o.type;
                                    (0 <= l.indexOf("LineString") || 0 <= l.indexOf("GeometryAssociationType") || 0 <= l.indexOf("GeometryPropertyType") || 0 <= l.indexOf("Point") || 0 <= l.indexOf("Polygon")) && t.push(o)
                                }
                            return t
                        },
                        activate: function () {
                            var e = OpenLayers.Control.prototype.activate.call(this);
                            if (e)
                                for (var t = 0, i = this.layers.length; t < i; t++) {
                                    var s = this.layers[t];
                                    s && !this.wfsCache[s.id] && OpenLayers.Request.GET({
                                        url: s.url,
                                        params: {
                                            SERVICE: "WMS",
                                            VERSION: s.params.VERSION,
                                            LAYERS: s.params.LAYERS,
                                            REQUEST: "DescribeLayer"
                                        },
                                        callback: this.parseDescribeLayer,
                                        scope: {
                                            layer: s,
                                            control: this
                                        }
                                    })
                                }
                            return e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Control.prototype.deactivate.call(this);
                            if (e)
                                for (var t = 0, i = this.layers.length; t < i; t++) {
                                    var s = this.layers[t];
                                    if (s && !0 === this.clearOnDeactivate) {
                                        var r = this.layerCache,
                                            n = r[s.id];
                                        n && (s.events.un({
                                            visibilitychanged: this.coupleLayerVisiblity,
                                            scope: n
                                        }), n.destroy(), delete r[s.id])
                                    }
                                }
                            return e
                        },
                        setLayers: function (e) {
                            this.active ? (this.deactivate(), this.layers = e, this.activate()) : this.layers = e
                        },
                        createFilter: function (e, t) {
                            var i = null;
                            return this.handler instanceof OpenLayers.Handler.RegularPolygon ? i = !0 === this.handler.irregular ? new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.BBOX,
                                property: e.name,
                                value: t.getBounds()
                            }) : new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.INTERSECTS,
                                property: e.name,
                                value: t
                            }) : this.handler instanceof OpenLayers.Handler.Polygon ? i = new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.INTERSECTS,
                                property: e.name,
                                value: t
                            }) : this.handler instanceof OpenLayers.Handler.Path ? i = 0 <= e.type.indexOf("Point") ? new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.DWITHIN,
                                property: e.name,
                                distance: .01 * this.map.getExtent().getWidth(),
                                distanceUnits: this.map.getUnits(),
                                value: t
                            }) : new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.INTERSECTS,
                                property: e.name,
                                value: t
                            }) : this.handler instanceof OpenLayers.Handler.Click && (i = 0 <= e.type.indexOf("Polygon") ? new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.INTERSECTS,
                                property: e.name,
                                value: t
                            }) : new OpenLayers.Filter.Spatial({
                                type: OpenLayers.Filter.Spatial.DWITHIN,
                                property: e.name,
                                distance: .01 * this.map.getExtent().getWidth(),
                                distanceUnits: this.map.getUnits(),
                                value: t
                            })), i
                        },
                        select: function (e) {
                            this._queue = function () {
                                for (var t = 0, i = this.layers.length; t < i; t++) {
                                    for (var s = this.layers[t], r = this.getGeometryAttributes(s), n = [], a = 0, o = r.length; a < o; a++) {
                                        var l = r[a];
                                        if (null !== l) {
                                            if (!(e instanceof OpenLayers.Geometry)) {
                                                var h = this.map.getLonLatFromPixel(e.xy);
                                                e = new OpenLayers.Geometry.Point(h.lon, h.lat)
                                            }
                                            null !== (l = this.createFilter(l, e)) && n.push(l)
                                        }
                                    }
                                    a = this.createSelectionLayer(s), this.events.triggerEvent("selected", {
                                        layer: s,
                                        filters: n
                                    }), s = this.createSLD(s, n, r), a.mergeNewParams({
                                        SLD_BODY: s
                                    }), delete this._queue
                                }
                            }, this.applySelection()
                        },
                        applySelection: function () {
                            for (var e = !0, t = 0, i = this.layers.length; t < i; t++)
                                if (!this.wfsCache[this.layers[t].id]) {
                                    e = !1;
                                    break
                                } e && this._queue.call(this)
                        },
                        CLASS_NAME: "OpenLayers.Control.SLDSelect"
                    }), OpenLayers.Control.Scale = OpenLayers.Class(OpenLayers.Control, {
                        element: null,
                        geodesic: !1,
                        initialize: function (e, t) {
                            OpenLayers.Control.prototype.initialize.apply(this, [t]), this.element = OpenLayers.Util.getElement(e)
                        },
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.element = document.createElement("div"), this.div.appendChild(this.element)), this.map.events.register("moveend", this, this.updateScale), this.updateScale(), this.div
                        },
                        updateScale: function () {
                            var e;
                            if (!0 === this.geodesic) {
                                if (!this.map.getUnits()) return;
                                e = OpenLayers.INCHES_PER_UNIT, e = (this.map.getGeodesicPixelSize().w || 1e-6) * e.km * OpenLayers.DOTS_PER_INCH
                            } else e = this.map.getScale();
                            e && (e = 9500 <= e && 95e4 >= e ? Math.round(e / 1e3) + "K" : 95e4 <= e ? Math.round(e / 1e6) + "M" : Math.round(e), this.element.innerHTML = OpenLayers.i18n("Scale = 1 : ${scaleDenom}", {
                                scaleDenom: e
                            }))
                        },
                        CLASS_NAME: "OpenLayers.Control.Scale"
                    }), OpenLayers.Layer.MapGuide = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        isBaseLayer: !0,
                        useHttpTile: !1,
                        singleTile: !1,
                        useOverlay: !1,
                        useAsyncOverlay: !0,
                        TILE_PARAMS: {
                            operation: "GETTILEIMAGE",
                            version: "1.2.0"
                        },
                        SINGLE_TILE_PARAMS: {
                            operation: "GETMAPIMAGE",
                            format: "PNG",
                            locale: "en",
                            clip: "1",
                            version: "1.0.0"
                        },
                        OVERLAY_PARAMS: {
                            operation: "GETDYNAMICMAPOVERLAYIMAGE",
                            format: "PNG",
                            locale: "en",
                            clip: "1",
                            version: "2.0.0"
                        },
                        FOLDER_PARAMS: {
                            tileColumnsPerFolder: 30,
                            tileRowsPerFolder: 30,
                            format: "png",
                            querystring: null
                        },
                        defaultSize: new OpenLayers.Size(300, 300),
                        tileOriginCorner: "tl",
                        initialize: function (e, t, i, s) {
                            OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), null != s && null != s.isBaseLayer || (this.isBaseLayer = "true" != this.transparent && 1 != this.transparent), s && null != s.useOverlay && (this.useOverlay = s.useOverlay), this.singleTile ? this.useOverlay ? (OpenLayers.Util.applyDefaults(this.params, this.OVERLAY_PARAMS), this.useAsyncOverlay || (this.params.version = "1.0.0")) : OpenLayers.Util.applyDefaults(this.params, this.SINGLE_TILE_PARAMS) : (this.useHttpTile ? OpenLayers.Util.applyDefaults(this.params, this.FOLDER_PARAMS) : OpenLayers.Util.applyDefaults(this.params, this.TILE_PARAMS), this.setTileSize(this.defaultSize))
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.MapGuide(this.name, this.url, this.params, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            var t;
                            t = e.getCenterLonLat();
                            var i = this.map.getSize();
                            return this.singleTile ? (e = {
                                setdisplaydpi: OpenLayers.DOTS_PER_INCH,
                                setdisplayheight: i.h * this.ratio,
                                setdisplaywidth: i.w * this.ratio,
                                setviewcenterx: t.lon,
                                setviewcentery: t.lat,
                                setviewscale: this.map.getScale()
                            }, this.useOverlay && !this.useAsyncOverlay && (t = {}, (t = OpenLayers.Util.extend(t, e)).operation = "GETVISIBLEMAPEXTENT", t.version = "1.0.0", t.session = this.params.session, t.mapName = this.params.mapName, t.format = "text/xml", t = this.getFullRequestString(t), OpenLayers.Request.GET({
                                url: t,
                                async: !1
                            })), t = this.getFullRequestString(e)) : (i = this.map.getResolution(), t = Math.floor((e.left - this.maxExtent.left) / i), t = Math.round(t / this.tileSize.w), e = Math.floor((this.maxExtent.top - e.top) / i), e = Math.round(e / this.tileSize.h), t = this.useHttpTile ? this.getImageFilePath({
                                tilecol: t,
                                tilerow: e,
                                scaleindex: this.resolutions.length - this.map.zoom - 1
                            }) : this.getFullRequestString({
                                tilecol: t,
                                tilerow: e,
                                scaleindex: this.resolutions.length - this.map.zoom - 1
                            })), t
                        },
                        getFullRequestString: function (e, t) {
                            var i = null == t ? this.url : t;
                            "object" == typeof i && (i = i[Math.floor(Math.random() * i.length)]);
                            var s, r = i,
                                n = OpenLayers.Util.extend({}, this.params),
                                a = (n = OpenLayers.Util.extend(n, e), OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i)));
                            for (s in n) s.toUpperCase() in a && delete n[s];
                            return "" != (n = (n = OpenLayers.Util.getParameterString(n)).replace(/,/g, "+")) && (r = "&" == (a = i.charAt(i.length - 1)) || "?" == a ? r + n : -1 == i.indexOf("?") ? r + "?" + n : r + "&" + n), r
                        },
                        getImageFilePath: function (e, t) {
                            var i = null == t ? this.url : t;
                            "object" == typeof i && (i = i[Math.floor(Math.random() * i.length)]);
                            var s = "",
                                r = "";
                            return 0 > e.tilerow && (s = "-"), s = 0 == e.tilerow ? s + "0" : s + Math.floor(Math.abs(e.tilerow / this.params.tileRowsPerFolder)) * this.params.tileRowsPerFolder, 0 > e.tilecol && (r = "-"), r = 0 == e.tilecol ? r + "0" : r + Math.floor(Math.abs(e.tilecol / this.params.tileColumnsPerFolder)) * this.params.tileColumnsPerFolder, s = "/S" + Math.floor(e.scaleindex) + "/" + this.params.basemaplayergroupname + "/R" + s + "/C" + r + "/" + e.tilerow % this.params.tileRowsPerFolder + "_" + e.tilecol % this.params.tileColumnsPerFolder + "." + this.params.format, this.params.querystring && (s += "?" + this.params.querystring), i + s
                        },
                        CLASS_NAME: "OpenLayers.Layer.MapGuide"
                    }), OpenLayers.Control.Measure = OpenLayers.Class(OpenLayers.Control, {
                        callbacks: null,
                        displaySystem: "metric",
                        geodesic: !1,
                        displaySystemUnits: {
                            geographic: ["dd"],
                            english: ["mi", "ft", "in"],
                            metric: ["km", "m"]
                        },
                        partialDelay: 300,
                        delayedTrigger: null,
                        persist: !1,
                        immediate: !1,
                        initialize: function (e, t) {
                            OpenLayers.Control.prototype.initialize.apply(this, [t]);
                            var i = {
                                done: this.measureComplete,
                                point: this.measurePartial
                            };
                            this.immediate && (i.modify = this.measureImmediate), this.callbacks = OpenLayers.Util.extend(i, this.callbacks), this.handlerOptions = OpenLayers.Util.extend({
                                persist: this.persist
                            }, this.handlerOptions), this.handler = new e(this, this.callbacks, this.handlerOptions)
                        },
                        deactivate: function () {
                            return this.cancelDelay(), OpenLayers.Control.prototype.deactivate.apply(this, arguments)
                        },
                        cancel: function () {
                            this.cancelDelay(), this.handler.cancel()
                        },
                        setImmediate: function (e) {
                            (this.immediate = e) ? this.callbacks.modify = this.measureImmediate: delete this.callbacks.modify
                        },
                        updateHandler: function (e, t) {
                            var i = this.active;
                            i && this.deactivate(), this.handler = new e(this, this.callbacks, t), i && this.activate()
                        },
                        measureComplete: function (e) {
                            this.cancelDelay(), this.measure(e, "measure")
                        },
                        measurePartial: function (e, t) {
                            this.cancelDelay(), t = t.clone(), this.handler.freehandMode(this.handler.evt) ? this.measure(t, "measurepartial") : this.delayedTrigger = window.setTimeout(OpenLayers.Function.bind((function () {
                                this.delayedTrigger = null, this.measure(t, "measurepartial")
                            }), this), this.partialDelay)
                        },
                        measureImmediate: function (e, t, i) {
                            i && !this.handler.freehandMode(this.handler.evt) && (this.cancelDelay(), this.measure(t.geometry, "measurepartial"))
                        },
                        cancelDelay: function () {
                            null !== this.delayedTrigger && (window.clearTimeout(this.delayedTrigger), this.delayedTrigger = null)
                        },
                        measure: function (e, t) {
                            var i, s; - 1 < e.CLASS_NAME.indexOf("LineString") ? (i = this.getBestLength(e), s = 1) : (i = this.getBestArea(e), s = 2), this.events.triggerEvent(t, {
                                measure: i[0],
                                units: i[1],
                                order: s,
                                geometry: e
                            })
                        },
                        getBestArea: function (e) {
                            for (var t, i, s = this.displaySystemUnits[this.displaySystem], r = 0, n = s.length; r < n && (t = s[r], !(1 < (i = this.getArea(e, t)))); ++r);
                            return [i, t]
                        },
                        getArea: function (e, t) {
                            var i, s;
                            this.geodesic ? (i = e.getGeodesicArea(this.map.getProjectionObject()), s = "m") : (i = e.getArea(), s = this.map.getUnits());
                            var r = OpenLayers.INCHES_PER_UNIT[t];
                            return r && (i *= Math.pow(OpenLayers.INCHES_PER_UNIT[s] / r, 2)), i
                        },
                        getBestLength: function (e) {
                            for (var t, i, s = this.displaySystemUnits[this.displaySystem], r = 0, n = s.length; r < n && (t = s[r], !(1 < (i = this.getLength(e, t)))); ++r);
                            return [i, t]
                        },
                        getLength: function (e, t) {
                            var i, s;
                            this.geodesic ? (i = e.getGeodesicLength(this.map.getProjectionObject()), s = "m") : (i = e.getLength(), s = this.map.getUnits());
                            var r = OpenLayers.INCHES_PER_UNIT[t];
                            return r && (i *= OpenLayers.INCHES_PER_UNIT[s] / r), i
                        },
                        CLASS_NAME: "OpenLayers.Control.Measure"
                    }), OpenLayers.Format.WMC.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WMC.v1, {
                        VERSION: "1.0.0",
                        schemaLocation: "http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",
                        initialize: function (e) {
                            OpenLayers.Format.WMC.v1.prototype.initialize.apply(this, [e])
                        },
                        read_wmc_SRS: function (e, t) {
                            var i = this.getChildValue(t);
                            "object" != typeof e.projections && (e.projections = {});
                            for (var s = 0, r = (i = i.split(/ +/)).length; s < r; s++) e.projections[i[s]] = !0
                        },
                        write_wmc_Layer: function (e) {
                            var t = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this, [e]);
                            if (e.srs) {
                                var i, s = [];
                                for (i in e.srs) s.push(i);
                                t.appendChild(this.createElementDefaultNS("SRS", s.join(" ")))
                            }
                            t.appendChild(this.write_wmc_FormatList(e)), t.appendChild(this.write_wmc_StyleList(e)), e.dimensions && t.appendChild(this.write_wmc_DimensionList(e)), t.appendChild(this.write_wmc_LayerExtension(e))
                        },
                        CLASS_NAME: "OpenLayers.Format.WMC.v1_0_0"
                    }), OpenLayers.Popup.Anchored = OpenLayers.Class(OpenLayers.Popup, {
                        relativePosition: null,
                        keepInMap: !0,
                        anchor: null,
                        initialize: function (e, t, i, s, r, n, a) {
                            OpenLayers.Popup.prototype.initialize.apply(this, [e, t, i, s, n, a]), this.anchor = null != r ? r : {
                                size: new OpenLayers.Size(0, 0),
                                offset: new OpenLayers.Pixel(0, 0)
                            }
                        },
                        destroy: function () {
                            this.relativePosition = this.anchor = null, OpenLayers.Popup.prototype.destroy.apply(this, arguments)
                        },
                        show: function () {
                            this.updatePosition(), OpenLayers.Popup.prototype.show.apply(this, arguments)
                        },
                        moveTo: function (e) {
                            var t = this.relativePosition;
                            this.relativePosition = this.calculateRelativePosition(e), OpenLayers.Popup.prototype.moveTo.call(this, this.calculateNewPx(e)), this.relativePosition != t && this.updateRelativePosition()
                        },
                        setSize: function (e) {
                            if (OpenLayers.Popup.prototype.setSize.apply(this, arguments), this.lonlat && this.map) {
                                var t = this.map.getLayerPxFromLonLat(this.lonlat);
                                this.moveTo(t)
                            }
                        },
                        calculateRelativePosition: function (e) {
                            return e = this.map.getLonLatFromLayerPx(e), e = this.map.getExtent().determineQuadrant(e), OpenLayers.Bounds.oppositeQuadrant(e)
                        },
                        updateRelativePosition: function () {},
                        calculateNewPx: function (e) {
                            e = e.offset(this.anchor.offset);
                            var t = this.size || this.contentSize,
                                i = "t" == this.relativePosition.charAt(0);
                            return e.y += i ? -t.h : this.anchor.size.h, i = "l" == this.relativePosition.charAt(1), e.x += i ? -t.w : this.anchor.size.w, e
                        },
                        CLASS_NAME: "OpenLayers.Popup.Anchored"
                    }), OpenLayers.Popup.Framed = OpenLayers.Class(OpenLayers.Popup.Anchored, {
                        imageSrc: null,
                        imageSize: null,
                        isAlphaImage: !1,
                        positionBlocks: null,
                        blocks: null,
                        fixedRelativePosition: !1,
                        initialize: function (e, t, i, s, r, n, a) {
                            OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments), this.fixedRelativePosition && (this.updateRelativePosition(), this.calculateRelativePosition = function (e) {
                                return this.relativePosition
                            }), this.contentDiv.style.position = "absolute", this.contentDiv.style.zIndex = 1, n && (this.closeDiv.style.zIndex = 1), this.groupDiv.style.position = "absolute", this.groupDiv.style.top = "0px", this.groupDiv.style.left = "0px", this.groupDiv.style.height = "100%", this.groupDiv.style.width = "100%"
                        },
                        destroy: function () {
                            this.isAlphaImage = this.imageSize = this.imageSrc = null, this.fixedRelativePosition = !1, this.positionBlocks = null;
                            for (var e = 0; e < this.blocks.length; e++) {
                                var t = this.blocks[e];
                                t.image && t.div.removeChild(t.image), t.image = null, t.div && this.groupDiv.removeChild(t.div), t.div = null
                            }
                            this.blocks = null, OpenLayers.Popup.Anchored.prototype.destroy.apply(this, arguments)
                        },
                        setBackgroundColor: function (e) {},
                        setBorder: function () {},
                        setOpacity: function (e) {},
                        setSize: function (e) {
                            OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments), this.updateBlocks()
                        },
                        updateRelativePosition: function () {
                            if (this.padding = this.positionBlocks[this.relativePosition].padding, this.closeDiv) {
                                var e = this.getContentDivPadding();
                                this.closeDiv.style.right = e.right + this.padding.right + "px", this.closeDiv.style.top = e.top + this.padding.top + "px"
                            }
                            this.updateBlocks()
                        },
                        calculateNewPx: function (e) {
                            var t = OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this, arguments);
                            return t.offset(this.positionBlocks[this.relativePosition].offset)
                        },
                        createBlocks: function () {
                            this.blocks = [];
                            var e, t = null;
                            for (e in this.positionBlocks) {
                                t = e;
                                break
                            }
                            for (t = this.positionBlocks[t], e = 0; e < t.blocks.length; e++) {
                                var i = {};
                                this.blocks.push(i), i.div = OpenLayers.Util.createDiv(this.id + "_FrameDecorationDiv_" + e, null, null, null, "absolute", null, "hidden", null), i.image = (this.isAlphaImage ? OpenLayers.Util.createAlphaImageDiv : OpenLayers.Util.createImage)(this.id + "_FrameDecorationImg_" + e, null, this.imageSize, this.imageSrc, "absolute", null, null, null), i.div.appendChild(i.image), this.groupDiv.appendChild(i.div)
                            }
                        },
                        updateBlocks: function () {
                            if (this.blocks || this.createBlocks(), this.size && this.relativePosition) {
                                for (var e = this.positionBlocks[this.relativePosition], t = 0; t < e.blocks.length; t++) {
                                    var i = e.blocks[t],
                                        s = this.blocks[t],
                                        r = i.anchor.left,
                                        n = i.anchor.bottom,
                                        a = i.anchor.right,
                                        o = i.anchor.top,
                                        l = isNaN(i.size.w) ? this.size.w - (a + r) : i.size.w,
                                        h = isNaN(i.size.h) ? this.size.h - (n + o) : i.size.h;
                                    s.div.style.width = (0 > l ? 0 : l) + "px", s.div.style.height = (0 > h ? 0 : h) + "px", s.div.style.left = null != r ? r + "px" : "", s.div.style.bottom = null != n ? n + "px" : "", s.div.style.right = null != a ? a + "px" : "", s.div.style.top = null != o ? o + "px" : "", s.image.style.left = i.position.x + "px", s.image.style.top = i.position.y + "px"
                                }
                                this.contentDiv.style.left = this.padding.left + "px", this.contentDiv.style.top = this.padding.top + "px"
                            }
                        },
                        CLASS_NAME: "OpenLayers.Popup.Framed"
                    }), OpenLayers.Popup.FramedCloud = OpenLayers.Class(OpenLayers.Popup.Framed, {
                        contentDisplayClass: "olFramedCloudPopupContent",
                        autoSize: !0,
                        panMapIfOutOfView: !0,
                        imageSize: new OpenLayers.Size(1276, 736),
                        isAlphaImage: !1,
                        fixedRelativePosition: !1,
                        positionBlocks: {
                            tl: {
                                offset: new OpenLayers.Pixel(44, 0),
                                padding: new OpenLayers.Bounds(8, 40, 8, 9),
                                blocks: [{
                                    size: new OpenLayers.Size("auto", "auto"),
                                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),
                                    position: new OpenLayers.Pixel(0, 0)
                                }, {
                                    size: new OpenLayers.Size(22, "auto"),
                                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),
                                    position: new OpenLayers.Pixel(-1238, 0)
                                }, {
                                    size: new OpenLayers.Size("auto", 19),
                                    anchor: new OpenLayers.Bounds(0, 32, 22, null),
                                    position: new OpenLayers.Pixel(0, -631)
                                }, {
                                    size: new OpenLayers.Size(22, 18),
                                    anchor: new OpenLayers.Bounds(null, 32, 0, null),
                                    position: new OpenLayers.Pixel(-1238, -632)
                                }, {
                                    size: new OpenLayers.Size(81, 35),
                                    anchor: new OpenLayers.Bounds(null, 0, 0, null),
                                    position: new OpenLayers.Pixel(0, -688)
                                }]
                            },
                            tr: {
                                offset: new OpenLayers.Pixel(-45, 0),
                                padding: new OpenLayers.Bounds(8, 40, 8, 9),
                                blocks: [{
                                    size: new OpenLayers.Size("auto", "auto"),
                                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),
                                    position: new OpenLayers.Pixel(0, 0)
                                }, {
                                    size: new OpenLayers.Size(22, "auto"),
                                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),
                                    position: new OpenLayers.Pixel(-1238, 0)
                                }, {
                                    size: new OpenLayers.Size("auto", 19),
                                    anchor: new OpenLayers.Bounds(0, 32, 22, null),
                                    position: new OpenLayers.Pixel(0, -631)
                                }, {
                                    size: new OpenLayers.Size(22, 19),
                                    anchor: new OpenLayers.Bounds(null, 32, 0, null),
                                    position: new OpenLayers.Pixel(-1238, -631)
                                }, {
                                    size: new OpenLayers.Size(81, 35),
                                    anchor: new OpenLayers.Bounds(0, 0, null, null),
                                    position: new OpenLayers.Pixel(-215, -687)
                                }]
                            },
                            bl: {
                                offset: new OpenLayers.Pixel(45, 0),
                                padding: new OpenLayers.Bounds(8, 9, 8, 40),
                                blocks: [{
                                    size: new OpenLayers.Size("auto", "auto"),
                                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),
                                    position: new OpenLayers.Pixel(0, 0)
                                }, {
                                    size: new OpenLayers.Size(22, "auto"),
                                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),
                                    position: new OpenLayers.Pixel(-1238, 0)
                                }, {
                                    size: new OpenLayers.Size("auto", 21),
                                    anchor: new OpenLayers.Bounds(0, 0, 22, null),
                                    position: new OpenLayers.Pixel(0, -629)
                                }, {
                                    size: new OpenLayers.Size(22, 21),
                                    anchor: new OpenLayers.Bounds(null, 0, 0, null),
                                    position: new OpenLayers.Pixel(-1238, -629)
                                }, {
                                    size: new OpenLayers.Size(81, 33),
                                    anchor: new OpenLayers.Bounds(null, null, 0, 0),
                                    position: new OpenLayers.Pixel(-101, -674)
                                }]
                            },
                            br: {
                                offset: new OpenLayers.Pixel(-44, 0),
                                padding: new OpenLayers.Bounds(8, 9, 8, 40),
                                blocks: [{
                                    size: new OpenLayers.Size("auto", "auto"),
                                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),
                                    position: new OpenLayers.Pixel(0, 0)
                                }, {
                                    size: new OpenLayers.Size(22, "auto"),
                                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),
                                    position: new OpenLayers.Pixel(-1238, 0)
                                }, {
                                    size: new OpenLayers.Size("auto", 21),
                                    anchor: new OpenLayers.Bounds(0, 0, 22, null),
                                    position: new OpenLayers.Pixel(0, -629)
                                }, {
                                    size: new OpenLayers.Size(22, 21),
                                    anchor: new OpenLayers.Bounds(null, 0, 0, null),
                                    position: new OpenLayers.Pixel(-1238, -629)
                                }, {
                                    size: new OpenLayers.Size(81, 33),
                                    anchor: new OpenLayers.Bounds(0, null, null, 0),
                                    position: new OpenLayers.Pixel(-311, -674)
                                }]
                            }
                        },
                        minSize: new OpenLayers.Size(105, 10),
                        maxSize: new OpenLayers.Size(1200, 660),
                        initialize: function (e, t, i, s, r, n, a) {
                            this.imageSrc = OpenLayers.Util.getImageLocation("cloud-popup-relative.png"), OpenLayers.Popup.Framed.prototype.initialize.apply(this, arguments), this.contentDiv.className = this.contentDisplayClass
                        },
                        CLASS_NAME: "OpenLayers.Popup.FramedCloud"
                    }), OpenLayers.Tile.Image.IFrame = {
                        useIFrame: null,
                        blankImageUrl: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",
                        draw: function () {
                            if (OpenLayers.Tile.Image.prototype.shouldDraw.call(this)) {
                                var e = this.layer.getURL(this.bounds),
                                    t = this.useIFrame;
                                this.useIFrame = null !== this.maxGetUrlLength && !this.layer.async && e.length > this.maxGetUrlLength, e = t && !this.useIFrame, t = !t && this.useIFrame, (e || t) && (this.imgDiv && this.imgDiv.parentNode === this.frame && this.frame.removeChild(this.imgDiv), this.imgDiv = null, e && this.frame.removeChild(this.frame.firstChild))
                            }
                            return OpenLayers.Tile.Image.prototype.draw.apply(this, arguments)
                        },
                        getImage: function () {
                            if (!0 === this.useIFrame) {
                                if (!this.frame.childNodes.length) {
                                    var e = document.createElement("div"),
                                        t = e.style;
                                    t.position = "absolute", t.width = "100%", t.height = "100%", t.zIndex = 1, t.backgroundImage = "url(" + this.blankImageUrl + ")", this.frame.appendChild(e)
                                }
                                return e = this.id + "_iFrame", 9 > parseFloat(navigator.appVersion.split("MSIE")[1]) ? ((t = document.createElement('<iframe name="' + e + '">')).style.backgroundColor = "#FFFFFF", t.style.filter = "chroma(color=#FFFFFF)") : ((t = document.createElement("iframe")).style.backgroundColor = "transparent", t.name = e), t.scrolling = "no", t.marginWidth = "0px", t.marginHeight = "0px", t.frameBorder = "0", t.style.position = "absolute", t.style.width = "100%", t.style.height = "100%", 1 > this.layer.opacity && OpenLayers.Util.modifyDOMElement(t, null, null, null, null, null, null, this.layer.opacity), this.frame.appendChild(t), this.imgDiv = t
                            }
                            return OpenLayers.Tile.Image.prototype.getImage.apply(this, arguments)
                        },
                        createRequestForm: function () {
                            var e = document.createElement("form");
                            e.method = "POST";
                            var t = ((t = this.layer.params._OLSALT) ? t + "_" : "") + this.bounds.toBBOX();
                            e.action = OpenLayers.Util.urlAppend(this.layer.url, t), e.target = this.id + "_iFrame", this.layer.getImageSize();
                            var i, s;
                            t = OpenLayers.Util.getParameters(this.url);
                            for (s in t)(i = document.createElement("input")).type = "hidden", i.name = s, i.value = t[s], e.appendChild(i);
                            return e
                        },
                        setImgSrc: function (e) {
                            if (!0 === this.useIFrame)
                                if (e) {
                                    var t = this.createRequestForm();
                                    this.frame.appendChild(t), t.submit(), this.frame.removeChild(t)
                                } else this.imgDiv.parentNode === this.frame && (this.frame.removeChild(this.imgDiv), this.imgDiv = null);
                            else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this, arguments)
                        },
                        onImageLoad: function () {
                            OpenLayers.Tile.Image.prototype.onImageLoad.apply(this, arguments), !0 === this.useIFrame && (this.imgDiv.style.opacity = 1, this.frame.style.opacity = this.layer.opacity)
                        },
                        createBackBuffer: function () {
                            var e;
                            return !1 === this.useIFrame && (e = OpenLayers.Tile.Image.prototype.createBackBuffer.call(this)), e
                        }
                    }, OpenLayers.Format.SOSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.0.0",
                        CLASS_NAME: "OpenLayers.Format.SOSCapabilities"
                    }), OpenLayers.Format.SOSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.SOSCapabilities, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows/1.1",
                            sos: "http://www.opengis.net/sos/1.0",
                            gml: "http://www.opengis.net/gml",
                            xlink: "http://www.w3.org/1999/xlink"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e]), this.options = e
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        readers: {
                            gml: OpenLayers.Util.applyDefaults({
                                name: function (e, t) {
                                    t.name = this.getChildValue(e)
                                },
                                TimePeriod: function (e, t) {
                                    t.timePeriod = {}, this.readChildNodes(e, t.timePeriod)
                                },
                                beginPosition: function (e, t) {
                                    t.beginPosition = this.getChildValue(e)
                                },
                                endPosition: function (e, t) {
                                    t.endPosition = this.getChildValue(e)
                                }
                            }, OpenLayers.Format.GML.v3.prototype.readers.gml),
                            sos: {
                                Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Contents: function (e, t) {
                                    t.contents = {}, this.readChildNodes(e, t.contents)
                                },
                                ObservationOfferingList: function (e, t) {
                                    t.offeringList = {}, this.readChildNodes(e, t.offeringList)
                                },
                                ObservationOffering: function (e, t) {
                                    var i = this.getAttributeNS(e, this.namespaces.gml, "id");
                                    t[i] = {
                                        procedures: [],
                                        observedProperties: [],
                                        featureOfInterestIds: [],
                                        responseFormats: [],
                                        resultModels: [],
                                        responseModes: []
                                    }, this.readChildNodes(e, t[i])
                                },
                                time: function (e, t) {
                                    t.time = {}, this.readChildNodes(e, t.time)
                                },
                                procedure: function (e, t) {
                                    t.procedures.push(this.getAttributeNS(e, this.namespaces.xlink, "href"))
                                },
                                observedProperty: function (e, t) {
                                    t.observedProperties.push(this.getAttributeNS(e, this.namespaces.xlink, "href"))
                                },
                                featureOfInterest: function (e, t) {
                                    t.featureOfInterestIds.push(this.getAttributeNS(e, this.namespaces.xlink, "href"))
                                },
                                responseFormat: function (e, t) {
                                    t.responseFormats.push(this.getChildValue(e))
                                },
                                resultModel: function (e, t) {
                                    t.resultModels.push(this.getChildValue(e))
                                },
                                responseMode: function (e, t) {
                                    t.responseModes.push(this.getChildValue(e))
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.SOSCapabilities.v1_0_0"
                    }), OpenLayers.Handler.Pinch = OpenLayers.Class(OpenLayers.Handler, {
                        started: !1,
                        stopDown: !1,
                        pinching: !1,
                        last: null,
                        start: null,
                        touchstart: function (e) {
                            var t = !0;
                            if (this.pinching = !1, OpenLayers.Event.isMultiTouch(e)) this.started = !0, this.last = this.start = {
                                distance: this.getDistance(e.touches),
                                delta: 0,
                                scale: 1
                            }, this.callback("start", [e, this.start]), t = !this.stopDown;
                            else {
                                if (this.started) return !1;
                                this.started = !1, this.last = this.start = null
                            }
                            return OpenLayers.Event.preventDefault(e), t
                        },
                        touchmove: function (e) {
                            if (this.started && OpenLayers.Event.isMultiTouch(e)) {
                                this.pinching = !0;
                                var t = this.getPinchData(e);
                                this.callback("move", [e, t]), this.last = t, OpenLayers.Event.stop(e)
                            } else if (this.started) return !1;
                            return !0
                        },
                        touchend: function (e) {
                            return !(this.started && !OpenLayers.Event.isMultiTouch(e)) || (this.pinching = this.started = !1, this.callback("done", [e, this.start, this.last]), this.last = this.start = null, !1)
                        },
                        activate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.pinching = !1, e = !0), e
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.pinching = this.started = !1, this.last = this.start = null, e = !0), e
                        },
                        getDistance: function (e) {
                            var t = e[0];
                            return e = e[1], Math.sqrt(Math.pow(t.olClientX - e.olClientX, 2) + Math.pow(t.olClientY - e.olClientY, 2))
                        },
                        getPinchData: function (e) {
                            return {
                                distance: e = this.getDistance(e.touches),
                                delta: this.last.distance - e,
                                scale: e / this.start.distance
                            }
                        },
                        CLASS_NAME: "OpenLayers.Handler.Pinch"
                    }), OpenLayers.Control.NavToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {
                        initialize: function (e) {
                            OpenLayers.Control.Panel.prototype.initialize.apply(this, [e]), this.addControls([new OpenLayers.Control.Navigation, new OpenLayers.Control.ZoomBox])
                        },
                        draw: function () {
                            var e = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);
                            return null === this.defaultControl && (this.defaultControl = this.controls[0]), e
                        },
                        CLASS_NAME: "OpenLayers.Control.NavToolbar"
                    }), OpenLayers.Strategy.Refresh = OpenLayers.Class(OpenLayers.Strategy, {
                        force: !1,
                        interval: 0,
                        timer: null,
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.call(this);
                            return e && (!0 === this.layer.visibility && this.start(), this.layer.events.on({
                                visibilitychanged: this.reset,
                                scope: this
                            })), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Strategy.prototype.deactivate.call(this);
                            return e && (this.stop(), this.layer.events.un({
                                visibilitychanged: this.reset,
                                scope: this
                            })), e
                        },
                        reset: function () {
                            !0 === this.layer.visibility ? this.start() : this.stop()
                        },
                        start: function () {
                            this.interval && "number" == typeof this.interval && 0 < this.interval && (this.timer = window.setInterval(OpenLayers.Function.bind(this.refresh, this), this.interval))
                        },
                        refresh: function () {
                            this.layer && this.layer.refresh && "function" == typeof this.layer.refresh && this.layer.refresh({
                                force: this.force
                            })
                        },
                        stop: function () {
                            null !== this.timer && (window.clearInterval(this.timer), this.timer = null)
                        },
                        CLASS_NAME: "OpenLayers.Strategy.Refresh"
                    }), OpenLayers.Layer.ArcGIS93Rest = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        DEFAULT_PARAMS: {
                            format: "png"
                        },
                        isBaseLayer: !0,
                        initialize: function (e, t, i, s) {
                            var r = [];
                            i = OpenLayers.Util.upperCaseObject(i), r.push(e, t, i, s), OpenLayers.Layer.Grid.prototype.initialize.apply(this, r), OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != s && s.isBaseLayer || (this.isBaseLayer = !1), "jpg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "gif" : "png"))
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.ArcGIS93Rest(this.name, this.url, this.params, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = (t = this.projection.getCode().split(":"))[t.length - 1],
                                i = this.getImageSize();
                            if (e = {
                                    BBOX: e.toBBOX(),
                                    SIZE: i.w + "," + i.h,
                                    F: "image",
                                    BBOXSR: t,
                                    IMAGESR: t
                                }, this.layerDefs) {
                                var s;
                                t = [];
                                for (s in this.layerDefs) this.layerDefs.hasOwnProperty(s) && this.layerDefs[s] && (t.push(s), t.push(":"), t.push(this.layerDefs[s]), t.push(";"));
                                0 < t.length && (e.LAYERDEFS = t.join(""))
                            }
                            return this.getFullRequestString(e)
                        },
                        setLayerFilter: function (e, t) {
                            this.layerDefs || (this.layerDefs = {}), t ? this.layerDefs[e] = t : delete this.layerDefs[e]
                        },
                        clearLayerFilter: function (e) {
                            e ? delete this.layerDefs[e] : delete this.layerDefs
                        },
                        mergeNewParams: function (e) {
                            return e = [OpenLayers.Util.upperCaseObject(e)], OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, e)
                        },
                        CLASS_NAME: "OpenLayers.Layer.ArcGIS93Rest"
                    }), OpenLayers.Handler.Hover = OpenLayers.Class(OpenLayers.Handler, {
                        delay: 500,
                        pixelTolerance: null,
                        stopMove: !1,
                        px: null,
                        timerId: null,
                        mousemove: function (e) {
                            return this.passesTolerance(e.xy) && (this.clearTimer(), this.callback("move", [e]), this.px = e.xy, e = OpenLayers.Util.extend({}, e), this.timerId = window.setTimeout(OpenLayers.Function.bind(this.delayedCall, this, e), this.delay)), !this.stopMove
                        },
                        mouseout: function (e) {
                            return OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv) && (this.clearTimer(), this.callback("move", [e])), !0
                        },
                        passesTolerance: function (e) {
                            var t = !0;
                            return this.pixelTolerance && this.px && Math.sqrt(Math.pow(this.px.x - e.x, 2) + Math.pow(this.px.y - e.y, 2)) < this.pixelTolerance && (t = !1), t
                        },
                        clearTimer: function () {
                            null != this.timerId && (window.clearTimeout(this.timerId), this.timerId = null)
                        },
                        delayedCall: function (e) {
                            this.callback("pause", [e])
                        },
                        deactivate: function () {
                            var e = !1;
                            return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.clearTimer(), e = !0), e
                        },
                        CLASS_NAME: "OpenLayers.Handler.Hover"
                    }), OpenLayers.Control.GetFeature = OpenLayers.Class(OpenLayers.Control, {
                        protocol: null,
                        multipleKey: null,
                        toggleKey: null,
                        modifiers: null,
                        multiple: !1,
                        click: !0,
                        single: !0,
                        clickout: !0,
                        toggle: !1,
                        clickTolerance: 5,
                        hover: !1,
                        box: !1,
                        maxFeatures: 10,
                        features: null,
                        hoverFeature: null,
                        handlers: null,
                        hoverResponse: null,
                        filterType: OpenLayers.Filter.Spatial.BBOX,
                        initialize: function (e) {
                            e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [e]), this.features = {}, this.handlers = {}, this.click && (this.handlers.click = new OpenLayers.Handler.Click(this, {
                                click: this.selectClick
                            }, this.handlerOptions.click || {})), this.box && (this.handlers.box = new OpenLayers.Handler.Box(this, {
                                done: this.selectBox
                            }, OpenLayers.Util.extend(this.handlerOptions.box, {
                                boxDivClassName: "olHandlerBoxSelectFeature"
                            }))), this.hover && (this.handlers.hover = new OpenLayers.Handler.Hover(this, {
                                move: this.cancelHover,
                                pause: this.selectHover
                            }, OpenLayers.Util.extend(this.handlerOptions.hover, {
                                delay: 250,
                                pixelTolerance: 2
                            })))
                        },
                        activate: function () {
                            if (!this.active)
                                for (var e in this.handlers) this.handlers[e].activate();
                            return OpenLayers.Control.prototype.activate.apply(this, arguments)
                        },
                        deactivate: function () {
                            if (this.active)
                                for (var e in this.handlers) this.handlers[e].deactivate();
                            return OpenLayers.Control.prototype.deactivate.apply(this, arguments)
                        },
                        selectClick: function (e) {
                            var t = this.pixelToBounds(e.xy);
                            this.setModifiers(e), this.request(t, {
                                single: this.single
                            })
                        },
                        selectBox: function (e) {
                            var t;
                            if (e instanceof OpenLayers.Bounds) t = this.map.getLonLatFromPixel({
                                x: e.left,
                                y: e.bottom
                            }), e = this.map.getLonLatFromPixel({
                                x: e.right,
                                y: e.top
                            }), t = new OpenLayers.Bounds(t.lon, t.lat, e.lon, e.lat);
                            else {
                                if (this.click) return;
                                t = this.pixelToBounds(e)
                            }
                            this.setModifiers(this.handlers.box.dragHandler.evt), this.request(t)
                        },
                        selectHover: function (e) {
                            e = this.pixelToBounds(e.xy), this.request(e, {
                                single: !0,
                                hover: !0
                            })
                        },
                        cancelHover: function () {
                            this.hoverResponse && (this.protocol.abort(this.hoverResponse), this.hoverResponse = null, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"))
                        },
                        request: function (e, t) {
                            t = t || {};
                            var i = new OpenLayers.Filter.Spatial({
                                type: this.filterType,
                                value: e
                            });
                            OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait"), i = this.protocol.read({
                                maxFeatures: 1 == t.single ? this.maxFeatures : void 0,
                                filter: i,
                                callback: function (i) {
                                    i.success() && (i.features.length ? 1 == t.single ? this.selectBestFeature(i.features, e.getCenterLonLat(), t) : this.select(i.features) : t.hover ? this.hoverSelect() : (this.events.triggerEvent("clickout"), this.clickout && this.unselectAll())), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait")
                                },
                                scope: this
                            }), 1 == t.hover && (this.hoverResponse = i)
                        },
                        selectBestFeature: function (e, t, i) {
                            if (i = i || {}, e.length) {
                                t = new OpenLayers.Geometry.Point(t.lon, t.lat);
                                for (var s, r, n, a = Number.MAX_VALUE, o = 0; o < e.length && !((s = e[o]).geometry && (n = t.distanceTo(s.geometry, {
                                        edge: !1
                                    }), n < a && (a = n, r = s, 0 == a))); ++o);
                                1 == i.hover ? this.hoverSelect(r) : this.select(r || e)
                            }
                        },
                        setModifiers: function (e) {
                            this.modifiers = {
                                multiple: this.multiple || this.multipleKey && e[this.multipleKey],
                                toggle: this.toggle || this.toggleKey && e[this.toggleKey]
                            }
                        },
                        select: function (e) {
                            this.modifiers.multiple || this.modifiers.toggle || this.unselectAll(), OpenLayers.Util.isArray(e) || (e = [e]);
                            var t = this.events.triggerEvent("beforefeaturesselected", {
                                features: e
                            });
                            if (!1 !== t) {
                                for (var i, s = [], r = 0, n = e.length; r < n; ++r) i = e[r], this.features[i.fid || i.id] ? this.modifiers.toggle && this.unselect(this.features[i.fid || i.id]) : !1 !== (t = this.events.triggerEvent("beforefeatureselected", {
                                    feature: i
                                })) && (this.features[i.fid || i.id] = i, s.push(i), this.events.triggerEvent("featureselected", {
                                    feature: i
                                }));
                                this.events.triggerEvent("featuresselected", {
                                    features: s
                                })
                            }
                        },
                        hoverSelect: function (e) {
                            var t = e ? e.fid || e.id : null,
                                i = this.hoverFeature ? this.hoverFeature.fid || this.hoverFeature.id : null;
                            i && i != t && (this.events.triggerEvent("outfeature", {
                                feature: this.hoverFeature
                            }), this.hoverFeature = null), t && t != i && (this.events.triggerEvent("hoverfeature", {
                                feature: e
                            }), this.hoverFeature = e)
                        },
                        unselect: function (e) {
                            delete this.features[e.fid || e.id], this.events.triggerEvent("featureunselected", {
                                feature: e
                            })
                        },
                        unselectAll: function () {
                            for (var e in this.features) this.unselect(this.features[e])
                        },
                        setMap: function (e) {
                            for (var t in this.handlers) this.handlers[t].setMap(e);
                            OpenLayers.Control.prototype.setMap.apply(this, arguments)
                        },
                        pixelToBounds: function (e) {
                            var t = e.add(-this.clickTolerance / 2, this.clickTolerance / 2);
                            return e = e.add(this.clickTolerance / 2, -this.clickTolerance / 2), t = this.map.getLonLatFromPixel(t), e = this.map.getLonLatFromPixel(e), new OpenLayers.Bounds(t.lon, t.lat, e.lon, e.lat)
                        },
                        CLASS_NAME: "OpenLayers.Control.GetFeature"
                    }), OpenLayers.Format.QueryStringFilter = (b = {}, b[OpenLayers.Filter.Comparison.EQUAL_TO] = "eq", b[OpenLayers.Filter.Comparison.NOT_EQUAL_TO] = "ne", b[OpenLayers.Filter.Comparison.LESS_THAN] = "lt", b[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO] = "lte", b[OpenLayers.Filter.Comparison.GREATER_THAN] = "gt", b[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO] = "gte", b[OpenLayers.Filter.Comparison.LIKE] = "ilike", OpenLayers.Class(OpenLayers.Format, {
                        wildcarded: !1,
                        srsInBBOX: !1,
                        write: function (e, t) {
                            var i;
                            switch (t = t || {}, i = (i = e.CLASS_NAME).substring(i.lastIndexOf(".") + 1)) {
                                case "Spatial":
                                    switch (e.type) {
                                        case OpenLayers.Filter.Spatial.BBOX:
                                            t.bbox = e.value.toArray(), this.srsInBBOX && e.projection && t.bbox.push(e.projection.getCode());
                                            break;
                                        case OpenLayers.Filter.Spatial.DWITHIN:
                                            t.tolerance = e.distance;
                                        case OpenLayers.Filter.Spatial.WITHIN:
                                            t.lon = e.value.x, t.lat = e.value.y;
                                            break;
                                        default:
                                            OpenLayers.Console.warn("Unknown spatial filter type " + e.type)
                                    }
                                    break;
                                case "Comparison":
                                    if (void 0 !== (i = b[e.type])) {
                                        var s = e.value;
                                        e.type == OpenLayers.Filter.Comparison.LIKE && (s = function (e) {
                                            return (e = (e = (e = (e = (e = (e = e.replace(/%/g, "\\%")).replace(/\\\\\.(\*)?/g, (function (e, t) {
                                                return t ? e : "\\\\_"
                                            }))).replace(/\\\\\.\*/g, "\\\\%")).replace(/(\\)?\.(\*)?/g, (function (e, t, i) {
                                                return t || i ? e : "_"
                                            }))).replace(/(\\)?\.\*/g, (function (e, t) {
                                                return t ? e : "%"
                                            }))).replace(/\\\./g, ".")).replace(/(\\)?\\\*/g, (function (e, t) {
                                                return t ? e : "*"
                                            }))
                                        }(s), this.wildcarded && (s = "%" + s + "%")), t[e.property + "__" + i] = s, t.queryable = t.queryable || [], t.queryable.push(e.property)
                                    } else OpenLayers.Console.warn("Unknown comparison filter type " + e.type);
                                    break;
                                case "Logical":
                                    if (e.type === OpenLayers.Filter.Logical.AND)
                                        for (i = 0, s = e.filters.length; i < s; i++) t = this.write(e.filters[i], t);
                                    else OpenLayers.Console.warn("Unsupported logical filter type " + e.type);
                                    break;
                                default:
                                    OpenLayers.Console.warn("Unknown filter type " + i)
                            }
                            return t
                        },
                        CLASS_NAME: "OpenLayers.Format.QueryStringFilter"
                    })), OpenLayers.Control.MousePosition = OpenLayers.Class(OpenLayers.Control, {
                        autoActivate: !0,
                        element: null,
                        prefix: "",
                        separator: ", ",
                        suffix: "",
                        numDigits: 5,
                        granularity: 10,
                        emptyString: null,
                        lastXy: null,
                        displayProjection: null,
                        destroy: function () {
                            this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        activate: function () {
                            return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.map.events.register("mousemove", this, this.redraw), this.map.events.register("mouseout", this, this.reset), this.redraw(), !0)
                        },
                        deactivate: function () {
                            return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.map.events.unregister("mousemove", this, this.redraw), this.map.events.unregister("mouseout", this, this.reset), this.element.innerHTML = "", !0)
                        },
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.div.left = "", this.div.top = "", this.element = this.div), this.div
                        },
                        redraw: function (e) {
                            var t;
                            null == e ? this.reset() : null == this.lastXy || Math.abs(e.xy.x - this.lastXy.x) > this.granularity || Math.abs(e.xy.y - this.lastXy.y) > this.granularity ? this.lastXy = e.xy : (t = this.map.getLonLatFromPixel(e.xy)) && (this.displayProjection && t.transform(this.map.getProjectionObject(), this.displayProjection), this.lastXy = e.xy, (e = this.formatOutput(t)) != this.element.innerHTML && (this.element.innerHTML = e))
                        },
                        reset: function (e) {
                            null != this.emptyString && (this.element.innerHTML = this.emptyString)
                        },
                        formatOutput: function (e) {
                            var t = parseInt(this.numDigits);
                            return this.prefix + e.lon.toFixed(t) + this.separator + e.lat.toFixed(t) + this.suffix
                        },
                        CLASS_NAME: "OpenLayers.Control.MousePosition"
                    }), OpenLayers.Control.Geolocate = OpenLayers.Class(OpenLayers.Control, {
                        geolocation: null,
                        available: "geolocation" in navigator,
                        bind: !0,
                        watch: !1,
                        geolocationOptions: null,
                        destroy: function () {
                            this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        activate: function () {
                            return this.available && !this.geolocation && (this.geolocation = navigator.geolocation), this.geolocation ? !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.watch ? this.watchId = this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate, this), OpenLayers.Function.bind(this.failure, this), this.geolocationOptions) : this.getCurrentLocation(), !0) : (this.events.triggerEvent("locationuncapable"), !1)
                        },
                        deactivate: function () {
                            return this.active && null !== this.watchId && this.geolocation.clearWatch(this.watchId), OpenLayers.Control.prototype.deactivate.apply(this, arguments)
                        },
                        geolocate: function (e) {
                            var t = new OpenLayers.LonLat(e.coords.longitude, e.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"), this.map.getProjectionObject());
                            this.bind && this.map.setCenter(t), this.events.triggerEvent("locationupdated", {
                                position: e,
                                point: new OpenLayers.Geometry.Point(t.lon, t.lat)
                            })
                        },
                        getCurrentLocation: function () {
                            return !(!this.active || this.watch) && (this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate, this), OpenLayers.Function.bind(this.failure, this), this.geolocationOptions), !0)
                        },
                        failure: function (e) {
                            this.events.triggerEvent("locationfailed", {
                                error: e
                            })
                        },
                        CLASS_NAME: "OpenLayers.Control.Geolocate"
                    }), OpenLayers.Tile.UTFGrid = OpenLayers.Class(OpenLayers.Tile, {
                        url: null,
                        utfgridResolution: 2,
                        json: null,
                        format: null,
                        destroy: function () {
                            this.clear(), OpenLayers.Tile.prototype.destroy.apply(this, arguments)
                        },
                        draw: function () {
                            var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
                            if (e)
                                if (this.isLoading ? (this.abortLoading(), this.events.triggerEvent("reload")) : (this.isLoading = !0, this.events.triggerEvent("loadstart")), this.url = this.layer.getURL(this.bounds), this.layer.useJSONP) {
                                    var t = new OpenLayers.Protocol.Script({
                                        url: this.url,
                                        callback: function (e) {
                                            this.isLoading = !1, this.events.triggerEvent("loadend"), this.json = e.data
                                        },
                                        scope: this
                                    });
                                    t.read(), this.request = t
                                } else this.request = OpenLayers.Request.GET({
                                    url: this.url,
                                    callback: function (e) {
                                        this.isLoading = !1, this.events.triggerEvent("loadend"), 200 === e.status && this.parseData(e.responseText)
                                    },
                                    scope: this
                                });
                            else this.unload();
                            return e
                        },
                        abortLoading: function () {
                            this.request && (this.request.abort(), delete this.request), this.isLoading = !1
                        },
                        getFeatureInfo: function (e, t) {
                            var i = null;
                            if (this.json) {
                                var s = this.getFeatureId(e, t);
                                null !== s && (i = {
                                    id: s,
                                    data: this.json.data[s]
                                })
                            }
                            return i
                        },
                        getFeatureId: function (e, t) {
                            var i = null;
                            if (this.json) {
                                var s = this.utfgridResolution,
                                    r = (s = this.json.grid[Math.floor(t / s)].charCodeAt(Math.floor(e / s)), s = this.indexFromCharCode(s), this.json.keys);
                                !isNaN(s) && s in r && (i = r[s])
                            }
                            return i
                        },
                        indexFromCharCode: function (e) {
                            return 93 <= e && e--, 35 <= e && e--, e - 32
                        },
                        parseData: function (e) {
                            this.format || (this.format = new OpenLayers.Format.JSON), this.json = this.format.read(e)
                        },
                        clear: function () {
                            this.json = null
                        },
                        CLASS_NAME: "OpenLayers.Tile.UTFGrid"
                    }), OpenLayers.Protocol.HTTP = OpenLayers.Class(OpenLayers.Protocol, {
                        url: null,
                        headers: null,
                        params: null,
                        callback: null,
                        scope: null,
                        readWithPOST: !1,
                        updateWithPOST: !1,
                        deleteWithPOST: !1,
                        wildcarded: !1,
                        srsInBBOX: !1,
                        initialize: function (e) {
                            if (e = e || {}, this.params = {}, this.headers = {}, OpenLayers.Protocol.prototype.initialize.apply(this, arguments), !this.filterToParams && OpenLayers.Format.QueryStringFilter) {
                                var t = new OpenLayers.Format.QueryStringFilter({
                                    wildcarded: this.wildcarded,
                                    srsInBBOX: this.srsInBBOX
                                });
                                this.filterToParams = function (e, i) {
                                    return t.write(e, i)
                                }
                            }
                        },
                        destroy: function () {
                            this.headers = this.params = null, OpenLayers.Protocol.prototype.destroy.apply(this)
                        },
                        read: function (e) {
                            OpenLayers.Protocol.prototype.read.apply(this, arguments), (e = e || {}).params = OpenLayers.Util.applyDefaults(e.params, this.options.params), (e = OpenLayers.Util.applyDefaults(e, this.options)).filter && this.filterToParams && (e.params = this.filterToParams(e.filter, e.params));
                            var t = void 0 !== e.readWithPOST ? e.readWithPOST : this.readWithPOST,
                                i = new OpenLayers.Protocol.Response({
                                    requestType: "read"
                                });
                            return t ? ((t = e.headers || {})["Content-Type"] = "application/x-www-form-urlencoded", i.priv = OpenLayers.Request.POST({
                                url: e.url,
                                callback: this.createCallback(this.handleRead, i, e),
                                data: OpenLayers.Util.getParameterString(e.params),
                                headers: t
                            })) : i.priv = OpenLayers.Request.GET({
                                url: e.url,
                                callback: this.createCallback(this.handleRead, i, e),
                                params: e.params,
                                headers: e.headers
                            }), i
                        },
                        handleRead: function (e, t) {
                            this.handleResponse(e, t)
                        },
                        create: function (e, t) {
                            t = OpenLayers.Util.applyDefaults(t, this.options);
                            var i = new OpenLayers.Protocol.Response({
                                reqFeatures: e,
                                requestType: "create"
                            });
                            return i.priv = OpenLayers.Request.POST({
                                url: t.url,
                                callback: this.createCallback(this.handleCreate, i, t),
                                headers: t.headers,
                                data: this.format.write(e)
                            }), i
                        },
                        handleCreate: function (e, t) {
                            this.handleResponse(e, t)
                        },
                        update: function (e, t) {
                            var i = (t = t || {}).url || e.url || this.options.url + "/" + e.fid;
                            t = OpenLayers.Util.applyDefaults(t, this.options);
                            var s = new OpenLayers.Protocol.Response({
                                reqFeatures: e,
                                requestType: "update"
                            });
                            return s.priv = OpenLayers.Request[this.updateWithPOST ? "POST" : "PUT"]({
                                url: i,
                                callback: this.createCallback(this.handleUpdate, s, t),
                                headers: t.headers,
                                data: this.format.write(e)
                            }), s
                        },
                        handleUpdate: function (e, t) {
                            this.handleResponse(e, t)
                        },
                        delete: function (e, t) {
                            var i = (t = t || {}).url || e.url || this.options.url + "/" + e.fid;
                            t = OpenLayers.Util.applyDefaults(t, this.options);
                            var s = new OpenLayers.Protocol.Response({
                                    reqFeatures: e,
                                    requestType: "delete"
                                }),
                                r = this.deleteWithPOST ? "POST" : "DELETE";
                            i = {
                                url: i,
                                callback: this.createCallback(this.handleDelete, s, t),
                                headers: t.headers
                            };
                            return this.deleteWithPOST && (i.data = this.format.write(e)), s.priv = OpenLayers.Request[r](i), s
                        },
                        handleDelete: function (e, t) {
                            this.handleResponse(e, t)
                        },
                        handleResponse: function (e, t) {
                            var i = e.priv;
                            t.callback && (200 <= i.status && 300 > i.status ? ("delete" != e.requestType && (e.features = this.parseFeatures(i)), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, t.callback.call(t.scope, e))
                        },
                        parseFeatures: function (e) {
                            var t = e.responseXML;
                            return t && t.documentElement || (t = e.responseText), !t || 0 >= t.length ? null : this.format.read(t)
                        },
                        commit: function (e, t) {
                            function i(e) {
                                this.callUserCallback(e, t), c = c && e.success(), ++r >= u && t.callback && (y.code = c ? OpenLayers.Protocol.Response.SUCCESS : OpenLayers.Protocol.Response.FAILURE, t.callback.apply(t.scope, [y]))
                            }
                            t = OpenLayers.Util.applyDefaults(t, this.options);
                            var s = [],
                                r = 0,
                                n = {};
                            n[OpenLayers.State.INSERT] = [], n[OpenLayers.State.UPDATE] = [], n[OpenLayers.State.DELETE] = [];
                            for (var a, o, l = [], h = 0, p = e.length; h < p; ++h)(o = n[(a = e[h]).state]) && (o.push(a), l.push(a));
                            var u = (0 < n[OpenLayers.State.INSERT].length ? 1 : 0) + n[OpenLayers.State.UPDATE].length + n[OpenLayers.State.DELETE].length,
                                c = !0,
                                y = new OpenLayers.Protocol.Response({
                                    reqFeatures: l
                                });
                            for (0 < (a = n[OpenLayers.State.INSERT]).length && s.push(this.create(a, OpenLayers.Util.applyDefaults({
                                    callback: function (e) {
                                        for (var t = e.features ? e.features.length : 0, s = Array(t), r = 0; r < t; ++r) s[r] = e.features[r].fid;
                                        y.insertIds = s, i.apply(this, [e])
                                    },
                                    scope: this
                                }, t.create))), h = (a = n[OpenLayers.State.UPDATE]).length - 1; 0 <= h; --h) s.push(this.update(a[h], OpenLayers.Util.applyDefaults({
                                callback: i,
                                scope: this
                            }, t.update)));
                            for (h = (a = n[OpenLayers.State.DELETE]).length - 1; 0 <= h; --h) s.push(this.delete(a[h], OpenLayers.Util.applyDefaults({
                                callback: i,
                                scope: this
                            }, t.delete)));
                            return s
                        },
                        abort: function (e) {
                            e && e.priv.abort()
                        },
                        callUserCallback: function (e, t) {
                            var i = t[e.requestType];
                            i && i.callback && i.callback.call(i.scope, e)
                        },
                        CLASS_NAME: "OpenLayers.Protocol.HTTP"
                    }), OpenLayers.Strategy.Cluster = OpenLayers.Class(OpenLayers.Strategy, {
                        distance: 20,
                        threshold: null,
                        features: null,
                        clusters: null,
                        clustering: !1,
                        resolution: null,
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.call(this);
                            return e && this.layer.events.on({
                                beforefeaturesadded: this.cacheFeatures,
                                featuresremoved: this.clearCache,
                                moveend: this.cluster,
                                scope: this
                            }), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Strategy.prototype.deactivate.call(this);
                            return e && (this.clearCache(), this.layer.events.un({
                                beforefeaturesadded: this.cacheFeatures,
                                featuresremoved: this.clearCache,
                                moveend: this.cluster,
                                scope: this
                            })), e
                        },
                        cacheFeatures: function (e) {
                            var t = !0;
                            return this.clustering || (this.clearCache(), this.features = e.features, this.cluster(), t = !1), t
                        },
                        clearCache: function () {
                            this.clustering || (this.features = null)
                        },
                        cluster: function (e) {
                            if ((!e || e.zoomChanged) && this.features && ((e = this.layer.map.getResolution()) != this.resolution || !this.clustersExist())) {
                                this.resolution = e, e = [];
                                for (var t, i, s, r = 0; r < this.features.length; ++r)
                                    if ((t = this.features[r]).geometry) {
                                        i = !1;
                                        for (var n = e.length - 1; 0 <= n; --n)
                                            if (s = e[n], this.shouldCluster(s, t)) {
                                                this.addToCluster(s, t), i = !0;
                                                break
                                            } i || e.push(this.createCluster(this.features[r]))
                                    } if (this.clustering = !0, this.layer.removeAllFeatures(), this.clustering = !1, 0 < e.length) {
                                    if (1 < this.threshold)
                                        for (t = e.slice(), e = [], r = 0, s = t.length; r < s; ++r)(i = t[r]).attributes.count < this.threshold ? Array.prototype.push.apply(e, i.cluster) : e.push(i);
                                    this.clustering = !0, this.layer.addFeatures(e), this.clustering = !1
                                }
                                this.clusters = e
                            }
                        },
                        clustersExist: function () {
                            var e = !1;
                            if (this.clusters && 0 < this.clusters.length && this.clusters.length == this.layer.features.length) {
                                e = !0;
                                for (var t = 0; t < this.clusters.length; ++t)
                                    if (this.clusters[t] != this.layer.features[t]) {
                                        e = !1;
                                        break
                                    }
                            }
                            return e
                        },
                        shouldCluster: function (e, t) {
                            var i = e.geometry.getBounds().getCenterLonLat(),
                                s = t.geometry.getBounds().getCenterLonLat();
                            return Math.sqrt(Math.pow(i.lon - s.lon, 2) + Math.pow(i.lat - s.lat, 2)) / this.resolution <= this.distance
                        },
                        addToCluster: function (e, t) {
                            e.cluster.push(t), e.attributes.count += 1
                        },
                        createCluster: function (e) {
                            var t = e.geometry.getBounds().getCenterLonLat();
                            return (t = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon, t.lat), {
                                count: 1
                            })).cluster = [e], t
                        },
                        CLASS_NAME: "OpenLayers.Strategy.Cluster"
                    }), OpenLayers.Strategy.Filter = OpenLayers.Class(OpenLayers.Strategy, {
                        filter: null,
                        cache: null,
                        caching: !1,
                        activate: function () {
                            var e = OpenLayers.Strategy.prototype.activate.apply(this, arguments);
                            return e && (this.cache = [], this.layer.events.on({
                                beforefeaturesadded: this.handleAdd,
                                beforefeaturesremoved: this.handleRemove,
                                scope: this
                            })), e
                        },
                        deactivate: function () {
                            return this.cache = null, this.layer && this.layer.events && this.layer.events.un({
                                beforefeaturesadded: this.handleAdd,
                                beforefeaturesremoved: this.handleRemove,
                                scope: this
                            }), OpenLayers.Strategy.prototype.deactivate.apply(this, arguments)
                        },
                        handleAdd: function (e) {
                            if (!this.caching && this.filter) {
                                var t = e.features;
                                e.features = [];
                                for (var i, s = 0, r = t.length; s < r; ++s) i = t[s], this.filter.evaluate(i) ? e.features.push(i) : this.cache.push(i)
                            }
                        },
                        handleRemove: function (e) {
                            this.caching || (this.cache = [])
                        },
                        setFilter: function (e) {
                            this.filter = e, e = this.cache, this.cache = [], this.handleAdd({
                                features: this.layer.features
                            }), 0 < this.cache.length && (this.caching = !0, this.layer.removeFeatures(this.cache.slice()), this.caching = !1), 0 < e.length && (e = {
                                features: e
                            }, this.handleAdd(e), 0 < e.features.length && (this.caching = !0, this.layer.addFeatures(e.features), this.caching = !1))
                        },
                        CLASS_NAME: "OpenLayers.Strategy.Filter"
                    }), OpenLayers.Protocol.SOS = function (e) {
                        e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.SOS.DEFAULTS);
                        var t = OpenLayers.Protocol.SOS["v" + e.version.replace(/\./g, "_")];
                        if (!t) throw "Unsupported SOS version: " + e.version;
                        return new t(e)
                    }, OpenLayers.Protocol.SOS.DEFAULTS = {
                        version: "1.0.0"
                    }, OpenLayers.Format.WFSDescribeFeatureType = OpenLayers.Class(OpenLayers.Format.XML, {
                        regExes: {
                            trimSpace: /^\s*|\s*$/g
                        },
                        namespaces: {
                            xsd: "http://www.w3.org/2001/XMLSchema"
                        },
                        readers: {
                            xsd: {
                                schema: function (e, t) {
                                    var i, s, r = [],
                                        n = {};
                                    this.readChildNodes(e, {
                                        complexTypes: r,
                                        customTypes: n
                                    });
                                    var a, o, l = e.attributes;
                                    for (i = 0, s = l.length; i < s; ++i) 0 === (o = (a = l[i]).name).indexOf("xmlns") ? this.setNamespace(o.split(":")[1] || "", a.value) : t[o] = a.value;
                                    for (t.featureTypes = r, t.targetPrefix = this.namespaceAlias[t.targetNamespace], i = 0, s = r.length; i < s; ++i) a = n[(l = r[i]).typeName], n[l.typeName] && (l.typeName = a.name)
                                },
                                complexType: function (e, t) {
                                    var i = {
                                        typeName: e.getAttribute("name")
                                    };
                                    this.readChildNodes(e, i), t.complexTypes.push(i)
                                },
                                complexContent: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                extension: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                sequence: function (e, t) {
                                    var i = {
                                        elements: []
                                    };
                                    this.readChildNodes(e, i), t.properties = i.elements
                                },
                                element: function (e, t) {
                                    var i;
                                    if (t.elements) {
                                        for (var s, r = {}, n = 0, a = (i = e.attributes).length; n < a; ++n) r[(s = i[n]).name] = s.value;
                                        (i = r.type) || (i = {}, this.readChildNodes(e, i), r.restriction = i, r.type = i.base), r.localType = (i.base || i).split(":").pop(), t.elements.push(r), this.readChildNodes(e, r)
                                    }
                                    t.complexTypes && (r = (i = e.getAttribute("type")).split(":").pop(), t.customTypes[r] = {
                                        name: e.getAttribute("name"),
                                        type: i
                                    })
                                },
                                annotation: function (e, t) {
                                    t.annotation = {}, this.readChildNodes(e, t.annotation)
                                },
                                appinfo: function (e, t) {
                                    t.appinfo || (t.appinfo = []), t.appinfo.push(this.getChildValue(e))
                                },
                                documentation: function (e, t) {
                                    t.documentation || (t.documentation = []);
                                    var i = this.getChildValue(e);
                                    t.documentation.push({
                                        lang: e.getAttribute("xml:lang"),
                                        textContent: i.replace(this.regExes.trimSpace, "")
                                    })
                                },
                                simpleType: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                restriction: function (e, t) {
                                    t.base = e.getAttribute("base"), this.readRestriction(e, t)
                                }
                            }
                        },
                        readRestriction: function (e, t) {
                            for (var i, s, r = e.childNodes, n = 0, a = r.length; n < a; ++n) 1 == (i = r[n]).nodeType && (s = i.nodeName.split(":").pop(), i = i.getAttribute("value"), t[s] ? ("string" == typeof t[s] && (t[s] = [t[s]]), t[s].push(i)) : t[s] = i)
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            if ("ExceptionReport" === e.nodeName.split(":").pop()) {
                                var i = new OpenLayers.Format.OGCExceptionReport;
                                t.error = i.read(e)
                            } else this.readNode(e, t);
                            return t
                        },
                        CLASS_NAME: "OpenLayers.Format.WFSDescribeFeatureType"
                    }), OpenLayers.Format.GeoRSS = OpenLayers.Class(OpenLayers.Format.XML, {
                        rssns: "http://backend.userland.com/rss2",
                        featureNS: "http://mapserver.gis.umn.edu/mapserver",
                        georssns: "http://www.georss.org/georss",
                        geons: "http://www.w3.org/2003/01/geo/wgs84_pos#",
                        featureTitle: "Untitled",
                        featureDescription: "No Description",
                        gmlParser: null,
                        xy: !1,
                        createGeometryFromItem: function (e) {
                            var t = this.getElementsByTagNameNS(e, this.georssns, "point"),
                                i = this.getElementsByTagNameNS(e, this.geons, "lat"),
                                s = this.getElementsByTagNameNS(e, this.geons, "long"),
                                r = this.getElementsByTagNameNS(e, this.georssns, "line"),
                                n = this.getElementsByTagNameNS(e, this.georssns, "polygon"),
                                a = this.getElementsByTagNameNS(e, this.georssns, "where");
                            if (e = this.getElementsByTagNameNS(e, this.georssns, "box"), 0 < t.length || 0 < i.length && 0 < s.length) {
                                0 < t.length ? 2 != (i = OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s+/)).length && (i = OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s*,\s*/)) : i = [parseFloat(i[0].firstChild.nodeValue), parseFloat(s[0].firstChild.nodeValue)];
                                var o = new OpenLayers.Geometry.Point(i[1], i[0])
                            } else if (0 < r.length) {
                                for (i = OpenLayers.String.trim(this.getChildValue(r[0])).split(/\s+/), s = [], r = 0, n = i.length; r < n; r += 2) t = new OpenLayers.Geometry.Point(i[r + 1], i[r]), s.push(t);
                                o = new OpenLayers.Geometry.LineString(s)
                            } else if (0 < n.length) {
                                for (s = [], r = 0, n = (i = OpenLayers.String.trim(this.getChildValue(n[0])).split(/\s+/)).length; r < n; r += 2) t = new OpenLayers.Geometry.Point(i[r + 1], i[r]), s.push(t);
                                o = new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)])
                            } else 0 < a.length ? (this.gmlParser || (this.gmlParser = new OpenLayers.Format.GML({
                                xy: this.xy
                            })), o = this.gmlParser.parseFeature(a[0]).geometry) : 0 < e.length && (s = [], 3 < (i = OpenLayers.String.trim(e[0].firstChild.nodeValue).split(/\s+/)).length && (t = new OpenLayers.Geometry.Point(i[1], i[0]), s.push(t), t = new OpenLayers.Geometry.Point(i[1], i[2]), s.push(t), t = new OpenLayers.Geometry.Point(i[3], i[2]), s.push(t), t = new OpenLayers.Geometry.Point(i[3], i[0]), s.push(t), t = new OpenLayers.Geometry.Point(i[1], i[0]), s.push(t)), o = new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)]));
                            return o && this.internalProjection && this.externalProjection && o.transform(this.externalProjection, this.internalProjection), o
                        },
                        createFeatureFromItem: function (e) {
                            var t = this.createGeometryFromItem(e),
                                i = this._getChildValue(e, "*", "title", this.featureTitle),
                                s = this._getChildValue(e, "*", "description", this._getChildValue(e, "*", "content", this._getChildValue(e, "*", "summary", this.featureDescription))),
                                r = this._getChildValue(e, "*", "link");
                            if (!r) try {
                                r = this.getElementsByTagNameNS(e, "*", "link")[0].getAttribute("href")
                            } catch (e) {
                                r = null
                            }
                            return e = this._getChildValue(e, "*", "id", null), (t = new OpenLayers.Feature.Vector(t, {
                                title: i,
                                description: s,
                                link: r
                            })).fid = e, t
                        },
                        _getChildValue: function (e, t, i, s) {
                            return (e = this.getElementsByTagNameNS(e, t, i)) && e[0] && e[0].firstChild && e[0].firstChild.nodeValue ? this.getChildValue(e[0]) : null == s ? "" : s
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = null;
                            0 == (t = this.getElementsByTagNameNS(e, "*", "item")).length && (t = this.getElementsByTagNameNS(e, "*", "entry")), e = t.length;
                            for (var i = Array(e), s = 0; s < e; s++) i[s] = this.createFeatureFromItem(t[s]);
                            return i
                        },
                        write: function (e) {
                            var t;
                            if (OpenLayers.Util.isArray(e)) {
                                t = this.createElementNS(this.rssns, "rss");
                                for (var i = 0, s = e.length; i < s; i++) t.appendChild(this.createFeatureXML(e[i]))
                            } else t = this.createFeatureXML(e);
                            return OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        createFeatureXML: function (e) {
                            var t = this.buildGeometryNode(e.geometry),
                                i = this.createElementNS(this.rssns, "item"),
                                s = this.createElementNS(this.rssns, "title");
                            s.appendChild(this.createTextNode(e.attributes.title ? e.attributes.title : ""));
                            var r = this.createElementNS(this.rssns, "description");
                            for (var n in r.appendChild(this.createTextNode(e.attributes.description ? e.attributes.description : "")), i.appendChild(s), i.appendChild(r), e.attributes.link && ((s = this.createElementNS(this.rssns, "link")).appendChild(this.createTextNode(e.attributes.link)), i.appendChild(s)), e.attributes) "link" != n && "title" != n && "description" != n && (s = this.createTextNode(e.attributes[n]), r = n, -1 != n.search(":") && (r = n.split(":")[1]), (r = this.createElementNS(this.featureNS, "feature:" + r)).appendChild(s), i.appendChild(r));
                            return i.appendChild(t), i
                        },
                        buildGeometryNode: function (e) {
                            var t;
                            if (this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), "OpenLayers.Geometry.Polygon" == e.CLASS_NAME)(t = this.createElementNS(this.georssns, "georss:polygon")).appendChild(this.buildCoordinatesNode(e.components[0]));
                            else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME)(t = this.createElementNS(this.georssns, "georss:line")).appendChild(this.buildCoordinatesNode(e));
                            else {
                                if ("OpenLayers.Geometry.Point" != e.CLASS_NAME) throw "Couldn't parse " + e.CLASS_NAME;
                                (t = this.createElementNS(this.georssns, "georss:point")).appendChild(this.buildCoordinatesNode(e))
                            }
                            return t
                        },
                        buildCoordinatesNode: function (e) {
                            var t = null;
                            if (e.components && (t = e.components), t) {
                                e = t.length;
                                for (var i = Array(e), s = 0; s < e; s++) i[s] = t[s].y + " " + t[s].x;
                                t = i.join(" ")
                            } else t = e.y + " " + e.x;
                            return this.createTextNode(t)
                        },
                        CLASS_NAME: "OpenLayers.Format.GeoRSS"
                    }), OpenLayers.Format.WPSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
                        defaultVersion: "1.0.0",
                        CLASS_NAME: "OpenLayers.Format.WPSCapabilities"
                    }), OpenLayers.Format.WPSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows/1.1",
                            wps: "http://www.opengis.net/wps/1.0.0",
                            xlink: "http://www.w3.org/1999/xlink"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e])
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t
                        },
                        readers: {
                            wps: {
                                Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                ProcessOfferings: function (e, t) {
                                    t.processOfferings = {}, this.readChildNodes(e, t.processOfferings)
                                },
                                Process: function (e, t) {
                                    var i = {
                                        processVersion: this.getAttributeNS(e, this.namespaces.wps, "processVersion")
                                    };
                                    this.readChildNodes(e, i), t[i.identifier] = i
                                },
                                Languages: function (e, t) {
                                    t.languages = [], this.readChildNodes(e, t.languages)
                                },
                                Default: function (e, t) {
                                    var i = {
                                        isDefault: !0
                                    };
                                    this.readChildNodes(e, i), t.push(i)
                                },
                                Supported: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.push(i)
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WPSCapabilities.v1_0_0"
                    }), OpenLayers.Control.PinchZoom = OpenLayers.Class(OpenLayers.Control, {
                        type: OpenLayers.Control.TYPE_TOOL,
                        pinchOrigin: null,
                        currentCenter: null,
                        autoActivate: !0,
                        preserveCenter: !1,
                        initialize: function (e) {
                            OpenLayers.Control.prototype.initialize.apply(this, arguments), this.handler = new OpenLayers.Handler.Pinch(this, {
                                start: this.pinchStart,
                                move: this.pinchMove,
                                done: this.pinchDone
                            }, this.handlerOptions)
                        },
                        pinchStart: function (e, t) {
                            var i = this.preserveCenter ? this.map.getPixelFromLonLat(this.map.getCenter()) : e.xy;
                            this.currentCenter = this.pinchOrigin = i
                        },
                        pinchMove: function (e, t) {
                            var i = t.scale,
                                s = this.map.layerContainerOriginPx,
                                r = this.pinchOrigin,
                                n = this.preserveCenter ? this.map.getPixelFromLonLat(this.map.getCenter()) : e.xy,
                                a = Math.round(s.x + n.x - r.x + (i - 1) * (s.x - r.x));
                            s = Math.round(s.y + n.y - r.y + (i - 1) * (s.y - r.y));
                            this.map.applyTransform(a, s, i), this.currentCenter = n
                        },
                        pinchDone: function (e, t, i) {
                            if (this.map.applyTransform(), (e = this.map.getZoomForResolution(this.map.getResolution() / i.scale, !0)) !== this.map.getZoom() || !this.currentCenter.equals(this.pinchOrigin)) {
                                t = this.map.getResolutionForZoom(e), i = this.map.getLonLatFromPixel(this.pinchOrigin);
                                var s = this.currentCenter,
                                    r = this.map.getSize();
                                i.lon += t * (r.w / 2 - s.x), i.lat -= t * (r.h / 2 - s.y), this.map.div.clientWidth = this.map.div.clientWidth, this.map.setCenter(i, e)
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.PinchZoom"
                    }), OpenLayers.Control.TouchNavigation = OpenLayers.Class(OpenLayers.Control, {
                        dragPan: null,
                        dragPanOptions: null,
                        pinchZoom: null,
                        pinchZoomOptions: null,
                        clickHandlerOptions: null,
                        documentDrag: !1,
                        autoActivate: !0,
                        initialize: function (e) {
                            this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, arguments)
                        },
                        destroy: function () {
                            this.deactivate(), this.dragPan && this.dragPan.destroy(), this.dragPan = null, this.pinchZoom && (this.pinchZoom.destroy(), delete this.pinchZoom), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        activate: function () {
                            return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.dragPan.activate(), this.handlers.click.activate(), this.pinchZoom.activate(), !0)
                        },
                        deactivate: function () {
                            return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.dragPan.deactivate(), this.handlers.click.deactivate(), this.pinchZoom.deactivate(), !0)
                        },
                        draw: function () {
                            var e = {
                                    click: this.defaultClick,
                                    dblclick: this.defaultDblClick
                                },
                                t = OpenLayers.Util.extend({
                                    double: !0,
                                    stopDouble: !0,
                                    pixelTolerance: 2
                                }, this.clickHandlerOptions);
                            this.handlers.click = new OpenLayers.Handler.Click(this, e, t), this.dragPan = new OpenLayers.Control.DragPan(OpenLayers.Util.extend({
                                map: this.map,
                                documentDrag: this.documentDrag
                            }, this.dragPanOptions)), this.dragPan.draw(), this.pinchZoom = new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({
                                map: this.map
                            }, this.pinchZoomOptions))
                        },
                        defaultClick: function (e) {
                            e.lastTouches && 2 == e.lastTouches.length && this.map.zoomOut()
                        },
                        defaultDblClick: function (e) {
                            this.map.zoomTo(this.map.zoom + 1, e.xy)
                        },
                        CLASS_NAME: "OpenLayers.Control.TouchNavigation"
                    }), OpenLayers.Console.warn("OpenLayers.Rico is deprecated"), OpenLayers.Rico = OpenLayers.Rico || {}, OpenLayers.Rico.Color = OpenLayers.Class({
                        initialize: function (e, t, i) {
                            this.rgb = {
                                r: e,
                                g: t,
                                b: i
                            }
                        },
                        setRed: function (e) {
                            this.rgb.r = e
                        },
                        setGreen: function (e) {
                            this.rgb.g = e
                        },
                        setBlue: function (e) {
                            this.rgb.b = e
                        },
                        setHue: function (e) {
                            var t = this.asHSB();
                            t.h = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b)
                        },
                        setSaturation: function (e) {
                            var t = this.asHSB();
                            t.s = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b)
                        },
                        setBrightness: function (e) {
                            var t = this.asHSB();
                            t.b = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b)
                        },
                        darken: function (e) {
                            var t = this.asHSB();
                            this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, Math.max(t.b - e, 0))
                        },
                        brighten: function (e) {
                            var t = this.asHSB();
                            this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, Math.min(t.b + e, 1))
                        },
                        blend: function (e) {
                            this.rgb.r = Math.floor((this.rgb.r + e.rgb.r) / 2), this.rgb.g = Math.floor((this.rgb.g + e.rgb.g) / 2), this.rgb.b = Math.floor((this.rgb.b + e.rgb.b) / 2)
                        },
                        isBright: function () {
                            return this.asHSB(), .5 < this.asHSB().b
                        },
                        isDark: function () {
                            return !this.isBright()
                        },
                        asRGB: function () {
                            return "rgb(" + this.rgb.r + "," + this.rgb.g + "," + this.rgb.b + ")"
                        },
                        asHex: function () {
                            return "#" + this.rgb.r.toColorPart() + this.rgb.g.toColorPart() + this.rgb.b.toColorPart()
                        },
                        asHSB: function () {
                            return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r, this.rgb.g, this.rgb.b)
                        },
                        toString: function () {
                            return this.asHex()
                        }
                    }), OpenLayers.Rico.Color.createFromHex = function (e) {
                        if (4 == e.length) {
                            var t = e;
                            e = "#";
                            for (var i = 1; 4 > i; i++) e += t.charAt(i) + t.charAt(i)
                        }
                        return 0 == e.indexOf("#") && (e = e.substring(1)), t = e.substring(0, 2), i = e.substring(2, 4), e = e.substring(4, 6), new OpenLayers.Rico.Color(parseInt(t, 16), parseInt(i, 16), parseInt(e, 16))
                    }, OpenLayers.Rico.Color.createColorFromBackground = function (e) {
                        var t = OpenLayers.Element.getStyle(OpenLayers.Util.getElement(e), "backgroundColor");
                        return "transparent" == t && e.parentNode ? OpenLayers.Rico.Color.createColorFromBackground(e.parentNode) : null == t ? new OpenLayers.Rico.Color(255, 255, 255) : 0 == t.indexOf("rgb(") ? (e = t.substring(4, t.length - 1).split(","), new OpenLayers.Rico.Color(parseInt(e[0]), parseInt(e[1]), parseInt(e[2]))) : 0 == t.indexOf("#") ? OpenLayers.Rico.Color.createFromHex(t) : new OpenLayers.Rico.Color(255, 255, 255)
                    }, OpenLayers.Rico.Color.HSBtoRGB = function (e, t, i) {
                        var s = 0,
                            r = 0,
                            n = 0;
                        if (0 == t) n = r = s = parseInt(255 * i + .5);
                        else {
                            var a = (e = 6 * (e - Math.floor(e))) - Math.floor(e),
                                o = i * (1 - t),
                                l = i * (1 - t * a);
                            switch (t = i * (1 - t * (1 - a)), parseInt(e)) {
                                case 0:
                                    s = 255 * i + .5, r = 255 * t + .5, n = 255 * o + .5;
                                    break;
                                case 1:
                                    s = 255 * l + .5, r = 255 * i + .5, n = 255 * o + .5;
                                    break;
                                case 2:
                                    s = 255 * o + .5, r = 255 * i + .5, n = 255 * t + .5;
                                    break;
                                case 3:
                                    s = 255 * o + .5, r = 255 * l + .5, n = 255 * i + .5;
                                    break;
                                case 4:
                                    s = 255 * t + .5, r = 255 * o + .5, n = 255 * i + .5;
                                    break;
                                case 5:
                                    s = 255 * i + .5, r = 255 * o + .5, n = 255 * l + .5
                            }
                        }
                        return {
                            r: parseInt(s),
                            g: parseInt(r),
                            b: parseInt(n)
                        }
                    }, OpenLayers.Rico.Color.RGBtoHSB = function (e, t, i) {
                        var s, r = e > t ? e : t;
                        i > r && (r = i);
                        var n = e < t ? e : t;
                        if (i < n && (n = i), 0 == (s = 0 != r ? (r - n) / r : 0)) e = 0;
                        else {
                            var a = (r - e) / (r - n),
                                o = (r - t) / (r - n);
                            i = (r - i) / (r - n), 0 > (e = (e == r ? i - o : t == r ? 2 + a - i : 4 + o - a) / 6) && (e += 1)
                        }
                        return {
                            h: e,
                            s: s,
                            b: r / 255
                        }
                    }, OpenLayers.Style2 = OpenLayers.Class({
                        id: null,
                        name: null,
                        title: null,
                        description: null,
                        layerName: null,
                        isDefault: !1,
                        rules: null,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")
                        },
                        destroy: function () {
                            for (var e = 0, t = this.rules.length; e < t; e++) this.rules[e].destroy();
                            delete this.rules
                        },
                        clone: function () {
                            var e = OpenLayers.Util.extend({}, this);
                            if (this.rules) {
                                e.rules = [];
                                for (var t = 0, i = this.rules.length; t < i; ++t) e.rules.push(this.rules[t].clone())
                            }
                            return new OpenLayers.Style2(e)
                        },
                        CLASS_NAME: "OpenLayers.Style2"
                    }), OpenLayers.Format.WFS = OpenLayers.Class(OpenLayers.Format.GML, {
                        layer: null,
                        wfsns: "http://www.opengis.net/wfs",
                        ogcns: "http://www.opengis.net/ogc",
                        initialize: function (e, t) {
                            OpenLayers.Format.GML.prototype.initialize.apply(this, [e]), this.layer = t, this.layer.featureNS && (this.featureNS = this.layer.featureNS), this.layer.options.geometry_column && (this.geometryName = this.layer.options.geometry_column), this.layer.options.typename && (this.featureName = this.layer.options.typename)
                        },
                        write: function (e) {
                            var t = this.createElementNS(this.wfsns, "wfs:Transaction");
                            t.setAttribute("version", "1.0.0"), t.setAttribute("service", "WFS");
                            for (var i = 0; i < e.length; i++) switch (e[i].state) {
                                case OpenLayers.State.INSERT:
                                    t.appendChild(this.insert(e[i]));
                                    break;
                                case OpenLayers.State.UPDATE:
                                    t.appendChild(this.update(e[i]));
                                    break;
                                case OpenLayers.State.DELETE:
                                    t.appendChild(this.remove(e[i]))
                            }
                            return OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        createFeatureXML: function (e) {
                            var t = this.buildGeometryNode(e.geometry),
                                i = this.createElementNS(this.featureNS, "feature:" + this.geometryName);
                            for (var s in i.appendChild(t), (t = this.createElementNS(this.featureNS, "feature:" + this.featureName)).appendChild(i), e.attributes) {
                                i = this.createTextNode(e.attributes[s]);
                                var r = s; - 1 != s.search(":") && (r = s.split(":")[1]), (r = this.createElementNS(this.featureNS, "feature:" + r)).appendChild(i), t.appendChild(r)
                            }
                            return t
                        },
                        insert: function (e) {
                            var t = this.createElementNS(this.wfsns, "wfs:Insert");
                            return t.appendChild(this.createFeatureXML(e)), t
                        },
                        update: function (e) {
                            e.fid || OpenLayers.Console.userError(OpenLayers.i18n("noFID"));
                            var t = this.createElementNS(this.wfsns, "wfs:Update");
                            t.setAttribute("typeName", this.featurePrefix + ":" + this.featureName), t.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
                            var i = this.createElementNS(this.wfsns, "wfs:Property"),
                                s = this.createElementNS(this.wfsns, "wfs:Name"),
                                r = this.createTextNode(this.geometryName);
                            for (var n in s.appendChild(r), i.appendChild(s), s = this.createElementNS(this.wfsns, "wfs:Value"), r = this.buildGeometryNode(e.geometry), e.layer && r.setAttribute("srsName", e.layer.projection.getCode()), s.appendChild(r), i.appendChild(s), t.appendChild(i), e.attributes) i = this.createElementNS(this.wfsns, "wfs:Property"), (s = this.createElementNS(this.wfsns, "wfs:Name")).appendChild(this.createTextNode(n)), i.appendChild(s), (s = this.createElementNS(this.wfsns, "wfs:Value")).appendChild(this.createTextNode(e.attributes[n])), i.appendChild(s), t.appendChild(i);
                            return i = this.createElementNS(this.ogcns, "ogc:Filter"), (n = this.createElementNS(this.ogcns, "ogc:FeatureId")).setAttribute("fid", e.fid), i.appendChild(n), t.appendChild(i), t
                        },
                        remove: function (e) {
                            if (!e.fid) return OpenLayers.Console.userError(OpenLayers.i18n("noFID")), !1;
                            var t = this.createElementNS(this.wfsns, "wfs:Delete");
                            t.setAttribute("typeName", this.featurePrefix + ":" + this.featureName), t.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
                            var i = this.createElementNS(this.ogcns, "ogc:Filter"),
                                s = this.createElementNS(this.ogcns, "ogc:FeatureId");
                            return s.setAttribute("fid", e.fid), i.appendChild(s), t.appendChild(i), t
                        },
                        destroy: function () {
                            this.layer = null
                        },
                        CLASS_NAME: "OpenLayers.Format.WFS"
                    }), OpenLayers.Format.SLD.v1_0_0_GeoServer = OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0, {
                        version: "1.0.0",
                        profile: "GeoServer",
                        readers: OpenLayers.Util.applyDefaults({
                            sld: OpenLayers.Util.applyDefaults({
                                Priority: function (e, t) {
                                    var i = this.readers.ogc._expression.call(this, e);
                                    i && (t.priority = i)
                                },
                                VendorOption: function (e, t) {
                                    t.vendorOptions || (t.vendorOptions = {}), t.vendorOptions[e.getAttribute("name")] = this.getChildValue(e)
                                },
                                TextSymbolizer: function (e, t) {
                                    OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this, arguments);
                                    var i = this.multipleSymbolizers ? t.symbolizers[t.symbolizers.length - 1] : t.symbolizer.Text;
                                    void 0 === i.graphic && (i.graphic = !1)
                                }
                            }, OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)
                        }, OpenLayers.Format.SLD.v1_0_0.prototype.readers),
                        writers: OpenLayers.Util.applyDefaults({
                            sld: OpenLayers.Util.applyDefaults({
                                Priority: function (e) {
                                    return this.writers.sld._OGCExpression.call(this, "sld:Priority", e)
                                },
                                VendorOption: function (e) {
                                    return this.createElementNSPlus("sld:VendorOption", {
                                        attributes: {
                                            name: e.name
                                        },
                                        value: e.value
                                    })
                                },
                                TextSymbolizer: function (e) {
                                    var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this, arguments);
                                    return !1 !== e.graphic && (e.externalGraphic || e.graphicName) && this.writeNode("Graphic", e, t), "priority" in e && this.writeNode("Priority", e.priority, t), this.addVendorOptions(t, e)
                                },
                                PointSymbolizer: function (e) {
                                    var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this, arguments);
                                    return this.addVendorOptions(t, e)
                                },
                                LineSymbolizer: function (e) {
                                    var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this, arguments);
                                    return this.addVendorOptions(t, e)
                                },
                                PolygonSymbolizer: function (e) {
                                    var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this, arguments);
                                    return this.addVendorOptions(t, e)
                                }
                            }, OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)
                        }, OpenLayers.Format.SLD.v1_0_0.prototype.writers),
                        addVendorOptions: function (e, t) {
                            if (t.vendorOptions)
                                for (var i in t.vendorOptions) this.writeNode("VendorOption", {
                                    name: i,
                                    value: t.vendorOptions[i]
                                }, e);
                            return e
                        },
                        CLASS_NAME: "OpenLayers.Format.SLD.v1_0_0_GeoServer"
                    }), OpenLayers.Layer.Boxes = OpenLayers.Class(OpenLayers.Layer.Markers, {
                        drawMarker: function (e) {
                            var t = this.map.getLayerPxFromLonLat({
                                    lon: e.bounds.left,
                                    lat: e.bounds.top
                                }),
                                i = this.map.getLayerPxFromLonLat({
                                    lon: e.bounds.right,
                                    lat: e.bounds.bottom
                                });
                            null == i || null == t ? e.display(!1) : (t = e.draw(t, {
                                w: Math.max(1, i.x - t.x),
                                h: Math.max(1, i.y - t.y)
                            }), e.drawn || (this.div.appendChild(t), e.drawn = !0))
                        },
                        removeMarker: function (e) {
                            OpenLayers.Util.removeItem(this.markers, e), null != e.div && e.div.parentNode == this.div && this.div.removeChild(e.div)
                        },
                        CLASS_NAME: "OpenLayers.Layer.Boxes"
                    }), OpenLayers.Format.WFSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1, {
                        readers: {
                            wfs: OpenLayers.Util.applyDefaults({
                                Service: function (e, t) {
                                    t.service = {}, this.readChildNodes(e, t.service)
                                },
                                Fees: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && "none" != i.toLowerCase() && (t.fees = i)
                                },
                                AccessConstraints: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && "none" != i.toLowerCase() && (t.accessConstraints = i)
                                },
                                OnlineResource: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && "none" != i.toLowerCase() && (t.onlineResource = i)
                                },
                                Keywords: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && "none" != i.toLowerCase() && (t.keywords = i.split(", "))
                                },
                                Capability: function (e, t) {
                                    t.capability = {}, this.readChildNodes(e, t.capability)
                                },
                                Request: function (e, t) {
                                    t.request = {}, this.readChildNodes(e, t.request)
                                },
                                GetFeature: function (e, t) {
                                    t.getfeature = {
                                        href: {},
                                        formats: []
                                    }, this.readChildNodes(e, t.getfeature)
                                },
                                ResultFormat: function (e, t) {
                                    for (var i, s = e.childNodes, r = 0; r < s.length; r++) 1 == (i = s[r]).nodeType && t.formats.push(i.nodeName)
                                },
                                DCPType: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                HTTP: function (e, t) {
                                    this.readChildNodes(e, t.href)
                                },
                                Get: function (e, t) {
                                    t.get = e.getAttribute("onlineResource")
                                },
                                Post: function (e, t) {
                                    t.post = e.getAttribute("onlineResource")
                                },
                                SRS: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (t.srs = i)
                                }
                            }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)
                        },
                        CLASS_NAME: "OpenLayers.Format.WFSCapabilities.v1_0_0"
                    }), OpenLayers.Format.WMSCapabilities.v1_3 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1, {
                        readers: {
                            wms: OpenLayers.Util.applyDefaults({
                                WMS_Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                LayerLimit: function (e, t) {
                                    t.layerLimit = parseInt(this.getChildValue(e))
                                },
                                MaxWidth: function (e, t) {
                                    t.maxWidth = parseInt(this.getChildValue(e))
                                },
                                MaxHeight: function (e, t) {
                                    t.maxHeight = parseInt(this.getChildValue(e))
                                },
                                BoundingBox: function (e, t) {
                                    var i = OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this, [e, t]);
                                    i.srs = e.getAttribute("CRS"), t.bbox[i.srs] = i
                                },
                                CRS: function (e, t) {
                                    this.readers.wms.SRS.apply(this, [e, t])
                                },
                                EX_GeographicBoundingBox: function (e, t) {
                                    t.llbbox = [], this.readChildNodes(e, t.llbbox)
                                },
                                westBoundLongitude: function (e, t) {
                                    t[0] = this.getChildValue(e)
                                },
                                eastBoundLongitude: function (e, t) {
                                    t[2] = this.getChildValue(e)
                                },
                                southBoundLatitude: function (e, t) {
                                    t[1] = this.getChildValue(e)
                                },
                                northBoundLatitude: function (e, t) {
                                    t[3] = this.getChildValue(e)
                                },
                                MinScaleDenominator: function (e, t) {
                                    t.maxScale = parseFloat(this.getChildValue(e)).toPrecision(16)
                                },
                                MaxScaleDenominator: function (e, t) {
                                    t.minScale = parseFloat(this.getChildValue(e)).toPrecision(16)
                                },
                                Dimension: function (e, t) {
                                    var i = {
                                        name: e.getAttribute("name").toLowerCase(),
                                        units: e.getAttribute("units"),
                                        unitsymbol: e.getAttribute("unitSymbol"),
                                        nearestVal: "1" === e.getAttribute("nearestValue"),
                                        multipleVal: "1" === e.getAttribute("multipleValues"),
                                        default: e.getAttribute("default") || "",
                                        current: "1" === e.getAttribute("current"),
                                        values: this.getChildValue(e).split(",")
                                    };
                                    t.dimensions[i.name] = i
                                },
                                Keyword: function (e, t) {
                                    var i = {
                                        value: this.getChildValue(e),
                                        vocabulary: e.getAttribute("vocabulary")
                                    };
                                    t.keywords && t.keywords.push(i)
                                }
                            }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),
                            sld: {
                                UserDefinedSymbolization: function (e, t) {
                                    this.readers.wms.UserDefinedSymbolization.apply(this, [e, t]), t.userSymbols.inlineFeature = 1 == parseInt(e.getAttribute("InlineFeature")), t.userSymbols.remoteWCS = 1 == parseInt(e.getAttribute("RemoteWCS"))
                                },
                                DescribeLayer: function (e, t) {
                                    this.readers.wms.DescribeLayer.apply(this, [e, t])
                                },
                                GetLegendGraphic: function (e, t) {
                                    this.readers.wms.GetLegendGraphic.apply(this, [e, t])
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1_3"
                    }), OpenLayers.Layer.Zoomify = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        size: null,
                        isBaseLayer: !0,
                        standardTileSize: 256,
                        tileOriginCorner: "tl",
                        numberOfTiers: 0,
                        tileCountUpToTier: null,
                        tierSizeInTiles: null,
                        tierImageSize: null,
                        initialize: function (e, t, i, s) {
                            this.initializeZoomify(i), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [e, t, i, {}, s])
                        },
                        initializeZoomify: function (e) {
                            var t = e.clone();
                            for (this.size = e.clone(), e = new OpenLayers.Size(Math.ceil(t.w / this.standardTileSize), Math.ceil(t.h / this.standardTileSize)), this.tierSizeInTiles = [e], this.tierImageSize = [t]; t.w > this.standardTileSize || t.h > this.standardTileSize;) t = new OpenLayers.Size(Math.floor(t.w / 2), Math.floor(t.h / 2)), e = new OpenLayers.Size(Math.ceil(t.w / this.standardTileSize), Math.ceil(t.h / this.standardTileSize)), this.tierSizeInTiles.push(e), this.tierImageSize.push(t);
                            for (this.tierSizeInTiles.reverse(), this.tierImageSize.reverse(), this.numberOfTiers = this.tierSizeInTiles.length, t = [1], this.tileCountUpToTier = [0], e = 1; e < this.numberOfTiers; e++) t.unshift(Math.pow(2, e)), this.tileCountUpToTier.push(this.tierSizeInTiles[e - 1].w * this.tierSizeInTiles[e - 1].h + this.tileCountUpToTier[e - 1]);
                            this.serverResolutions || (this.serverResolutions = t)
                        },
                        destroy: function () {
                            OpenLayers.Layer.Grid.prototype.destroy.apply(this, arguments), this.tileCountUpToTier.length = 0, this.tierSizeInTiles.length = 0, this.tierImageSize.length = 0
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.Zoomify(this.name, this.url, this.size, this.options)), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = this.getServerResolution(),
                                i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w));
                            return e = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), t = this.getZoomForResolution(t), i = "TileGroup" + Math.floor((i + e * this.tierSizeInTiles[t].w + this.tileCountUpToTier[t]) / 256) + "/" + t + "-" + i + "-" + e + ".jpg", t = this.url, OpenLayers.Util.isArray(t) && (t = this.selectUrl(i, t)), t + i
                        },
                        getImageSize: function () {
                            if (0 < arguments.length) {
                                var e = this.adjustBounds(arguments[0]),
                                    t = this.getServerResolution(),
                                    i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)),
                                    s = (e = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), t = this.getZoomForResolution(t), this.standardTileSize),
                                    r = this.standardTileSize;
                                return i == this.tierSizeInTiles[t].w - 1 && (s = this.tierImageSize[t].w % this.standardTileSize), e == this.tierSizeInTiles[t].h - 1 && (r = this.tierImageSize[t].h % this.standardTileSize), new OpenLayers.Size(s, r)
                            }
                            return this.tileSize
                        },
                        setMap: function (e) {
                            OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left, this.map.maxExtent.top)
                        },
                        CLASS_NAME: "OpenLayers.Layer.Zoomify"
                    }), OpenLayers.Layer.MapServer = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        DEFAULT_PARAMS: {
                            mode: "map",
                            map_imagetype: "png"
                        },
                        initialize: function (e, t, i, s) {
                            OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS), null != s && null != s.isBaseLayer || (this.isBaseLayer = "true" != this.params.transparent && 1 != this.params.transparent)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.MapServer(this.name, this.url, this.params, this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getURL: function (e) {
                            e = [(e = this.adjustBounds(e)).left, e.bottom, e.right, e.top];
                            var t = this.getImageSize();
                            return this.getFullRequestString({
                                mapext: e,
                                imgext: e,
                                map_size: [t.w, t.h],
                                imgx: t.w / 2,
                                imgy: t.h / 2,
                                imgxy: [t.w, t.h]
                            })
                        },
                        getFullRequestString: function (e, t) {
                            var i = null == t ? this.url : t,
                                s = OpenLayers.Util.extend({}, this.params),
                                r = (s = OpenLayers.Util.extend(s, e), OpenLayers.Util.getParameterString(s));
                            OpenLayers.Util.isArray(i) && (i = this.selectUrl(r, i));
                            var n;
                            r = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
                            for (n in s) n.toUpperCase() in r && delete s[n];
                            return r = OpenLayers.Util.getParameterString(s), s = i, "" != (r = r.replace(/,/g, "+")) && (s = "&" == (n = i.charAt(i.length - 1)) || "?" == n ? s + r : -1 == i.indexOf("?") ? s + "?" + r : s + "&" + r), s
                        },
                        CLASS_NAME: "OpenLayers.Layer.MapServer"
                    }), OpenLayers.Renderer.VML = OpenLayers.Class(OpenLayers.Renderer.Elements, {
                        xmlns: "urn:schemas-microsoft-com:vml",
                        symbolCache: {},
                        offset: null,
                        initialize: function (e) {
                            if (this.supported()) {
                                if (!document.namespaces.olv) {
                                    document.namespaces.add("olv", this.xmlns);
                                    for (var t = document.createStyleSheet(), i = "shape rect oval fill stroke imagedata group textbox".split(" "), s = 0, r = i.length; s < r; s++) t.addRule("olv\\:" + i[s], "behavior: url(#default#VML); position: absolute; display: inline-block;")
                                }
                                OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments)
                            }
                        },
                        supported: function () {
                            return !!document.namespaces
                        },
                        setExtent: function (e, t) {
                            var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments),
                                s = this.getResolution(),
                                r = e.left / s | 0;
                            s = e.top / s - this.size.h | 0;
                            t || !this.offset ? (this.offset = {
                                x: r,
                                y: s
                            }, s = r = 0) : (r -= this.offset.x, s -= this.offset.y), this.root.coordorigin = r - this.xOffset + " " + s;
                            for (var n = 0, a = (r = [this.root, this.vectorRoot, this.textRoot]).length; n < a; ++n)(s = r[n]).coordsize = this.size.w + " " + this.size.h;
                            return this.root.style.flip = "y", i
                        },
                        setSize: function (e) {
                            OpenLayers.Renderer.prototype.setSize.apply(this, arguments);
                            for (var t, i = [this.rendererRoot, this.root, this.vectorRoot, this.textRoot], s = this.size.w + "px", r = this.size.h + "px", n = 0, a = i.length; n < a; ++n)(t = i[n]).style.width = s, t.style.height = r
                        },
                        getNodeType: function (e, t) {
                            var i = null;
                            switch (e.CLASS_NAME) {
                                case "OpenLayers.Geometry.Point":
                                    i = t.externalGraphic ? "olv:rect" : this.isComplexSymbol(t.graphicName) ? "olv:shape" : "olv:oval";
                                    break;
                                case "OpenLayers.Geometry.Rectangle":
                                    i = "olv:rect";
                                    break;
                                case "OpenLayers.Geometry.LineString":
                                case "OpenLayers.Geometry.LinearRing":
                                case "OpenLayers.Geometry.Polygon":
                                case "OpenLayers.Geometry.Curve":
                                    i = "olv:shape"
                            }
                            return i
                        },
                        setStyle: function (e, t, i, s) {
                            t = t || e._style, i = i || e._options;
                            var r = t.fillColor;
                            if ((n = t.title || t.graphicTitle) && (e.title = n), "OpenLayers.Geometry.Point" === e._geometryClass)
                                if (t.externalGraphic) {
                                    i.isFilled = !0;
                                    r = t.graphicWidth || t.graphicHeight;
                                    var n = t.graphicHeight || t.graphicWidth,
                                        a = (r = r || 2 * t.pointRadius, n = n || 2 * t.pointRadius, this.getResolution()),
                                        o = null != t.graphicXOffset ? t.graphicXOffset : -.5 * r,
                                        l = null != t.graphicYOffset ? t.graphicYOffset : -.5 * n;
                                    e.style.left = ((s.x - this.featureDx) / a - this.offset.x + o | 0) + "px", e.style.top = (s.y / a - this.offset.y - (l + n) | 0) + "px", e.style.width = r + "px", e.style.height = n + "px", e.style.flip = "y", r = "none", i.isStroked = !1
                                } else this.isComplexSymbol(t.graphicName) ? (n = this.importSymbol(t.graphicName), e.path = n.path, e.coordorigin = n.left + "," + n.bottom, n = n.size, e.coordsize = n + "," + n, this.drawCircle(e, s, t.pointRadius), e.style.flip = "y") : this.drawCircle(e, s, t.pointRadius);
                            return i.isFilled ? e.fillcolor = r : e.filled = "false", s = 0 == (s = e.getElementsByTagName("fill")).length ? null : s[0], i.isFilled ? (s || (s = this.createNode("olv:fill", e.id + "_fill")), s.opacity = t.fillOpacity, "OpenLayers.Geometry.Point" === e._geometryClass && t.externalGraphic && (t.graphicOpacity && (s.opacity = t.graphicOpacity), s.src = t.externalGraphic, s.type = "frame", t.graphicWidth && t.graphicHeight || (s.aspect = "atmost")), s.parentNode != e && e.appendChild(s)) : s && e.removeChild(s), void 0 === (r = t.rotation) && void 0 === e._rotation || (e._rotation = r, t.externalGraphic ? (this.graphicRotate(e, o, l, t), s.opacity = 0) : "OpenLayers.Geometry.Point" === e._geometryClass && (e.style.rotation = r || 0)), o = 0 == (o = e.getElementsByTagName("stroke")).length ? null : o[0], i.isStroked ? (o || (o = this.createNode("olv:stroke", e.id + "_stroke"), e.appendChild(o)), o.on = !0, o.color = t.strokeColor, o.weight = t.strokeWidth + "px", o.opacity = t.strokeOpacity, o.endcap = "butt" == t.strokeLinecap ? "flat" : t.strokeLinecap || "round", t.strokeDashstyle && (o.dashstyle = this.dashStyle(t))) : (e.stroked = !1, o && (o.on = !1)), "inherit" != t.cursor && null != t.cursor && (e.style.cursor = t.cursor), e
                        },
                        graphicRotate: function (e, t, i, s) {
                            var r, n, a = (s = s || e._style).rotation || 0;
                            if (s.graphicWidth && s.graphicHeight) {
                                n = Math.max(s.graphicWidth, s.graphicHeight), r = s.graphicWidth / s.graphicHeight;
                                var o = Math.round(s.graphicWidth || n * r),
                                    l = Math.round(s.graphicHeight || n);
                                e.style.width = o + "px", e.style.height = l + "px";
                                var h = document.getElementById(e.id + "_image");
                                h || (h = this.createNode("olv:imagedata", e.id + "_image"), e.appendChild(h)), h.style.width = o + "px", h.style.height = l + "px", h.src = s.externalGraphic, h.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')", h = a * Math.PI / 180, a = Math.sin(h), a = "progid:DXImageTransform.Microsoft.Matrix(M11=" + (h = Math.cos(h)) + ",M12=" + -a + ",M21=" + a + ",M22=" + h + ",SizingMethod='auto expand')\n", (h = s.graphicOpacity || s.fillOpacity) && 1 != h && (a += "progid:DXImageTransform.Microsoft.BasicImage(opacity=" + h + ")\n"), e.style.filter = a, a = new OpenLayers.Geometry.Point(-t, -i), (o = new OpenLayers.Bounds(0, 0, o, l).toGeometry()).rotate(s.rotation, a), o = o.getBounds(), e.style.left = Math.round(parseInt(e.style.left) + o.left) + "px", e.style.top = Math.round(parseInt(e.style.top) - o.bottom) + "px"
                            } else {
                                var p = new Image;
                                p.onreadystatechange = OpenLayers.Function.bind((function () {
                                    "complete" != p.readyState && "interactive" != p.readyState || (r = p.width / p.height, n = Math.max(2 * s.pointRadius, s.graphicWidth || 0, s.graphicHeight || 0), t *= r, s.graphicWidth = n * r, s.graphicHeight = n, this.graphicRotate(e, t, i, s))
                                }), this), p.src = s.externalGraphic
                            }
                        },
                        postDraw: function (e) {
                            e.style.visibility = "visible";
                            var t = e._style.fillColor,
                                i = e._style.strokeColor;
                            "none" == t && e.fillcolor != t && (e.fillcolor = t), "none" == i && e.strokecolor != i && (e.strokecolor = i)
                        },
                        setNodeDimension: function (e, t) {
                            if (s = t.getBounds()) {
                                var i = this.getResolution(),
                                    s = new OpenLayers.Bounds((s.left - this.featureDx) / i - this.offset.x | 0, s.bottom / i - this.offset.y | 0, (s.right - this.featureDx) / i - this.offset.x | 0, s.top / i - this.offset.y | 0);
                                e.style.left = s.left + "px", e.style.top = s.top + "px", e.style.width = s.getWidth() + "px", e.style.height = s.getHeight() + "px", e.coordorigin = s.left + " " + s.top, e.coordsize = s.getWidth() + " " + s.getHeight()
                            }
                        },
                        dashStyle: function (e) {
                            switch (e = e.strokeDashstyle) {
                                case "solid":
                                case "dot":
                                case "dash":
                                case "dashdot":
                                case "longdash":
                                case "longdashdot":
                                    return e;
                                default:
                                    return 2 == (e = e.split(/[ ,]/)).length ? 1 * e[0] >= 2 * e[1] ? "longdash" : 1 == e[0] || 1 == e[1] ? "dot" : "dash" : 4 == e.length ? 1 * e[0] >= 2 * e[1] ? "longdashdot" : "dashdot" : "solid"
                            }
                        },
                        createNode: function (e, t) {
                            var i = document.createElement(e);
                            return t && (i.id = t), i.unselectable = "on", i.onselectstart = OpenLayers.Function.False, i
                        },
                        nodeTypeCompare: function (e, t) {
                            var i = t; - 1 != (s = i.indexOf(":")) && (i = i.substr(s + 1));
                            var s, r = e.nodeName;
                            return -1 != (s = r.indexOf(":")) && (r = r.substr(s + 1)), i == r
                        },
                        createRenderRoot: function () {
                            return this.nodeFactory(this.container.id + "_vmlRoot", "div")
                        },
                        createRoot: function (e) {
                            return this.nodeFactory(this.container.id + e, "olv:group")
                        },
                        drawPoint: function (e, t) {
                            return this.drawCircle(e, t, 1)
                        },
                        drawCircle: function (e, t, i) {
                            if (!isNaN(t.x) && !isNaN(t.y)) {
                                var s = this.getResolution();
                                return e.style.left = ((t.x - this.featureDx) / s - this.offset.x | 0) - i + "px", e.style.top = (t.y / s - this.offset.y | 0) - i + "px", t = 2 * i, e.style.width = t + "px", e.style.height = t + "px", e
                            }
                            return !1
                        },
                        drawLineString: function (e, t) {
                            return this.drawLine(e, t, !1)
                        },
                        drawLinearRing: function (e, t) {
                            return this.drawLine(e, t, !0)
                        },
                        drawLine: function (e, t, i) {
                            this.setNodeDimension(e, t);
                            for (var s, r, n = this.getResolution(), a = t.components.length, o = Array(a), l = 0; l < a; l++) r = ((s = t.components[l]).x - this.featureDx) / n - this.offset.x | 0, s = s.y / n - this.offset.y | 0, o[l] = " " + r + "," + s + " l ";
                            return t = i ? " x e" : " e", e.path = "m" + o.join("") + t, e
                        },
                        drawPolygon: function (e, t) {
                            this.setNodeDimension(e, t);
                            var i, s, r, n, a, o, l, h, p, u, c = this.getResolution(),
                                y = [];
                            for (i = 0, s = t.components.length; i < s; i++) {
                                for (y.push("m"), n = 0 === i, o = a = null, l = 0, h = (r = t.components[i].components).length; l < h; l++) u = " " + (u = ((p = r[l]).x - this.featureDx) / c - this.offset.x | 0) + "," + (p = p.y / c - this.offset.y | 0), y.push(u), 0 == l && y.push(" l"), n || (a ? a != u && (o ? o != u && (n = !0) : o = u) : a = u);
                                y.push(n ? " x " : " ")
                            }
                            return y.push("e"), e.path = y.join(""), e
                        },
                        drawRectangle: function (e, t) {
                            var i = this.getResolution();
                            return e.style.left = ((t.x - this.featureDx) / i - this.offset.x | 0) + "px", e.style.top = (t.y / i - this.offset.y | 0) + "px", e.style.width = (t.width / i | 0) + "px", e.style.height = (t.height / i | 0) + "px", e
                        },
                        drawText: function (e, t, i) {
                            var s = this.nodeFactory(e + this.LABEL_ID_SUFFIX, "olv:rect"),
                                r = this.nodeFactory(e + this.LABEL_ID_SUFFIX + "_textbox", "olv:textbox"),
                                n = this.getResolution();
                            s.style.left = ((i.x - this.featureDx) / n - this.offset.x | 0) + "px", s.style.top = (i.y / n - this.offset.y | 0) + "px", s.style.flip = "y", r.innerText = t.label, "inherit" != t.cursor && null != t.cursor && (r.style.cursor = t.cursor), t.fontColor && (r.style.color = t.fontColor), t.fontOpacity && (r.style.filter = "alpha(opacity=" + 100 * t.fontOpacity + ")"), t.fontFamily && (r.style.fontFamily = t.fontFamily), t.fontSize && (r.style.fontSize = t.fontSize), t.fontWeight && (r.style.fontWeight = t.fontWeight), t.fontStyle && (r.style.fontStyle = t.fontStyle), !0 === t.labelSelect && (s._featureId = e, r._featureId = e, r._geometry = i, r._geometryClass = i.CLASS_NAME), r.style.whiteSpace = "nowrap", r.inset = "1px,0px,0px,0px", s.parentNode || (s.appendChild(r), this.textRoot.appendChild(s)), 1 == (t = t.labelAlign || "cm").length && (t += "m"), e = r.clientWidth * OpenLayers.Renderer.VML.LABEL_SHIFT[t.substr(0, 1)], r = r.clientHeight * OpenLayers.Renderer.VML.LABEL_SHIFT[t.substr(1, 1)], s.style.left = parseInt(s.style.left) - e - 1 + "px", s.style.top = parseInt(s.style.top) + r + "px"
                        },
                        moveRoot: function (e) {
                            var t = this.map.getLayer(e.container.id);
                            t instanceof OpenLayers.Layer.Vector.RootContainer && (t = this.map.getLayer(this.container.id)), t && t.renderer.clear(), OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this, arguments), t && t.redraw()
                        },
                        importSymbol: function (e) {
                            var t = this.container.id + "-" + e,
                                i = this.symbolCache[t];
                            if (i) return i;
                            if (!(i = OpenLayers.Renderer.symbol[e])) throw Error(e + " is not a valid symbol name");
                            e = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0);
                            for (var s = ["m"], r = 0; r < i.length; r += 2) {
                                var n = i[r],
                                    a = i[r + 1];
                                e.left = Math.min(e.left, n), e.bottom = Math.min(e.bottom, a), e.right = Math.max(e.right, n), e.top = Math.max(e.top, a), s.push(n), s.push(a), 0 == r && s.push("l")
                            }
                            return s.push("x e"), i = s.join(" "), 0 < (s = (e.getWidth() - e.getHeight()) / 2) ? (e.bottom -= s, e.top += s) : (e.left += s, e.right -= s), i = {
                                path: i,
                                size: e.getWidth(),
                                left: e.left,
                                bottom: e.bottom
                            }, this.symbolCache[t] = i
                        },
                        CLASS_NAME: "OpenLayers.Renderer.VML"
                    }), OpenLayers.Renderer.VML.LABEL_SHIFT = {
                        l: 0,
                        c: .5,
                        r: 1,
                        t: 0,
                        m: .5,
                        b: 1
                    }, OpenLayers.Control.CacheRead = OpenLayers.Class(OpenLayers.Control, {
                        fetchEvent: "tileloadstart",
                        layers: null,
                        autoActivate: !0,
                        setMap: function (e) {
                            OpenLayers.Control.prototype.setMap.apply(this, arguments);
                            var t, i = this.layers || e.layers;
                            for (t = i.length - 1; 0 <= t; --t) this.addLayer({
                                layer: i[t]
                            });
                            this.layers || e.events.on({
                                addlayer: this.addLayer,
                                removeLayer: this.removeLayer,
                                scope: this
                            })
                        },
                        addLayer: function (e) {
                            e.layer.events.register(this.fetchEvent, this, this.fetch)
                        },
                        removeLayer: function (e) {
                            e.layer.events.unregister(this.fetchEvent, this, this.fetch)
                        },
                        fetch: function (e) {
                            if (this.active && window.localStorage && e.tile instanceof OpenLayers.Tile.Image) {
                                var t = e.tile,
                                    i = t.url;
                                !t.layer.crossOriginKeyword && OpenLayers.ProxyHost && 0 === i.indexOf(OpenLayers.ProxyHost) && (i = OpenLayers.Control.CacheWrite.urlMap[i]), (i = window.localStorage.getItem("olCache_" + i)) && (t.url = i, "tileerror" === e.type && t.setImgSrc(i))
                            }
                        },
                        destroy: function () {
                            if (this.layers || this.map) {
                                var e, t = this.layers || this.map.layers;
                                for (e = t.length - 1; 0 <= e; --e) this.removeLayer({
                                    layer: t[e]
                                })
                            }
                            this.map && this.map.events.un({
                                addlayer: this.addLayer,
                                removeLayer: this.removeLayer,
                                scope: this
                            }), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        CLASS_NAME: "OpenLayers.Control.CacheRead"
                    }), OpenLayers.Protocol.WFS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
                        version: "1.0.0",
                        CLASS_NAME: "OpenLayers.Protocol.WFS.v1_0_0"
                    }), OpenLayers.Format.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Format.XML, {
                        layerIdentifier: "_layer",
                        featureIdentifier: "_feature",
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        gmlFormat: null,
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e]));
                            var t = e.documentElement;
                            if (t) {
                                var i = this["read_" + t.nodeName];
                                e = i ? i.call(this, t) : new OpenLayers.Format.GML(this.options ? this.options : {}).read(e)
                            }
                            return e
                        },
                        read_msGMLOutput: function (e) {
                            var t = [];
                            if (e = this.getSiblingNodesByTagCriteria(e, this.layerIdentifier))
                                for (var i = 0, s = e.length; i < s; ++i) {
                                    var r = e[i],
                                        n = r.nodeName;
                                    if (r.prefix && (n = n.split(":")[1]), n = n.replace(this.layerIdentifier, ""), r = this.getSiblingNodesByTagCriteria(r, this.featureIdentifier))
                                        for (var a = 0; a < r.length; a++) {
                                            var o = r[a],
                                                l = this.parseGeometry(o);
                                            o = this.parseAttributes(o);
                                            (o = new OpenLayers.Feature.Vector(l.geometry, o, null)).bounds = l.bounds, o.type = n, t.push(o)
                                        }
                                }
                            return t
                        },
                        read_FeatureInfoResponse: function (e) {
                            for (var t = [], i = 0, s = (e = this.getElementsByTagNameNS(e, "*", "FIELDS")).length; i < s; i++) {
                                var r, n = e[i],
                                    a = {},
                                    o = n.attributes.length;
                                if (0 < o)
                                    for (r = 0; r < o; r++) {
                                        var l = n.attributes[r];
                                        a[l.nodeName] = l.nodeValue
                                    } else
                                        for (r = 0, o = (n = n.childNodes).length; r < o; ++r) 3 != (l = n[r]).nodeType && (a[l.getAttribute("name")] = l.getAttribute("value"));
                                t.push(new OpenLayers.Feature.Vector(null, a, null))
                            }
                            return t
                        },
                        getSiblingNodesByTagCriteria: function (e, t) {
                            var i, s, r, n, a = [];
                            if (e && e.hasChildNodes()) {
                                r = (i = e.childNodes).length;
                                for (var o = 0; o < r; o++) {
                                    for (n = i[o]; n && 1 != n.nodeType;) n = n.nextSibling, o++;
                                    0 < (s = n ? n.nodeName : "").length && -1 < s.indexOf(t) ? a.push(n) : 0 < (s = this.getSiblingNodesByTagCriteria(n, t)).length && (0 == a.length ? a = s : a.push(s))
                                }
                            }
                            return a
                        },
                        parseAttributes: function (e) {
                            var t = {};
                            if (1 == e.nodeType)
                                for (var i = (e = e.childNodes).length, s = 0; s < i; ++s) {
                                    if (1 == (n = e[s]).nodeType) {
                                        var r = n.childNodes,
                                            n = n.prefix ? n.nodeName.split(":")[1] : n.nodeName;
                                        0 == r.length ? t[n] = null : 1 == r.length && (3 == (r = r[0]).nodeType || 4 == r.nodeType) && (r = r.nodeValue.replace(this.regExes.trimSpace, ""), t[n] = r)
                                    }
                                }
                            return t
                        },
                        parseGeometry: function (e) {
                            this.gmlFormat || (this.gmlFormat = new OpenLayers.Format.GML);
                            var t, i = null;
                            return (e = this.gmlFormat.parseFeature(e)) && (t = e.geometry && e.geometry.clone(), i = e.bounds && e.bounds.clone(), e.destroy()), {
                                geometry: t,
                                bounds: i
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSGetFeatureInfo"
                    }), OpenLayers.Control.WMTSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {
                        hover: !1,
                        requestEncoding: "KVP",
                        drillDown: !1,
                        maxFeatures: 10,
                        clickCallback: "click",
                        layers: null,
                        queryVisible: !0,
                        infoFormat: "text/html",
                        vendorParams: {},
                        format: null,
                        formatOptions: null,
                        handler: null,
                        hoverRequest: null,
                        pending: 0,
                        initialize: function (e) {
                            (e = e || {}).handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [e]), this.format || (this.format = new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)), !0 === this.drillDown && (this.hover = !1), this.hover ? this.handler = new OpenLayers.Handler.Hover(this, {
                                move: this.cancelHover,
                                pause: this.getInfoForHover
                            }, OpenLayers.Util.extend(this.handlerOptions.hover || {}, {
                                delay: 250
                            })) : ((e = {})[this.clickCallback] = this.getInfoForClick, this.handler = new OpenLayers.Handler.Click(this, e, this.handlerOptions.click || {}))
                        },
                        getInfoForClick: function (e) {
                            this.request(e.xy, {})
                        },
                        getInfoForHover: function (e) {
                            this.request(e.xy, {
                                hover: !0
                            })
                        },
                        cancelHover: function () {
                            this.hoverRequest && (--this.pending, 0 >= this.pending && (OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"), this.pending = 0), this.hoverRequest.abort(), this.hoverRequest = null)
                        },
                        findLayers: function () {
                            for (var e, t = this.layers || this.map.layers, i = [], s = t.length - 1; 0 <= s && (!((e = t[s]) instanceof OpenLayers.Layer.WMTS) || e.requestEncoding !== this.requestEncoding || this.queryVisible && !e.getVisibility() || (i.push(e), this.drillDown && !this.hover)); --s);
                            return i
                        },
                        buildRequestOptions: function (e, t) {
                            var i = this.map.getLonLatFromPixel(t),
                                s = e.getURL(new OpenLayers.Bounds(i.lon, i.lat, i.lon, i.lat));
                            s = OpenLayers.Util.getParameters(s), i = e.getTileInfo(i);
                            return OpenLayers.Util.extend(s, {
                                service: "WMTS",
                                version: e.version,
                                request: "GetFeatureInfo",
                                infoFormat: this.infoFormat,
                                i: i.i,
                                j: i.j
                            }), OpenLayers.Util.applyDefaults(s, this.vendorParams), {
                                url: OpenLayers.Util.isArray(e.url) ? e.url[0] : e.url,
                                params: OpenLayers.Util.upperCaseObject(s),
                                callback: function (i) {
                                    this.handleResponse(t, i, e)
                                },
                                scope: this
                            }
                        },
                        request: function (e, t) {
                            t = t || {};
                            var i = this.findLayers();
                            if (0 < i.length) {
                                for (var s, r, n = 0, a = i.length; n < a; n++) r = i[n], !1 !== (s = this.events.triggerEvent("beforegetfeatureinfo", {
                                    xy: e,
                                    layer: r
                                })) && (++this.pending, s = this.buildRequestOptions(r, e), s = OpenLayers.Request.GET(s), !0 === t.hover && (this.hoverRequest = s));
                                0 < this.pending && OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait")
                            }
                        },
                        handleResponse: function (e, t, i) {
                            if (--this.pending, 0 >= this.pending && (OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"), this.pending = 0), t.status && (200 > t.status || 300 <= t.status)) this.events.triggerEvent("exception", {
                                xy: e,
                                request: t,
                                layer: i
                            });
                            else {
                                var s, r, n = t.responseXML;
                                n && n.documentElement || (n = t.responseText);
                                try {
                                    s = this.format.read(n)
                                } catch (s) {
                                    r = !0, this.events.triggerEvent("exception", {
                                        xy: e,
                                        request: t,
                                        error: s,
                                        layer: i
                                    })
                                }
                                r || this.events.triggerEvent("getfeatureinfo", {
                                    text: t.responseText,
                                    features: s,
                                    request: t,
                                    xy: e,
                                    layer: i
                                })
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.WMTSGetFeatureInfo"
                    }), OpenLayers.Protocol.CSW.v2_0_2 = OpenLayers.Class(OpenLayers.Protocol, {
                        formatOptions: null,
                        initialize: function (e) {
                            OpenLayers.Protocol.prototype.initialize.apply(this, [e]), e.format || (this.format = new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({}, this.formatOptions)))
                        },
                        destroy: function () {
                            this.options && !this.options.format && this.format.destroy(), this.format = null, OpenLayers.Protocol.prototype.destroy.apply(this)
                        },
                        read: function (e) {
                            e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
                            var t = new OpenLayers.Protocol.Response({
                                    requestType: "read"
                                }),
                                i = this.format.write(e.params || e);
                            return t.priv = OpenLayers.Request.POST({
                                url: e.url,
                                callback: this.createCallback(this.handleRead, t, e),
                                params: e.params,
                                headers: e.headers,
                                data: i
                            }), t
                        },
                        handleRead: function (e, t) {
                            if (t.callback) {
                                var i = e.priv;
                                200 <= i.status && 300 > i.status ? (e.data = this.parseData(i), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, t.callback.call(t.scope, e)
                            }
                        },
                        parseData: function (e) {
                            var t = e.responseXML;
                            return t && t.documentElement || (t = e.responseText), !t || 0 >= t.length ? null : this.format.read(t)
                        },
                        CLASS_NAME: "OpenLayers.Protocol.CSW.v2_0_2"
                    }), OpenLayers.Format.WCSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1, {
                        namespaces: {
                            wcs: "http://www.opengis.net/wcs/1.1",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance",
                            ows: "http://www.opengis.net/ows/1.1"
                        },
                        errorProperty: "operationsMetadata",
                        readers: {
                            wcs: OpenLayers.Util.applyDefaults({
                                Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Contents: function (e, t) {
                                    t.contentMetadata = [], this.readChildNodes(e, t.contentMetadata)
                                },
                                CoverageSummary: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.push(i)
                                },
                                Identifier: function (e, t) {
                                    t.identifier = this.getChildValue(e)
                                },
                                Title: function (e, t) {
                                    t.title = this.getChildValue(e)
                                },
                                Abstract: function (e, t) {
                                    t.abstract = this.getChildValue(e)
                                },
                                SupportedCRS: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (t.supportedCRS || (t.supportedCRS = []), t.supportedCRS.push(i))
                                },
                                SupportedFormat: function (e, t) {
                                    var i = this.getChildValue(e);
                                    i && (t.supportedFormat || (t.supportedFormat = []), t.supportedFormat.push(i))
                                }
                            }, OpenLayers.Format.WCSCapabilities.v1.prototype.readers.wcs),
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WCSCapabilities.v1_1_0"
                    }), OpenLayers.Control.Graticule = OpenLayers.Class(OpenLayers.Control, {
                        autoActivate: !0,
                        intervals: [45, 30, 20, 10, 5, 2, 1, .5, .2, .1, .05, .01, .005, .002, .001],
                        displayInLayerSwitcher: !0,
                        visible: !0,
                        numPoints: 50,
                        targetSize: 200,
                        layerName: null,
                        labelled: !0,
                        labelFormat: "dm",
                        lineSymbolizer: {
                            strokeColor: "#333",
                            strokeWidth: 1,
                            strokeOpacity: .5
                        },
                        labelSymbolizer: {},
                        gratLayer: null,
                        initialize: function (e) {
                            (e = e || {}).layerName = e.layerName || OpenLayers.i18n("Graticule"), OpenLayers.Control.prototype.initialize.apply(this, [e]), this.labelSymbolizer.stroke = !1, this.labelSymbolizer.fill = !1, this.labelSymbolizer.label = "${label}", this.labelSymbolizer.labelAlign = "${labelAlign}", this.labelSymbolizer.labelXOffset = "${xOffset}", this.labelSymbolizer.labelYOffset = "${yOffset}"
                        },
                        destroy: function () {
                            this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments), this.gratLayer && (this.gratLayer.destroy(), this.gratLayer = null)
                        },
                        draw: function () {
                            if (OpenLayers.Control.prototype.draw.apply(this, arguments), !this.gratLayer) {
                                var e = new OpenLayers.Style({}, {
                                    rules: [new OpenLayers.Rule({
                                        symbolizer: {
                                            Point: this.labelSymbolizer,
                                            Line: this.lineSymbolizer
                                        }
                                    })]
                                });
                                this.gratLayer = new OpenLayers.Layer.Vector(this.layerName, {
                                    styleMap: new OpenLayers.StyleMap({
                                        default: e
                                    }),
                                    visibility: this.visible,
                                    displayInLayerSwitcher: this.displayInLayerSwitcher
                                })
                            }
                            return this.div
                        },
                        activate: function () {
                            return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.map.addLayer(this.gratLayer), this.map.events.register("moveend", this, this.update), this.update(), !0)
                        },
                        deactivate: function () {
                            return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.map.events.unregister("moveend", this, this.update), this.map.removeLayer(this.gratLayer), !0)
                        },
                        update: function () {
                            var e = this.map.getExtent();
                            if (e) {
                                this.gratLayer.destroyFeatures();
                                var t = new OpenLayers.Projection("EPSG:4326"),
                                    i = this.map.getProjectionObject(),
                                    s = this.map.getResolution();
                                i.proj && "longlat" == i.proj.projName && (this.numPoints = 1);
                                var r = this.map.getCenter(),
                                    n = new OpenLayers.Pixel(r.lon, r.lat);
                                OpenLayers.Projection.transform(n, i, t);
                                var a;
                                for (r = (r = this.targetSize * s) * r, s = 0; s < this.intervals.length; ++s) {
                                    var o = (a = this.intervals[s]) / 2,
                                        l = n.offset({
                                            x: -o,
                                            y: -o
                                        });
                                    o = n.offset({
                                        x: o,
                                        y: o
                                    });
                                    if (OpenLayers.Projection.transform(l, t, i), OpenLayers.Projection.transform(o, t, i), (l.x - o.x) * (l.x - o.x) + (l.y - o.y) * (l.y - o.y) <= r) break
                                }
                                n.x = Math.floor(n.x / a) * a, n.y = Math.floor(n.y / a) * a;
                                var h;
                                s = 0, r = [n.clone()], o = n.clone();
                                do {
                                    o = o.offset({
                                        x: 0,
                                        y: a
                                    }), h = OpenLayers.Projection.transform(o.clone(), t, i), r.unshift(o)
                                } while (e.containsPixel(h) && 1e3 > ++s);
                                o = n.clone();
                                do {
                                    o = o.offset({
                                        x: 0,
                                        y: -a
                                    }), h = OpenLayers.Projection.transform(o.clone(), t, i), r.push(o)
                                } while (e.containsPixel(h) && 1e3 > ++s);
                                s = 0, l = [n.clone()], o = n.clone();
                                do {
                                    o = o.offset({
                                        x: -a,
                                        y: 0
                                    }), h = OpenLayers.Projection.transform(o.clone(), t, i), l.unshift(o)
                                } while (e.containsPixel(h) && 1e3 > ++s);
                                o = n.clone();
                                do {
                                    o = o.offset({
                                        x: a,
                                        y: 0
                                    }), h = OpenLayers.Projection.transform(o.clone(), t, i), l.push(o)
                                } while (e.containsPixel(h) && 1e3 > ++s);
                                for (a = [], s = 0; s < l.length; ++s) {
                                    h = l[s].x;
                                    n = [];
                                    var p = null,
                                        u = ((c = Math.min(r[0].y, 90)) - (o = Math.max(r[r.length - 1].y, -90))) / this.numPoints,
                                        c = o;
                                    for (o = 0; o <= this.numPoints; ++o) {
                                        var y = new OpenLayers.Geometry.Point(h, c);
                                        y.transform(t, i), n.push(y), c += u, y.y >= e.bottom && !p && (p = y)
                                    }
                                    this.labelled && (p = new OpenLayers.Geometry.Point(p.x, e.bottom), h = {
                                        value: h,
                                        label: this.labelled ? OpenLayers.Util.getFormattedLonLat(h, "lon", this.labelFormat) : "",
                                        labelAlign: "cb",
                                        xOffset: 0,
                                        yOffset: 2
                                    }, this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(p, h))), n = new OpenLayers.Geometry.LineString(n), a.push(new OpenLayers.Feature.Vector(n))
                                }
                                for (o = 0; o < r.length; ++o)
                                    if (!(-90 > (c = r[o].y) || 90 < c)) {
                                        for (n = [], s = l[0].x, u = (l[l.length - 1].x - s) / this.numPoints, h = s, p = null, s = 0; s <= this.numPoints; ++s)(y = new OpenLayers.Geometry.Point(h, c)).transform(t, i), n.push(y), h += u, y.x < e.right && (p = y);
                                        this.labelled && (p = new OpenLayers.Geometry.Point(e.right, p.y), h = {
                                            value: c,
                                            label: this.labelled ? OpenLayers.Util.getFormattedLonLat(c, "lat", this.labelFormat) : "",
                                            labelAlign: "rb",
                                            xOffset: -2,
                                            yOffset: 2
                                        }, this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(p, h))), n = new OpenLayers.Geometry.LineString(n), a.push(new OpenLayers.Feature.Vector(n))
                                    } this.gratLayer.addFeatures(a)
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.Graticule"
                    }), OpenLayers.Console.warn("OpenLayers.Rico is deprecated"), OpenLayers.Rico = OpenLayers.Rico || {}, OpenLayers.Rico.Corner = {
                        round: function (e, t) {
                            e = OpenLayers.Util.getElement(e), this._setOptions(t);
                            var i = this.options.color;
                            "fromElement" == this.options.color && (i = this._background(e));
                            var s = this.options.bgColor;
                            "fromParent" == this.options.bgColor && (s = this._background(e.offsetParent)), this._roundCornersImpl(e, i, s)
                        },
                        changeColor: function (e, t) {
                            e.style.backgroundColor = t;
                            for (var i = e.parentNode.getElementsByTagName("span"), s = 0; s < i.length; s++) i[s].style.backgroundColor = t
                        },
                        changeOpacity: function (e, t) {
                            var i = "alpha(opacity=" + 100 * t + ")";
                            e.style.opacity = t, e.style.filter = i;
                            for (var s = e.parentNode.getElementsByTagName("span"), r = 0; r < s.length; r++) s[r].style.opacity = t, s[r].style.filter = i
                        },
                        reRound: function (e, t) {
                            var i = e.parentNode.childNodes[2];
                            e.parentNode.removeChild(e.parentNode.childNodes[0]), e.parentNode.removeChild(i), this.round(e.parentNode, t)
                        },
                        _roundCornersImpl: function (e, t, i) {
                            this.options.border && this._renderBorder(e, i), this._isTopRounded() && this._roundTopCorners(e, t, i), this._isBottomRounded() && this._roundBottomCorners(e, t, i)
                        },
                        _renderBorder: function (e, t) {
                            var i = "1px solid " + this._borderColor(t);
                            e.innerHTML = "<div style='border-left: " + i + ";border-right: " + i + "'>" + e.innerHTML + "</div>"
                        },
                        _roundTopCorners: function (e, t, i) {
                            for (var s = this._createCorner(i), r = 0; r < this.options.numSlices; r++) s.appendChild(this._createCornerSlice(t, i, r, "top"));
                            e.style.paddingTop = 0, e.insertBefore(s, e.firstChild)
                        },
                        _roundBottomCorners: function (e, t, i) {
                            for (var s = this._createCorner(i), r = this.options.numSlices - 1; 0 <= r; r--) s.appendChild(this._createCornerSlice(t, i, r, "bottom"));
                            e.style.paddingBottom = 0, e.appendChild(s)
                        },
                        _createCorner: function (e) {
                            var t = document.createElement("div");
                            return t.style.backgroundColor = this._isTransparent() ? "transparent" : e, t
                        },
                        _createCornerSlice: function (e, t, i, s) {
                            var r = document.createElement("span"),
                                n = r.style;
                            return n.backgroundColor = e, n.display = "block", n.height = "1px", n.overflow = "hidden", n.fontSize = "1px", e = this._borderColor(e, t), this.options.border && 0 == i ? (n.borderTopStyle = "solid", n.borderTopWidth = "1px", n.borderLeftWidth = "0px", n.borderRightWidth = "0px", n.borderBottomWidth = "0px", n.height = "0px", n.borderColor = e) : e && (n.borderColor = e, n.borderStyle = "solid", n.borderWidth = "0px 1px"), this.options.compact || i != this.options.numSlices - 1 || (n.height = "2px"), this._setMargin(r, i, s), this._setBorder(r, i, s), r
                        },
                        _setOptions: function (e) {
                            this.options = {
                                corners: "all",
                                color: "fromElement",
                                bgColor: "fromParent",
                                blend: !0,
                                border: !1,
                                compact: !1
                            }, OpenLayers.Util.extend(this.options, e || {}), this.options.numSlices = this.options.compact ? 2 : 4, this._isTransparent() && (this.options.blend = !1)
                        },
                        _whichSideTop: function () {
                            return this._hasString(this.options.corners, "all", "top") || 0 <= this.options.corners.indexOf("tl") && 0 <= this.options.corners.indexOf("tr") ? "" : 0 <= this.options.corners.indexOf("tl") ? "left" : 0 <= this.options.corners.indexOf("tr") ? "right" : ""
                        },
                        _whichSideBottom: function () {
                            return this._hasString(this.options.corners, "all", "bottom") || 0 <= this.options.corners.indexOf("bl") && 0 <= this.options.corners.indexOf("br") ? "" : 0 <= this.options.corners.indexOf("bl") ? "left" : 0 <= this.options.corners.indexOf("br") ? "right" : ""
                        },
                        _borderColor: function (e, t) {
                            return "transparent" == e ? t : this.options.border ? this.options.border : this.options.blend ? this._blend(t, e) : ""
                        },
                        _setMargin: function (e, t, i) {
                            t = this._marginSize(t), "left" == (i = "top" == i ? this._whichSideTop() : this._whichSideBottom()) ? (e.style.marginLeft = t + "px", e.style.marginRight = "0px") : "right" == i ? (e.style.marginRight = t + "px", e.style.marginLeft = "0px") : (e.style.marginLeft = t + "px", e.style.marginRight = t + "px")
                        },
                        _setBorder: function (e, t, i) {
                            t = this._borderSize(t), "left" == (i = "top" == i ? this._whichSideTop() : this._whichSideBottom()) ? (e.style.borderLeftWidth = t + "px", e.style.borderRightWidth = "0px") : "right" == i ? (e.style.borderRightWidth = t + "px", e.style.borderLeftWidth = "0px") : (e.style.borderLeftWidth = t + "px", e.style.borderRightWidth = t + "px"), 0 != this.options.border && (e.style.borderLeftWidth = t + "px", e.style.borderRightWidth = t + "px")
                        },
                        _marginSize: function (e) {
                            if (this._isTransparent()) return 0;
                            return this.options.compact && this.options.blend ? [1, 0][e] : this.options.compact ? [2, 1][e] : this.options.blend ? [3, 2, 1, 0][e] : [5, 3, 2, 1][e]
                        },
                        _borderSize: function (e) {
                            return this.options.compact && (this.options.blend || this._isTransparent()) ? 1 : this.options.compact ? [1, 0][e] : this.options.blend ? [2, 1, 1, 1][e] : this.options.border ? [0, 2, 0, 0][e] : this._isTransparent() ? [5, 3, 2, 1][e] : 0
                        },
                        _hasString: function (e) {
                            for (var t = 1; t < arguments.length; t++)
                                if (0 <= e.indexOf(arguments[t])) return !0;
                            return !1
                        },
                        _blend: function (e, t) {
                            var i = OpenLayers.Rico.Color.createFromHex(e);
                            return i.blend(OpenLayers.Rico.Color.createFromHex(t)), i
                        },
                        _background: function (e) {
                            try {
                                return OpenLayers.Rico.Color.createColorFromBackground(e).asHex()
                            } catch (e) {
                                return "#ffffff"
                            }
                        },
                        _isTransparent: function () {
                            return "transparent" == this.options.color
                        },
                        _isTopRounded: function () {
                            return this._hasString(this.options.corners, "all", "top", "tl", "tr")
                        },
                        _isBottomRounded: function () {
                            return this._hasString(this.options.corners, "all", "bottom", "bl", "br")
                        },
                        _hasSingleTextChild: function (e) {
                            return 1 == e.childNodes.length && 3 == e.childNodes[0].nodeType
                        }
                    }, OpenLayers.Control.NavigationHistory = OpenLayers.Class(OpenLayers.Control, {
                        type: OpenLayers.Control.TYPE_TOGGLE,
                        previous: null,
                        previousOptions: null,
                        next: null,
                        nextOptions: null,
                        limit: 50,
                        autoActivate: !0,
                        clearOnDeactivate: !1,
                        registry: null,
                        nextStack: null,
                        previousStack: null,
                        listeners: null,
                        restoring: !1,
                        initialize: function (e) {
                            OpenLayers.Control.prototype.initialize.apply(this, [e]), this.registry = OpenLayers.Util.extend({
                                moveend: this.getState
                            }, this.registry), e = {
                                trigger: OpenLayers.Function.bind(this.previousTrigger, this),
                                displayClass: this.displayClass + " " + this.displayClass + "Previous"
                            }, OpenLayers.Util.extend(e, this.previousOptions), this.previous = new OpenLayers.Control.Button(e), e = {
                                trigger: OpenLayers.Function.bind(this.nextTrigger, this),
                                displayClass: this.displayClass + " " + this.displayClass + "Next"
                            }, OpenLayers.Util.extend(e, this.nextOptions), this.next = new OpenLayers.Control.Button(e), this.clear()
                        },
                        onPreviousChange: function (e, t) {
                            e && !this.previous.active ? this.previous.activate() : !e && this.previous.active && this.previous.deactivate()
                        },
                        onNextChange: function (e, t) {
                            e && !this.next.active ? this.next.activate() : !e && this.next.active && this.next.deactivate()
                        },
                        destroy: function () {
                            for (var e in OpenLayers.Control.prototype.destroy.apply(this), this.previous.destroy(), this.next.destroy(), this.deactivate(), this) this[e] = null
                        },
                        setMap: function (e) {
                            this.map = e, this.next.setMap(e), this.previous.setMap(e)
                        },
                        draw: function () {
                            OpenLayers.Control.prototype.draw.apply(this, arguments), this.next.draw(), this.previous.draw()
                        },
                        previousTrigger: function () {
                            var e = this.previousStack.shift(),
                                t = this.previousStack.shift();
                            return null != t ? (this.nextStack.unshift(e), this.previousStack.unshift(t), this.restoring = !0, this.restore(t), this.restoring = !1, this.onNextChange(this.nextStack[0], this.nextStack.length), this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1)) : this.previousStack.unshift(e), t
                        },
                        nextTrigger: function () {
                            var e = this.nextStack.shift();
                            return null != e && (this.previousStack.unshift(e), this.restoring = !0, this.restore(e), this.restoring = !1, this.onNextChange(this.nextStack[0], this.nextStack.length), this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1)), e
                        },
                        clear: function () {
                            this.previousStack = [], this.previous.deactivate(), this.nextStack = [], this.next.deactivate()
                        },
                        getState: function () {
                            return {
                                center: this.map.getCenter(),
                                resolution: this.map.getResolution(),
                                projection: this.map.getProjectionObject(),
                                units: this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units
                            }
                        },
                        restore: function (e) {
                            var t, i;
                            if (this.map.getProjectionObject() == e.projection) i = this.map.getZoomForResolution(e.resolution), t = e.center;
                            else {
                                (t = e.center.clone()).transform(e.projection, this.map.getProjectionObject()), i = e.units;
                                var s = this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units;
                                i = this.map.getZoomForResolution((i && s ? OpenLayers.INCHES_PER_UNIT[i] / OpenLayers.INCHES_PER_UNIT[s] : 1) * e.resolution)
                            }
                            this.map.setCenter(t, i)
                        },
                        setListeners: function () {
                            for (var e in this.listeners = {}, this.registry) this.listeners[e] = OpenLayers.Function.bind((function () {
                                if (!this.restoring) {
                                    var t = this.registry[e].apply(this, arguments);
                                    this.previousStack.unshift(t), 1 < this.previousStack.length && this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1), this.previousStack.length > this.limit + 1 && this.previousStack.pop(), 0 < this.nextStack.length && (this.nextStack = [], this.onNextChange(null, 0))
                                }
                                return !0
                            }), this)
                        },
                        activate: function () {
                            var e = !1;
                            if (this.map && OpenLayers.Control.prototype.activate.apply(this)) {
                                for (var t in null == this.listeners && this.setListeners(), this.listeners) this.map.events.register(t, this, this.listeners[t]);
                                e = !0, 0 == this.previousStack.length && this.initStack()
                            }
                            return e
                        },
                        initStack: function () {
                            this.map.getCenter() && this.listeners.moveend()
                        },
                        deactivate: function () {
                            var e = !1;
                            if (this.map && OpenLayers.Control.prototype.deactivate.apply(this)) {
                                for (var t in this.listeners) this.map.events.unregister(t, this, this.listeners[t]);
                                this.clearOnDeactivate && this.clear(), e = !0
                            }
                            return e
                        },
                        CLASS_NAME: "OpenLayers.Control.NavigationHistory"
                    }), OpenLayers.Layer.UTFGrid = OpenLayers.Class(OpenLayers.Layer.XYZ, {
                        isBaseLayer: !1,
                        projection: new OpenLayers.Projection("EPSG:900913"),
                        useJSONP: !1,
                        tileClass: OpenLayers.Tile.UTFGrid,
                        initialize: function (e) {
                            OpenLayers.Layer.Grid.prototype.initialize.apply(this, [e.name, e.url, {}, e]), this.tileOptions = OpenLayers.Util.extend({
                                utfgridResolution: this.utfgridResolution
                            }, this.tileOptions)
                        },
                        createBackBuffer: function () {},
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.UTFGrid(this.getOptions())), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getFeatureInfo: function (e) {
                            var t = null;
                            return (e = this.getTileData(e)) && e.tile && (t = e.tile.getFeatureInfo(e.i, e.j)), t
                        },
                        getFeatureId: function (e) {
                            var t = null;
                            return (e = this.getTileData(e)).tile && (t = e.tile.getFeatureId(e.i, e.j)), t
                        },
                        CLASS_NAME: "OpenLayers.Layer.UTFGrid"
                    }), OpenLayers.TileManager = OpenLayers.Class({
                        cacheSize: 256,
                        tilesPerFrame: 2,
                        frameDelay: 16,
                        moveDelay: 100,
                        zoomDelay: 200,
                        maps: null,
                        tileQueueId: null,
                        tileQueue: null,
                        tileCache: null,
                        tileCacheIndex: null,
                        initialize: function (e) {
                            OpenLayers.Util.extend(this, e), this.maps = [], this.tileQueueId = {}, this.tileQueue = {}, this.tileCache = {}, this.tileCacheIndex = []
                        },
                        addMap: function (e) {
                            if (!this._destroyed && OpenLayers.Layer.Grid) {
                                this.maps.push(e), this.tileQueue[e.id] = [];
                                for (var t = 0, i = e.layers.length; t < i; ++t) this.addLayer({
                                    layer: e.layers[t]
                                });
                                e.events.on({
                                    move: this.move,
                                    zoomend: this.zoomEnd,
                                    changelayer: this.changeLayer,
                                    addlayer: this.addLayer,
                                    preremovelayer: this.removeLayer,
                                    scope: this
                                })
                            }
                        },
                        removeMap: function (e) {
                            if (!this._destroyed && OpenLayers.Layer.Grid) {
                                if (window.clearTimeout(this.tileQueueId[e.id]), e.layers)
                                    for (var t = 0, i = e.layers.length; t < i; ++t) this.removeLayer({
                                        layer: e.layers[t]
                                    });
                                e.events && e.events.un({
                                    move: this.move,
                                    zoomend: this.zoomEnd,
                                    changelayer: this.changeLayer,
                                    addlayer: this.addLayer,
                                    preremovelayer: this.removeLayer,
                                    scope: this
                                }), delete this.tileQueue[e.id], delete this.tileQueueId[e.id], OpenLayers.Util.removeItem(this.maps, e)
                            }
                        },
                        move: function (e) {
                            this.updateTimeout(e.object, this.moveDelay, !0)
                        },
                        zoomEnd: function (e) {
                            this.updateTimeout(e.object, this.zoomDelay)
                        },
                        changeLayer: function (e) {
                            "visibility" !== e.property && "params" !== e.property || this.updateTimeout(e.object, 0)
                        },
                        addLayer: function (e) {
                            var t, i, s;
                            if ((e = e.layer) instanceof OpenLayers.Layer.Grid)
                                for (e.events.on({
                                        addtile: this.addTile,
                                        retile: this.clearTileQueue,
                                        scope: this
                                    }), t = e.grid.length - 1; 0 <= t; --t)
                                    for (i = e.grid[t].length - 1; 0 <= i; --i) s = e.grid[t][i], this.addTile({
                                        tile: s
                                    }), s.url && !s.imgDiv && this.manageTileCache({
                                        object: s
                                    })
                        },
                        removeLayer: function (e) {
                            var t, i, s;
                            if ((e = e.layer) instanceof OpenLayers.Layer.Grid && (this.clearTileQueue({
                                    object: e
                                }), e.events && e.events.un({
                                    addtile: this.addTile,
                                    retile: this.clearTileQueue,
                                    scope: this
                                }), e.grid))
                                for (t = e.grid.length - 1; 0 <= t; --t)
                                    for (i = e.grid[t].length - 1; 0 <= i; --i) s = e.grid[t][i], this.unloadTile({
                                        object: s
                                    })
                        },
                        updateTimeout: function (e, t, i) {
                            window.clearTimeout(this.tileQueueId[e.id]);
                            var s = this.tileQueue[e.id];
                            i && !s.length || (this.tileQueueId[e.id] = window.setTimeout(OpenLayers.Function.bind((function () {
                                this.drawTilesFromQueue(e), s.length && this.updateTimeout(e, this.frameDelay)
                            }), this), t))
                        },
                        addTile: function (e) {
                            e.tile instanceof OpenLayers.Tile.Image ? e.tile.events.on({
                                beforedraw: this.queueTileDraw,
                                beforeload: this.manageTileCache,
                                loadend: this.addToCache,
                                unload: this.unloadTile,
                                scope: this
                            }) : this.removeLayer({
                                layer: e.tile.layer
                            })
                        },
                        unloadTile: function (e) {
                            (e = e.object).events.un({
                                beforedraw: this.queueTileDraw,
                                beforeload: this.manageTileCache,
                                loadend: this.addToCache,
                                unload: this.unloadTile,
                                scope: this
                            }), OpenLayers.Util.removeItem(this.tileQueue[e.layer.map.id], e)
                        },
                        queueTileDraw: function (e) {
                            var t = !1,
                                i = (e = e.object).layer,
                                s = i.getURL(e.bounds),
                                r = this.tileCache[s];
                            return r && "olTileImage" !== r.className && (delete this.tileCache[s], OpenLayers.Util.removeItem(this.tileCacheIndex, s), r = null), !i.url || !i.async && r || (t = this.tileQueue[i.map.id], ~OpenLayers.Util.indexOf(t, e) || t.push(e), t = !0), !t
                        },
                        drawTilesFromQueue: function (e) {
                            var t = this.tileQueue[e.id],
                                i = this.tilesPerFrame;
                            for (e = e.zoomTween && e.zoomTween.playing; !e && t.length && i;) t.shift().draw(!0), --i
                        },
                        manageTileCache: function (e) {
                            e = e.object;
                            var t = this.tileCache[e.url];
                            t && (t.parentNode && OpenLayers.Element.hasClass(t.parentNode, "olBackBuffer") && (t.parentNode.removeChild(t), t.id = null), t.parentNode || (t.style.visibility = "hidden", t.style.opacity = 0, e.setImage(t), OpenLayers.Util.removeItem(this.tileCacheIndex, e.url), this.tileCacheIndex.push(e.url)))
                        },
                        addToCache: function (e) {
                            e = e.object, this.tileCache[e.url] || OpenLayers.Element.hasClass(e.imgDiv, "olImageLoadError") || (this.tileCacheIndex.length >= this.cacheSize && (delete this.tileCache[this.tileCacheIndex[0]], this.tileCacheIndex.shift()), this.tileCache[e.url] = e.imgDiv, this.tileCacheIndex.push(e.url))
                        },
                        clearTileQueue: function (e) {
                            e = e.object;
                            for (var t = this.tileQueue[e.map.id], i = t.length - 1; 0 <= i; --i) t[i].layer === e && t.splice(i, 1)
                        },
                        destroy: function () {
                            for (var e = this.maps.length - 1; 0 <= e; --e) this.removeMap(this.maps[e]);
                            this.tileCacheIndex = this.tileCache = this.tileQueueId = this.tileQueue = this.maps = null, this._destroyed = !0
                        }
                    }), OpenLayers.Layer.ArcGISCache = OpenLayers.Class(OpenLayers.Layer.XYZ, {
                        url: null,
                        tileOrigin: null,
                        tileSize: new OpenLayers.Size(256, 256),
                        useArcGISServer: !0,
                        type: "png",
                        useScales: !1,
                        overrideDPI: !1,
                        initialize: function (e, t, i) {
                            if (OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments), this.resolutions && (this.serverResolutions = this.resolutions, this.maxExtent = this.getMaxExtentForResolution(this.resolutions[0])), this.layerInfo) {
                                var s = this.layerInfo,
                                    r = new OpenLayers.Bounds(s.fullExtent.xmin, s.fullExtent.ymin, s.fullExtent.xmax, s.fullExtent.ymax);
                                if (this.projection = "EPSG:" + s.spatialReference.wkid, this.sphericalMercator = 102100 == s.spatialReference.wkid, this.units = "esriFeet" == s.units ? "ft" : "m", s.tileInfo) {
                                    this.tileSize = new OpenLayers.Size(s.tileInfo.width || s.tileInfo.cols, s.tileInfo.height || s.tileInfo.rows), this.tileOrigin = new OpenLayers.LonLat(s.tileInfo.origin.x, s.tileInfo.origin.y);
                                    var n = new OpenLayers.Geometry.Point(r.left, r.top);
                                    r = new OpenLayers.Geometry.Point(r.right, r.bottom);
                                    for (var a in this.useScales ? this.scales = [] : this.resolutions = [], this.lods = [], s.tileInfo.lods)
                                        if (s.tileInfo.lods.hasOwnProperty(a)) {
                                            var o = s.tileInfo.lods[a];
                                            this.useScales ? this.scales.push(o.scale) : this.resolutions.push(o.resolution);
                                            var l = this.getContainingTileCoords(n, o.resolution);
                                            o.startTileCol = l.x, o.startTileRow = l.y, l = this.getContainingTileCoords(r, o.resolution), o.endTileCol = l.x, o.endTileRow = l.y, this.lods.push(o)
                                        } this.maxExtent = this.calculateMaxExtentWithLOD(this.lods[0]), this.serverResolutions = this.resolutions, this.overrideDPI && s.tileInfo.dpi && (OpenLayers.DOTS_PER_INCH = s.tileInfo.dpi)
                                }
                            }
                        },
                        getContainingTileCoords: function (e, t) {
                            return new OpenLayers.Pixel(Math.max(Math.floor((e.x - this.tileOrigin.lon) / (this.tileSize.w * t)), 0), Math.max(Math.floor((this.tileOrigin.lat - e.y) / (this.tileSize.h * t)), 0))
                        },
                        calculateMaxExtentWithLOD: function (e) {
                            var t = this.tileOrigin.lon + e.startTileCol * this.tileSize.w * e.resolution,
                                i = this.tileOrigin.lat - e.startTileRow * this.tileSize.h * e.resolution;
                            return new OpenLayers.Bounds(t, i - (e.endTileRow - e.startTileRow + 1) * this.tileSize.h * e.resolution, t + (e.endTileCol - e.startTileCol + 1) * this.tileSize.w * e.resolution, i)
                        },
                        calculateMaxExtentWithExtent: function (e, t) {
                            var i = new OpenLayers.Geometry.Point(e.left, e.top),
                                s = new OpenLayers.Geometry.Point(e.right, e.bottom);
                            i = this.getContainingTileCoords(i, t), s = this.getContainingTileCoords(s, t);
                            return this.calculateMaxExtentWithLOD({
                                resolution: t,
                                startTileCol: i.x,
                                startTileRow: i.y,
                                endTileCol: s.x,
                                endTileRow: s.y
                            })
                        },
                        getUpperLeftTileCoord: function (e) {
                            var t = new OpenLayers.Geometry.Point(this.maxExtent.left, this.maxExtent.top);
                            return this.getContainingTileCoords(t, e)
                        },
                        getLowerRightTileCoord: function (e) {
                            var t = new OpenLayers.Geometry.Point(this.maxExtent.right, this.maxExtent.bottom);
                            return this.getContainingTileCoords(t, e)
                        },
                        getMaxExtentForResolution: function (e) {
                            var t = this.getUpperLeftTileCoord(e),
                                i = this.getLowerRightTileCoord(e),
                                s = this.tileOrigin.lon + t.x * this.tileSize.w * e,
                                r = this.tileOrigin.lat - t.y * this.tileSize.h * e;
                            return new OpenLayers.Bounds(s, r - (i.y - t.y + 1) * this.tileSize.h * e, s + (i.x - t.x + 1) * this.tileSize.w * e, r)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.ArcGISCache(this.name, this.url, this.options)), OpenLayers.Layer.XYZ.prototype.clone.apply(this, [e])
                        },
                        initGriddedTiles: function (e) {
                            delete this._tileOrigin, OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this, arguments)
                        },
                        getMaxExtent: function () {
                            var e = this.map.getResolution();
                            return this.maxExtent = this.getMaxExtentForResolution(e)
                        },
                        getTileOrigin: function () {
                            if (!this._tileOrigin) {
                                var e = this.getMaxExtent();
                                this._tileOrigin = new OpenLayers.LonLat(e.left, e.bottom)
                            }
                            return this._tileOrigin
                        },
                        getURL: function (e) {
                            var t = this.getResolution(),
                                i = this.tileOrigin.lon + t * this.tileSize.w / 2,
                                s = this.tileOrigin.lat - t * this.tileSize.h / 2;
                            if (e = e.getCenterLonLat(), i = Math.round(Math.abs((e.lon - i) / (t * this.tileSize.w))), s = Math.round(Math.abs((s - e.lat) / (t * this.tileSize.h))), e = this.map.getZoom(), this.lods) {
                                if (i < (t = this.lods[this.map.getZoom()]).startTileCol || i > t.endTileCol || s < t.startTileRow || s > t.endTileRow) return null
                            } else {
                                var r = this.getUpperLeftTileCoord(t);
                                t = this.getLowerRightTileCoord(t);
                                if (i < r.x || i >= t.x || s < r.y || s >= t.y) return null
                            }
                            return t = this.url, r = "" + i + s + e, OpenLayers.Util.isArray(t) && (t = this.selectUrl(r, t)), this.useArcGISServer ? t += "/tile/${z}/${y}/${x}" : (i = "C" + OpenLayers.Number.zeroPad(i, 8, 16), s = "R" + OpenLayers.Number.zeroPad(s, 8, 16), e = "L" + OpenLayers.Number.zeroPad(e, 2, 10), t = t + "/${z}/${y}/${x}." + this.type), t = OpenLayers.String.format(t, {
                                x: i,
                                y: s,
                                z: e
                            }), OpenLayers.Util.urlAppend(t, OpenLayers.Util.getParameterString(this.params))
                        },
                        CLASS_NAME: "OpenLayers.Layer.ArcGISCache"
                    }), OpenLayers.Control.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {
                        hover: !1,
                        drillDown: !1,
                        maxFeatures: 10,
                        clickCallback: "click",
                        output: "features",
                        layers: null,
                        queryVisible: !1,
                        url: null,
                        layerUrls: null,
                        infoFormat: "text/html",
                        vendorParams: {},
                        format: null,
                        formatOptions: null,
                        handler: null,
                        hoverRequest: null,
                        initialize: function (e) {
                            (e = e || {}).handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [e]), this.format || (this.format = new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)), !0 === this.drillDown && (this.hover = !1), this.hover ? this.handler = new OpenLayers.Handler.Hover(this, {
                                move: this.cancelHover,
                                pause: this.getInfoForHover
                            }, OpenLayers.Util.extend(this.handlerOptions.hover || {}, {
                                delay: 250
                            })) : ((e = {})[this.clickCallback] = this.getInfoForClick, this.handler = new OpenLayers.Handler.Click(this, e, this.handlerOptions.click || {}))
                        },
                        getInfoForClick: function (e) {
                            this.events.triggerEvent("beforegetfeatureinfo", {
                                xy: e.xy
                            }), OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait"), this.request(e.xy, {})
                        },
                        getInfoForHover: function (e) {
                            this.events.triggerEvent("beforegetfeatureinfo", {
                                xy: e.xy
                            }), this.request(e.xy, {
                                hover: !0
                            })
                        },
                        cancelHover: function () {
                            this.hoverRequest && (this.hoverRequest.abort(), this.hoverRequest = null)
                        },
                        findLayers: function () {
                            for (var e, t, i = this.layers || this.map.layers, s = [], r = i.length - 1; 0 <= r; --r)(e = i[r]) instanceof OpenLayers.Layer.WMS && (!this.queryVisible || e.getVisibility()) && (t = OpenLayers.Util.isArray(e.url) ? e.url[0] : e.url, !1 !== this.drillDown || this.url || (this.url = t), (!0 === this.drillDown || this.urlMatches(t)) && s.push(e));
                            return s
                        },
                        urlMatches: function (e) {
                            var t = OpenLayers.Util.isEquivalentUrl(this.url, e);
                            if (!t && this.layerUrls)
                                for (var i = 0, s = this.layerUrls.length; i < s; ++i)
                                    if (OpenLayers.Util.isEquivalentUrl(this.layerUrls[i], e)) {
                                        t = !0;
                                        break
                                    } return t
                        },
                        buildWMSOptions: function (e, t, i, s) {
                            for (var r = [], n = [], a = 0, o = t.length; a < o; a++) null != t[a].params.LAYERS && (r = r.concat(t[a].params.LAYERS), n = n.concat(this.getStyleNames(t[a])));
                            return t = t[0], a = this.map.getProjection(), (o = t.projection) && o.equals(this.map.getProjectionObject()) && (a = o.getCode()), s = OpenLayers.Util.extend({
                                service: "WMS",
                                version: t.params.VERSION,
                                request: "GetFeatureInfo",
                                exceptions: t.params.EXCEPTIONS,
                                bbox: this.map.getExtent().toBBOX(null, t.reverseAxisOrder()),
                                feature_count: this.maxFeatures,
                                height: this.map.getSize().h,
                                width: this.map.getSize().w,
                                format: s,
                                info_format: t.params.INFO_FORMAT || this.infoFormat
                            }, 1.3 <= parseFloat(t.params.VERSION) ? {
                                crs: a,
                                i: parseInt(i.x),
                                j: parseInt(i.y)
                            } : {
                                srs: a,
                                x: parseInt(i.x),
                                y: parseInt(i.y)
                            }), 0 != r.length && (s = OpenLayers.Util.extend({
                                layers: r,
                                query_layers: r,
                                styles: n
                            }, s)), OpenLayers.Util.applyDefaults(s, this.vendorParams), {
                                url: e,
                                params: OpenLayers.Util.upperCaseObject(s),
                                callback: function (t) {
                                    this.handleResponse(i, t, e)
                                },
                                scope: this
                            }
                        },
                        getStyleNames: function (e) {
                            return e.params.STYLES ? e.params.STYLES : OpenLayers.Util.isArray(e.params.LAYERS) ? Array(e.params.LAYERS.length) : e.params.LAYERS.replace(/[^,]/g, "")
                        },
                        request: function (e, t) {
                            if (0 == (i = this.findLayers()).length) this.events.triggerEvent("nogetfeatureinfo"), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
                            else if (t = t || {}, !1 === this.drillDown) {
                                var i = this.buildWMSOptions(this.url, i, e, i[0].params.FORMAT),
                                    s = OpenLayers.Request.GET(i);
                                !0 === t.hover && (this.hoverRequest = s)
                            } else {
                                this._numRequests = this._requestCount = 0, this.features = [];
                                s = {};
                                for (var r, n = 0, a = i.length; n < a; n++) {
                                    var o = i[n];
                                    (r = OpenLayers.Util.isArray(o.url) ? o.url[0] : o.url) in s ? s[r].push(o) : (this._numRequests++, s[r] = [o])
                                }
                                for (r in s) i = s[r], i = this.buildWMSOptions(r, i, e, i[0].params.FORMAT), OpenLayers.Request.GET(i)
                            }
                        },
                        triggerGetFeatureInfo: function (e, t, i) {
                            this.events.triggerEvent("getfeatureinfo", {
                                text: e.responseText,
                                features: i,
                                request: e,
                                xy: t
                            }), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait")
                        },
                        handleResponse: function (e, t, i) {
                            var s = t.responseXML;
                            s && s.documentElement || (s = t.responseText), s = this.format.read(s), !1 === this.drillDown ? this.triggerGetFeatureInfo(t, e, s) : (this._requestCount++, this._features = "object" === this.output ? (this._features || []).concat({
                                url: i,
                                features: s
                            }) : (this._features || []).concat(s), this._requestCount === this._numRequests && (this.triggerGetFeatureInfo(t, e, this._features.concat()), delete this._features, delete this._requestCount, delete this._numRequests))
                        },
                        CLASS_NAME: "OpenLayers.Control.WMSGetFeatureInfo"
                    }), OpenLayers.Format.WMSCapabilities.v1_3_0 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3, {
                        version: "1.3.0",
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1_3_0"
                    }), OpenLayers.Format.SOSGetFeatureOfInterest = OpenLayers.Class(OpenLayers.Format.XML, {
                        VERSION: "1.0.0",
                        namespaces: {
                            sos: "http://www.opengis.net/sos/1.0",
                            gml: "http://www.opengis.net/gml",
                            sa: "http://www.opengis.net/sampling/1.0",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        schemaLocation: "http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",
                        defaultPrefix: "sos",
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {
                                features: []
                            };
                            this.readNode(e, t), e = [];
                            for (var i = 0, s = t.features.length; i < s; i++) {
                                var r = t.features[i];
                                this.internalProjection && this.externalProjection && r.components[0] && r.components[0].transform(this.externalProjection, this.internalProjection), r = new OpenLayers.Feature.Vector(r.components[0], r.attributes), e.push(r)
                            }
                            return e
                        },
                        readers: {
                            sa: {
                                SamplingPoint: function (e, t) {
                                    if (!t.attributes) {
                                        var i = {
                                            attributes: {}
                                        };
                                        t.features.push(i), t = i
                                    }
                                    t.attributes.id = this.getAttributeNS(e, this.namespaces.gml, "id"), this.readChildNodes(e, t)
                                },
                                position: function (e, t) {
                                    this.readChildNodes(e, t)
                                }
                            },
                            gml: OpenLayers.Util.applyDefaults({
                                FeatureCollection: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                featureMember: function (e, t) {
                                    var i = {
                                        attributes: {}
                                    };
                                    t.features.push(i), this.readChildNodes(e, i)
                                },
                                name: function (e, t) {
                                    t.attributes.name = this.getChildValue(e)
                                },
                                pos: function (e, t) {
                                    this.externalProjection || (this.externalProjection = new OpenLayers.Projection(e.getAttribute("srsName"))), OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this, [e, t])
                                }
                            }, OpenLayers.Format.GML.v3.prototype.readers.gml)
                        },
                        writers: {
                            sos: {
                                GetFeatureOfInterest: function (e) {
                                    for (var t = this.createElementNSPlus("GetFeatureOfInterest", {
                                            attributes: {
                                                version: this.VERSION,
                                                service: "SOS",
                                                "xsi:schemaLocation": this.schemaLocation
                                            }
                                        }), i = 0, s = e.fois.length; i < s; i++) this.writeNode("FeatureOfInterestId", {
                                        foi: e.fois[i]
                                    }, t);
                                    return t
                                },
                                FeatureOfInterestId: function (e) {
                                    return this.createElementNSPlus("FeatureOfInterestId", {
                                        value: e.foi
                                    })
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.SOSGetFeatureOfInterest"
                    }), OpenLayers.Format.SOSGetObservation = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            ows: "http://www.opengis.net/ows",
                            gml: "http://www.opengis.net/gml",
                            sos: "http://www.opengis.net/sos/1.0",
                            ogc: "http://www.opengis.net/ogc",
                            om: "http://www.opengis.net/om/1.0",
                            sa: "http://www.opengis.net/sampling/1.0",
                            xlink: "http://www.w3.org/1999/xlink",
                            xsi: "http://www.w3.org/2001/XMLSchema-instance"
                        },
                        regExes: {
                            trimSpace: /^\s*|\s*$/g,
                            removeSpace: /\s*/g,
                            splitSpace: /\s+/,
                            trimComma: /\s*,\s*/g
                        },
                        VERSION: "1.0.0",
                        schemaLocation: "http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",
                        defaultPrefix: "sos",
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {
                                measurements: [],
                                observations: []
                            };
                            return this.readNode(e, t), t
                        },
                        write: function (e) {
                            return (e = this.writeNode("sos:GetObservation", e)).setAttribute("xmlns:om", this.namespaces.om), e.setAttribute("xmlns:ogc", this.namespaces.ogc), this.setAttributeNS(e, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), OpenLayers.Format.XML.prototype.write.apply(this, [e])
                        },
                        readers: {
                            om: {
                                ObservationCollection: function (e, t) {
                                    t.id = this.getAttributeNS(e, this.namespaces.gml, "id"), this.readChildNodes(e, t)
                                },
                                member: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Measurement: function (e, t) {
                                    var i = {};
                                    t.measurements.push(i), this.readChildNodes(e, i)
                                },
                                Observation: function (e, t) {
                                    var i = {};
                                    t.observations.push(i), this.readChildNodes(e, i)
                                },
                                samplingTime: function (e, t) {
                                    var i = {};
                                    t.samplingTime = i, this.readChildNodes(e, i)
                                },
                                observedProperty: function (e, t) {
                                    t.observedProperty = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t)
                                },
                                procedure: function (e, t) {
                                    t.procedure = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t)
                                },
                                featureOfInterest: function (e, t) {
                                    var i = {
                                        features: []
                                    };
                                    t.fois = [], t.fois.push(i), this.readChildNodes(e, i);
                                    for (var s = [], r = 0, n = i.features.length; r < n; r++) {
                                        var a = i.features[r];
                                        s.push(new OpenLayers.Feature.Vector(a.components[0], a.attributes))
                                    }
                                    i.features = s
                                },
                                result: function (e, t) {
                                    var i = {};
                                    t.result = i, "" !== this.getChildValue(e) ? (i.value = this.getChildValue(e), i.uom = e.getAttribute("uom")) : this.readChildNodes(e, i)
                                }
                            },
                            sa: OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,
                            gml: OpenLayers.Util.applyDefaults({
                                TimeInstant: function (e, t) {
                                    var i = {};
                                    t.timeInstant = i, this.readChildNodes(e, i)
                                },
                                timePosition: function (e, t) {
                                    t.timePosition = this.getChildValue(e)
                                }
                            }, OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)
                        },
                        writers: {
                            sos: {
                                GetObservation: function (e) {
                                    var t = this.createElementNSPlus("GetObservation", {
                                        attributes: {
                                            version: this.VERSION,
                                            service: "SOS"
                                        }
                                    });
                                    for (var i in this.writeNode("offering", e, t), e.eventTime && this.writeNode("eventTime", e, t), e.procedures) this.writeNode("procedure", e.procedures[i], t);
                                    for (var s in e.observedProperties) this.writeNode("observedProperty", e.observedProperties[s], t);
                                    return e.foi && this.writeNode("featureOfInterest", e.foi, t), this.writeNode("responseFormat", e, t), e.resultModel && this.writeNode("resultModel", e, t), e.responseMode && this.writeNode("responseMode", e, t), t
                                },
                                featureOfInterest: function (e) {
                                    var t = this.createElementNSPlus("featureOfInterest");
                                    return this.writeNode("ObjectID", e.objectId, t), t
                                },
                                ObjectID: function (e) {
                                    return this.createElementNSPlus("ObjectID", {
                                        value: e
                                    })
                                },
                                responseFormat: function (e) {
                                    return this.createElementNSPlus("responseFormat", {
                                        value: e.responseFormat
                                    })
                                },
                                procedure: function (e) {
                                    return this.createElementNSPlus("procedure", {
                                        value: e
                                    })
                                },
                                offering: function (e) {
                                    return this.createElementNSPlus("offering", {
                                        value: e.offering
                                    })
                                },
                                observedProperty: function (e) {
                                    return this.createElementNSPlus("observedProperty", {
                                        value: e
                                    })
                                },
                                eventTime: function (e) {
                                    var t = this.createElementNSPlus("eventTime");
                                    return "latest" === e.eventTime && this.writeNode("ogc:TM_Equals", e, t), t
                                },
                                resultModel: function (e) {
                                    return this.createElementNSPlus("resultModel", {
                                        value: e.resultModel
                                    })
                                },
                                responseMode: function (e) {
                                    return this.createElementNSPlus("responseMode", {
                                        value: e.responseMode
                                    })
                                }
                            },
                            ogc: {
                                TM_Equals: function (e) {
                                    var t = this.createElementNSPlus("ogc:TM_Equals");
                                    return this.writeNode("ogc:PropertyName", {
                                        property: "urn:ogc:data:time:iso8601"
                                    }, t), "latest" === e.eventTime && this.writeNode("gml:TimeInstant", {
                                        value: "latest"
                                    }, t), t
                                },
                                PropertyName: function (e) {
                                    return this.createElementNSPlus("ogc:PropertyName", {
                                        value: e.property
                                    })
                                }
                            },
                            gml: {
                                TimeInstant: function (e) {
                                    var t = this.createElementNSPlus("gml:TimeInstant");
                                    return this.writeNode("gml:timePosition", e, t), t
                                },
                                timePosition: function (e) {
                                    return this.createElementNSPlus("gml:timePosition", {
                                        value: e.value
                                    })
                                }
                            }
                        },
                        CLASS_NAME: "OpenLayers.Format.SOSGetObservation"
                    }), OpenLayers.Control.UTFGrid = OpenLayers.Class(OpenLayers.Control, {
                        autoActivate: !0,
                        layers: null,
                        defaultHandlerOptions: {
                            delay: 300,
                            pixelTolerance: 4,
                            stopMove: !1,
                            single: !0,
                            double: !1,
                            stopSingle: !1,
                            stopDouble: !1
                        },
                        handlerMode: "click",
                        setHandler: function (e) {
                            this.handlerMode = e, this.resetHandler()
                        },
                        resetHandler: function () {
                            return this.handler && (this.handler.deactivate(), this.handler.destroy(), this.handler = null), "hover" == this.handlerMode ? this.handler = new OpenLayers.Handler.Hover(this, {
                                pause: this.handleEvent,
                                move: this.reset
                            }, this.handlerOptions) : "click" == this.handlerMode ? this.handler = new OpenLayers.Handler.Click(this, {
                                click: this.handleEvent
                            }, this.handlerOptions) : "move" == this.handlerMode && (this.handler = new OpenLayers.Handler.Hover(this, {
                                pause: this.handleEvent,
                                move: this.handleEvent
                            }, this.handlerOptions)), !!this.handler
                        },
                        initialize: function (e) {
                            (e = e || {}).handlerOptions = e.handlerOptions || this.defaultHandlerOptions, OpenLayers.Control.prototype.initialize.apply(this, [e]), this.resetHandler()
                        },
                        handleEvent: function (e) {
                            if (null == e) this.reset();
                            else {
                                var t = this.map.getLonLatFromPixel(e.xy);
                                if (t) {
                                    var i = this.findLayers();
                                    if (0 < i.length) {
                                        for (var s, r = {}, n = 0, a = i.length; n < a; n++) s = i[n], r[OpenLayers.Util.indexOf(this.map.layers, s)] = s.getFeatureInfo(t);
                                        this.callback(r, t, e.xy)
                                    }
                                }
                            }
                        },
                        callback: function (e) {},
                        reset: function (e) {
                            this.callback(null)
                        },
                        findLayers: function () {
                            for (var e, t = this.layers || this.map.layers, i = [], s = t.length - 1; 0 <= s; --s)(e = t[s]) instanceof OpenLayers.Layer.UTFGrid && i.push(e);
                            return i
                        },
                        CLASS_NAME: "OpenLayers.Control.UTFGrid"
                    }), OpenLayers.Format.CQL = function () {
                        function e(e) {
                            for (var t = [], i = []; e.length;) {
                                var s = e.shift();
                                switch (s.type) {
                                    case "PROPERTY":
                                    case "GEOMETRY":
                                    case "VALUE":
                                        i.push(s);
                                        break;
                                    case "COMPARISON":
                                    case "BETWEEN":
                                    case "IS_NULL":
                                    case "LOGICAL":
                                        for (var n = l[s.type]; 0 < t.length && l[t[t.length - 1].type] <= n;) i.push(t.pop());
                                        t.push(s);
                                        break;
                                    case "SPATIAL":
                                    case "NOT":
                                    case "LPAREN":
                                        t.push(s);
                                        break;
                                    case "RPAREN":
                                        for (; 0 < t.length && "LPAREN" != t[t.length - 1].type;) i.push(t.pop());
                                        t.pop(), 0 < t.length && "SPATIAL" == t[t.length - 1].type && i.push(t.pop());
                                    case "COMMA":
                                    case "END":
                                        break;
                                    default:
                                        throw Error("Unknown token type " + s.type)
                                }
                            }
                            for (; 0 < t.length;) i.push(t.pop());
                            if (e = function e() {
                                    switch ((n = i.pop()).type) {
                                        case "LOGICAL":
                                            var t = e(),
                                                s = e();
                                            return new OpenLayers.Filter.Logical({
                                                filters: [s, t],
                                                type: a[n.text.toUpperCase()]
                                            });
                                        case "NOT":
                                            return n = e(), new OpenLayers.Filter.Logical({
                                                filters: [n],
                                                type: OpenLayers.Filter.Logical.NOT
                                            });
                                        case "BETWEEN":
                                            return i.pop(), s = e(), n = e(), t = e(), new OpenLayers.Filter.Comparison({
                                                property: t,
                                                lowerBoundary: n,
                                                upperBoundary: s,
                                                type: OpenLayers.Filter.Comparison.BETWEEN
                                            });
                                        case "COMPARISON":
                                            return s = e(), t = e(), new OpenLayers.Filter.Comparison({
                                                property: t,
                                                value: s,
                                                type: r[n.text.toUpperCase()]
                                            });
                                        case "IS_NULL":
                                            return t = e(), new OpenLayers.Filter.Comparison({
                                                property: t,
                                                type: r[n.text.toUpperCase()]
                                            });
                                        case "VALUE":
                                            return (t = n.text.match(/^'(.*)'$/)) ? t[1].replace(/''/g, "'") : Number(n.text);
                                        case "SPATIAL":
                                            switch (n.text.toUpperCase()) {
                                                case "BBOX":
                                                    var n = e(),
                                                        o = (t = e(), s = e(), e()),
                                                        l = e();
                                                    return new OpenLayers.Filter.Spatial({
                                                        type: OpenLayers.Filter.Spatial.BBOX,
                                                        property: l,
                                                        value: OpenLayers.Bounds.fromArray([o, s, t, n])
                                                    });
                                                case "INTERSECTS":
                                                    return s = e(), t = e(), new OpenLayers.Filter.Spatial({
                                                        type: OpenLayers.Filter.Spatial.INTERSECTS,
                                                        property: t,
                                                        value: s
                                                    });
                                                case "WITHIN":
                                                    return s = e(), t = e(), new OpenLayers.Filter.Spatial({
                                                        type: OpenLayers.Filter.Spatial.WITHIN,
                                                        property: t,
                                                        value: s
                                                    });
                                                case "CONTAINS":
                                                    return s = e(), t = e(), new OpenLayers.Filter.Spatial({
                                                        type: OpenLayers.Filter.Spatial.CONTAINS,
                                                        property: t,
                                                        value: s
                                                    });
                                                case "DWITHIN":
                                                    return n = e(), s = e(), t = e(), new OpenLayers.Filter.Spatial({
                                                        type: OpenLayers.Filter.Spatial.DWITHIN,
                                                        value: s,
                                                        property: t,
                                                        distance: Number(n)
                                                    })
                                            }
                                            case "GEOMETRY":
                                                return OpenLayers.Geometry.fromWKT(n.text);
                                            default:
                                                return n.text
                                    }
                                }(), 0 < i.length) {
                                for (e = "Remaining tokens after building AST: \n", t = i.length - 1; 0 <= t; t--) e += i[t].type + ": " + i[t].text + "\n";
                                throw Error(e)
                            }
                            return e
                        }
                        var t, i = {
                                PROPERTY: /^[_a-zA-Z]\w*/,
                                COMPARISON: /^(=|<>|<=|<|>=|>|LIKE)/i,
                                IS_NULL: /^IS NULL/i,
                                COMMA: /^,/,
                                LOGICAL: /^(AND|OR)/i,
                                VALUE: /^('([^']|'')*'|\d+(\.\d*)?|\.\d+)/,
                                LPAREN: /^\(/,
                                RPAREN: /^\)/,
                                SPATIAL: /^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,
                                NOT: /^NOT/i,
                                BETWEEN: /^BETWEEN/i,
                                GEOMETRY: function (e) {
                                    if (t = /^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e)) {
                                        var t, i = e.length;
                                        if (-1 < (t = e.indexOf("(", t[0].length)))
                                            for (var s = 1; t < i && 0 < s;) switch (t++, e.charAt(t)) {
                                                case "(":
                                                    s++;
                                                    break;
                                                case ")":
                                                    s--
                                            }
                                        return [e.substr(0, t + 1)]
                                    }
                                },
                                END: /^$/
                            },
                            s = {
                                LPAREN: ["GEOMETRY", "SPATIAL", "PROPERTY", "VALUE", "LPAREN"],
                                RPAREN: ["NOT", "LOGICAL", "END", "RPAREN"],
                                PROPERTY: ["COMPARISON", "BETWEEN", "COMMA", "IS_NULL"],
                                BETWEEN: ["VALUE"],
                                IS_NULL: ["END"],
                                COMPARISON: ["VALUE"],
                                COMMA: ["GEOMETRY", "VALUE", "PROPERTY"],
                                VALUE: ["LOGICAL", "COMMA", "RPAREN", "END"],
                                SPATIAL: ["LPAREN"],
                                LOGICAL: ["NOT", "VALUE", "SPATIAL", "PROPERTY", "LPAREN"],
                                NOT: ["PROPERTY", "LPAREN"],
                                GEOMETRY: ["COMMA", "RPAREN"]
                            },
                            r = {
                                "=": OpenLayers.Filter.Comparison.EQUAL_TO,
                                "<>": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
                                "<": OpenLayers.Filter.Comparison.LESS_THAN,
                                "<=": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,
                                ">": OpenLayers.Filter.Comparison.GREATER_THAN,
                                ">=": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,
                                LIKE: OpenLayers.Filter.Comparison.LIKE,
                                BETWEEN: OpenLayers.Filter.Comparison.BETWEEN,
                                "IS NULL": OpenLayers.Filter.Comparison.IS_NULL
                            },
                            n = {},
                            a = {
                                AND: OpenLayers.Filter.Logical.AND,
                                OR: OpenLayers.Filter.Logical.OR
                            },
                            o = {},
                            l = {
                                RPAREN: 3,
                                LOGICAL: 2,
                                COMPARISON: 1
                            };
                        for (t in r) r.hasOwnProperty(t) && (n[r[t]] = t);
                        for (t in a) a.hasOwnProperty(t) && (o[a[t]] = t);
                        return OpenLayers.Class(OpenLayers.Format, {
                            read: function (t) {
                                var r = t;
                                t = [];
                                var n, a = ["NOT", "GEOMETRY", "SPATIAL", "PROPERTY", "LPAREN"];
                                do {
                                    e: {
                                        n = a;
                                        var o = void 0,
                                            l = (a = void 0, n.length);
                                        for (o = 0; o < l; o++) {
                                            a = n[o];
                                            var h = i[a] instanceof RegExp ? i[a].exec(r) : (0, i[a])(r);
                                            if (h) {
                                                n = {
                                                    type: a,
                                                    text: n = h[0],
                                                    remainder: r = r.substr(n.length).replace(/^\s*/, "")
                                                };
                                                break e
                                            }
                                        }
                                        for (t = "ERROR: In parsing: [" + r + "], expected one of: ", o = 0; o < l; o++) t += "\n    " + (a = n[o]) + ": " + i[a];
                                        throw Error(t)
                                    }
                                    if (r = n.remainder, a = s[n.type], "END" != n.type && !a) throw Error("No follows list for " + n.type);t.push(n)
                                } while ("END" != n.type);
                                return t = e(t), this.keepData && (this.data = t), t
                            },
                            write: function (e) {
                                if (e instanceof OpenLayers.Geometry) return e.toString();
                                switch (e.CLASS_NAME) {
                                    case "OpenLayers.Filter.Spatial":
                                        switch (e.type) {
                                            case OpenLayers.Filter.Spatial.BBOX:
                                                return "BBOX(" + e.property + "," + e.value.toBBOX() + ")";
                                            case OpenLayers.Filter.Spatial.DWITHIN:
                                                return "DWITHIN(" + e.property + ", " + this.write(e.value) + ", " + e.distance + ")";
                                            case OpenLayers.Filter.Spatial.WITHIN:
                                                return "WITHIN(" + e.property + ", " + this.write(e.value) + ")";
                                            case OpenLayers.Filter.Spatial.INTERSECTS:
                                                return "INTERSECTS(" + e.property + ", " + this.write(e.value) + ")";
                                            case OpenLayers.Filter.Spatial.CONTAINS:
                                                return "CONTAINS(" + e.property + ", " + this.write(e.value) + ")";
                                            default:
                                                throw Error("Unknown spatial filter type: " + e.type)
                                        }
                                        case "OpenLayers.Filter.Logical":
                                            if (e.type == OpenLayers.Filter.Logical.NOT) return "NOT (" + this.write(e.filters[0]) + ")";
                                            for (var t = "(", i = !0, s = 0; s < e.filters.length; s++) i ? i = !1 : t += ") " + o[e.type] + " (", t += this.write(e.filters[s]);
                                            return t + ")";
                                        case "OpenLayers.Filter.Comparison":
                                            return e.type == OpenLayers.Filter.Comparison.BETWEEN ? e.property + " BETWEEN " + this.write(e.lowerBoundary) + " AND " + this.write(e.upperBoundary) : null !== e.value ? e.property + " " + n[e.type] + " " + this.write(e.value) : e.property + " " + n[e.type];
                                        case void 0:
                                            if ("string" == typeof e) return "'" + e.replace(/'/g, "''") + "'";
                                            if ("number" == typeof e) return String(e);
                                        default:
                                            throw Error("Can't encode: " + e.CLASS_NAME + " " + e)
                                }
                            },
                            CLASS_NAME: "OpenLayers.Format.CQL"
                        })
                    }(), OpenLayers.Control.Split = OpenLayers.Class(OpenLayers.Control, {
                        layer: null,
                        source: null,
                        sourceOptions: null,
                        tolerance: null,
                        edge: !0,
                        deferDelete: !1,
                        mutual: !0,
                        targetFilter: null,
                        sourceFilter: null,
                        handler: null,
                        initialize: function (e) {
                            OpenLayers.Control.prototype.initialize.apply(this, [e]), this.options = e || {}, this.options.source && this.setSource(this.options.source)
                        },
                        setSource: function (e) {
                            this.active ? (this.deactivate(), this.handler && (this.handler.destroy(), delete this.handler), this.source = e, this.activate()) : this.source = e
                        },
                        activate: function () {
                            var e = OpenLayers.Control.prototype.activate.call(this);
                            return e && (this.source ? this.source.events && this.source.events.on({
                                sketchcomplete: this.onSketchComplete,
                                afterfeaturemodified: this.afterFeatureModified,
                                scope: this
                            }) : (this.handler || (this.handler = new OpenLayers.Handler.Path(this, {
                                done: function (e) {
                                    this.onSketchComplete({
                                        feature: new OpenLayers.Feature.Vector(e)
                                    })
                                }
                            }, {
                                layerOptions: this.sourceOptions
                            })), this.handler.activate())), e
                        },
                        deactivate: function () {
                            var e = OpenLayers.Control.prototype.deactivate.call(this);
                            return e && this.source && this.source.events && this.source.events.un({
                                sketchcomplete: this.onSketchComplete,
                                afterfeaturemodified: this.afterFeatureModified,
                                scope: this
                            }), e
                        },
                        onSketchComplete: function (e) {
                            return this.feature = null, !this.considerSplit(e.feature)
                        },
                        afterFeatureModified: function (e) {
                            e.modified && "function" == typeof e.feature.geometry.split && (this.feature = e.feature, this.considerSplit(e.feature))
                        },
                        removeByGeometry: function (e, t) {
                            for (var i = 0, s = e.length; i < s; ++i)
                                if (e[i].geometry === t) {
                                    e.splice(i, 1);
                                    break
                                }
                        },
                        isEligible: function (e) {
                            return !!e.geometry && (e.state !== OpenLayers.State.DELETE && "function" == typeof e.geometry.split && this.feature !== e && (!this.targetFilter || this.targetFilter.evaluate(e.attributes)))
                        },
                        considerSplit: function (e) {
                            var t = !1,
                                i = !1;
                            if (!this.sourceFilter || this.sourceFilter.evaluate(e.attributes)) {
                                for (var s, r, n, a, o, l = this.layer && this.layer.features || [], h = [], p = [], u = this.layer === this.source && this.mutual, c = {
                                        edge: this.edge,
                                        tolerance: this.tolerance,
                                        mutual: u
                                    }, y = [e.geometry], d = 0, m = l.length; d < m; ++d)
                                    if (n = l[d], this.isEligible(n)) {
                                        a = [n.geometry];
                                        for (var f = 0; f < y.length; ++f) {
                                            o = y[f];
                                            for (var g = 0; g < a.length; ++g) s = a[g], o.getBounds().intersectsBounds(s.getBounds()) && (s = o.split(s, c)) && (!1 !== (r = this.events.triggerEvent("beforesplit", {
                                                source: e,
                                                target: n
                                            })) && (u && (1 < (r = s[0]).length && (r.unshift(f, 1), Array.prototype.splice.apply(y, r), f += r.length - 3), s = s[1]), 1 < s.length && (s.unshift(g, 1), Array.prototype.splice.apply(a, s), g += s.length - 3)))
                                        }
                                        a && 1 < a.length && (this.geomsToFeatures(n, a), this.events.triggerEvent("split", {
                                            original: n,
                                            features: a
                                        }), Array.prototype.push.apply(h, a), p.push(n), i = !0)
                                    } if (y && 1 < y.length && (this.geomsToFeatures(e, y), this.events.triggerEvent("split", {
                                        original: e,
                                        features: y
                                    }), Array.prototype.push.apply(h, y), p.push(e), t = !0), t || i) {
                                    if (this.deferDelete) {
                                        for (l = [], d = 0, m = p.length; d < m; ++d)(i = p[d]).state === OpenLayers.State.INSERT ? l.push(i) : (i.state = OpenLayers.State.DELETE, this.layer.drawFeature(i));
                                        for (this.layer.destroyFeatures(l, {
                                                silent: !0
                                            }), d = 0, m = h.length; d < m; ++d) h[d].state = OpenLayers.State.INSERT
                                    } else this.layer.destroyFeatures(p, {
                                        silent: !0
                                    });
                                    this.layer.addFeatures(h, {
                                        silent: !0
                                    }), this.events.triggerEvent("aftersplit", {
                                        source: e,
                                        features: h
                                    })
                                }
                            }
                            return t
                        },
                        geomsToFeatures: function (e, t) {
                            var i = e.clone();
                            delete i.geometry;
                            for (var s, r = 0, n = t.length; r < n; ++r)(s = i.clone()).geometry = t[r], s.state = OpenLayers.State.INSERT, t[r] = s
                        },
                        destroy: function () {
                            this.active && this.deactivate(), OpenLayers.Control.prototype.destroy.call(this)
                        },
                        CLASS_NAME: "OpenLayers.Control.Split"
                    }), OpenLayers.Layer.WMTS = OpenLayers.Class(OpenLayers.Layer.Grid, {
                        isBaseLayer: !0,
                        version: "1.0.0",
                        requestEncoding: "KVP",
                        url: null,
                        layer: null,
                        matrixSet: null,
                        style: null,
                        format: "image/jpeg",
                        tileOrigin: null,
                        tileFullExtent: null,
                        formatSuffix: null,
                        matrixIds: null,
                        dimensions: null,
                        params: null,
                        zoomOffset: 0,
                        serverResolutions: null,
                        formatSuffixMap: {
                            "image/png": "png",
                            "image/png8": "png",
                            "image/png24": "png",
                            "image/png32": "png",
                            png: "png",
                            "image/jpeg": "jpg",
                            "image/jpg": "jpg",
                            jpeg: "jpg",
                            jpg: "jpg"
                        },
                        matrix: null,
                        initialize: function (e) {
                            var t, i = {
                                url: !0,
                                layer: !0,
                                style: !0,
                                matrixSet: !0
                            };
                            for (t in i)
                                if (!(t in e)) throw Error("Missing property '" + t + "' in layer configuration.");
                            if (e.params = OpenLayers.Util.upperCaseObject(e.params), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [e.name, e.url, e.params, e]), this.formatSuffix || (this.formatSuffix = this.formatSuffixMap[this.format] || this.format.split("/").pop()), this.matrixIds && (e = this.matrixIds.length) && "string" == typeof this.matrixIds[0])
                                for (i = this.matrixIds, this.matrixIds = Array(e), t = 0; t < e; ++t) this.matrixIds[t] = {
                                    identifier: i[t]
                                }
                        },
                        setMap: function () {
                            OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments)
                        },
                        updateMatrixProperties: function () {
                            (this.matrix = this.getMatrix()) && (this.matrix.topLeftCorner && (this.tileOrigin = this.matrix.topLeftCorner), this.matrix.tileWidth && this.matrix.tileHeight && (this.tileSize = new OpenLayers.Size(this.matrix.tileWidth, this.matrix.tileHeight)), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left, this.maxExtent.top)), this.tileFullExtent || (this.tileFullExtent = this.maxExtent))
                        },
                        moveTo: function (e, t, i) {
                            return !t && this.matrix || this.updateMatrixProperties(), OpenLayers.Layer.Grid.prototype.moveTo.apply(this, arguments)
                        },
                        clone: function (e) {
                            return null == e && (e = new OpenLayers.Layer.WMTS(this.options)), OpenLayers.Layer.Grid.prototype.clone.apply(this, [e])
                        },
                        getIdentifier: function () {
                            return this.getServerZoom()
                        },
                        getMatrix: function () {
                            var e;
                            if (this.matrixIds && 0 !== this.matrixIds.length)
                                if ("scaleDenominator" in this.matrixIds[0])
                                    for (var t, i = OpenLayers.METERS_PER_INCH * OpenLayers.INCHES_PER_UNIT[this.units] * this.getServerResolution() / 28e-5, s = Number.POSITIVE_INFINITY, r = 0, n = this.matrixIds.length; r < n; ++r)(t = Math.abs(1 - this.matrixIds[r].scaleDenominator / i)) < s && (s = t, e = this.matrixIds[r]);
                                else e = this.matrixIds[this.getIdentifier()];
                            else e = {
                                identifier: this.getIdentifier()
                            };
                            return e
                        },
                        getTileInfo: function (e) {
                            var t = this.getServerResolution(),
                                i = (e.lon - this.tileOrigin.lon) / (t * this.tileSize.w);
                            e = (this.tileOrigin.lat - e.lat) / (t * this.tileSize.h);
                            t = Math.floor(i);
                            var s = Math.floor(e);
                            return {
                                col: t,
                                row: s,
                                i: Math.floor((i - t) * this.tileSize.w),
                                j: Math.floor((e - s) * this.tileSize.h)
                            }
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = "";
                            if (!this.tileFullExtent || this.tileFullExtent.intersectsBounds(e)) {
                                e = e.getCenterLonLat();
                                var i = this.getTileInfo(e);
                                e = this.dimensions;
                                var s;
                                t = OpenLayers.Util.isArray(this.url) ? this.selectUrl([this.version, this.style, this.matrixSet, this.matrix.identifier, i.row, i.col].join(), this.url) : this.url;
                                if ("REST" === this.requestEncoding.toUpperCase())
                                    if (s = this.params, -1 !== t.indexOf("{")) {
                                        var r, n;
                                        if (t = t.replace(/\{/g, "${"), i = {
                                                style: this.style,
                                                Style: this.style,
                                                TileMatrixSet: this.matrixSet,
                                                TileMatrix: this.matrix.identifier,
                                                TileRow: i.row,
                                                TileCol: i.col
                                            }, e)
                                            for (n = e.length - 1; 0 <= n; --n) i[r = e[n]] = s[r.toUpperCase()];
                                        t = OpenLayers.String.format(t, i)
                                    } else {
                                        if (r = this.version + "/" + this.layer + "/" + this.style + "/", e)
                                            for (n = 0; n < e.length; n++) s[e[n]] && (r = r + s[e[n]] + "/");
                                        r = r + this.matrixSet + "/" + this.matrix.identifier + "/" + i.row + "/" + i.col + "." + this.formatSuffix, t.match(/\/$/) || (t += "/"), t += r
                                    }
                                else "KVP" === this.requestEncoding.toUpperCase() && (s = {
                                    SERVICE: "WMTS",
                                    REQUEST: "GetTile",
                                    VERSION: this.version,
                                    LAYER: this.layer,
                                    STYLE: this.style,
                                    TILEMATRIXSET: this.matrixSet,
                                    TILEMATRIX: this.matrix.identifier,
                                    TILEROW: i.row,
                                    TILECOL: i.col,
                                    FORMAT: this.format
                                }, t = OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, [s]))
                            }
                            return t
                        },
                        mergeNewParams: function (e) {
                            if ("KVP" === this.requestEncoding.toUpperCase()) return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, [OpenLayers.Util.upperCaseObject(e)])
                        },
                        CLASS_NAME: "OpenLayers.Layer.WMTS"
                    }), OpenLayers.Protocol.SOS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol, {
                        fois: null,
                        formatOptions: null,
                        initialize: function (e) {
                            OpenLayers.Protocol.prototype.initialize.apply(this, [e]), e.format || (this.format = new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions))
                        },
                        destroy: function () {
                            this.options && !this.options.format && this.format.destroy(), this.format = null, OpenLayers.Protocol.prototype.destroy.apply(this)
                        },
                        read: function (e) {
                            e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
                            var t = new OpenLayers.Protocol.Response({
                                    requestType: "read"
                                }),
                                i = this.format;
                            i = OpenLayers.Format.XML.prototype.write.apply(i, [i.writeNode("sos:GetFeatureOfInterest", {
                                fois: this.fois
                            })]);
                            return t.priv = OpenLayers.Request.POST({
                                url: e.url,
                                callback: this.createCallback(this.handleRead, t, e),
                                data: i
                            }), t
                        },
                        handleRead: function (e, t) {
                            if (t.callback) {
                                var i = e.priv;
                                200 <= i.status && 300 > i.status ? (e.features = this.parseFeatures(i), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, t.callback.call(t.scope, e)
                            }
                        },
                        parseFeatures: function (e) {
                            var t = e.responseXML;
                            return t && t.documentElement || (t = e.responseText), !t || 0 >= t.length ? null : this.format.read(t)
                        },
                        CLASS_NAME: "OpenLayers.Protocol.SOS.v1_0_0"
                    }), OpenLayers.Layer.KaMapCache = OpenLayers.Class(OpenLayers.Layer.KaMap, {
                        IMAGE_EXTENSIONS: {
                            jpeg: "jpg",
                            gif: "gif",
                            png: "png",
                            png8: "png",
                            png24: "png",
                            dithered: "png"
                        },
                        DEFAULT_FORMAT: "jpeg",
                        initialize: function (e, t, i, s) {
                            OpenLayers.Layer.KaMap.prototype.initialize.apply(this, arguments), this.extension = this.IMAGE_EXTENSIONS[this.params.i.toLowerCase() || this.DEFAULT_FORMAT]
                        },
                        getURL: function (e) {
                            e = this.adjustBounds(e);
                            var t = this.map.getResolution(),
                                i = Math.round(1e4 * this.map.getScale()) / 1e4,
                                s = Math.round(e.left / t);
                            e = -Math.round(e.top / t);
                            t = Math.floor(s / this.tileSize.w / this.params.metaTileSize.w) * this.tileSize.w * this.params.metaTileSize.w;
                            var r = Math.floor(e / this.tileSize.h / this.params.metaTileSize.h) * this.tileSize.h * this.params.metaTileSize.h;
                            i = ["/", this.params.map, "/", i, "/", this.params.g.replace(/\s/g, "_"), "/def/t", r, "/l", t, "/t", e, "l", s, ".", this.extension], s = this.url;
                            return OpenLayers.Util.isArray(s) && (s = this.selectUrl(i.join(""), s)), s + i.join("")
                        },
                        CLASS_NAME: "OpenLayers.Layer.KaMapCache"
                    }), OpenLayers.Protocol.WFS.v1_1_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
                        version: "1.1.0",
                        initialize: function (e) {
                            OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments), this.outputFormat && !this.readFormat && ("gml2" == this.outputFormat.toLowerCase() ? this.readFormat = new OpenLayers.Format.GML.v2({
                                featureType: this.featureType,
                                featureNS: this.featureNS,
                                geometryName: this.geometryName
                            }) : "json" == this.outputFormat.toLowerCase() && (this.readFormat = new OpenLayers.Format.GeoJSON))
                        },
                        CLASS_NAME: "OpenLayers.Protocol.WFS.v1_1_0"
                    }), OpenLayers.Format.WMSCapabilities.v1_1_1 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1, {
                        version: "1.1.1",
                        readers: {
                            wms: OpenLayers.Util.applyDefaults({
                                SRS: function (e, t) {
                                    t.srs[this.getChildValue(e)] = !0
                                }
                            }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1_1_1"
                    }), OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1, {
                        version: "1.1.1",
                        profile: "WMSC",
                        readers: {
                            wms: OpenLayers.Util.applyDefaults({
                                VendorSpecificCapabilities: function (e, t) {
                                    t.vendorSpecific = {
                                        tileSets: []
                                    }, this.readChildNodes(e, t.vendorSpecific)
                                },
                                TileSet: function (e, t) {
                                    var i = {
                                        srs: {},
                                        bbox: {},
                                        resolutions: []
                                    };
                                    this.readChildNodes(e, i), t.tileSets.push(i)
                                },
                                Resolutions: function (e, t) {
                                    for (var i = this.getChildValue(e).split(" "), s = 0, r = i.length; s < r; s++) "" != i[s] && t.resolutions.push(parseFloat(i[s]))
                                },
                                Width: function (e, t) {
                                    t.width = parseInt(this.getChildValue(e))
                                },
                                Height: function (e, t) {
                                    t.height = parseInt(this.getChildValue(e))
                                },
                                Layers: function (e, t) {
                                    t.layers = this.getChildValue(e)
                                },
                                Styles: function (e, t) {
                                    t.styles = this.getChildValue(e)
                                }
                            }, OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)
                        },
                        CLASS_NAME: "OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"
                    }), OpenLayers.Control.LayerSwitcher = OpenLayers.Class(OpenLayers.Control, {
                        layerStates: null,
                        layersDiv: null,
                        baseLayersDiv: null,
                        baseLayers: null,
                        dataLbl: null,
                        dataLayersDiv: null,
                        dataLayers: null,
                        minimizeDiv: null,
                        maximizeDiv: null,
                        ascending: !0,
                        initialize: function (e) {
                            OpenLayers.Control.prototype.initialize.apply(this, arguments), this.layerStates = []
                        },
                        destroy: function () {
                            this.clearLayersArray("base"), this.clearLayersArray("data"), this.map.events.un({
                                buttonclick: this.onButtonClick,
                                addlayer: this.redraw,
                                changelayer: this.redraw,
                                removelayer: this.redraw,
                                changebaselayer: this.redraw,
                                scope: this
                            }), this.events.unregister("buttonclick", this, this.onButtonClick), OpenLayers.Control.prototype.destroy.apply(this, arguments)
                        },
                        setMap: function (e) {
                            OpenLayers.Control.prototype.setMap.apply(this, arguments), this.map.events.on({
                                addlayer: this.redraw,
                                changelayer: this.redraw,
                                removelayer: this.redraw,
                                changebaselayer: this.redraw,
                                scope: this
                            }), this.outsideViewport ? (this.events.attachToElement(this.div), this.events.register("buttonclick", this, this.onButtonClick)) : this.map.events.register("buttonclick", this, this.onButtonClick)
                        },
                        draw: function () {
                            return OpenLayers.Control.prototype.draw.apply(this), this.loadContents(), this.outsideViewport || this.minimizeControl(), this.redraw(), this.div
                        },
                        onButtonClick: function (e) {
                            (e = e.buttonElement) === this.minimizeDiv ? this.minimizeControl() : e === this.maximizeDiv ? this.maximizeControl() : e._layerSwitcher === this.id && (e.for && (e = document.getElementById(e.for)), e.disabled || ("radio" == e.type ? (e.checked = !0, this.map.setBaseLayer(this.map.getLayer(e._layer))) : (e.checked = !e.checked, this.updateMap())))
                        },
                        clearLayersArray: function (e) {
                            this[e + "LayersDiv"].innerHTML = "", this[e + "Layers"] = []
                        },
                        checkRedraw: function () {
                            if (!this.layerStates.length || this.map.layers.length != this.layerStates.length) return !0;
                            for (var e = 0, t = this.layerStates.length; e < t; e++) {
                                var i = this.layerStates[e],
                                    s = this.map.layers[e];
                                if (i.name != s.name || i.inRange != s.inRange || i.id != s.id || i.visibility != s.visibility) return !0
                            }
                            return !1
                        },
                        redraw: function () {
                            if (!this.checkRedraw()) return this.div;
                            this.clearLayersArray("base"), this.clearLayersArray("data");
                            var e = !1,
                                t = !1,
                                i = this.map.layers.length;
                            this.layerStates = Array(i);
                            for (var s = 0; s < i; s++) {
                                var r = this.map.layers[s];
                                this.layerStates[s] = {
                                    name: r.name,
                                    visibility: r.visibility,
                                    inRange: r.inRange,
                                    id: r.id
                                }
                            }
                            var n = this.map.layers.slice();
                            for (this.ascending || n.reverse(), s = 0, i = n.length; s < i; s++) {
                                var a = (r = n[s]).isBaseLayer;
                                if (r.displayInLayerSwitcher) {
                                    a ? t = !0 : e = !0;
                                    var o = a ? r == this.map.baseLayer : r.getVisibility(),
                                        l = document.createElement("input"),
                                        h = OpenLayers.Util.createUniqueID(this.id + "_input_");
                                    l.id = h, l.name = a ? this.id + "_baseLayers" : r.name, l.type = a ? "radio" : "checkbox", l.value = r.name, l.checked = o, l.defaultChecked = o, l.className = "olButton", l._layer = r.id, l._layerSwitcher = this.id, a || r.inRange || (l.disabled = !0), (o = document.createElement("label")).for = l.id, OpenLayers.Element.addClass(o, "labelSpan olButton"), o._layer = r.id, o._layerSwitcher = this.id, a || r.inRange || (o.style.color = "gray"), o.innerHTML = r.name, o.style.verticalAlign = a ? "bottom" : "baseline", h = document.createElement("br"), (a ? this.baseLayers : this.dataLayers).push({
                                        layer: r,
                                        inputElem: l,
                                        labelSpan: o
                                    }), (r = a ? this.baseLayersDiv : this.dataLayersDiv).appendChild(l), r.appendChild(o), r.appendChild(h)
                                }
                            }
                            return this.dataLbl.style.display = e ? "" : "none", this.baseLbl.style.display = t ? "" : "none", this.div
                        },
                        updateMap: function () {
                            for (var e = 0, t = this.baseLayers.length; e < t; e++) {
                                var i = this.baseLayers[e];
                                i.inputElem.checked && this.map.setBaseLayer(i.layer, !1)
                            }
                            for (e = 0, t = this.dataLayers.length; e < t; e++)(i = this.dataLayers[e]).layer.setVisibility(i.inputElem.checked)
                        },
                        maximizeControl: function (e) {
                            this.div.style.width = "", this.div.style.height = "", this.showControls(!1), null != e && OpenLayers.Event.stop(e)
                        },
                        minimizeControl: function (e) {
                            this.div.style.width = "0px", this.div.style.height = "0px", this.showControls(!0), null != e && OpenLayers.Event.stop(e)
                        },
                        showControls: function (e) {
                            this.maximizeDiv.style.display = e ? "" : "none", this.minimizeDiv.style.display = e ? "none" : "", this.layersDiv.style.display = e ? "none" : ""
                        },
                        loadContents: function () {
                            this.layersDiv = document.createElement("div"), this.layersDiv.id = this.id + "_layersDiv", OpenLayers.Element.addClass(this.layersDiv, "layersDiv"), this.baseLbl = document.createElement("div"), this.baseLbl.innerHTML = OpenLayers.i18n("Base Layer"), OpenLayers.Element.addClass(this.baseLbl, "baseLbl"), this.baseLayersDiv = document.createElement("div"), OpenLayers.Element.addClass(this.baseLayersDiv, "baseLayersDiv"), this.dataLbl = document.createElement("div"), this.dataLbl.innerHTML = OpenLayers.i18n("Overlays"), OpenLayers.Element.addClass(this.dataLbl, "dataLbl"), this.dataLayersDiv = document.createElement("div"), OpenLayers.Element.addClass(this.dataLayersDiv, "dataLayersDiv"), this.ascending ? (this.layersDiv.appendChild(this.baseLbl), this.layersDiv.appendChild(this.baseLayersDiv), this.layersDiv.appendChild(this.dataLbl), this.layersDiv.appendChild(this.dataLayersDiv)) : (this.layersDiv.appendChild(this.dataLbl), this.layersDiv.appendChild(this.dataLayersDiv), this.layersDiv.appendChild(this.baseLbl), this.layersDiv.appendChild(this.baseLayersDiv)), this.div.appendChild(this.layersDiv);
                            var e = OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");
                            this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv", null, null, e, "absolute"), OpenLayers.Element.addClass(this.maximizeDiv, "maximizeDiv olButton"), this.maximizeDiv.style.display = "none", this.div.appendChild(this.maximizeDiv), e = OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"), this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv", null, null, e, "absolute"), OpenLayers.Element.addClass(this.minimizeDiv, "minimizeDiv olButton"), this.minimizeDiv.style.display = "none", this.div.appendChild(this.minimizeDiv)
                        },
                        CLASS_NAME: "OpenLayers.Control.LayerSwitcher"
                    }), OpenLayers.Format.Atom = OpenLayers.Class(OpenLayers.Format.XML, {
                        namespaces: {
                            atom: "http://www.w3.org/2005/Atom",
                            georss: "http://www.georss.org/georss"
                        },
                        feedTitle: "untitled",
                        defaultEntryTitle: "untitled",
                        gmlParser: null,
                        xy: !1,
                        read: function (e) {
                            return "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), this.parseFeatures(e)
                        },
                        write: function (e) {
                            var t;
                            if (OpenLayers.Util.isArray(e)) {
                                (t = this.createElementNSPlus("atom:feed")).appendChild(this.createElementNSPlus("atom:title", {
                                    value: this.feedTitle
                                }));
                                for (var i = 0, s = e.length; i < s; i++) t.appendChild(this.buildEntryNode(e[i]))
                            } else t = this.buildEntryNode(e);
                            return OpenLayers.Format.XML.prototype.write.apply(this, [t])
                        },
                        buildContentNode: function (e) {
                            var t = this.createElementNSPlus("atom:content", {
                                attributes: {
                                    type: e.type || null
                                }
                            });
                            if (e.src) t.setAttribute("src", e.src);
                            else if ("text" == e.type || null == e.type) t.appendChild(this.createTextNode(e.value));
                            else if ("html" == e.type) {
                                if ("string" != typeof e.value) throw "HTML content must be in form of an escaped string";
                                t.appendChild(this.createTextNode(e.value))
                            } else "xhtml" == e.type ? t.appendChild(e.value) : "xhtml" == e.type || e.type.match(/(\+|\/)xml$/) ? t.appendChild(e.value) : t.appendChild(this.createTextNode(e.value));
                            return t
                        },
                        buildEntryNode: function (e) {
                            var t = e.attributes,
                                i = t.atom || {},
                                s = this.createElementNSPlus("atom:entry");
                            if (i.authors)
                                for (var r = 0, n = (a = OpenLayers.Util.isArray(i.authors) ? i.authors : [i.authors]).length; r < n; r++) s.appendChild(this.buildPersonConstructNode("author", a[r]));
                            if (i.categories) {
                                var a, o;
                                for (r = 0, n = (a = OpenLayers.Util.isArray(i.categories) ? i.categories : [i.categories]).length; r < n; r++) o = a[r], s.appendChild(this.createElementNSPlus("atom:category", {
                                    attributes: {
                                        term: o.term,
                                        scheme: o.scheme || null,
                                        label: o.label || null
                                    }
                                }))
                            }
                            if (i.content && s.appendChild(this.buildContentNode(i.content)), i.contributors)
                                for (r = 0, n = (a = OpenLayers.Util.isArray(i.contributors) ? i.contributors : [i.contributors]).length; r < n; r++) s.appendChild(this.buildPersonConstructNode("contributor", a[r]));
                            if (e.fid && s.appendChild(this.createElementNSPlus("atom:id", {
                                    value: e.fid
                                })), i.links)
                                for (r = 0, n = (a = OpenLayers.Util.isArray(i.links) ? i.links : [i.links]).length; r < n; r++) o = a[r], s.appendChild(this.createElementNSPlus("atom:link", {
                                    attributes: {
                                        href: o.href,
                                        rel: o.rel || null,
                                        type: o.type || null,
                                        hreflang: o.hreflang || null,
                                        title: o.title || null,
                                        length: o.length || null
                                    }
                                }));
                            return i.published && s.appendChild(this.createElementNSPlus("atom:published", {
                                value: i.published
                            })), i.rights && s.appendChild(this.createElementNSPlus("atom:rights", {
                                value: i.rights
                            })), (i.summary || t.description) && s.appendChild(this.createElementNSPlus("atom:summary", {
                                value: i.summary || t.description
                            })), s.appendChild(this.createElementNSPlus("atom:title", {
                                value: i.title || t.title || this.defaultEntryTitle
                            })), i.updated && s.appendChild(this.createElementNSPlus("atom:updated", {
                                value: i.updated
                            })), e.geometry && ((t = this.createElementNSPlus("georss:where")).appendChild(this.buildGeometryNode(e.geometry)), s.appendChild(t)), s
                        },
                        initGmlParser: function () {
                            this.gmlParser = new OpenLayers.Format.GML.v3({
                                xy: this.xy,
                                featureNS: "http://example.com#feature",
                                internalProjection: this.internalProjection,
                                externalProjection: this.externalProjection
                            })
                        },
                        buildGeometryNode: function (e) {
                            return this.gmlParser || this.initGmlParser(), this.gmlParser.writeNode("feature:_geometry", e).firstChild
                        },
                        buildPersonConstructNode: function (e, t) {
                            var i = ["uri", "email"],
                                s = this.createElementNSPlus("atom:" + e);
                            s.appendChild(this.createElementNSPlus("atom:name", {
                                value: t.name
                            }));
                            for (var r = 0, n = i.length; r < n; r++) t[i[r]] && s.appendChild(this.createElementNSPlus("atom:" + i[r], {
                                value: t[i[r]]
                            }));
                            return s
                        },
                        getFirstChildValue: function (e, t, i, s) {
                            return (e = this.getElementsByTagNameNS(e, t, i)) && 0 < e.length ? this.getChildValue(e[0], s) : s
                        },
                        parseFeature: function (e) {
                            var t = {},
                                i = null,
                                s = null,
                                r = null,
                                n = this.namespaces.atom;
                            this.parsePersonConstructs(e, "author", t), 0 < (s = this.getElementsByTagNameNS(e, n, "category")).length && (t.categories = []);
                            for (var a = 0, o = s.length; a < o; a++)(i = {}).term = s[a].getAttribute("term"), (r = s[a].getAttribute("scheme")) && (i.scheme = r), (r = s[a].getAttribute("label")) && (i.label = r), t.categories.push(i);
                            0 < (s = this.getElementsByTagNameNS(e, n, "content")).length && (i = {}, (r = s[0].getAttribute("type")) && (i.type = r), (r = s[0].getAttribute("src")) ? i.src = r : ("text" == i.type || "html" == i.type || null == i.type ? i.value = this.getFirstChildValue(e, n, "content", null) : "xhtml" == i.type || i.type.match(/(\+|\/)xml$/) ? i.value = this.getChildEl(s[0]) : i.value = this.getFirstChildValue(e, n, "content", null), t.content = i)), this.parsePersonConstructs(e, "contributor", t), t.id = this.getFirstChildValue(e, n, "id", null), 0 < (s = this.getElementsByTagNameNS(e, n, "link")).length && (t.links = Array(s.length));
                            var l = ["rel", "type", "hreflang", "title", "length"];
                            for (a = 0, o = s.length; a < o; a++) {
                                (i = {}).href = s[a].getAttribute("href");
                                for (var h = 0, p = l.length; h < p; h++)(r = s[a].getAttribute(l[h])) && (i[l[h]] = r);
                                t.links[a] = i
                            }
                            return (i = this.getFirstChildValue(e, n, "published", null)) && (t.published = i), (i = this.getFirstChildValue(e, n, "rights", null)) && (t.rights = i), (i = this.getFirstChildValue(e, n, "summary", null)) && (t.summary = i), t.title = this.getFirstChildValue(e, n, "title", null), t.updated = this.getFirstChildValue(e, n, "updated", null), i = {
                                title: t.title,
                                description: t.summary,
                                atom: t
                            }, e = this.parseLocations(e)[0], (e = new OpenLayers.Feature.Vector(e, i)).fid = t.id, e
                        },
                        parseFeatures: function (e) {
                            var t = [],
                                i = this.getElementsByTagNameNS(e, this.namespaces.atom, "entry");
                            0 == i.length && (i = [e]), e = 0;
                            for (var s = i.length; e < s; e++) t.push(this.parseFeature(i[e]));
                            return t
                        },
                        parseLocations: function (e) {
                            var t = this.namespaces.georss,
                                i = {
                                    components: []
                                },
                                s = this.getElementsByTagNameNS(e, t, "where");
                            if (s && 0 < s.length) {
                                this.gmlParser || this.initGmlParser();
                                for (var r = 0, n = s.length; r < n; r++) this.gmlParser.readChildNodes(s[r], i)
                            }
                            if (i = i.components, (s = this.getElementsByTagNameNS(e, t, "point")) && 0 < s.length)
                                for (r = 0, n = s.length; r < n; r++) {
                                    var a = OpenLayers.String.trim(s[r].firstChild.nodeValue).split(/\s+/);
                                    2 != a.length && (a = OpenLayers.String.trim(s[r].firstChild.nodeValue).split(/\s*,\s*/)), i.push(new OpenLayers.Geometry.Point(a[1], a[0]))
                                }
                            var o = this.getElementsByTagNameNS(e, t, "line");
                            if (o && 0 < o.length) {
                                var l;
                                for (r = 0, n = o.length; r < n; r++) {
                                    l = [];
                                    for (var h = 0, p = (s = OpenLayers.String.trim(o[r].firstChild.nodeValue).split(/\s+/)).length; h < p; h += 2) a = new OpenLayers.Geometry.Point(s[h + 1], s[h]), l.push(a);
                                    i.push(new OpenLayers.Geometry.LineString(l))
                                }
                            }
                            if ((e = this.getElementsByTagNameNS(e, t, "polygon")) && 0 < e.length)
                                for (r = 0, n = e.length; r < n; r++) {
                                    for (l = [], h = 0, p = (s = OpenLayers.String.trim(e[r].firstChild.nodeValue).split(/\s+/)).length; h < p; h += 2) a = new OpenLayers.Geometry.Point(s[h + 1], s[h]), l.push(a);
                                    i.push(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(l)]))
                                }
                            if (this.internalProjection && this.externalProjection)
                                for (r = 0, n = i.length; r < n; r++) i[r] && i[r].transform(this.externalProjection, this.internalProjection);
                            return i
                        },
                        parsePersonConstructs: function (e, t, i) {
                            for (var s = [], r = this.namespaces.atom, n = ["uri", "email"], a = 0, o = (e = this.getElementsByTagNameNS(e, r, t)).length; a < o; a++) {
                                var l = {};
                                l.name = this.getFirstChildValue(e[a], r, "name", null);
                                for (var h = 0, p = n.length; h < p; h++) {
                                    var u = this.getFirstChildValue(e[a], r, n[h], null);
                                    u && (l[n[h]] = u)
                                }
                                s.push(l)
                            }
                            0 < s.length && (i[t + "s"] = s)
                        },
                        CLASS_NAME: "OpenLayers.Format.Atom"
                    }), OpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {
                        autoActivate: !0,
                        slideFactor: 75,
                        observeElement: null,
                        draw: function () {
                            this.handler = new OpenLayers.Handler.Keyboard(this, {
                                keydown: this.defaultKeyPress
                            }, {
                                observeElement: this.observeElement || document
                            })
                        },
                        defaultKeyPress: function (e) {
                            var t, i = !0;
                            if (!(t = OpenLayers.Event.element(e)) || "INPUT" != t.tagName && "TEXTAREA" != t.tagName && "SELECT" != t.tagName) {
                                switch (e.keyCode) {
                                    case OpenLayers.Event.KEY_LEFT:
                                        this.map.pan(-this.slideFactor, 0);
                                        break;
                                    case OpenLayers.Event.KEY_RIGHT:
                                        this.map.pan(this.slideFactor, 0);
                                        break;
                                    case OpenLayers.Event.KEY_UP:
                                        this.map.pan(0, -this.slideFactor);
                                        break;
                                    case OpenLayers.Event.KEY_DOWN:
                                        this.map.pan(0, this.slideFactor);
                                        break;
                                    case 33:
                                        t = this.map.getSize(), this.map.pan(0, -.75 * t.h);
                                        break;
                                    case 34:
                                        t = this.map.getSize(), this.map.pan(0, .75 * t.h);
                                        break;
                                    case 35:
                                        t = this.map.getSize(), this.map.pan(.75 * t.w, 0);
                                        break;
                                    case 36:
                                        t = this.map.getSize(), this.map.pan(-.75 * t.w, 0);
                                        break;
                                    case 43:
                                    case 61:
                                    case 187:
                                    case 107:
                                        this.map.zoomIn();
                                        break;
                                    case 45:
                                    case 109:
                                    case 189:
                                    case 95:
                                        this.map.zoomOut();
                                        break;
                                    default:
                                        i = !1
                                }
                                i && OpenLayers.Event.stop(e)
                            }
                        },
                        CLASS_NAME: "OpenLayers.Control.KeyboardDefaults"
                    }), OpenLayers.Format.WMTSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0, {
                        version: "1.0.0",
                        namespaces: {
                            ows: "http://www.opengis.net/ows/1.1",
                            wmts: "http://www.opengis.net/wmts/1.0",
                            xlink: "http://www.w3.org/1999/xlink"
                        },
                        yx: null,
                        defaultPrefix: "wmts",
                        initialize: function (e) {
                            OpenLayers.Format.XML.prototype.initialize.apply(this, [e]), this.options = e, e = OpenLayers.Util.extend({}, OpenLayers.Format.WMTSCapabilities.prototype.yx), this.yx = OpenLayers.Util.extend(e, this.yx)
                        },
                        read: function (e) {
                            "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [e])), e && 9 == e.nodeType && (e = e.documentElement);
                            var t = {};
                            return this.readNode(e, t), t.version = this.version, t
                        },
                        readers: {
                            wmts: {
                                Capabilities: function (e, t) {
                                    this.readChildNodes(e, t)
                                },
                                Contents: function (e, t) {
                                    t.contents = {}, t.contents.layers = [], t.contents.tileMatrixSets = {}, this.readChildNodes(e, t.contents)
                                },
                                Layer: function (e, t) {
                                    var i = {
                                        styles: [],
                                        formats: [],
                                        dimensions: [],
                                        tileMatrixSetLinks: [],
                                        layers: []
                                    };
                                    this.readChildNodes(e, i), t.layers.push(i)
                                },
                                Style: function (e, t) {
                                    var i = {};
                                    i.isDefault = "true" === e.getAttribute("isDefault"), this.readChildNodes(e, i), t.styles.push(i)
                                },
                                Format: function (e, t) {
                                    t.formats.push(this.getChildValue(e))
                                },
                                TileMatrixSetLink: function (e, t) {
                                    var i = {};
                                    this.readChildNodes(e, i), t.tileMatrixSetLinks.push(i)
                                },
                                TileMatrixSet: function (e, t) {
                                    if (t.layers) {
                                        var i = {
                                            matrixIds: []
                                        };
                                        this.readChildNodes(e, i), t.tileMatrixSets[i.identifier] = i
                                    } else t.tileMatrixSet = this.getChildValue(e)
                                },
                                TileMatrix: function (e, t) {
                                    var i = {
                                        supportedCRS: t.supportedCRS
                                    };
                                    this.readChildNodes(e, i), t.matrixIds.push(i)
                                },
                                ScaleDenominator: function (e, t) {
                                    t.scaleDenominator = parseFloat(this.getChildValue(e))
                                },
                                TopLeftCorner: function (e, t) {
                                    var i, s = this.getChildValue(e).split(" ");
                                    t.supportedCRS && (i = t.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/, "urn:ogc:def:crs:$1::$2"), i = !!this.yx[i]), t.topLeftCorner = i ? new OpenLayers.LonLat(s[1], s[0]) : new OpenLayers.LonLat(s[0], s[1])
                                },
                                TileWidth: function (e, t) {
                                    t.tileWidth = parseInt(this.getChildValue(e))
                                },
                                TileHeight: function (e, t) {
                                    t.tileHeight = parseInt(this.getChildValue(e))
                                },
                                MatrixWidth: function (e, t) {
                                    t.matrixWidth = parseInt(this.getChildValue(e))
                                },
                                MatrixHeight: function (e, t) {
                                    t.matrixHeight = parseInt(this.getChildValue(e))
                                },
                                ResourceURL: function (e, t) {
                                    t.resourceUrl = t.resourceUrl || {};
                                    var i = e.getAttribute("resourceType");
                                    t.resourceUrls || (t.resourceUrls = []), i = t.resourceUrl[i] = {
                                        format: e.getAttribute("format"),
                                        template: e.getAttribute("template"),
                                        resourceType: i
                                    }, t.resourceUrls.push(i)
                                },
                                WSDL: function (e, t) {
                                    t.wsdl = {}, t.wsdl.href = e.getAttribute("xlink:href")
                                },
                                ServiceMetadataURL: function (e, t) {
                                    t.serviceMetadataUrl = {}, t.serviceMetadataUrl.href = e.getAttribute("xlink:href")
                                },
                                LegendURL: function (e, t) {
                                    t.legend = {}, t.legend.href = e.getAttribute("xlink:href"), t.legend.format = e.getAttribute("format")
                                },
                                Dimension: function (e, t) {
                                    var i = {
                                        values: []
                                    };
                                    this.readChildNodes(e, i), t.dimensions.push(i)
                                },
                                Default: function (e, t) {
                                    t.default = this.getChildValue(e)
                                },
                                Value: function (e, t) {
                                    t.values.push(this.getChildValue(e))
                                }
                            },
                            ows: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
                        },
                        CLASS_NAME: "OpenLayers.Format.WMTSCapabilities.v1_0_0"
                    }), window.OpenLayers = OpenLayers
            }()
        },
        tSeh: function (e, t) {
            OpenLayers.GMap = OpenLayers.Class(OpenLayers.Map, {
                isValidZoomLevel: function (e) {
                    var t = OpenLayers.Map.prototype.isValidZoomLevel.apply(this, arguments);
                    if (t && this.baseLayer) {
                        var i = this.baseLayer.minZoom ? this.baseLayer.minZoom : 0;
                        t = t && e >= i
                    }
                    return t
                },
                setCenter: function (e, t, i, s) {
                    var r = 0;
                    if (this.baseLayer && (r = this.baseLayer.minZoom ? this.baseLayer.minZoom : 0), null != t) t = t > r ? t : r;
                    OpenLayers.Map.prototype.setCenter.apply(this, [e, t, i, s])
                },
                CLASS_NAME: "OpenLayers.Map"
            })
        },
        "ti+C": function (e, t) {
            OpenLayers.Layer.MyIndia2 = OpenLayers.Class.create(), OpenLayers.Layer.MyIndia2.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                MAX_ZOOM_LEVEL: 18,
                MIN_ZOOM_LEVEL: 4,
                minZoom: 4,
                url: "",
                transitionEffect: null,
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments)
                },
                getURL: function (e) {
                    var t = this.getServerResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom();
                    if (this.wrapDateLine) {
                        var n = Math.pow(2, r);
                        i = (i % n + n) % n
                    }
                    if (s < 0 || s >= n || r > this.MAX_ZOOM_LEVEL || r < this.minZoom) return OpenLayers.Util.getImagesLocation() + "404.png";
                    var a = Math.floor(6 * Math.random());
                    return OpenLayers.String.format(this.url, {
                        d: a,
                        x: i,
                        y: s,
                        z: r,
                        k: this.key
                    })
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.MyIndia2(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.url, e
                },
                setMap: function (e) {
                    OpenLayers.Layer.TMS.prototype.setMap.apply(this, arguments);
                    var t = e.getControlsByClass("OpenLayers.Control.PanZoomBar");
                    t && t.length && (this.numZoomLevels = this.MAX_ZOOM_LEVEL, t[0].redraw())
                },
                CLASS_NAME: "OpenLayers.Layer.MyIndia2"
            })
        },
        uPxA: function (e, t) {
            document.namespaces, OpenLayers.Renderer.VML = OpenLayers.Class(OpenLayers.Renderer.Elements, {
                xmlns: "urn:schemas-microsoft-com:vml",
                initialize: function (e) {
                    if (this.supported()) {
                        if (!document.namespaces.olv) {
                            document.namespaces.add("olv", this.xmlns);
                            for (var t = document.createStyleSheet(), i = ["shape", "rect", "oval", "fill", "stroke", "imagedata", "group", "textbox"], s = 0, r = i.length; s < r; s++) t.addRule("olv\\:" + i[s], "behavior: url(#default#VML); position: absolute; display: inline-block;")
                        }
                        OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments)
                    }
                },
                destroy: function () {
                    OpenLayers.Renderer.Elements.prototype.destroy.apply(this, arguments)
                },
                supported: function () {
                    return !!document.namespaces
                },
                setExtent: function (e) {
                    OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments);
                    var t = this.getResolution(),
                        i = e.left / t + " " + e.top / t;
                    this.root.coordorigin = i;
                    var s = e.getWidth() / t + " " + -e.getHeight() / t;
                    this.root.coordsize = s
                },
                setSize: function (e) {
                    OpenLayers.Renderer.prototype.setSize.apply(this, arguments), this.rendererRoot.style.width = this.size.w, this.rendererRoot.style.height = this.size.h, this.root.style.width = this.size.w, this.root.style.height = this.size.h
                },
                getNodeType: function (e, t) {
                    var i = null;
                    switch (e.CLASS_NAME) {
                        case "OpenLayers.Geometry.Point":
                            i = t.externalGraphic ? "olv:rect" : "olv:oval";
                            break;
                        case "OpenLayers.Geometry.Rectangle":
                            i = "olv:rect";
                            break;
                        case "OpenLayers.Geometry.LineString":
                        case "OpenLayers.Geometry.LinearRing":
                        case "OpenLayers.Geometry.Polygon":
                        case "OpenLayers.Geometry.Curve":
                        case "OpenLayers.Geometry.Surface":
                            i = "olv:shape";
                            break;
                        case "OpenLayers.Geometry.Text":
                            i = "olv:oval"
                    }
                    return i
                },
                setStyle: function (e, t, i, s) {
                    if (t = t || e._style, i = i || e._options, "OpenLayers.Geometry.Point" == e._geometryClass)
                        if (t.externalGraphic) {
                            var r = t.graphicWidth || t.graphicHeight,
                                n = t.graphicHeight || t.graphicWidth;
                            r = r || 2 * t.pointRadius, n = n || 2 * t.pointRadius;
                            var a = this.getResolution(),
                                o = null != t.graphicXOffset ? t.graphicXOffset : -.5 * r,
                                l = null != t.graphicYOffset ? t.graphicYOffset : -.5 * n;
                            e.style.left = (s.x / a + o).toFixed(), e.style.top = (s.y / a - (l + n)).toFixed(), e.style.width = r, e.style.height = n, t.fillColor = "none", i.isStroked = !1
                        } else this.drawCircle(e, s, t.pointRadius);
                    if ("OpenLayers.Geometry.Text" != e._geometryClass) {
                        i.isFilled ? e.setAttribute("fillcolor", t.fillColor) : e.setAttribute("filled", "false");
                        var h = e.getElementsByTagName("fill"),
                            p = 0 == h.length ? null : h[0];
                        i.isFilled ? (p || (p = this.createNode("olv:fill", e.id + "_fill")), p.setAttribute("opacity", t.fillOpacity), "OpenLayers.Geometry.Point" == e._geometryClass && t.externalGraphic && (t.graphicOpacity && p.setAttribute("opacity", t.graphicOpacity), p.setAttribute("src", t.externalGraphic), p.setAttribute("type", "frame"), e.style.flip = "y", t.graphicWidth && t.graphicHeight || (p.aspect = "atmost")), p.parentNode != e && e.appendChild(p)) : p && e.removeChild(p);
                        var u = e.getElementsByTagName("stroke"),
                            c = 0 == u.length ? null : u[0];
                        i.isStroked ? (c || (c = this.createNode("olv:stroke", e.id + "_stroke"), e.appendChild(c)), c.on = !0, c.color = t.strokeColor, c.weight = parseInt(t.strokeWidth) + "px", c.opacity = t.strokeOpacity, c.endcap = "butt" == t.strokeLinecap ? "flat" : t.strokeLinecap || "round", t.strokeDashstyle && this.dashStyle && (c.dashstyle = this.dashStyle(t))) : (e.stroked = !1, c && (c.on = !1)), null != t.cursor && (e.style.cursor = t.cursor)
                    }
                    return e
                },
                postDraw: function (e) {
                    var t = e._style.fillColor,
                        i = e._style.strokeColor;
                    "none" == t && e.getAttribute("fillcolor") != t && e.setAttribute("fillcolor", t), "none" == i && e.getAttribute("strokecolor") != i && e.setAttribute("strokecolor", i)
                },
                setNodeDimension: function (e, t) {
                    var i = t.getBounds();
                    if (i) {
                        var s = this.getResolution(),
                            r = new OpenLayers.Bounds((i.left / s).toFixed(), (i.bottom / s).toFixed(), (i.right / s).toFixed(), (i.top / s).toFixed());
                        e.style.left = r.left, e.style.top = r.top, e.style.width = r.getWidth(), e.style.height = r.getHeight(), e.coordorigin = r.left + " " + r.top, e.coordsize = r.getWidth() + " " + r.getHeight()
                    }
                },
                createNode: function (e, t) {
                    var i = document.createElement(e);
                    return t && i.setAttribute("id", t), i.setAttribute("unselectable", "on", 0), i.onselectstart = function () {
                        return !1
                    }, i
                },
                nodeTypeCompare: function (e, t) {
                    var i = t,
                        s = i.indexOf(":"); - 1 != s && (i = i.substr(s + 1));
                    var r = e.nodeName;
                    return -1 != (s = r.indexOf(":")) && (r = r.substr(s + 1)), i == r
                },
                createRenderRoot: function () {
                    return this.nodeFactory(this.container.id + "_vmlRoot", "div")
                },
                createRoot: function () {
                    return this.nodeFactory(this.container.id + "_root", "olv:group")
                },
                drawPoint: function (e, t) {
                    this.drawCircle(e, t, 1)
                },
                drawCircle: function (e, t, i) {
                    if (!isNaN(t.x) && !isNaN(t.y)) {
                        var s = this.getResolution();
                        e.style.left = (t.x / s).toFixed() - i, e.style.top = (t.y / s).toFixed() - i;
                        var r = 2 * i;
                        e.style.width = r, e.style.height = r
                    }
                },
                drawText: function (e, t, i) {
                    if (!isNaN(t.x) && !isNaN(t.y)) {
                        var s = i.max_syms ? i.max_syms : 10,
                            r = this.getResolution(),
                            n = t.x / r - i.fontSize / 2,
                            a = t.y / r + i.fontSize / 2;
                        if (t.shift && (n += t.shift.x, a += t.shift.y), i.autoWrap) {
                            a += 8, a -= i.y_offset;
                            for (var o = t.text.split(" "), l = [], h = -1, p = -1, u = 0, c = 0, y = 0; y < o.length; y++)
                                if (-1 == h && (h = y), (u += o[y].length) >= s || y == o.length - 1) {
                                    p = y;
                                    for (var d = "", m = h; m <= p; m++) m == h ? d = o[m] : d += " " + o[m];
                                    u > c && (c = u), l.push(d), u = 0, h = -1, p = -1
                                } else u += 1;
                            var f = "<table>";
                            for (y = 0; y < l.length; y++) f += "<tr><td align='center' nowrap='nowrap'><font style='color:" + i.fillColor + "; font-weight:bold; font-size:" + i.fontSize + "px;'>" + l[y] + "</font></td></tr>";
                            f += "</table>", e.style.left = n - c / 2 * i.fontSize / 1.85, e.style.top = a, e.style.align = "center", t.text_node || (t.text_node = this.createNode("olv:textbox", e.id + "_text"), t.text_node.style.align = "center", e.appendChild(t.text_node)), t.text_node.innerHTML = f, t.fill || (t.fill = this.createNode("olv:fill", e.id + "_fill"), t.fill.setAttribute("opacity", 0), e.appendChild(t.fill)), t.stroke || (t.stroke = this.createNode("olv:stroke", e.id + "_stroke"), t.stroke.setAttribute("opacity", 0), e.appendChild(t.stroke))
                        } else {
                            r = this.getResolution();
                            e.style.left = n, e.style.top = a, t.text_node || (t.text_node = this.createNode("olv:textbox", e.id + "_text"), e.appendChild(t.text_node)), t.text_node.innerHTML = "<table><tr><td nowrap='nowrap'><font style='color:" + i.fillColor + "; font-weight:bold; font-size:" + i.fontSize + "px;'>" + t.text + "</font></td></tr></table>", t.fill || (t.fill = this.createNode("olv:fill", e.id + "_fill"), t.fill.setAttribute("opacity", 0), e.appendChild(t.fill)), t.stroke || (t.stroke = this.createNode("olv:stroke", e.id + "_stroke"), t.stroke.setAttribute("opacity", 0), e.appendChild(t.stroke))
                        }
                    }
                },
                drawLineString: function (e, t) {
                    this.drawLine(e, t, !1)
                },
                drawLinearRing: function (e, t) {
                    this.drawLine(e, t, !0)
                },
                drawLine: function (e, t, i) {
                    this.setNodeDimension(e, t);
                    for (var s, r, n, a = this.getResolution(), o = t.components.length, l = new Array(o), h = 0; h < o; h++) r = (s = t.components[h]).x / a, n = s.y / a, l[h] = " " + r.toFixed() + "," + n.toFixed() + " l ";
                    var p = i ? " x e" : " e";
                    e.path = "m" + l.join("") + p
                },
                drawPolygon: function (e, t) {
                    this.setNodeDimension(e, t);
                    for (var i, s, r, n, a, o = this.getResolution(), l = [], h = 0; h < t.components.length; h++) {
                        for (i = t.components[h], l.push("m"), s = 0; s < i.components.length; s++) n = (r = i.components[s]).x / o, a = r.y / o, l.push(" " + n.toFixed() + "," + a.toFixed()), 0 == s && l.push(" l");
                        l.push(" x ")
                    }
                    l.push("e"), e.path = l.join("")
                },
                drawRectangle: function (e, t) {
                    var i = this.getResolution();
                    e.style.left = t.x / i, e.style.top = t.y / i, t.shift && (e.style.left = parseInt(e.style.left) + t.shift.x, e.style.top = parseInt(e.style.top) + t.shift.y), t.keep_aspect ? (e.style.width = t.width, e.style.height = t.height) : (e.style.width = t.width / i, e.style.height = t.height / i)
                },
                drawSurface: function (e, t) {
                    this.setNodeDimension(e, t);
                    for (var i, s, r, n = this.getResolution(), a = [], o = 0; o < t.components.length; o++) s = (i = t.components[o]).x / n, r = i.y / n, o % 3 == 0 && o / 3 == 0 ? a.push("m") : o % 3 == 1 && a.push(" c"), a.push(" " + s + "," + r);
                    a.push(" x e"), e.path = a.join("")
                },
                CLASS_NAME: "OpenLayers.Renderer.VML"
            })
        },
        yF9Z: function (e, t) {
            OpenLayers.Layer.Gis2 = OpenLayers.Class.create(), OpenLayers.Layer.Gis2.prototype = OpenLayers.Class.inherit(OpenLayers.Layer.TMS, {
                MAX_ZOOM_LEVEL: 19,
                resName: "tiles",
                initialize: function (e, t, i, s) {
                    this.isBaseLayer = !0, this.url = t, this.urls = [], OpenLayers.Layer.TMS.prototype.initialize.apply(this, arguments)
                },
                getURL: function (e) {
                    var t = this.map.getResolution(),
                        i = Math.round((e.left - this.maxExtent.left) / (t * this.tileSize.w)),
                        s = Math.round((this.maxExtent.top - e.top) / (t * this.tileSize.h)),
                        r = this.map.getZoom(),
                        n = Math.pow(2, r);
                    if (s < 0 || s >= n || r > this.MAX_ZOOM_LEVEL) return OpenLayers.Util.getImagesLocation() + "404.png";
                    i = (i % n + n) % n;
                    var a = this.url,
                        o = this.url.split("%d");
                    if (2 === o.length) {
                        var l = i % 4;
                        a = o[0] + l + o[1]
                    }
                    return a += this.resName + "?x=" + i + "&y=" + s + "&z=" + r + "&v=4"
                },
                clone: function (e) {
                    return null == e && (e = new OpenLayers.Layer.Gis2(this.name, this.url, this.params, this.options)), (e = OpenLayers.Layer.TMS.prototype.clone.apply(this, [e])).url = this.urls.length ? this.urls[0] : this.url, e.urls = this.urls, e
                },
                setMap: function (e) {
                    OpenLayers.Layer.TMS.prototype.setMap.apply(this, arguments);
                    var t = e.getControlsByClass("OpenLayers.Control.PanZoomBar");
                    t && t.length && (this.numZoomLevels = this.MAX_ZOOM_LEVEL, t[0].redraw())
                },
                CLASS_NAME: "OpenLayers.Layer.Gis2"
            })
        },
        ypiw: function (e, t) {
            OpenLayers.Handler.PolygonEx = OpenLayers.Class(OpenLayers.Handler.PathEx, {
                polygon: null,
                geo: null,
                initialize: function () {
                    OpenLayers.Handler.PathEx.prototype.initialize.apply(this, arguments)
                },
                setStyle: function (e, t) {
                    this.style = e, this.lastStyle = t, this.fullRepaint = !0, this.drawFeature()
                },
                createFeature: function (e) {
                    this.polygon = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing), this.polygon.geometry.addComponent(this.line.geometry), this.point = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point), this.cursorPoint = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point), this.vertices = new Array, this.point.geometry.clearBounds()
                },
                destroyFeature: function (e) {
                    OpenLayers.Handler.PathEx.prototype.destroyFeature.call(this, e), this.polygon = null
                },
                drawFeature: function () {
                    if (this.layer) {
                        this.lastStyle || (this.lastStyle = this.style);
                        var e = null;
                        if (this.geo ? ((e = OpenLayers.Util.extend({}, this.lastStyle)).fillColor = e.strokeColor, e.strokeWidth = "2px") : e = OpenLayers.Util.extend({}, this.style), this.polygon && this.style && this.layer.drawFeature(this.polygon, e), this.vertices)
                            for (var t = this.vertices.length, i = 0; i < t; i++) {
                                if (e = this.geo ? OpenLayers.Util.extend({}, this.lastStyle) : i == t - 1 ? this.lastStyle : this.style, this.geo) {
                                    e.strokeWidth = "2px";
                                    var s = e.strokeColor;
                                    e.strokeColor = e.fillColor, e.fillOpacity = e.strokeOpacity, e.strokeOpacity = 1, e.fillColor = s
                                }
                                this.layer.drawFeature(this.vertices[i], e)
                            }
                    }
                },
                setPoints: function (e) {
                    if (e && e.length) {
                        e = this.map.fixPoints(e, {
                            lonName: "x"
                        }), this.destroyFeature();
                        var t = this.map.getPixelFromLonLat({
                            lon: e[0].x,
                            lat: e[0].y
                        });
                        this.createFeature(t);
                        for (var i = null, s = e.length, r = 0; r < s; r++) this.line.geometry.addComponent(e[r], this.line.geometry.components.length), i = new OpenLayers.Feature.Vector(e[r].clone()), this.vertices.push(i);
                        this.drawFeature()
                    }
                },
                getPoints: function () {
                    if (this.line) {
                        for (var e = new Array, t = 0; t < this.line.geometry.components.length - 1; t++) e.push(this.line.geometry.components[t].clone());
                        return e
                    }
                    return null
                },
                removePoint: function () {
                    -1 == this.vertexIndex || !this.line || !this.vertices || this.line.geometry.components.length <= 3 || this.vertices.length <= 3 || this.line.geometry.components.length < this.vertices.length || (this.line.geometry.removeComponent(this.line.geometry.components[this.vertexIndex]), this.layer.removeFeatures([this.vertices[this.vertexIndex]]), this.vertices.splice(this.vertexIndex, 1), this.event_disp && "function" == typeof this.event_disp.on_point_remove && this.event_disp.on_point_remove(this.vertexIndex), this.vertexIndex = -1)
                },
                geometryClone: function () {
                    return !!this.polygon && this.polygon.geometry.clone()
                },
                CLASS_NAME: "OpenLayers.Handler.PolygonEx"
            })
        }
    }
]);